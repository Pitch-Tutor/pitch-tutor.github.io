/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={299:function(module,__unused_webpack_exports,__webpack_require__){var factory;factory=function(){return(()=>{"use strict";var __webpack_modules__=[(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLinkAttributes",{enumerable:!0,get:function(){return r.addLinkAttributes}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"LinkTarget",{enumerable:!0,get:function(){return r.LinkTarget}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return a.build}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return a.getDocument}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return a.LoopbackPort}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return a.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return a.PDFWorker}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a.version}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(t,"createObjectURL",{enumerable:!0,get:function(){return i.createObjectURL}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return i.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(t,"removeNullCharacters",{enumerable:!0,get:function(){return i.removeNullCharacters}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return i.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return o.AnnotationLayer}}),Object.defineProperty(t,"apiCompatibilityParams",{enumerable:!0,get:function(){return s.apiCompatibilityParams}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return c.GlobalWorkerOptions}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return l.renderTextLayer}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}});var r=n(1),a=n(5),i=n(2),o=n(19),s=n(9),c=n(12),l=n(21),u=n(22);{const{isNodeJS:e}=n(4);if(e){const e=n(23).PDFNodeStream;(0,a.setPDFNetworkStreamFactory)((t=>new e(t)))}else{const e=n(26).PDFNetworkStream;let t;(0,r.isFetchSupported)()&&(t=n(27).PDFFetchStream),(0,a.setPDFNetworkStreamFactory)((n=>t&&(0,r.isValidFetchUrl)(n.url)?new t(n):new e(n)))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addLinkAttributes=function(e,{url:t,target:n,rel:i,enabled:o=!0}={}){(0,r.assert)(t&&"string"==typeof t,'addLinkAttributes: A valid "url" parameter must provided.');const s=(0,r.removeNullCharacters)(t);o?e.href=e.title=s:(e.href="",e.title=`Disabled: ${s}`,e.onclick=()=>!1);let c="";switch(n){case u.NONE:break;case u.SELF:c="_self";break;case u.BLANK:c="_blank";break;case u.PARENT:c="_parent";break;case u.TOP:c="_top"}e.target=c,e.rel="string"==typeof i?i:a},t.deprecated=function(e){console.log("Deprecated API usage: "+e)},t.getFilenameFromUrl=function(e){const t=e.indexOf("#"),n=e.indexOf("?"),r=Math.min(t>0?t:e.length,n>0?n:e.length);return e.substring(e.lastIndexOf("/",r)+1,r)},t.isFetchSupported=h,t.isValidFetchUrl=d,t.loadScript=function(e,t=!1){return new Promise(((n,r)=>{const a=document.createElement("script");a.src=e,a.onload=function(e){t&&a.remove(),n(e)},a.onerror=function(){r(new Error(`Cannot load script at: ${a.src}`))},(document.head||document.documentElement).appendChild(a)}))},t.StatTimer=t.RenderingCancelledException=t.PDFDateString=t.PageViewport=t.LinkTarget=t.DOMSVGFactory=t.DOMCMapReaderFactory=t.DOMCanvasFactory=t.DEFAULT_LINK_REL=t.BaseCMapReaderFactory=t.BaseCanvasFactory=void 0;var r=n(2);const a="noopener noreferrer nofollow";t.DEFAULT_LINK_REL=a;const i="http://www.w3.org/2000/svg";class o{constructor(){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,t){(0,r.unreachable)("Abstract method `create` called.")}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}}t.BaseCanvasFactory=o,t.DOMCanvasFactory=class extends o{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._document.createElement("canvas"),r=n.getContext("2d");return n.width=e,n.height=t,{canvas:n,context:r}}};class s{constructor({baseUrl:e=null,isCompressed:t=!1}){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),n=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(t,n).catch((e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)}))}_fetchData(e,t){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=s,t.DOMCMapReaderFactory=class extends s{_fetchData(e,t){return h()&&d(e,document.baseURI)?fetch(e).then((async e=>{if(!e.ok)throw new Error(e.statusText);let n;return n=this.isCompressed?new Uint8Array(await e.arrayBuffer()):(0,r.stringToBytes)(await e.text()),{cMapData:n,compressionType:t}})):new Promise(((n,a)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),this.isCompressed&&(i.responseType="arraybuffer"),i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(200===i.status||0===i.status){let e;if(this.isCompressed&&i.response?e=new Uint8Array(i.response):!this.isCompressed&&i.responseText&&(e=(0,r.stringToBytes)(i.responseText)),e)return void n({cMapData:e,compressionType:t})}a(new Error(i.statusText))}},i.send(null)}))}},t.DOMSVGFactory=class{create(e,t){(0,r.assert)(e>0&&t>0,"Invalid SVG dimensions");const n=document.createElementNS(i,"svg:svg");return n.setAttribute("version","1.1"),n.setAttribute("width",e+"px"),n.setAttribute("height",t+"px"),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox","0 0 "+e+" "+t),n}createElement(e){return(0,r.assert)("string"==typeof e,"Invalid SVG element type"),document.createElementNS(i,e)}};class c{constructor({viewBox:e,scale:t,rotation:n,offsetX:r=0,offsetY:a=0,dontFlip:i=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=r,this.offsetY=a;const o=(e[2]+e[0])/2,s=(e[3]+e[1])/2;let c,l,u,h,d,f,p,g;switch(n=(n%=360)<0?n+360:n){case 180:c=-1,l=0,u=0,h=1;break;case 90:c=0,l=1,u=1,h=0;break;case 270:c=0,l=-1,u=-1,h=0;break;case 0:c=1,l=0,u=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}i&&(u=-u,h=-h),0===c?(d=Math.abs(s-e[1])*t+r,f=Math.abs(o-e[0])*t+a,p=Math.abs(e[3]-e[1])*t,g=Math.abs(e[2]-e[0])*t):(d=Math.abs(o-e[0])*t+r,f=Math.abs(s-e[1])*t+a,p=Math.abs(e[2]-e[0])*t,g=Math.abs(e[3]-e[1])*t),this.transform=[c*t,l*t,u*t,h*t,d-c*t*o-u*t*s,f-l*t*o-h*t*s],this.width=p,this.height=g}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new c({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:a})}convertToViewportPoint(e,t){return r.Util.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=r.Util.applyTransform([e[0],e[1]],this.transform),n=r.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return r.Util.applyInverseTransform([e,t],this.transform)}}t.PageViewport=c;class l extends r.BaseException{constructor(e,t){super(e),this.type=t}}t.RenderingCancelledException=l;const u={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function h(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function d(e,t){try{const{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch(e){return!1}}let f;t.LinkTarget=u,t.StatTimer=class{constructor(){this.started=Object.create(null),this.times=[]}time(e){e in this.started&&(0,r.warn)(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||(0,r.warn)(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const e of this.times){const n=e.name;n.length>t&&(t=n.length)}for(const n of this.times){const r=n.end-n.start;e.push(`${n.name.padEnd(t)} ${r}ms\n`)}return e.join("")}},t.PDFDateString=class{static toDateObject(e){if(!e||!(0,r.isString)(e))return null;f||(f=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=f.exec(e);if(!t)return null;const n=parseInt(t[1],10);let a=parseInt(t[2],10);a=a>=1&&a<=12?a-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const l=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,"-"===l?(o+=u,s+=h):"+"===l&&(o-=u,s-=h),new Date(Date.UTC(n,a,i,o,s,c))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.arrayByteLength=d,t.arraysToBytes=function(e){const t=e.length;if(1===t&&e[0]instanceof Uint8Array)return e[0];let n=0;for(let r=0;r<t;r++)n+=d(e[r]);let r=0;const a=new Uint8Array(n);for(let n=0;n<t;n++){let t=e[n];t instanceof Uint8Array||(t="string"==typeof t?h(t):new Uint8Array(t));const i=t.byteLength;a.set(t,r),r+=i}return a},t.assert=s,t.bytesToString=function(e){s(null!==e&&"object"==typeof e&&void 0!==e.length,"Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const r=[];for(let a=0;a<t;a+=n){const i=Math.min(a+n,t),o=e.subarray(a,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")},t.createPromiseCapability=function(){const e=Object.create(null);let t=!1;return Object.defineProperty(e,"settled",{get:()=>t}),e.promise=new Promise((function(n,r){e.resolve=function(e){t=!0,n(e)},e.reject=function(e){t=!0,r(e)}})),e},t.createValidAbsoluteUrl=function(e,t){if(!e)return null;try{const n=t?new URL(e,t):new URL(e);if(function(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(e){}return null},t.encodeToXmlString=function(e){const t=[];let n=0;for(let r=0,a=e.length;r<a;r++){const a=e.codePointAt(r);if(32<=a&&a<=126){const i=y[a];i&&(n<r&&t.push(e.substring(n,r)),t.push(i),n=r+1)}else n<r&&t.push(e.substring(n,r)),t.push(`&#x${a.toString(16).toUpperCase()};`),a>55295&&(a<57344||a>65533)&&r++,n=r+1}return 0===t.length?e:(n<e.length&&t.push(e.substring(n,e.length)),t.join(""))},t.escapeString=function(e){return e.replace(/([()\\\n\r])/g,(e=>"\n"===e?"\\n":"\r"===e?"\\r":`\\${e}`))},t.getModificationDate=function(e=new Date){return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")},t.getVerbosityLevel=function(){return a},t.info=function(e){a>=r.INFOS&&console.log(`Info: ${e}`)},t.isArrayBuffer=function(e){return"object"==typeof e&&null!==e&&void 0!==e.byteLength},t.isArrayEqual=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},t.isAscii=function(e){return/^[\x00-\x7F]*$/.test(e)},t.isBool=function(e){return"boolean"==typeof e},t.isNum=function(e){return"number"==typeof e},t.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch(e){return!1}const r=new URL(t,n);return n.origin===r.origin},t.isString=function(e){return"string"==typeof e},t.objectFromEntries=function(e){return Object.assign(Object.create(null),Object.fromEntries(e))},t.objectSize=function(e){return Object.keys(e).length},t.removeNullCharacters=function(e){return"string"!=typeof e?(i("The argument for removeNullCharacters must be a string."),e):e.replace(u,"")},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(a=e)},t.shadow=c,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=h,t.stringToPDFString=function(e){const t=e.length,n=[];if("þ"===e[0]&&"ÿ"===e[1])for(let r=2;r<t;r+=2)n.push(String.fromCharCode(e.charCodeAt(r)<<8|e.charCodeAt(r+1)));else if("ÿ"===e[0]&&"þ"===e[1])for(let r=2;r<t;r+=2)n.push(String.fromCharCode(e.charCodeAt(r+1)<<8|e.charCodeAt(r)));else for(let r=0;r<t;++r){const t=v[e.charCodeAt(r)];n.push(t?String.fromCharCode(t):e.charAt(r))}return n.join("")},t.stringToUTF16BEString=function(e){const t=["þÿ"];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);t.push(String.fromCharCode(r>>8&255)),t.push(String.fromCharCode(255&r))}return t.join("")},t.stringToUTF8String=function(e){return decodeURIComponent(escape(e))},t.unreachable=o,t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=i,t.VerbosityLevel=t.Util=t.UNSUPPORTED_FEATURES=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.StreamType=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.IsLittleEndianCached=t.IsEvalSupportedCached=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.createObjectURL=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,n(3),t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.PageActionEventType={O:"PageOpen",C:"PageClose"},t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const r={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=r,t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let a=r.WARNINGS;function i(e){a>=r.WARNINGS&&console.log(`Warning: ${e}`)}function o(e){throw new Error(e)}function s(e,t){e||o(t)}function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}const l=function(){function e(t){this.constructor===e&&o("Cannot initialize BaseException."),this.message=t,this.name=this.constructor.name}return e.prototype=new Error,e.constructor=e,e}();t.BaseException=l,t.PasswordException=class extends l{constructor(e,t){super(e),this.code=t}},t.UnknownErrorException=class extends l{constructor(e,t){super(e),this.details=t}},t.InvalidPDFException=class extends l{},t.MissingPDFException=class extends l{},t.UnexpectedResponseException=class extends l{constructor(e,t){super(e),this.status=t}},t.FormatError=class extends l{},t.AbortException=class extends l{};const u=/\x00/g;function h(e){s("string"==typeof e,"Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}function d(e){return void 0!==e.length?e.length:(s(void 0!==e.byteLength,"arrayByteLength - invalid argument."),e.byteLength)}const f={get value(){return c(this,"value",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}};t.IsLittleEndianCached=f;const p={get value(){return c(this,"value",function(){try{return new Function(""),!0}catch(e){return!1}}())}};t.IsEvalSupportedCached=p;const g=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));class m{static makeHexColor(e,t,n){return`#${g[e]}${g[t]}${g[n]}`}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=m.applyTransform(e,t),r=m.applyTransform(e.slice(2,4),t),a=m.applyTransform([e[0],e[3]],t),i=m.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],a[0],i[0]),Math.min(n[1],r[1],a[1],i[1]),Math.max(n[0],r[0],a[0],i[0]),Math.max(n[1],r[1],a[1],i[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static apply3dTransform(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],i=e[2]*t[1]+e[3]*t[3],o=(n+i)/2,s=Math.sqrt((n+i)*(n+i)-4*(n*i-a*r))/2,c=o+s||1,l=o-s||1;return[Math.sqrt(c),Math.sqrt(l)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){function n(e,t){return e-t}const r=[e[0],e[2],t[0],t[2]].sort(n),a=[e[1],e[3],t[1],t[3]].sort(n),i=[];return e=m.normalizeRect(e),t=m.normalizeRect(t),r[0]===e[0]&&r[1]===t[0]||r[0]===t[0]&&r[1]===e[0]?(i[0]=r[1],i[2]=r[2],a[0]===e[1]&&a[1]===t[1]||a[0]===t[1]&&a[1]===e[1]?(i[1]=a[1],i[3]=a[2],i):null):null}}t.Util=m;const v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],b=function(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(t,n,r=!1){if(!r&&URL.createObjectURL){const e=new Blob([t],{type:n});return URL.createObjectURL(e)}let a=`data:${n};base64,`;for(let n=0,r=t.length;n<r;n+=3){const i=255&t[n],o=255&t[n+1],s=255&t[n+2];a+=e[i>>2]+e[(3&i)<<4|o>>4]+e[n+1<r?(15&o)<<2|s>>6:64]+e[n+2<r?63&s:64]}return a}}();t.createObjectURL=b;const y={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"}},(e,t,n)=>{n(4)},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const n=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultCMapReaderFactory=exports.DefaultCanvasFactory=exports.build=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_node_utils=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_api_compatibility=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_webgl=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(e){createPDFNetworkStream=e}function getDocument(e){const t=new PDFDocumentLoadingTask;let n;if("string"==typeof e)n={url:e};else if((0,_util.isArrayBuffer)(e))n={data:e};else if(e instanceof PDFDataRangeTransport)n={range:e};else{if("object"!=typeof e)throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");n=e}const r=Object.create(null);let a=null,i=null;for(const e in n)if("url"!==e||"undefined"==typeof window)if("range"!==e)if("worker"!==e)if("data"!==e||n[e]instanceof Uint8Array)r[e]=n[e];else{const t=n[e];if("string"==typeof t)r[e]=(0,_util.stringToBytes)(t);else if("object"!=typeof t||null===t||isNaN(t.length)){if(!(0,_util.isArrayBuffer)(t))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");r[e]=new Uint8Array(t)}else r[e]=new Uint8Array(t)}else i=n[e];else a=n[e];else r[e]=new URL(n[e],window.location).href;if(r.rangeChunkSize=r.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.ignoreErrors=!0!==r.stopAtErrors,r.fontExtraProperties=!0===r.fontExtraProperties,r.pdfBug=!0===r.pdfBug,Number.isInteger(r.maxImageSize)||(r.maxImageSize=-1),"boolean"!=typeof r.isEvalSupported&&(r.isEvalSupported=!0),"boolean"!=typeof r.disableFontFace&&(r.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),void 0===r.ownerDocument&&(r.ownerDocument=globalThis.document),"boolean"!=typeof r.disableRange&&(r.disableRange=!1),"boolean"!=typeof r.disableStream&&(r.disableStream=!1),"boolean"!=typeof r.disableAutoFetch&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!i){const e={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};i=e.port?PDFWorker.fromPort(e):new PDFWorker(e),t._worker=i}const o=t.docId;return i.promise.then((function(){if(t.destroyed)throw new Error("Loading aborted");const e=_fetchDocument(i,r,a,o),n=new Promise((function(e){let t;a?t=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,disableRange:r.disableRange,disableStream:r.disableStream},a):r.data||(t=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),e(t)}));return Promise.all([e,n]).then((function([e,n]){if(t.destroyed)throw new Error("Loading aborted");const a=new _message_handler.MessageHandler(o,e,i.port);a.postMessageTransfers=i.postMessageTransfers;const s=new WorkerTransport(a,t,n,r);t._transport=s,a.send("Ready",null)}))})).catch(t._capability.reject),t}function _fetchDocument(e,t,n,r){return e.destroyed?Promise.reject(new Error("Worker was destroyed")):(n&&(t.length=n.length,t.initialData=n.initialData,t.progressiveDone=n.progressiveDone),e.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.7.570",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,postMessageTransfers:e.postMessageTransfers,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties}).then((function(t){if(e.destroyed)throw new Error("Worker was destroyed");return t})))}exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const PDFDocumentLoadingTask=function(){let e=0;return class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then((()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}))}}}();class PDFDataRangeTransport{constructor(e,t,n=!1){this.length=e,this.initialData=t,this.progressiveDone=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then((()=>{for(const n of this._progressListeners)n(e,t)}))}onDataProgressiveRead(e){this._readyCapability.promise.then((()=>{for(const t of this._progressiveReadListeners)t(e)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const e of this._progressiveDoneListeners)e()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(){return this._transport.startCleanup()}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(e){return this._transport.saveDocument(e)}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,t,n,r,a=!1){this._pageIndex=e,this._pageInfo=t,this._ownerDocument=r,this._transport=n,this._stats=a?new _display_utils.StatTimer:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:a=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:a})}getAnnotations({intent:e=null}={}){return this.annotationsPromise&&this.annotationsIntent===e||(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,e),this.annotationsIntent=e),this.annotationsPromise}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}render({canvasContext:e,viewport:t,intent:n="display",enableWebGL:r=!1,renderInteractiveForms:a=!1,transform:i=null,imageLayer:o=null,canvasFactory:s=null,background:c=null,annotationStorage:l=null,optionalContentConfigPromise:u=null}){this._stats&&this._stats.time("Overall");const h="print"===n?"print":"display";this.pendingCleanup=!1,u||(u=this._transport.getOptionalContentConfig());let d=this._intentStates.get(h);d||(d=Object.create(null),this._intentStates.set(h,d)),d.streamReaderCancelTimeout&&(clearTimeout(d.streamReaderCancelTimeout),d.streamReaderCancelTimeout=null);const f=s||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),p=new _webgl.WebGLContext({enable:r});d.displayReadyCapability||(d.displayReadyCapability=(0,_util.createPromiseCapability)(),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:h,renderInteractiveForms:!0===a,annotationStorage:l?.getAll()||null}));const g=e=>{const t=d.renderTasks.indexOf(m);t>=0&&d.renderTasks.splice(t,1),(this.cleanupAfterRender||"print"===h)&&(this.pendingCleanup=!0),this._tryCleanup(),e?(m.capability.reject(e),this._abortOperatorList({intentState:d,reason:e})):m.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},m=new InternalRenderTask({callback:g,params:{canvasContext:e,viewport:t,transform:i,imageLayer:o,background:c},objs:this.objs,commonObjs:this.commonObjs,operatorList:d.operatorList,pageIndex:this._pageIndex,canvasFactory:f,webGLContext:p,useRequestAnimationFrame:"print"!==h,pdfBug:this._pdfBug});d.renderTasks||(d.renderTasks=[]),d.renderTasks.push(m);const v=m.task;return Promise.all([d.displayReadyCapability.promise,u]).then((([e,t])=>{this.pendingCleanup?g():(this._stats&&this._stats.time("Rendering"),m.initializeGraphics({transparency:e,optionalContentConfig:t}),m.operatorListChanged())})).catch(g),v}getOperatorList(){const e="oplist";let t,n=this._intentStates.get(e);return n||(n=Object.create(null),this._intentStates.set(e,n)),n.opListReadCapability||(t=Object.create(null),t.operatorListChanged=function(){if(n.operatorList.lastChunk){n.opListReadCapability.resolve(n.operatorList);const e=n.renderTasks.indexOf(t);e>=0&&n.renderTasks.splice(e,1)}},n.opListReadCapability=(0,_util.createPromiseCapability)(),n.renderTasks=[],n.renderTasks.push(t),n.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:e})),n.opListReadCapability.promise}streamTextContent({normalizeWhitespace:e=!1,disableCombineTextItems:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===e,combineTextItems:!0!==t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(e={}){const t=this.streamTextContent(e);return new Promise((function(e,n){const r=t.getReader(),a={items:[],styles:Object.create(null)};!function t(){r.read().then((function({value:n,done:r}){r?e(a):(Object.assign(a.styles,n.styles),a.items.push(...n.items),t())}),n)}()}))}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const e=[];for(const[t,n]of this._intentStates)if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==t)for(const t of n.renderTasks)e.push(t.completed),t.cancel();return this.objs.clear(),this.annotationsPromise=null,this._jsActionsPromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(0!==e.length||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.annotationsPromise=null,this._jsActionsPromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats&&this._stats.timeEnd("Page Request"),n.displayReadyCapability&&n.displayReadyCapability.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk;for(let e=0;e<t.renderTasks.length;e++)t.renderTasks[e].operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList(e){(0,_util.assert)(e.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const t=this._transport.messageHandler.sendWithStream("GetOperatorList",e).getReader(),n=this._intentStates.get(e.intent);n.streamReader=t;const r=()=>{t.read().then((({value:e,done:t})=>{t?n.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,n),r())}),(e=>{if(n.streamReader=null,!this._transport.destroyed){if(n.operatorList){n.operatorList.lastChunk=!0;for(let e=0;e<n.renderTasks.length;e++)n.renderTasks[e].operatorListChanged();this._tryCleanup()}if(n.displayReadyCapability)n.displayReadyCapability.reject(e);else{if(!n.opListReadCapability)throw e;n.opListReadCapability.reject(e)}}}))};r()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if((0,_util.assert)(t instanceof Error||"object"==typeof t&&null!==t,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),e.streamReader){if(!n){if(0!==e.renderTasks.length)return;if(t instanceof _display_utils.RenderingCancelledException)return void(e.streamReaderCancelTimeout=setTimeout((()=>{this._abortOperatorList({intentState:e,reason:t,force:!0}),e.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}if(e.streamReader.cancel(new _util.AbortException(t?.message)),e.streamReader=null,!this._transport.destroyed){for(const[t,n]of this._intentStates)if(n===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(e=!0){this._listeners=[],this._defer=e,this._deferred=Promise.resolve(void 0)}postMessage(e,t){if(!this._defer)return void this._listeners.forEach((t=>{t.call(this,{data:e})}));const n=new WeakMap,r={data:function e(r){if("object"!=typeof r||null===r)return r;if(n.has(r))return n.get(r);let a,i;if((a=r.buffer)&&(0,_util.isArrayBuffer)(a))return i=t?.includes(a)?new r.constructor(a,r.byteOffset,r.byteLength):new r.constructor(r),n.set(r,i),i;i=Array.isArray(r)?[]:{},n.set(r,i);for(const t in r){let n,a=r;for(;!(n=Object.getOwnPropertyDescriptor(a,t));)a=Object.getPrototypeOf(a);if(void 0!==n.value)if("function"!=typeof n.value)i[t]=e(n.value);else if(r.hasOwnProperty&&r.hasOwnProperty(t))throw new Error(`LoopbackPort.postMessage - cannot clone: ${r[t]}`)}return i}(e)};this._deferred.then((()=>{this._listeners.forEach((e=>{e.call(this,r)}))}))}addEventListener(e,t){this._listeners.push(t)}removeEventListener(e,t){const n=this._listeners.indexOf(t);this._listeners.splice(n,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function PDFWorkerClosure(){const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document&&"currentScript"in document){const e=document.currentScript?.src;e&&(fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(void 0!==fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){let e;try{e=globalThis.pdfjsWorker?.WorkerMessageHandler}catch(e){}return e||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=async function(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler};return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(e){const t="importScripts('"+e+"');";return URL.createObjectURL(new Blob([t]))}class PDFWorker{constructor({name:e=null,port:t=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(t&&pdfWorkerPorts.has(t))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=e,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=n,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t)return pdfWorkerPorts.set(t,this),void this._initializeFromPort(t);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let e=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,e)||(e=createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e),n=new _message_handler.MessageHandler("main","worker",t),r=()=>{t.removeEventListener("error",a),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||r()};t.addEventListener("error",a),n.on("test",(e=>{t.removeEventListener("error",a),this.destroyed?r():e?(this._messageHandler=n,this._port=t,this._webWorker=t,e.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())})),n.on("ready",(e=>{if(t.removeEventListener("error",a),this.destroyed)r();else try{i()}catch(e){this._setupFakeWorker()}}));const i=()=>{const e=new Uint8Array([this.postMessageTransfers?255:0]);try{n.send("test",e,[e.buffer])}catch(t){(0,_util.warn)("Cannot use postMessage transfers."),e[0]=0,n.send("test",e)}};return void i()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then((e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new LoopbackPort;this._port=t;const n="fake"+nextFakeWorkerId++,r=new _message_handler.MessageHandler(n+"_worker",n,t);e.setup(r,t);const a=new _message_handler.MessageHandler(n,n+"_worker",t);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})})).catch((e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(e.port)?pdfWorkerPorts.get(e.port):new PDFWorker(e)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(e,t,n,r){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:r.ownerDocument}),this._params=r,this.CMapReaderFactory=new r.CMapReaderFactory({baseUrl:r.cMapUrl,isCompressed:r.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get loadingTaskSettled(){return this.loadingTask._capability.settled}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];this.pageCache.forEach((function(t){t&&e.push(t._destroy())})),this.pageCache.length=0,this.pagePromises.length=0;const t=this.messageHandler.sendWithPromise("Terminate",null);if(e.push(t),this.loadingTaskSettled){const t=this.loadingTask.promise.then((e=>{e.hasOwnProperty("annotationStorage")&&e.annotationStorage.resetModified()})).catch((()=>{}));e.push(t)}return Promise.all(e).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function({value:e,done:n}){n?t.close():((0,_util.assert)((0,_util.isArrayBuffer)(e),"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(e=>{const n=(0,_util.createPromiseCapability)(),r=this._fullReader;return r.headersReady.then((()=>{r.isStreamingSupported&&r.isRangeSupported||(this._lastProgress&&t.onProgress&&t.onProgress(this._lastProgress),r.onProgress=e=>{t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})}),n.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})}),n.reject),n.promise})),e.on("GetRangeReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then((function({value:e,done:n}){n?t.close():((0,_util.assert)((0,_util.isArrayBuffer)(e),"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{n.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(({pdfInfo:e})=>{this._numPages=e.numPages,t._capability.resolve(new PDFDocumentProxy(e,this))})),e.on("DocException",(function(e){let n;switch(e.name){case"PasswordException":n=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":n=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":n=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":n=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":n=new _util.UnknownErrorException(e.message,e.details)}if(!(n instanceof Error)){const e="DocException - expected a valid Error.";(0,_util.warn)(e)}t._capability.reject(n)})),e.on("PasswordRequest",(e=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const n=e=>{this._passwordCapability.resolve({password:e})};try{t.onPassword(n,e.code)}catch(e){this._passwordCapability.reject(e)}}else this._passwordCapability.reject(new _util.PasswordException(e.message,e.code));return this._passwordCapability.promise})),e.on("DataLoaded",(e=>{t.onProgress&&t.onProgress({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{this.destroyed||this.pageCache[e.pageIndex]._startRenderPage(e.transparency,e.intent)})),e.on("commonobj",(t=>{if(this.destroyed)return;const[n,r,a]=t;if(!this.commonObjs.has(n))switch(r){case"Font":const t=this._params;if("error"in a){const e=a.error;(0,_util.warn)(`Error during font loading: ${e}`),this.commonObjs.resolve(n,e);break}let i=null;t.pdfBug&&globalThis.FontInspector?.enabled&&(i={registerFont(e,t){globalThis.FontInspector.fontAdded(e,t)}});const o=new _font_loader.FontFaceObject(a,{isEvalSupported:t.isEvalSupported,disableFontFace:t.disableFontFace,ignoreErrors:t.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:i});this.fontLoader.bind(o).catch((t=>e.sendWithPromise("FontFallback",{id:n}))).finally((()=>{!t.fontExtraProperties&&o.data&&(o.data=null),this.commonObjs.resolve(n,o)}));break;case"FontPath":case"Image":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${r}`)}})),e.on("obj",(e=>{if(this.destroyed)return;const[t,n,r,a]=e,i=this.pageCache[n];if(!i.objs.has(t))switch(r){case"Image":i.objs.resolve(t,a);const e=8e6;a?.data?.length>e&&(i.cleanupAfterRender=!0);break;default:throw new Error(`Got unknown object type ${r}`)}})),e.on("DocProgress",(e=>{this.destroyed||t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})})),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",((e,t)=>{if(this.destroyed)return void t.error(new Error("Worker was destroyed"));let n=!1;t.onPull=()=>{n?t.close():(n=!0,this.CMapReaderFactory.fetch(e).then((function(e){t.enqueue(e,1,[e.cMapData.buffer])})).catch((function(e){t.error(e)})))}}))}_onUnsupportedFeature({featureId:e}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request"));const t=e-1;if(t in this.pagePromises)return this.pagePromises[t];const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((e=>{if(this.destroyed)throw new Error("Transport destroyed");const n=new PDFPageProxy(t,e,this,this._params.ownerDocument,this._params.pdfBug);return this.pageCache[t]=n,n}));return this.pagePromises[t]=n,n}getPageIndex(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e}).catch((function(e){return Promise.reject(new Error(e))}))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}saveDocument(e){return this.messageHandler.sendWithPromise("SaveDocument",{numPages:this._numPages,annotationStorage:e?.getAll()||null,filename:this._fullReader?.filename??null}).finally((()=>{e&&e.resetModified()}))}getFieldObjects(){return this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((e=>new _optional_content_config.OptionalContentConfig(e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then((e=>({info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(){return this.messageHandler.sendWithPromise("Cleanup",null).then((()=>{for(let e=0,t=this.pageCache.length;e<t;e++){const t=this.pageCache[e];if(t&&!t.cleanup())throw new Error(`startCleanup: Page ${e+1} is currently rendering.`)}this.commonObjs.clear(),this.fontLoader.clear(),this._hasJSActionsPromise=null}))}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,disableFontFace:e.disableFontFace})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(e){return this._objs[e]?this._objs[e]:this._objs[e]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(e,t=null){if(t)return this._ensureObj(e).capability.promise.then(t),null;const n=this._objs[e];if(!n||!n.resolved)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){return this._objs[e]?.resolved||!1}resolve(e,t){const n=this._ensureObj(e);n.resolved=!0,n.data=t,n.capability.resolve(t)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(e){this._internalRenderTask=e,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}const InternalRenderTask=function(){const e=new WeakSet;return class{constructor({callback:e,params:t,objs:n,commonObjs:r,operatorList:a,pageIndex:i,canvasFactory:o,webGLContext:s,useRequestAnimationFrame:c=!1,pdfBug:l=!1}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=i,this.canvasFactory=o,this.webGLContext=s,this._pdfBug=l,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===c&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:a,transform:i,imageLayer:o,background:s}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,o,n),this.gfx.beginDrawing({transform:i,viewport:a,transparency:t,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&e.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this.cancel.bind(this))})):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&e.delete(this._canvas),this.callback())))}}}(),version="2.7.570";exports.version=version;const build="f2c7338b0";exports.build=build},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var r=n(2);class a{constructor({docId:e,onUnsupportedFeature:t,ownerDocument:n=globalThis.document}){this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseFontLoader."),this.docId=e,this._onUnsupportedFeature=t,this._document=n,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(e){this.nativeFontFaces.push(e),this._document.fonts.add(e)}insertRule(e){let t=this.styleElement;t||(t=this.styleElement=this._document.createElement("style"),t.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(t));const n=t.sheet;n.insertRule(e,n.cssRules.length)}clear(){this.nativeFontFaces.forEach((e=>{this._document.fonts.delete(e)})),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(e){if(e.attached||e.missingFile)return;if(e.attached=!0,this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,r.warn)(`Failed to load font '${t.family}': '${n}'.`),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent([t],[e],r)}))}}_queueLoadingCallback(e){(0,r.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,r.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,r.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,r.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(e,t,n){(0,r.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let i;t.FontLoader=i,t.FontLoader=i=class extends a{constructor(e){super(e),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let e=!1;return("undefined"==typeof navigator||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(e=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const t=this.loadingContext,n={id:"pdfjs-font-loading-"+t.nextRequestId++,done:!1,complete:function(){for((0,r.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.requests.length>0&&t.requests[0].done;){const e=t.requests.shift();setTimeout(e.callback,0)}},callback:e};return t.requests.push(n),n}get _loadTestFont(){return(0,r.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t,n){function a(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}let o,s;const c=this._document.createElement("canvas");c.width=1,c.height=1;const l=c.getContext("2d");let u=0;const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=i(d,976,h.length,h);const f=1482184792;let p=a(d,16);for(o=0,s=h.length-3;o<s;o+=4)p=p-f+a(h,o)|0;o<h.length&&(p=p-f+a(h+"XXX",o)|0),d=i(d,16,4,(0,r.string32)(p));const g=`@font-face {font-family:"${h}";src:url(data:font/opentype;base64,${btoa(d)});}`;this.insertRule(g);const m=[];for(o=0,s=t.length;o<s;o++)m.push(t[o].loadedName);m.push(h);const v=this._document.createElement("div");for(v.style.visibility="hidden",v.style.width=v.style.height="10px",v.style.position="absolute",v.style.top=v.style.left="0px",o=0,s=m.length;o<s;++o){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=m[o],v.appendChild(e)}this._document.body.appendChild(v),function e(t,n){if(u++,u>30)return(0,r.warn)("Load test font never loaded."),void n();l.font="30px "+t,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(h,(()=>{this._document.body.removeChild(v),n.complete()}))}},t.FontFaceObject=class{constructor(e,{isEvalSupported:t=!0,disableFontFace:n=!1,ignoreErrors:r=!1,onUnsupportedFeature:a=null,fontRegistry:i=null}){this.compiledGlyphs=Object.create(null);for(const t in e)this[t]=e[t];this.isEvalSupported=!1!==t,this.disableFontFace=!0===n,this.ignoreErrors=!0===r,this._onUnsupportedFeature=a,this.fontRegistry=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;const e=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=(0,r.bytesToString)(new Uint8Array(this.data)),t=`url(data:${this.mimetype};base64,${btoa(e)});`,n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n,a;try{n=e.get(this.loadedName+"_path_"+t)}catch(e){if(!this.ignoreErrors)throw e;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,r.warn)(`getPathGenerator - ignoring character: "${e}".`),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&r.IsEvalSupportedCached.value){let e,r="";for(let t=0,i=n.length;t<i;t++)a=n[t],e=void 0!==a.args?a.args.join(","):"",r+="c."+a.cmd+"("+e+");\n";return this.compiledGlyphs[t]=new Function("c","size",r)}return this.compiledGlyphs[t]=function(e,t){for(let r=0,i=n.length;r<i;r++)a=n[r],"scale"===a.cmd&&(a.args=[t,-t]),e[a.cmd].apply(e,a.args)}}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeCMapReaderFactory=t.NodeCanvasFactory=void 0;var r=n(1),a=n(4),i=n(2);let o=class{constructor(){(0,i.unreachable)("Not implemented: NodeCanvasFactory")}};t.NodeCanvasFactory=o;let s=class{constructor(){(0,i.unreachable)("Not implemented: NodeCMapReaderFactory")}};t.NodeCMapReaderFactory=s,a.isNodeJS&&(t.NodeCanvasFactory=o=class extends r.BaseCanvasFactory{create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=__webpack_require__(414).createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}},t.NodeCMapReaderFactory=s=class extends r.BaseCMapReaderFactory{_fetchData(e,t){return new Promise(((n,r)=>{__webpack_require__(172).readFile(e,((e,a)=>{!e&&a?n({cMapData:new Uint8Array(a),compressionType:t}):r(new Error(e))}))}))}})},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationStorage=void 0;var r=n(2);t.AnnotationStorage=class{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getOrCreateValue(e,t){return this._storage.has(e)?this._storage.get(e):(this._storage.set(e,t),t)}setValue(e,t){const n=this._storage.get(e);let r=!1;if(void 0!==n)for(const[e,a]of Object.entries(t))n[e]!==a&&(r=!0,n[e]=a);else this._storage.set(e,t),r=!0;r&&this._setModified()}getAll(){return 0===this._storage.size?null:(0,r.objectFromEntries)(this._storage)}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.apiCompatibilityParams=void 0;var r=n(4);const a=Object.create(null);r.isNodeJS&&(a.disableFontFace=!0);const i=Object.freeze(a);t.apiCompatibilityParams=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var r=n(2),a=n(11);const i=4096,o=16;function s(e){e.mozCurrentTransform||(e._originalSave=e.save,e._originalRestore=e.restore,e._originalRotate=e.rotate,e._originalScale=e.scale,e._originalTranslate=e.translate,e._originalTransform=e.transform,e._originalSetTransform=e.setTransform,e._transformMatrix=e._transformMatrix||[1,0,0,1,0,0],e._transformStack=[],Object.defineProperty(e,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(e,"mozCurrentTransformInverse",{get:function(){const e=this._transformMatrix,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=t*a-n*r,c=n*r-t*a;return[a/s,n/c,r/c,t/s,(a*i-r*o)/c,(n*i-t*o)/s]}}),e.save=function(){const e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},e.restore=function(){const e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},e.translate=function(e,t){const n=this._transformMatrix;n[4]=n[0]*e+n[2]*t+n[4],n[5]=n[1]*e+n[3]*t+n[5],this._originalTranslate(e,t)},e.scale=function(e,t){const n=this._transformMatrix;n[0]=n[0]*e,n[1]=n[1]*e,n[2]=n[2]*t,n[3]=n[3]*t,this._originalScale(e,t)},e.transform=function(t,n,r,a,i,o){const s=this._transformMatrix;this._transformMatrix=[s[0]*t+s[2]*n,s[1]*t+s[3]*n,s[0]*r+s[2]*a,s[1]*r+s[3]*a,s[0]*i+s[2]*o+s[4],s[1]*i+s[3]*o+s[5]],e._originalTransform(t,n,r,a,i,o)},e.setTransform=function(t,n,r,a,i,o){this._transformMatrix=[t,n,r,a,i,o],e._originalSetTransform(t,n,r,a,i,o)},e.rotate=function(e){const t=Math.cos(e),n=Math.sin(e),r=this._transformMatrix;this._transformMatrix=[r[0]*t+r[2]*n,r[1]*t+r[3]*n,r[0]*-n+r[2]*t,r[1]*-n+r[3]*t,r[4],r[5]],this._originalRotate(e)})}const c=function(){function e(e){this.canvasFactory=e,this.cache=Object.create(null)}return e.prototype={getCanvas:function(e,t,n,r){let a;return void 0!==this.cache[e]?(a=this.cache[e],this.canvasFactory.reset(a,t,n),a.context.setTransform(1,0,0,1,0,0)):(a=this.canvasFactory.create(t,n),this.cache[e]=a),r&&s(a.context),a},clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}},e}(),l=function(){function e(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}return e.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(e,t){this.x=e,this.y=t}},e}(),u=function(){function e(e,t,n,r,a,i,o){this.ctx=e,this.current=new l,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.webGLContext=a,this.imageLayer=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=o,this.cachedCanvases=new c(this.canvasFactory),e&&s(e),this._cachedGetSinglePixelWidth=null}function t(e,t,n=null){if("undefined"!=typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const a=t.height,i=t.width,s=a%o,c=(a-s)/o,l=0===s?c:c+1,u=e.createImageData(i,o);let h,d=0;const f=t.data,p=u.data;let g,m,v,b,y,w,x,C;if(n)switch(n.length){case 1:y=n[0],w=n[0],x=n[0],C=n[0];break;case 4:y=n[0],w=n[1],x=n[2],C=n[3]}if(t.kind===r.ImageKind.GRAYSCALE_1BPP){const t=f.byteLength,n=new Uint32Array(p.buffer,0,p.byteLength>>2),a=n.length,b=i+7>>3;let y=4294967295,w=r.IsLittleEndianCached.value?4278190080:255;for(C&&255===C[0]&&0===C[255]&&([y,w]=[w,y]),g=0;g<l;g++){for(v=g<c?o:s,h=0,m=0;m<v;m++){const e=t-d;let r=0;const a=e>b?i:8*e-7,o=-8&a;let s=0,c=0;for(;r<o;r+=8)c=f[d++],n[h++]=128&c?y:w,n[h++]=64&c?y:w,n[h++]=32&c?y:w,n[h++]=16&c?y:w,n[h++]=8&c?y:w,n[h++]=4&c?y:w,n[h++]=2&c?y:w,n[h++]=1&c?y:w;for(;r<a;r++)0===s&&(c=f[d++],s=128),n[h++]=c&s?y:w,s>>=1}for(;h<a;)n[h++]=0;e.putImageData(u,0,g*o)}}else if(t.kind===r.ImageKind.RGBA_32BPP){const t=!!(y||w||x);for(m=0,b=i*o*4,g=0;g<c;g++){if(p.set(f.subarray(d,d+b)),d+=b,t)for(let e=0;e<b;e+=4)y&&(p[e+0]=y[p[e+0]]),w&&(p[e+1]=w[p[e+1]]),x&&(p[e+2]=x[p[e+2]]);e.putImageData(u,0,m),m+=o}if(g<l){if(b=i*s*4,p.set(f.subarray(d,d+b)),t)for(let e=0;e<b;e+=4)y&&(p[e+0]=y[p[e+0]]),w&&(p[e+1]=w[p[e+1]]),x&&(p[e+2]=x[p[e+2]]);e.putImageData(u,0,m)}}else{if(t.kind!==r.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${t.kind}`);{const t=!!(y||w||x);for(v=o,b=i*v,g=0;g<l;g++){for(g>=c&&(v=s,b=i*v),h=0,m=b;m--;)p[h++]=f[d++],p[h++]=f[d++],p[h++]=f[d++],p[h++]=255;if(t)for(let e=0;e<h;e+=4)y&&(p[e+0]=y[p[e+0]]),w&&(p[e+1]=w[p[e+1]]),x&&(p[e+2]=x[p[e+2]]);e.putImageData(u,0,g*o)}}}}function n(e,t){const n=t.height,r=t.width,a=n%o,i=(n-a)/o,s=0===a?i:i+1,c=e.createImageData(r,o);let l=0;const u=t.data,h=c.data;for(let t=0;t<s;t++){const n=t<i?o:a;let s=3;for(let e=0;e<n;e++){let e,t=0;for(let n=0;n<r;n++)t||(e=u[l++],t=128),h[s]=e&t?0:255,s+=4,t>>=1}e.putImageData(c,0,t*o)}}function u(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let r=0,a=n.length;r<a;r++){const a=n[r];void 0!==e[a]&&(t[a]=e[a])}void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function h(e){e.strokeStyle="#000000",e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0)}function d(e,t,n,r){const a=e.length;for(let i=3;i<a;i+=4){const a=e[i];if(0===a)e[i-3]=t,e[i-2]=n,e[i-1]=r;else if(a<255){const o=255-a;e[i-3]=e[i-3]*a+t*o>>8,e[i-2]=e[i-2]*a+n*o>>8,e[i-1]=e[i-1]*a+r*o>>8}}}function f(e,t,n){const r=e.length;for(let a=3;a<r;a+=4){const r=n?n[e[a]]:e[a];t[a]=t[a]*r*.00392156862745098|0}}function p(e,t,n){const r=e.length;for(let a=3;a<r;a+=4){const r=77*e[a-3]+152*e[a-2]+28*e[a-1];t[a]=n?t[a]*n[r>>8]>>8:t[a]*r>>16}}function g(e,t,n,r){const a=t.canvas,i=t.context;e.setTransform(t.scaleX,0,0,t.scaleY,t.offsetX,t.offsetY);const o=t.backdrop||null;if(!t.transferMap&&r.isEnabled){const i=r.composeSMask({layer:n.canvas,mask:a,properties:{subtype:t.subtype,backdrop:o}});return e.setTransform(1,0,0,1,0,0),void e.drawImage(i,t.offsetX,t.offsetY)}!function(e,t,n,r,a,i,o){const s=!!i,c=s?i[0]:0,l=s?i[1]:0,u=s?i[2]:0;let h;h="Luminosity"===a?p:f;const g=Math.min(r,Math.ceil(1048576/n));for(let a=0;a<r;a+=g){const i=Math.min(g,r-a),f=e.getImageData(0,a,n,i),p=t.getImageData(0,a,n,i);s&&d(f.data,c,l,u),h(f.data,p.data,o),e.putImageData(p,0,a)}}(i,n,a.width,a.height,t.subtype,o,t.transferMap),e.drawImage(a,0,0)}const m=["butt","round","square"],v=["miter","round","bevel"],b={},y={};e.prototype={beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const a=this.ctx.canvas.width,i=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=r||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,a,i),this.ctx.restore(),n){const e=this.cachedCanvases.getCanvas("transparent",a,i,!0);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),h(this.ctx),e&&this.ctx.transform.apply(this.ctx,e),this.ctx.transform.apply(this.ctx,t.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(e,t,n,a){const i=e.argsArray,o=e.fnArray;let s=t||0;const c=i.length;if(c===s)return s;const l=c-s>10&&"function"==typeof n,u=l?Date.now()+15:0;let h=0;const d=this.commonObjs,f=this.objs;let p;for(;;){if(void 0!==a&&s===a.nextBreakPoint)return a.breakIt(s,n),s;if(p=o[s],p!==r.OPS.dependency)this[p].apply(this,i[s]);else for(const e of i[s]){const t=e.startsWith("g_")?d:f;if(!t.has(e))return t.get(e,n),s}if(s++,s===c)return s;if(l&&++h>10){if(Date.now()>u)return n(),s;h=0}}},endDrawing:function(){for(;this.stateStack.length||null!==this.current.activeSMask;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(e){this.current.lineWidth=e,this.ctx.lineWidth=e},setLineCap:function(e){this.ctx.lineCap=m[e]},setLineJoin:function(e){this.ctx.lineJoin=v[e]},setMiterLimit:function(e){this.ctx.miterLimit=e},setDash:function(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)},setRenderingIntent(e){},setFlatness(e){},setGState:function(e){for(let t=0,n=e.length;t<n;t++){const n=e[t],r=n[0],a=n[1];switch(r){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=a?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=a}}},beginSMaskGroup:function(){const e=this.current.activeSMask,t=e.canvas.width,n=e.canvas.height,r="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(r,t,n,!0),i=this.ctx,o=i.mozCurrentTransform;this.ctx.save();const s=a.context;s.scale(1/e.scaleX,1/e.scaleY),s.translate(-e.offsetX,-e.offsetY),s.transform.apply(s,o),e.startTransformInverse=s.mozCurrentTransformInverse,u(i,s),this.ctx=s,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++},suspendSMaskGroup:function(){const e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),g(this.ctx,this.current.activeSMask,e,this.webGLContext),this.ctx.restore(),this.ctx.save(),u(e,this.ctx),this.current.resumeSMaskCtx=e;const t=r.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t),e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()},resumeSMaskGroup:function(){const e=this.current.resumeSMaskCtx,t=this.ctx;this.ctx=e,this.groupStack.push(t),this.groupLevel++},endSMaskGroup:function(){const e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),g(this.ctx,this.current.activeSMask,e,this.webGLContext),this.ctx.restore(),u(e,this.ctx);const t=r.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t)},save:function(){this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null):this.current.activeSMask=null},transform:function(e,t,n,r,a,i){this.ctx.transform(e,t,n,r,a,i),this._cachedGetSinglePixelWidth=null},constructPath:function(e,t){const n=this.ctx,a=this.current;let i=a.x,o=a.y;for(let a=0,s=0,c=e.length;a<c;a++)switch(0|e[a]){case r.OPS.rectangle:i=t[s++],o=t[s++];const e=t[s++],a=t[s++],c=i+e,l=o+a;n.moveTo(i,o),0===e||0===a?n.lineTo(c,l):(n.lineTo(c,o),n.lineTo(c,l),n.lineTo(i,l)),n.closePath();break;case r.OPS.moveTo:i=t[s++],o=t[s++],n.moveTo(i,o);break;case r.OPS.lineTo:i=t[s++],o=t[s++],n.lineTo(i,o);break;case r.OPS.curveTo:i=t[s+4],o=t[s+5],n.bezierCurveTo(t[s],t[s+1],t[s+2],t[s+3],i,o),s+=6;break;case r.OPS.curveTo2:n.bezierCurveTo(i,o,t[s],t[s+1],t[s+2],t[s+3]),i=t[s+2],o=t[s+3],s+=4;break;case r.OPS.curveTo3:i=t[s+2],o=t[s+3],n.bezierCurveTo(t[s],t[s+1],i,o,i,o),s+=4;break;case r.OPS.closePath:n.closePath()}a.setCurrentPoint(i,o)},closePath:function(){this.ctx.closePath()},stroke:function(e){e=void 0===e||e;const t=this.ctx,n=this.current.strokeColor;if(t.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"==typeof n&&n?.getPattern){t.save();const e=t.mozCurrentTransform,a=r.Util.singularValueDecompose2dScale(e)[0];t.strokeStyle=n.getPattern(t,this);const i=this.getSinglePixelWidth(),o=this.current.lineWidth*a;i<0&&-i>=o?(t.resetTransform(),t.lineWidth=Math.round(this._combinedScaleFactor)):t.lineWidth=Math.max(i,o),t.stroke(),t.restore()}else{const e=this.getSinglePixelWidth();e<0&&-e>=this.current.lineWidth?(t.save(),t.resetTransform(),t.lineWidth=Math.round(this._combinedScaleFactor),t.stroke(),t.restore()):(t.lineWidth=Math.max(e,this.current.lineWidth),t.stroke())}e&&this.consumePath(),t.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(e){e=void 0===e||e;const t=this.ctx,n=this.current.fillColor;let r=!1;this.current.patternFill&&(t.save(),this.baseTransform&&t.setTransform.apply(t,this.baseTransform),t.fillStyle=n.getPattern(t,this),r=!0),this.contentVisible&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=b},eoClip:function(){this.pendingClip=y},beginText:function(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(let n=0;n<e.length;n++){const r=e[n];t.setTransform.apply(t,r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize)}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()},setCharSpacing:function(e){this.current.charSpacing=e},setWordSpacing:function(e){this.current.wordSpacing=e},setHScale:function(e){this.current.textHScale=e/100},setLeading:function(e){this.current.leading=-e},setFont:function(e,t){const n=this.commonObjs.get(e),a=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(a.fontMatrix=n.fontMatrix||r.FONT_IDENTITY_MATRIX,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||(0,r.warn)("Invalid font matrix for font "+e),t<0?(t=-t,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const i=n.loadedName||"sans-serif";let o="normal";n.black?o="900":n.bold&&(o="bold");const s=n.italic?"italic":"normal",c=`"${i}", ${n.fallbackName}`;let l=t;t<16?l=16:t>100&&(l=100),this.current.fontSizeScale=t/l,this.ctx.font=`${s} ${o} ${l}px ${c}`},setTextRenderingMode:function(e){this.current.textRenderingMode=e},setTextRise:function(e){this.current.textRise=e},moveText:function(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t},setLeadingMoveText:function(e,t){this.setLeading(-t),this.moveText(e,t)},setTextMatrix:function(e,t,n,r,a,i){this.current.textMatrix=[e,t,n,r,a,i],this.current.textMatrixScale=Math.sqrt(e*e+t*t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar(e,t,n,a,i){const o=this.ctx,s=this.current,c=s.font,l=s.textRenderingMode,u=s.fontSize/s.fontSizeScale,h=l&r.TextRenderingMode.FILL_STROKE_MASK,d=!!(l&r.TextRenderingMode.ADD_TO_PATH_FLAG),f=s.patternFill&&!c.missingFile;let p;(c.disableFontFace||d||f)&&(p=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||f?(o.save(),o.translate(t,n),o.beginPath(),p(o,u),a&&o.setTransform.apply(o,a),h!==r.TextRenderingMode.FILL&&h!==r.TextRenderingMode.FILL_STROKE||o.fill(),h!==r.TextRenderingMode.STROKE&&h!==r.TextRenderingMode.FILL_STROKE||(i&&(o.resetTransform(),o.lineWidth=Math.round(this._combinedScaleFactor)),o.stroke()),o.restore()):(h!==r.TextRenderingMode.FILL&&h!==r.TextRenderingMode.FILL_STROKE||o.fillText(e,t,n),h!==r.TextRenderingMode.STROKE&&h!==r.TextRenderingMode.FILL_STROKE||(i?(o.save(),o.moveTo(t,n),o.resetTransform(),o.lineWidth=Math.round(this._combinedScaleFactor),o.strokeText(e,0,0),o.restore()):o.strokeText(e,t,n))),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:o.mozCurrentTransform,x:t,y:n,fontSize:u,addToPath:p})},get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let e=3;e<t.length;e+=4)if(t[e]>0&&t[e]<255){n=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",n)},showText:function(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const a=t.fontSize;if(0===a)return;const i=this.ctx,o=t.fontSizeScale,s=t.charSpacing,c=t.wordSpacing,l=t.fontDirection,u=t.textHScale*l,h=e.length,d=n.vertical,f=d?1:-1,p=n.defaultVMetrics,g=a*t.fontMatrix[0],m=t.textRenderingMode===r.TextRenderingMode.FILL&&!n.disableFontFace&&!t.patternFill;let v;if(i.save(),t.patternFill){i.save();const e=t.fillColor.getPattern(i,this);v=i.mozCurrentTransform,i.restore(),i.fillStyle=e}i.transform.apply(i,t.textMatrix),i.translate(t.x,t.y+t.textRise),l>0?i.scale(u,-1):i.scale(u,1);let b=t.lineWidth,y=!1;const w=t.textMatrixScale;if(0===w||0===b){const e=t.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;e!==r.TextRenderingMode.STROKE&&e!==r.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,b=this.getSinglePixelWidth(),y=b<0)}else b/=w;1!==o&&(i.scale(o,o),b/=o),i.lineWidth=b;let x,C=0;for(x=0;x<h;++x){const t=e[x];if((0,r.isNum)(t)){C+=f*t*a/1e3;continue}let u=!1;const h=(t.isSpace?c:0)+s,b=t.fontChar,w=t.accent;let k,S,A,_=t.width;if(d){const e=t.vmetric||p,n=-(t.vmetric?e[1]:.5*_)*g,r=e[2]*g;_=e?-e[0]:_,k=n/o,S=(C+r)/o}else k=C/o,S=0;if(n.remeasure&&_>0){const e=1e3*i.measureText(b).width/a*o;if(_<e&&this.isFontSubpixelAAEnabled){const t=_/e;u=!0,i.save(),i.scale(t,1),k/=t}else _!==e&&(k+=(_-e)/2e3*a/o)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(m&&!w)i.fillText(b,k,S);else if(this.paintChar(b,k,S,v,y),w){const e=k+a*w.offset.x/o,t=S-a*w.offset.y/o;this.paintChar(w.fontChar,e,t,v,y)}A=d?_*g-h*l:_*g+h*l,C+=A,u&&i.restore()}d?t.y-=C:t.x+=C*u,i.restore()},showType3Text:function(e){const t=this.ctx,n=this.current,a=n.font,i=n.fontSize,o=n.fontDirection,s=a.vertical?1:-1,c=n.charSpacing,l=n.wordSpacing,u=n.textHScale*o,h=n.fontMatrix||r.FONT_IDENTITY_MATRIX,d=e.length;let f,p,g,m;if(n.textRenderingMode!==r.TextRenderingMode.INVISIBLE&&0!==i){for(this._cachedGetSinglePixelWidth=null,t.save(),t.transform.apply(t,n.textMatrix),t.translate(n.x,n.y),t.scale(u,o),f=0;f<d;++f){if(p=e[f],(0,r.isNum)(p)){m=s*p*i/1e3,this.ctx.translate(m,0),n.x+=m*u;continue}const o=(p.isSpace?l:0)+c,d=a.charProcOperatorList[p.operatorListId];d?(this.contentVisible&&(this.processingType3=p,this.save(),t.scale(i,i),t.transform.apply(t,h),this.executeOperatorList(d),this.restore()),g=r.Util.applyTransform([p.width,0],h)[0]*i+o,t.translate(g,0),n.x+=g*u):(0,r.warn)(`Type3 character "${p.operatorListId}" is not available.`)}t.restore(),this.processingType3=null}},setCharWidth:function(e,t){},setCharWidthAndBounds:function(e,t,n,r,a,i){this.ctx.rect(n,r,a-n,i-r),this.clip(),this.endPath()},getColorN_Pattern:function(t){let n;if("TilingPattern"===t[0]){const r=t[1],i=this.baseTransform||this.ctx.mozCurrentTransform.slice(),o={createCanvasGraphics:t=>new e(t,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext)};n=new a.TilingPattern(t,r,this.ctx,o,i)}else n=(0,a.getShadingPatternFromIR)(t);return n},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(e,t,n){const a=r.Util.makeHexColor(e,t,n);this.ctx.strokeStyle=a,this.current.strokeColor=a},setFillRGBColor:function(e,t,n){const a=r.Util.makeHexColor(e,t,n);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1},shadingFill:function(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=(0,a.getShadingPatternFromIR)(e);t.fillStyle=n.getPattern(t,this,!0);const i=t.mozCurrentTransformInverse;if(i){const e=t.canvas,n=e.width,a=e.height,o=r.Util.applyTransform([0,0],i),s=r.Util.applyTransform([0,a],i),c=r.Util.applyTransform([n,0],i),l=r.Util.applyTransform([n,a],i),u=Math.min(o[0],s[0],c[0],l[0]),h=Math.min(o[1],s[1],c[1],l[1]),d=Math.max(o[0],s[0],c[0],l[0]),f=Math.max(o[1],s[1],c[1],l[1]);this.ctx.fillRect(u,h,d-u,f-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){(0,r.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,r.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform.apply(this,e),this.baseTransform=this.ctx.mozCurrentTransform,t)){const e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())},beginGroup:function(e){if(!this.contentVisible)return;this.save();const t=this.ctx;e.isolated||(0,r.info)("TODO: Support non-isolated groups."),e.knockout&&(0,r.warn)("Knockout groups not supported.");const n=t.mozCurrentTransform;if(e.matrix&&t.transform.apply(t,e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=r.Util.getAxialAlignedBoundingBox(e.bbox,t.mozCurrentTransform);const o=[0,0,t.canvas.width,t.canvas.height];a=r.Util.intersect(a,o)||[0,0,0,0];const s=Math.floor(a[0]),c=Math.floor(a[1]);let l=Math.max(Math.ceil(a[2])-s,1),h=Math.max(Math.ceil(a[3])-c,1),d=1,f=1;l>i&&(d=l/i,l=i),h>i&&(f=h/i,h=i);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(p,l,h,!0),m=g.context;m.scale(1/d,1/f),m.translate(-s,-c),m.transform.apply(m,n),e.smask?this.smaskStack.push({canvas:g.canvas,context:m,offsetX:s,offsetY:c,scaleX:d,scaleY:f,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(s,c),t.scale(d,f)),u(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++,this.current.activeSMask=null},endGroup:function(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,e.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(t.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(e,t,n){if(this.save(),h(this.ctx),this.current=new l,Array.isArray(e)&&4===e.length){const t=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],t,n),this.clip(),this.endPath()}this.transform.apply(this,t),this.transform.apply(this,n)},endAnnotation:function(){this.restore()},paintImageMaskXObject:function(e){if(!this.contentVisible)return;const t=this.ctx,r=e.width,a=e.height,i=this.current.fillColor,o=this.current.patternFill,s=this.processingType3;if(s&&void 0===s.compiled&&(s.compiled=r<=1e3&&a<=1e3?function(e){const t=e.width,n=e.height,r=t+1;let a,i,o,s;const c=new Uint8Array(r*(n+1)),l=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=t+7&-8,h=e.data,d=new Uint8Array(u*n);let f=0;for(a=0,i=h.length;a<i;a++){const e=h[a];let t=128;for(;t>0;)d[f++]=e&t?0:255,t>>=1}let p=0;for(f=0,0!==d[f]&&(c[0]=1,++p),o=1;o<t;o++)d[f]!==d[f+1]&&(c[o]=d[f]?2:1,++p),f++;for(0!==d[f]&&(c[o]=2,++p),a=1;a<n;a++){f=a*u,s=a*r,d[f-u]!==d[f]&&(c[s]=d[f]?1:8,++p);let e=(d[f]?4:0)+(d[f-u]?8:0);for(o=1;o<t;o++)e=(e>>2)+(d[f+1]?4:0)+(d[f-u+1]?8:0),l[e]&&(c[s+o]=l[e],++p),f++;if(d[f-u]!==d[f]&&(c[s+o]=d[f]?2:4,++p),p>1e3)return null}for(f=u*(n-1),s=a*r,0!==d[f]&&(c[s]=8,++p),o=1;o<t;o++)d[f]!==d[f+1]&&(c[s+o]=d[f]?4:8,++p),f++;if(0!==d[f]&&(c[s+o]=4,++p),p>1e3)return null;const g=new Int32Array([0,r,-1,0,-r,0,0,0,1]),m=[];for(a=0;p&&a<=n;a++){let e=a*r;const n=e+t;for(;e<n&&!c[e];)e++;if(e===n)continue;const i=[e%r,a],o=e;let s=c[e];do{const t=g[s];do{e+=t}while(!c[e]);const n=c[e];5!==n&&10!==n?(s=n,c[e]=0):(s=n&51*s>>4,c[e]&=s>>2|s<<2),i.push(e%r),i.push(e/r|0),c[e]||--p}while(o!==e);m.push(i),--a}return function(e){e.save(),e.scale(1/t,-1/n),e.translate(0,-n),e.beginPath();for(let t=0,n=m.length;t<n;t++){const n=m[t];e.moveTo(n[0],n[1]);for(let t=2,r=n.length;t<r;t+=2)e.lineTo(n[t],n[t+1])}e.fill(),e.beginPath(),e.restore()}}({data:e.data,width:r,height:a}):null),s?.compiled)return void s.compiled(t);const c=this.cachedCanvases.getCanvas("maskCanvas",r,a),l=c.context;l.save(),n(l,e),l.globalCompositeOperation="source-in",l.fillStyle=o?i.getPattern(l,this):i,l.fillRect(0,0,r,a),l.restore(),this.paintInlineImageXObject(c.canvas)},paintImageMaskXObjectRepeat(e,t,r=0,a=0,i,o){if(!this.contentVisible)return;const s=e.width,c=e.height,l=this.current.fillColor,u=this.current.patternFill,h=this.cachedCanvases.getCanvas("maskCanvas",s,c),d=h.context;d.save(),n(d,e),d.globalCompositeOperation="source-in",d.fillStyle=u?l.getPattern(d,this):l,d.fillRect(0,0,s,c),d.restore();const f=this.ctx;for(let e=0,n=o.length;e<n;e+=2)f.save(),f.transform(t,r,a,i,o[e],o[e+1]),f.scale(1,-1),f.drawImage(h.canvas,0,0,s,c,0,-1,1,1),f.restore()},paintImageMaskXObjectGroup:function(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,a=this.current.patternFill;for(let i=0,o=e.length;i<o;i++){const o=e[i],s=o.width,c=o.height,l=this.cachedCanvases.getCanvas("maskCanvas",s,c),u=l.context;u.save(),n(u,o),u.globalCompositeOperation="source-in",u.fillStyle=a?r.getPattern(u,this):r,u.fillRect(0,0,s,c),u.restore(),t.save(),t.transform.apply(t,o.transform),t.scale(1,-1),t.drawImage(l.canvas,0,0,s,c,0,-1,1,1),t.restore()}},paintImageXObject:function(e){if(!this.contentVisible)return;const t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);t?this.paintInlineImageXObject(t):(0,r.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(e,t,n,a){if(!this.contentVisible)return;const i=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);if(!i)return void(0,r.warn)("Dependent image isn't ready yet");const o=i.width,s=i.height,c=[];for(let e=0,r=a.length;e<r;e+=2)c.push({transform:[t,0,0,n,a[e],a[e+1]],x:0,y:0,w:o,h:s});this.paintInlineImageXObjectGroup(i,c)},paintInlineImageXObject:function(e){if(!this.contentVisible)return;const n=e.width,r=e.height,a=this.ctx;this.save(),a.scale(1/n,-1/r);const i=a.mozCurrentTransformInverse,o=i[0],s=i[1];let c=Math.max(Math.sqrt(o*o+s*s),1);const l=i[2],u=i[3];let h,d,f,p=Math.max(Math.sqrt(l*l+u*u),1);"function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data?h=e:(d=this.cachedCanvases.getCanvas("inlineImage",n,r),f=d.context,t(f,e,this.current.transferMaps),h=d.canvas);let g=n,m=r,v="prescale1";for(;c>2&&g>1||p>2&&m>1;){let e=g,t=m;c>2&&g>1&&(e=Math.ceil(g/2),c/=g/e),p>2&&m>1&&(t=Math.ceil(m/2),p/=m/t),d=this.cachedCanvases.getCanvas(v,e,t),f=d.context,f.clearRect(0,0,e,t),f.drawImage(h,0,0,g,m,0,0,e,t),h=d.canvas,g=e,m=t,v="prescale1"===v?"prescale2":"prescale1"}if(a.drawImage(h,0,0,g,m,0,-r,n,r),this.imageLayer){const t=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:e,left:t[0],top:t[1],width:n/i[0],height:r/i[3]})}this.restore()},paintInlineImageXObjectGroup:function(e,n){if(!this.contentVisible)return;const r=this.ctx,a=e.width,i=e.height,o=this.cachedCanvases.getCanvas("inlineImage",a,i);t(o.context,e,this.current.transferMaps);for(let t=0,s=n.length;t<s;t++){const s=n[t];if(r.save(),r.transform.apply(r,s.transform),r.scale(1,-1),r.drawImage(o.canvas,s.x,s.y,s.w,s.h,0,-1,1,1),this.imageLayer){const t=this.getCanvasPosition(s.x,s.y);this.imageLayer.appendImage({imgData:e,left:t[0],top:t[1],width:a,height:i})}r.restore()}},paintSolidColorImageMask:function(){this.contentVisible&&this.ctx.fillRect(0,0,1,1)},markPoint:function(e){},markPointProps:function(e,t){},beginMarkedContent:function(e){this.markedContentStack.push({visible:!0})},beginMarkedContentProps:function(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()},endMarkedContent:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()},beginCompat:function(){},endCompat:function(){},consumePath:function(){const e=this.ctx;this.pendingClip&&(this.pendingClip===y?e.clip("evenodd"):e.clip(),this.pendingClip=null),e.beginPath()},getSinglePixelWidth(){if(null===this._cachedGetSinglePixelWidth){const e=this.ctx.mozCurrentTransform,t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=e[0]**2+e[2]**2,r=e[1]**2+e[3]**2,a=Math.sqrt(Math.max(n,r))/t;n!==r&&this._combinedScaleFactor*a>1?this._cachedGetSinglePixelWidth=-this._combinedScaleFactor*a:t>Number.EPSILON?this._cachedGetSinglePixelWidth=1.0000001*a:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(e,t){const n=this.ctx.mozCurrentTransform;return[n[0]*e+n[2]*t+n[4],n[1]*e+n[3]*t+n[5]]},isContentVisible:function(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};for(const t in r.OPS)e.prototype[r.OPS[t]]=e.prototype[t];return e}();t.CanvasGraphics=u},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getShadingPatternFromIR=function(e){const t=a[e[0]];if(!t)throw new Error(`Unknown IR type: ${e[0]}`);return t.fromIR(e)},t.TilingPattern=void 0;var r=n(2);const a={};function i(e,t){if(!t||"undefined"==typeof Path2D)return;const n=t[2]-t[0],r=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],n,r),e.clip(a)}a.RadialAxial={fromIR:function(e){const t=e[1],n=e[2],r=e[3],a=e[4],o=e[5],s=e[6],c=e[7];return{getPattern:function(e){let l;i(e,n),"axial"===t?l=e.createLinearGradient(a[0],a[1],o[0],o[1]):"radial"===t&&(l=e.createRadialGradient(a[0],a[1],s,o[0],o[1],c));for(let e=0,t=r.length;e<t;++e){const t=r[e];l.addColorStop(t[0],t[1])}return l}}}};const o=function(){function e(e,t,n,r,a,i,o,s){const c=t.coords,l=t.colors,u=e.data,h=4*e.width;let d;c[n+1]>c[r+1]&&(d=n,n=r,r=d,d=i,i=o,o=d),c[r+1]>c[a+1]&&(d=r,r=a,a=d,d=o,o=s,s=d),c[n+1]>c[r+1]&&(d=n,n=r,r=d,d=i,i=o,o=d);const f=(c[n]+t.offsetX)*t.scaleX,p=(c[n+1]+t.offsetY)*t.scaleY,g=(c[r]+t.offsetX)*t.scaleX,m=(c[r+1]+t.offsetY)*t.scaleY,v=(c[a]+t.offsetX)*t.scaleX,b=(c[a+1]+t.offsetY)*t.scaleY;if(p>=b)return;const y=l[i],w=l[i+1],x=l[i+2],C=l[o],k=l[o+1],S=l[o+2],A=l[s],_=l[s+1],E=l[s+2],I=Math.round(p),T=Math.round(b);let R,F,P,D,O,N,M,L;for(let e=I;e<=T;e++){if(e<m){let t;t=e<p?0:p===m?1:(p-e)/(p-m),R=f-(f-g)*t,F=y-(y-C)*t,P=w-(w-k)*t,D=x-(x-S)*t}else{let t;t=e>b?1:m===b?0:(m-e)/(m-b),R=g-(g-v)*t,F=C-(C-A)*t,P=k-(k-_)*t,D=S-(S-E)*t}let t;t=e<p?0:e>b?1:(p-e)/(p-b),O=f-(f-v)*t,N=y-(y-A)*t,M=w-(w-_)*t,L=x-(x-E)*t;const n=Math.round(Math.min(R,O)),r=Math.round(Math.max(R,O));let a=h*e+4*n;for(let e=n;e<=r;e++)t=(R-e)/(R-O),t<0?t=0:t>1&&(t=1),u[a++]=F-(F-N)*t|0,u[a++]=P-(P-M)*t|0,u[a++]=D-(D-L)*t|0,u[a++]=255}}function t(t,n,r){const a=n.coords,i=n.colors;let o,s;switch(n.type){case"lattice":const c=n.verticesPerRow,l=Math.floor(a.length/c)-1,u=c-1;for(o=0;o<l;o++){let n=o*c;for(let o=0;o<u;o++,n++)e(t,r,a[n],a[n+1],a[n+c],i[n],i[n+1],i[n+c]),e(t,r,a[n+c+1],a[n+1],a[n+c],i[n+c+1],i[n+1],i[n+c])}break;case"triangles":for(o=0,s=a.length;o<s;o+=3)e(t,r,a[o],a[o+1],a[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}return function(e,n,r,a,i,o,s,c){const l=Math.floor(e[0]),u=Math.floor(e[1]),h=Math.ceil(e[2])-l,d=Math.ceil(e[3])-u,f=Math.min(Math.ceil(Math.abs(h*n[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(d*n[1]*1.1)),3e3),g=h/f,m=d/p,v={coords:r,colors:a,offsetX:-l,offsetY:-u,scaleX:1/g,scaleY:1/m},b=f+4,y=p+4;let w,x,C,k;if(c.isEnabled)w=c.drawFigures({width:f,height:p,backgroundColor:o,figures:i,context:v}),x=s.getCanvas("mesh",b,y,!1),x.context.drawImage(w,2,2),w=x.canvas;else{x=s.getCanvas("mesh",b,y,!1);const e=x.context,n=e.createImageData(f,p);if(o){const e=n.data;for(C=0,k=e.length;C<k;C+=4)e[C]=o[0],e[C+1]=o[1],e[C+2]=o[2],e[C+3]=255}for(C=0;C<i.length;C++)t(n,i[C],v);e.putImageData(n,2,2),w=x.canvas}return{canvas:w,offsetX:l-2*g,offsetY:u-2*m,scaleX:g,scaleY:m}}}();a.Mesh={fromIR:function(e){const t=e[2],n=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8];return{getPattern:function(e,h,d){let f;if(i(e,l),d)f=r.Util.singularValueDecompose2dScale(e.mozCurrentTransform);else if(f=r.Util.singularValueDecompose2dScale(h.baseTransform),c){const e=r.Util.singularValueDecompose2dScale(c);f=[f[0]*e[0],f[1]*e[1]]}const p=o(s,f,t,n,a,d?null:u,h.cachedCanvases,h.webGLContext);return d||(e.setTransform.apply(e,h.baseTransform),c&&e.transform.apply(e,c)),e.translate(p.offsetX,p.offsetY),e.scale(p.scaleX,p.scaleY),e.createPattern(p.canvas,"no-repeat")}}}},a.Dummy={fromIR:function(){return{getPattern:function(){return"hotpink"}}}};const s=function(){function e(e,t,n,r,a){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.canvasGraphicsFactory=r,this.baseTransform=a,this.ctx=n}return e.prototype={createPatternCanvas:function(e){const t=this.operatorList,n=this.bbox,a=this.xstep,i=this.ystep,o=this.paintType,s=this.tilingType,c=this.color,l=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+s);const u=n[0],h=n[1],d=n[2],f=n[3],p=r.Util.singularValueDecompose2dScale(this.matrix),g=r.Util.singularValueDecompose2dScale(this.baseTransform),m=[p[0]*g[0],p[1]*g[1]],v=this.getSizeAndScale(a,this.ctx.canvas.width,m[0]),b=this.getSizeAndScale(i,this.ctx.canvas.height,m[1]),y=e.cachedCanvases.getCanvas("pattern",v.size,b.size,!0),w=y.context,x=l.createCanvasGraphics(w);return x.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(x,o,c),x.transform(v.scale,0,0,b.scale,0,0),x.transform(1,0,0,1,-u,-h),this.clipBbox(x,n,u,h,d,f),x.executeOperatorList(t),this.ctx.transform(1,0,0,1,u,h),this.ctx.scale(1/v.scale,1/b.scale),y.canvas},getSizeAndScale:function(e,t,n){e=Math.abs(e);const r=Math.max(3e3,t);let a=Math.ceil(e*n);return a>=r?a=r:n=a/e,{scale:n,size:a}},clipBbox:function(e,t,n,r,a,i){if(Array.isArray(t)&&4===t.length){const t=a-n,o=i-r;e.ctx.rect(n,r,t,o),e.clip(),e.endPath()}},setFillAndStrokeStyleToContext:function(e,t,n){const a=e.ctx,i=e.current;switch(t){case 1:const e=this.ctx;a.fillStyle=e.fillStyle,a.strokeStyle=e.strokeStyle,i.fillColor=e.fillStyle,i.strokeColor=e.strokeStyle;break;case 2:const o=r.Util.makeHexColor(n[0],n[1],n[2]);a.fillStyle=o,a.strokeStyle=o,i.fillColor=o,i.strokeColor=o;break;default:throw new r.FormatError(`Unsupported paint type: ${t}`)}},getPattern:function(e,t){(e=this.ctx).setTransform.apply(e,this.baseTransform),e.transform.apply(e,this.matrix);const n=this.createPatternCanvas(t);return e.createPattern(n,"repeat")}},e}();t.TilingPattern=s},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=void 0===n.workerPort?null:n.workerPort,n.workerSrc=void 0===n.workerSrc?"":n.workerSrc},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var r=n(2);function a(e){if("object"!=typeof e||null===e)return e;switch(e.name){case"AbortException":return new r.AbortException(e.message);case"MissingPDFException":return new r.MissingPDFException(e.message);case"UnexpectedResponseException":return new r.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new r.UnknownErrorException(e.message,e.details);default:return new r.UnknownErrorException(e.message,e.toString())}}t.MessageHandler=class{constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void this._processStreamMessage(t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],1===t.callback)n.resolve(t.data);else{if(2!==t.callback)throw new Error("Unexpected callback case");n.reject(a(t.reason))}return}const r=this.actionHandler[t.action];if(!r)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const e=this.sourceName,i=t.sourceName;new Promise((function(e){e(r(t.data))})).then((function(r){n.postMessage({sourceName:e,targetName:i,callback:1,callbackId:t.callbackId,data:r})}),(function(r){n.postMessage({sourceName:e,targetName:i,callback:2,callbackId:t.callbackId,reason:a(r)})}))}else t.streamId?this._createStreamSink(t):r(t.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const a=this.callbackId++,i=(0,r.createPromiseCapability)();this.callbackCapabilities[a]=i;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:a,data:t},n)}catch(e){i.reject(e)}return i.promise}sendWithStream(e,t,n,i){const o=this.streamId++,s=this.sourceName,c=this.targetName,l=this.comObj;return new ReadableStream({start:n=>{const a=(0,r.createPromiseCapability)();return this.streamControllers[o]={controller:n,startCall:a,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:s,targetName:c,action:e,streamId:o,data:t,desiredSize:n.desiredSize},i),a.promise},pull:e=>{const t=(0,r.createPromiseCapability)();return this.streamControllers[o].pullCall=t,l.postMessage({sourceName:s,targetName:c,stream:6,streamId:o,desiredSize:e.desiredSize}),t.promise},cancel:e=>{(0,r.assert)(e instanceof Error,"cancel must have a valid reason");const t=(0,r.createPromiseCapability)();return this.streamControllers[o].cancelCall=t,this.streamControllers[o].isClosed=!0,l.postMessage({sourceName:s,targetName:c,stream:1,streamId:o,reason:a(e)}),t.promise}},n)}_createStreamSink(e){const t=this,n=this.actionHandler[e.action],i=e.streamId,o=this.sourceName,s=e.sourceName,c=this.comObj,l={enqueue(e,n=1,a){if(this.isCancelled)return;const c=this.desiredSize;this.desiredSize-=n,c>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),t._postMessage({sourceName:o,targetName:s,stream:4,streamId:i,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,c.postMessage({sourceName:o,targetName:s,stream:3,streamId:i}),delete t.streamSinks[i])},error(e){(0,r.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,c.postMessage({sourceName:o,targetName:s,stream:5,streamId:i,reason:a(e)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[i]=l,new Promise((function(t){t(n(e.data,l))})).then((function(){c.postMessage({sourceName:o,targetName:s,stream:8,streamId:i,success:!0})}),(function(e){c.postMessage({sourceName:o,targetName:s,stream:8,streamId:i,reason:a(e)})}))}_processStreamMessage(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj;switch(e.stream){case 8:e.success?this.streamControllers[t].startCall.resolve():this.streamControllers[t].startCall.reject(a(e.reason));break;case 7:e.success?this.streamControllers[t].pullCall.resolve():this.streamControllers[t].pullCall.reject(a(e.reason));break;case 6:if(!this.streamSinks[t]){o.postMessage({sourceName:n,targetName:i,stream:7,streamId:t,success:!0});break}this.streamSinks[t].desiredSize<=0&&e.desiredSize>0&&this.streamSinks[t].sinkCapability.resolve(),this.streamSinks[t].desiredSize=e.desiredSize;const{onPull:s}=this.streamSinks[e.streamId];new Promise((function(e){e(s&&s())})).then((function(){o.postMessage({sourceName:n,targetName:i,stream:7,streamId:t,success:!0})}),(function(e){o.postMessage({sourceName:n,targetName:i,stream:7,streamId:t,reason:a(e)})}));break;case 4:if((0,r.assert)(this.streamControllers[t],"enqueue should have stream controller"),this.streamControllers[t].isClosed)break;this.streamControllers[t].controller.enqueue(e.chunk);break;case 3:if((0,r.assert)(this.streamControllers[t],"close should have stream controller"),this.streamControllers[t].isClosed)break;this.streamControllers[t].isClosed=!0,this.streamControllers[t].controller.close(),this._deleteStreamController(t);break;case 5:(0,r.assert)(this.streamControllers[t],"error should have stream controller"),this.streamControllers[t].controller.error(a(e.reason)),this._deleteStreamController(t);break;case 2:e.success?this.streamControllers[t].cancelCall.resolve():this.streamControllers[t].cancelCall.reject(a(e.reason)),this._deleteStreamController(t);break;case 1:if(!this.streamSinks[t])break;const{onCancel:c}=this.streamSinks[e.streamId];new Promise((function(t){t(c&&c(a(e.reason)))})).then((function(){o.postMessage({sourceName:n,targetName:i,stream:2,streamId:t,success:!0})}),(function(e){o.postMessage({sourceName:n,targetName:i,stream:2,streamId:t,reason:a(e)})})),this.streamSinks[t].sinkCapability.reject(a(e.reason)),this.streamSinks[t].isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(e){await Promise.allSettled([this.streamControllers[e].startCall,this.streamControllers[e].pullCall,this.streamControllers[e].cancelCall].map((function(e){return e&&e.promise}))),delete this.streamControllers[e]}_postMessage(e,t){t&&this.postMessageTransfers?this.comObj.postMessage(e,t):this.comObj.postMessage(e)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(2),a=n(15);t.Metadata=class{constructor(e){(0,r.assert)("string"==typeof e,"Metadata: input is not a string"),e=this._repair(e);const t=new a.SimpleXMLParser({lowerCaseName:!0}).parseFromString(e);this._metadataMap=new Map,t&&this._parse(t),this._data=e}_repair(e){return e.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,(function(e,t){const n=t.replace(/\\([0-3])([0-7])([0-7])/g,(function(e,t,n,r){return String.fromCharCode(64*t+8*n+1*r)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(e,t){switch(t){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${t} isn't defined.`)}));let r="";for(let e=0,t=n.length;e<t;e+=2){const t=256*n.charCodeAt(e)+n.charCodeAt(e+1);r+=t>=32&&t<127&&60!==t&&62!==t&&38!==t?String.fromCharCode(t):"&#x"+(65536+t).toString(16).substring(1)+";"}return">"+r}))}_getSequence(e){const t=e.nodeName;return"rdf:bag"!==t&&"rdf:seq"!==t&&"rdf:alt"!==t?null:e.childNodes.filter((e=>"rdf:li"===e.nodeName))}_getCreators(e){if("dc:creator"!==e.nodeName)return!1;if(!e.hasChildNodes())return!0;const t=e.childNodes[0],n=this._getSequence(t)||[];return this._metadataMap.set(e.nodeName,n.map((e=>e.textContent.trim()))),!0}_parse(e){let t=e.documentElement;if("rdf:rdf"!==t.nodeName)for(t=t.firstChild;t&&"rdf:rdf"!==t.nodeName;)t=t.nextSibling;if(t&&"rdf:rdf"===t.nodeName&&t.hasChildNodes())for(const e of t.childNodes)if("rdf:description"===e.nodeName)for(const t of e.childNodes){const e=t.nodeName;"#text"!==e&&(this._getCreators(t)||this._metadataMap.set(e,t.textContent.trim()))}}getRaw(){return this._data}get(e){return this._metadataMap.get(e)??null}getAll(){return(0,r.objectFromEntries)(this._metadataMap)}has(e){return this._metadataMap.has(e)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleXMLParser=t.SimpleDOMNode=void 0;var r=n(2);function a(e,t){const n=e[t];return" "===n||"\n"===n||"\r"===n||"\t"===n}class i{constructor(e,t){this.nodeName=e,this.nodeValue=t,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const e=this.parentNode.childNodes;if(!e)return;const t=e.indexOf(this);return-1!==t?e[t+1]:void 0}get textContent(){return this.childNodes?this.childNodes.map((function(e){return e.textContent})).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}searchNode(e,t){if(t>=e.length)return this;const n=e[t],r=[];let a=this;for(;;){if(n.name===a.nodeName){if(0!==n.pos){if(0===r.length)return null;{const[i]=r.pop();let o=0;for(const r of i.childNodes)if(n.name===r.nodeName){if(o===n.pos)return r.searchNode(e,t+1);o++}return a.searchNode(e,t+1)}}{const n=a.searchNode(e,t+1);if(null!==n)return n}}if(a.childNodes&&0!==a.childNodes.length)r.push([a,0]),a=a.childNodes[0];else{if(0===r.length)return null;for(;0!==r.length;){const[e,t]=r.pop(),n=t+1;if(n<e.childNodes.length){r.push([e,n]),a=e.childNodes[n];break}}if(0===r.length)return null}}}dump(e){if("#text"!==this.nodeName){if(e.push(`<${this.nodeName}`),this.attributes)for(const t of this.attributes)e.push(` ${t.name}="${(0,r.encodeToXmlString)(t.value)}"`);if(this.hasChildNodes()){e.push(">");for(const t of this.childNodes)t.dump(e);e.push(`</${this.nodeName}>`)}else this.nodeValue?e.push(`>${(0,r.encodeToXmlString)(this.nodeValue)}</${this.nodeName}>`):e.push("/>")}else e.push((0,r.encodeToXmlString)(this.nodeValue))}}t.SimpleDOMNode=i,t.SimpleXMLParser=class extends class{_resolveEntities(e){return e.replace(/&([^;]+);/g,((e,t)=>{if("#x"===t.substring(0,2))return String.fromCodePoint(parseInt(t.substring(2),16));if("#"===t.substring(0,1))return String.fromCodePoint(parseInt(t.substring(1),10));switch(t){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(t)}))}_parseContent(e,t){const n=[];let r=t;function i(){for(;r<e.length&&a(e,r);)++r}for(;r<e.length&&!a(e,r)&&">"!==e[r]&&"/"!==e[r];)++r;const o=e.substring(t,r);for(i();r<e.length&&">"!==e[r]&&"/"!==e[r]&&"?"!==e[r];){i();let t="",o="";for(;r<e.length&&!a(e,r)&&"="!==e[r];)t+=e[r],++r;if(i(),"="!==e[r])return null;++r,i();const s=e[r];if('"'!==s&&"'"!==s)return null;const c=e.indexOf(s,++r);if(c<0)return null;o=e.substring(r,c),n.push({name:t,value:this._resolveEntities(o)}),r=c+1,i()}return{name:o,attributes:n,parsed:r-t}}_parseProcessingInstruction(e,t){let n=t;for(;n<e.length&&!a(e,n)&&">"!==e[n]&&"/"!==e[n];)++n;const r=e.substring(t,n);!function(){for(;n<e.length&&a(e,n);)++n}();const i=n;for(;n<e.length&&("?"!==e[n]||">"!==e[n+1]);)++n;return{name:r,value:e.substring(i,n),parsed:n-t}}parseXml(e){let t=0;for(;t<e.length;){let n=t;if("<"===e[t]){let t;switch(++n,e[n]){case"/":if(++n,t=e.indexOf(">",n),t<0)return void this.onError(-9);this.onEndElement(e.substring(n,t)),n=t+1;break;case"?":++n;const r=this._parseProcessingInstruction(e,n);if("?>"!==e.substring(n+r.parsed,n+r.parsed+2))return void this.onError(-3);this.onPi(r.name,r.value),n+=r.parsed+2;break;case"!":if("--"===e.substring(n+1,n+3)){if(t=e.indexOf("--\x3e",n+3),t<0)return void this.onError(-5);this.onComment(e.substring(n+3,t)),n=t+3}else if("[CDATA["===e.substring(n+1,n+8)){if(t=e.indexOf("]]>",n+8),t<0)return void this.onError(-2);this.onCdata(e.substring(n+8,t)),n=t+3}else{if("DOCTYPE"!==e.substring(n+1,n+8))return void this.onError(-6);{const r=e.indexOf("[",n+8);let a=!1;if(t=e.indexOf(">",n+8),t<0)return void this.onError(-4);if(r>0&&t>r){if(t=e.indexOf("]>",n+8),t<0)return void this.onError(-4);a=!0}const i=e.substring(n+8,t+(a?1:0));this.onDoctype(i),n=t+(a?2:1)}}break;default:const a=this._parseContent(e,n);if(null===a)return void this.onError(-6);let i=!1;if("/>"===e.substring(n+a.parsed,n+a.parsed+2))i=!0;else if(">"!==e.substring(n+a.parsed,n+a.parsed+1))return void this.onError(-9);this.onBeginElement(a.name,a.attributes,i),n+=a.parsed+(i?2:1)}}else{for(;n<e.length&&"<"!==e[n];)n++;const r=e.substring(t,n);this.onText(this._resolveEntities(r))}t=n}}onResolveEntity(e){return`&${e};`}onPi(e,t){}onComment(e){}onCdata(e){}onDoctype(e){}onText(e){}onBeginElement(e,t,n){}onEndElement(e){}onError(e){}}{constructor({hasAttributes:e=!1,lowerCaseName:t=!1}){super(),this._currentFragment=null,this._stack=null,this._errorCode=0,this._hasAttributes=e,this._lowerCaseName=t}parseFromString(e){if(this._currentFragment=[],this._stack=[],this._errorCode=0,this.parseXml(e),0!==this._errorCode)return;const[t]=this._currentFragment;return t?{documentElement:t}:void 0}onResolveEntity(e){switch(e){case"apos":return"'"}return super.onResolveEntity(e)}onText(e){if(function(e){for(let t=0,n=e.length;t<n;t++)if(!a(e,t))return!1;return!0}(e))return;const t=new i("#text",e);this._currentFragment.push(t)}onCdata(e){const t=new i("#text",e);this._currentFragment.push(t)}onBeginElement(e,t,n){this._lowerCaseName&&(e=e.toLowerCase());const r=new i(e);r.childNodes=[],this._hasAttributes&&(r.attributes=t),this._currentFragment.push(r),n||(this._stack.push(this._currentFragment),this._currentFragment=r.childNodes)}onEndElement(e){this._currentFragment=this._stack.pop()||[];const t=this._currentFragment[this._currentFragment.length-1];if(t)for(let e=0,n=t.childNodes.length;e<n;e++)t.childNodes[e].parentNode=t}onError(e){this._errorCode=e}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var r=n(2);class a{constructor(e,t){this.visible=!0,this.name=e,this.intent=t}}t.OptionalContentConfig=class{constructor(e){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==e){this.name=e.name,this.creator=e.creator,this._order=e.order;for(const t of e.groups)this._groups.set(t.id,new a(t.name,t.intent));if("OFF"===e.baseState)for(const e of this._groups)e.visible=!1;for(const t of e.on)this._groups.get(t).visible=!0;for(const t of e.off)this._groups.get(t).visible=!1}}isVisible(e){if("OCG"===e.type)return this._groups.has(e.id)?this._groups.get(e.id).visible:((0,r.warn)(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression&&(0,r.warn)("Visibility expression not supported yet."),!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this._groups.has(t))return(0,r.warn)(`Optional content group not found: ${t}`),!0;if(this._groups.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!this._groups.has(t))return(0,r.warn)(`Optional content group not found: ${t}`),!0;if(!this._groups.get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!this._groups.has(t))return(0,r.warn)(`Optional content group not found: ${t}`),!0;if(!this._groups.get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!this._groups.has(t))return(0,r.warn)(`Optional content group not found: ${t}`),!0;if(this._groups.get(t).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${e.policy}.`),!0}return(0,r.warn)(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){this._groups.has(e)?this._groups.get(e).visible=!!t:(0,r.warn)(`Optional content group not found: ${e}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size?(0,r.objectFromEntries)(this._groups):null}getGroup(e){return this._groups.get(e)||null}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var r=n(2);t.PDFDataTransportStream=class{constructor(e,t){(0,r.assert)(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=e.progressiveDone||!1;const n=e.initialData;if(n?.length>0){const e=new Uint8Array(n).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._contentLength=e.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),this._pdfDataRangeTransport.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),this._pdfDataRangeTransport.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData(e){const t=new Uint8Array(e.chunk).buffer;if(void 0===e.begin)this._fullRequestReader?this._fullRequestReader._enqueue(t):this._queuedChunks.push(t);else{const n=this._rangeReaders.some((function(n){return n._begin===e.begin&&(n._enqueue(t),!0)}));(0,r.assert)(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){if(void 0===e.total){const t=this._rangeReaders[0];t?.onProgress&&t.onProgress({loaded:e.loaded})}else{const t=this._fullRequestReader;t?.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new a(this,e,this._progressiveDone)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new i(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeReaders.slice(0).forEach((function(t){t.cancel(e)})),this._pdfDataRangeTransport.abort()}};class a{constructor(e,t,n=!1){this._stream=e,this._done=n||!1,this._filename=null,this._queuedChunks=t||[],this._loaded=0;for(const e of this._queuedChunks)this._loaded+=e.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[]}progressiveDone(){this._done||(this._done=!0)}}class i{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){this._done||(0===this._requests.length?this._queuedChunk=e:(this._requests.shift().resolve({value:e,done:!1}),this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[]),this._done=!0,this._stream._removeRangeReader(this))}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._stream._removeRangeReader(this)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLContext=void 0;var r=n(2);t.WebGLContext=class{constructor({enable:e=!1}){this._enabled=!0===e}get isEnabled(){let e=this._enabled;return e&&(e=a.tryInitGL()),(0,r.shadow)(this,"isEnabled",e)}composeSMask({layer:e,mask:t,properties:n}){return a.composeSMask(e,t,n)}drawFigures({width:e,height:t,backgroundColor:n,figures:r,context:i}){return a.drawFigures(e,t,n,r,i)}clear(){a.cleanup()}};const a=function(){function e(e,t,n){const r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(r);throw new Error("Error during shader compilation: "+t)}return r}function t(t,n){return e(t,n,t.VERTEX_SHADER)}function n(t,n){return e(t,n,t.FRAGMENT_SHADER)}function r(e,t){const n=e.createProgram();for(let r=0,a=t.length;r<a;++r)e.attachShader(n,t[r]);if(e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS)){const t=e.getProgramInfoLog(n);throw new Error("Error during program linking: "+t)}return n}function a(e,t,n){e.activeTexture(n);const r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),r}let i,o;function s(){i||(o=document.createElement("canvas"),i=o.getContext("webgl",{premultipliedalpha:!1}))}let c=null,l=null;return{tryInitGL(){try{return s(),!!i}catch(e){}return!1},composeSMask:function(e,l,u){const h=e.width,d=e.height;c||function(){s();const e=o;o=null;const a=i;i=null;const l=r(a,[t(a,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),n(a,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);a.useProgram(l);const u={};u.gl=a,u.canvas=e,u.resolutionLocation=a.getUniformLocation(l,"u_resolution"),u.positionLocation=a.getAttribLocation(l,"a_position"),u.backdropLocation=a.getUniformLocation(l,"u_backdrop"),u.subtypeLocation=a.getUniformLocation(l,"u_subtype");const h=a.getAttribLocation(l,"a_texCoord"),d=a.getUniformLocation(l,"u_image"),f=a.getUniformLocation(l,"u_mask"),p=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,p),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),a.STATIC_DRAW),a.enableVertexAttribArray(h),a.vertexAttribPointer(h,2,a.FLOAT,!1,0,0),a.uniform1i(d,0),a.uniform1i(f,1),c=u}();const f=c,p=f.canvas,g=f.gl;p.width=h,p.height=d,g.viewport(0,0,g.drawingBufferWidth,g.drawingBufferHeight),g.uniform2f(f.resolutionLocation,h,d),u.backdrop?g.uniform4f(f.resolutionLocation,u.backdrop[0],u.backdrop[1],u.backdrop[2],1):g.uniform4f(f.resolutionLocation,0,0,0,0),g.uniform1i(f.subtypeLocation,"Luminosity"===u.subtype?1:0);const m=a(g,e,g.TEXTURE0),v=a(g,l,g.TEXTURE1),b=g.createBuffer();return g.bindBuffer(g.ARRAY_BUFFER,b),g.bufferData(g.ARRAY_BUFFER,new Float32Array([0,0,h,0,0,d,0,d,h,0,h,d]),g.STATIC_DRAW),g.enableVertexAttribArray(f.positionLocation),g.vertexAttribPointer(f.positionLocation,2,g.FLOAT,!1,0,0),g.clearColor(0,0,0,0),g.enable(g.BLEND),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),g.clear(g.COLOR_BUFFER_BIT),g.drawArrays(g.TRIANGLES,0,6),g.flush(),g.deleteTexture(m),g.deleteTexture(v),g.deleteBuffer(b),p},drawFigures:function(e,a,c,u,h){l||function(){s();const e=o;o=null;const a=i;i=null;const c=r(a,[t(a,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),n(a,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);a.useProgram(c);const u={};u.gl=a,u.canvas=e,u.resolutionLocation=a.getUniformLocation(c,"u_resolution"),u.scaleLocation=a.getUniformLocation(c,"u_scale"),u.offsetLocation=a.getUniformLocation(c,"u_offset"),u.positionLocation=a.getAttribLocation(c,"a_position"),u.colorLocation=a.getAttribLocation(c,"a_color"),l=u}();const d=l,f=d.canvas,p=d.gl;f.width=e,f.height=a,p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight),p.uniform2f(d.resolutionLocation,e,a);let g=0;for(let e=0,t=u.length;e<t;e++)switch(u[e].type){case"lattice":g+=((u[e].coords.length/u[e].verticesPerRow|0)-1)*(u[e].verticesPerRow-1)*6;break;case"triangles":g+=u[e].coords.length}const m=new Float32Array(2*g),v=new Uint8Array(3*g),b=h.coords,y=h.colors;let w=0,x=0;for(let e=0,t=u.length;e<t;e++){const t=u[e],n=t.coords,r=t.colors;switch(t.type){case"lattice":const e=t.verticesPerRow,a=n.length/e|0;for(let t=1;t<a;t++){let a=t*e+1;for(let t=1;t<e;t++,a++)m[w]=b[n[a-e-1]],m[w+1]=b[n[a-e-1]+1],m[w+2]=b[n[a-e]],m[w+3]=b[n[a-e]+1],m[w+4]=b[n[a-1]],m[w+5]=b[n[a-1]+1],v[x]=y[r[a-e-1]],v[x+1]=y[r[a-e-1]+1],v[x+2]=y[r[a-e-1]+2],v[x+3]=y[r[a-e]],v[x+4]=y[r[a-e]+1],v[x+5]=y[r[a-e]+2],v[x+6]=y[r[a-1]],v[x+7]=y[r[a-1]+1],v[x+8]=y[r[a-1]+2],m[w+6]=m[w+2],m[w+7]=m[w+3],m[w+8]=m[w+4],m[w+9]=m[w+5],m[w+10]=b[n[a]],m[w+11]=b[n[a]+1],v[x+9]=v[x+3],v[x+10]=v[x+4],v[x+11]=v[x+5],v[x+12]=v[x+6],v[x+13]=v[x+7],v[x+14]=v[x+8],v[x+15]=y[r[a]],v[x+16]=y[r[a]+1],v[x+17]=y[r[a]+2],w+=12,x+=18}break;case"triangles":for(let e=0,t=n.length;e<t;e++)m[w]=b[n[e]],m[w+1]=b[n[e]+1],v[x]=y[r[e]],v[x+1]=y[r[e]+1],v[x+2]=y[r[e]+2],w+=2,x+=3}}c?p.clearColor(c[0]/255,c[1]/255,c[2]/255,1):p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT);const C=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,C),p.bufferData(p.ARRAY_BUFFER,m,p.STATIC_DRAW),p.enableVertexAttribArray(d.positionLocation),p.vertexAttribPointer(d.positionLocation,2,p.FLOAT,!1,0,0);const k=p.createBuffer();return p.bindBuffer(p.ARRAY_BUFFER,k),p.bufferData(p.ARRAY_BUFFER,v,p.STATIC_DRAW),p.enableVertexAttribArray(d.colorLocation),p.vertexAttribPointer(d.colorLocation,3,p.UNSIGNED_BYTE,!1,0,0),p.uniform2f(d.scaleLocation,h.scaleX,h.scaleY),p.uniform2f(d.offsetLocation,h.offsetX,h.offsetY),p.drawArrays(p.TRIANGLES,0,g),p.flush(),p.deleteBuffer(C),p.deleteBuffer(k),f},cleanup(){c?.canvas&&(c.canvas.width=0,c.canvas.height=0),l?.canvas&&(l.canvas.width=0,l.canvas.height=0),c=null,l=null}}}()},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var r=n(1),a=n(2),i=n(8),o=n(20);class s{static create(e){switch(e.data.annotationType){case a.AnnotationType.LINK:return new l(e);case a.AnnotationType.TEXT:return new u(e);case a.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new d(e);case"Btn":return e.data.radioButton?new p(e):e.data.checkBox?new f(e):new g(e);case"Ch":return new m(e)}return new h(e);case a.AnnotationType.POPUP:return new v(e);case a.AnnotationType.FREETEXT:return new y(e);case a.AnnotationType.LINE:return new w(e);case a.AnnotationType.SQUARE:return new x(e);case a.AnnotationType.CIRCLE:return new C(e);case a.AnnotationType.POLYLINE:return new k(e);case a.AnnotationType.CARET:return new A(e);case a.AnnotationType.INK:return new _(e);case a.AnnotationType.POLYGON:return new S(e);case a.AnnotationType.HIGHLIGHT:return new E(e);case a.AnnotationType.UNDERLINE:return new I(e);case a.AnnotationType.SQUIGGLY:return new T(e);case a.AnnotationType.STRIKEOUT:return new R(e);case a.AnnotationType.STAMP:return new F(e);case a.AnnotationType.FILEATTACHMENT:return new P(e);default:return new c(e)}}}class c{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderInteractiveForms=e.renderInteractiveForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._mouseState=e.mouseState,t&&(this.container=this._createContainer(n)),r&&(this.quadrilaterals=this._createQuadrilaterals(n))}_createContainer(e=!1){const t=this.data,n=this.page,r=this.viewport,i=document.createElement("section");let o=t.rect[2]-t.rect[0],s=t.rect[3]-t.rect[1];i.setAttribute("data-annotation-id",t.id);const c=a.Util.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]);if(i.style.transform=`matrix(${r.transform.join(",")})`,i.style.transformOrigin=`${-c[0]}px ${-c[1]}px`,!e&&t.borderStyle.width>0){i.style.borderWidth=`${t.borderStyle.width}px`,t.borderStyle.style!==a.AnnotationBorderStyleType.UNDERLINE&&(o-=2*t.borderStyle.width,s-=2*t.borderStyle.width);const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t=`${e}px / ${n}px`;i.style.borderRadius=t}switch(t.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:i.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:i.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:i.style.borderBottomStyle="solid"}t.color?i.style.borderColor=a.Util.makeHexColor(0|t.color[0],0|t.color[1],0|t.color[2]):i.style.borderWidth=0}return i.style.left=`${c[0]}px`,i.style.top=`${c[1]}px`,i.style.width=`${o}px`,i.style.height=`${s}px`,i}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const t=[],n=this.data.rect;for(const n of this.data.quadPoints)this.data.rect=[n[2].x,n[2].y,n[1].x,n[1].y],t.push(this._createContainer(e));return this.data.rect=n,t}_createPopup(e,t){let n=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,n=this.quadrilaterals[0]),e||((e=document.createElement("div")).style.height=n.style.height,e.style.width=n.style.width,n.appendChild(e));const r=new b({container:n,trigger:e,color:t.color,title:t.title,modificationDate:t.modificationDate,contents:t.contents,hideWrapper:!0}).render();r.style.left=n.style.width,n.appendChild(r)}_renderQuadrilaterals(e){return this.quadrilaterals.forEach((t=>{t.className=e})),this.quadrilaterals}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}}class l extends c{constructor(e){super(e,{isRenderable:!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"])),createQuadrilaterals:!0})}render(){const{data:e,linkService:t}=this,n=document.createElement("a");return e.url?(0,r.addLinkAttributes)(n,{url:e.url,target:e.newWindow?r.LinkTarget.BLANK:t.externalLinkTarget,rel:t.externalLinkRel,enabled:t.externalLinkEnabled}):e.action?this._bindNamedAction(n,e.action):e.dest?this._bindLink(n,e.dest):e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions?this._bindJSAction(n,e):this._bindLink(n,""),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(((e,t)=>{const r=0===t?n:n.cloneNode();return e.appendChild(r),e})):(this.container.className="linkAnnotation",this.container.appendChild(n),this.container)}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&(e.className="internalLink")}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),e.className="internalLink"}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const a=n.get(r);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}e.className="internalLink"}}class u extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents)})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}class h extends c{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){return navigator.platform.includes("Win")&&e.ctrlKey||navigator.platform.includes("Mac")&&e.metaKey}_setEventListener(e,t,n,r){t.includes("mouse")?e.addEventListener(t,(e=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(t,(e=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:e.target.checked}})}))}_setEventListeners(e,t,n){for(const[r,a]of t)("Action"===a||this.data.actions?.[a])&&this._setEventListener(e,r,a,n)}}class d extends h{constructor(e){super(e,{isRenderable:e.renderInteractiveForms||!e.data.hasAppearance&&!!e.data.fieldValue})}render(){const e=this.annotationStorage,t=this.data.id;this.container.className="textWidgetAnnotation";let n=null;if(this.renderInteractiveForms){const r=e.getOrCreateValue(t,{value:this.data.fieldValue}).value,a={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=r):(n=document.createElement("input"),n.type="text",n.setAttribute("value",r)),a.userValue=r,n.setAttribute("id",t),n.addEventListener("input",(function(n){e.setValue(t,{value:n.target.value})}));let i=e=>{a.formattedValue&&(e.target.value=a.formattedValue),e.target.setSelectionRange(0,0),a.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions&&(n.addEventListener("focus",(e=>{a.userValue&&(e.target.value=a.userValue)})),n.addEventListener("updatefromsandbox",(function(n){const{detail:r}=n,i={value(){a.userValue=r.value||"",e.setValue(t,{value:a.userValue.toString()}),a.formattedValue||(n.target.value=a.userValue)},valueAsString(){a.formattedValue=r.valueAsString||"",n.target!==document.activeElement&&(n.target.value=a.formattedValue),e.setValue(t,{formattedValue:a.formattedValue})},focus(){setTimeout((()=>n.target.focus({preventScroll:!1})),0)},userName(){n.target.title=r.userName},hidden(){n.target.style.visibility=r.hidden?"hidden":"visible",e.setValue(t,{hidden:r.hidden})},editable(){n.target.disabled=!r.editable},selRange(){const[e,t]=r.selRange;e>=0&&t<n.target.value.length&&n.target.setSelectionRange(e,t)},strokeColor(){const e=r.strokeColor;n.target.style.color=o.ColorConverters[`${e[0]}_HTML`](e.slice(1))}};Object.keys(r).filter((e=>e in i)).forEach((e=>i[e]()))})),this.data.actions)){n.addEventListener("keydown",(e=>{a.beforeInputValue=e.target.value;let n=-1;"Escape"===e.key?n=0:"Enter"===e.key?n=2:"Tab"===e.key&&(n=3),-1!==n&&(a.userValue=e.target.value,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:e.target.value,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const e=i;i=null,n.addEventListener("blur",(n=>{this._mouseState.isDown&&(a.userValue=n.target.value,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:n.target.value,willCommit:!0,commitKey:1,selStart:n.target.selectionStart,selEnd:n.target.selectionEnd}})),e(n)})),n.addEventListener("mousedown",(e=>{a.beforeInputValue=e.target.value,a.beforeInputSelectionRange=null})),n.addEventListener("keyup",(e=>{e.target.selectionStart===e.target.selectionEnd&&(a.beforeInputSelectionRange=null)})),n.addEventListener("select",(e=>{a.beforeInputSelectionRange=[e.target.selectionStart,e.target.selectionEnd]})),"Keystroke"in this.data.actions&&n.addEventListener("input",(e=>{let n=-1,r=-1;a.beforeInputSelectionRange&&([n,r]=a.beforeInputSelectionRange),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a.beforeInputValue,change:e.data,willCommit:!1,selStart:n,selEnd:r}})})),this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(i&&n.addEventListener("blur",i),n.disabled=this.data.readOnly,n.name=this.data.fieldName,null!==this.data.maxLen&&(n.maxLength=this.data.maxLen),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;n.classList.add("comb"),n.style.letterSpacing=`calc(${e}px - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";return this._setTextStyle(n),this.container.appendChild(n),this.container}_setTextStyle(e){const{fontSize:t,fontColor:n}=this.data.defaultAppearanceData,r=e.style;t&&(r.fontSize=`${t}px`),r.color=a.Util.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(r.textAlign=["left","center","right"][this.data.textAlignment])}}class f extends h{constructor(e){super(e,{isRenderable:e.renderInteractiveForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id,r=e.getOrCreateValue(n,{value:t.fieldValue&&"Off"!==t.fieldValue}).value;this.container.className="buttonWidgetAnnotation checkBox";const a=document.createElement("input");return a.disabled=t.readOnly,a.type="checkbox",a.name=this.data.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("id",n),a.addEventListener("change",(function(t){const r=t.target.name;for(const n of document.getElementsByName(r))n!==t.target&&(n.checked=!1,e.setValue(n.parentNode.getAttribute("data-annotation-id"),{value:!1}));e.setValue(n,{value:t.target.checked})})),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",(t=>{const{detail:r}=t,a={value(){t.target.checked="Off"!==r.value,e.setValue(n,{value:t.target.checked})},focus(){setTimeout((()=>t.target.focus({preventScroll:!1})),0)},hidden(){t.target.style.visibility=r.hidden?"hidden":"visible",e.setValue(n,{hidden:r.hidden})},editable(){t.target.disabled=!r.editable}};Object.keys(r).filter((e=>e in a)).forEach((e=>a[e]()))})),this._setEventListeners(a,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this.container.appendChild(a),this.container}}class p extends h{constructor(e){super(e,{isRenderable:e.renderInteractiveForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,t=this.data,n=t.id,r=e.getOrCreateValue(n,{value:t.fieldValue===t.buttonValue}).value,a=document.createElement("input");return a.disabled=t.readOnly,a.type="radio",a.name=t.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("pdfButtonValue",t.buttonValue),a.setAttribute("id",n),a.addEventListener("change",(function(t){const{target:r}=t;for(const t of document.getElementsByName(r.name))t!==r&&e.setValue(t.getAttribute("id"),{value:!1});e.setValue(n,{value:r.checked})})),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",(t=>{const{detail:r}=t,a={value(){const n=r.value;for(const r of document.getElementsByName(t.target.name)){const t=r.getAttribute("id");n===r.getAttribute("pdfButtonValue")?(r.setAttribute("checked",!0),e.setValue(t,{value:!0})):e.setValue(t,{value:!1})}},focus(){setTimeout((()=>t.target.focus({preventScroll:!1})),0)},hidden(){t.target.style.visibility=r.hidden?"hidden":"visible",e.setValue(n,{hidden:r.hidden})},editable(){t.target.disabled=!r.editable}};Object.keys(r).filter((e=>e in a)).forEach((e=>a[e]()))})),this._setEventListeners(a,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this.container.appendChild(a),this.container}}class g extends l{render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),e}}class m extends h{constructor(e){super(e,{isRenderable:e.renderInteractiveForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,t=this.data.id;e.getOrCreateValue(t,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});const n=document.createElement("select");n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.setAttribute("id",t),this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0));for(const e of this.data.options){const t=document.createElement("option");t.textContent=e.displayValue,t.value=e.exportValue,this.data.fieldValue.includes(e.exportValue)&&t.setAttribute("selected",!0),n.appendChild(t)}function r(e){const t=e.target.options;return t[t.selectedIndex].value}return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",(n=>{const{detail:r}=n,a={value(){const a=n.target.options,i=r.value,o=a.indexOf(i);-1!==o&&(a.selectedIndex=o,e.setValue(t,{value:i}))},focus(){setTimeout((()=>n.target.focus({preventScroll:!1})),0)},hidden(){n.target.style.visibility=r.hidden?"hidden":"visible",e.setValue(t,{hidden:r.hidden})},editable(){n.target.disabled=!r.editable}};Object.keys(r).filter((e=>e in a)).forEach((e=>a[e]()))})),n.addEventListener("input",(n=>{const a=r(n);e.setValue(t,{value:a}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",changeEx:a,willCommit:!0,commitKey:1,keyDown:!1}})})),this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))):n.addEventListener("input",(function(n){e.setValue(t,{value:r(n)})})),this.container.appendChild(n),this.container}}class v extends c{constructor(e){super(e,{isRenderable:!(!e.data.title&&!e.data.contents)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const e=`[data-annotation-id="${this.data.parentId}"]`,t=this.layer.querySelectorAll(e);if(0===t.length)return this.container;const n=new b({container:this.container,trigger:Array.from(t),color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),r=this.page,i=a.Util.normalizeRect([this.data.parentRect[0],r.view[3]-this.data.parentRect[1]+r.view[1],this.data.parentRect[2],r.view[3]-this.data.parentRect[3]+r.view[1]]),o=i[0]+this.data.parentRect[2]-this.data.parentRect[0],s=i[1];return this.container.style.transformOrigin=`${-o}px ${-s}px`,this.container.style.left=`${o}px`,this.container.style.top=`${s}px`,this.container.appendChild(n.render()),this.container}}class b{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.title=e.title,this.modificationDate=e.modificationDate,this.contents=e.contents,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const e=document.createElement("div");e.className="popupWrapper",this.hideElement=this.hideWrapper?e:this.container,this.hideElement.setAttribute("hidden",!0);const t=document.createElement("div");t.className="popup";const n=this.color;if(n){const e=.7*(255-n[0])+n[0],r=.7*(255-n[1])+n[1],i=.7*(255-n[2])+n[2];t.style.backgroundColor=a.Util.makeHexColor(0|e,0|r,0|i)}const i=document.createElement("h1");i.textContent=this.title,t.appendChild(i);const o=r.PDFDateString.toDateObject(this.modificationDate);if(o){const e=document.createElement("span");e.textContent="{{date}}, {{time}}",e.dataset.l10nId="annotation_date_string",e.dataset.l10nArgs=JSON.stringify({date:o.toLocaleDateString(),time:o.toLocaleTimeString()}),t.appendChild(e)}const s=this._formatContents(this.contents);return t.appendChild(s),Array.isArray(this.trigger)||(this.trigger=[this.trigger]),this.trigger.forEach((e=>{e.addEventListener("click",this._toggle.bind(this)),e.addEventListener("mouseover",this._show.bind(this,!1)),e.addEventListener("mouseout",this._hide.bind(this,!1))})),t.addEventListener("click",this._hide.bind(this,!0)),e.appendChild(t),e}_formatContents(e){const t=document.createElement("p"),n=e.split(/(?:\r\n?|\n)/);for(let e=0,r=n.length;e<r;++e){const a=n[e];t.appendChild(document.createTextNode(a)),e<r-1&&t.appendChild(document.createElement("br"))}return t}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}class y extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class w extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n),a=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),r.appendChild(a),this.container.append(r),this._createPopup(a,e),this.container}}class x extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n),a=e.borderStyle.width,i=this.svgFactory.createElement("svg:rect");return i.setAttribute("x",a/2),i.setAttribute("y",a/2),i.setAttribute("width",t-a),i.setAttribute("height",n-a),i.setAttribute("stroke-width",a||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","none"),r.appendChild(i),this.container.append(r),this._createPopup(i,e),this.container}}class C extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n),a=e.borderStyle.width,i=this.svgFactory.createElement("svg:ellipse");return i.setAttribute("cx",t/2),i.setAttribute("cy",n/2),i.setAttribute("rx",t/2-a/2),i.setAttribute("ry",n/2-a/2),i.setAttribute("stroke-width",a||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","none"),r.appendChild(i),this.container.append(r),this._createPopup(i,e),this.container}}class k extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n);let a=[];for(const t of e.vertices){const n=t.x-e.rect[0],r=e.rect[3]-t.y;a.push(n+","+r)}a=a.join(" ");const i=this.svgFactory.createElement(this.svgElementName);return i.setAttribute("points",a),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","none"),r.appendChild(i),this.container.append(r),this._createPopup(i,e),this.container}}class S extends k{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class A extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class _ extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n);for(const t of e.inkLists){let n=[];for(const r of t){const t=r.x-e.rect[0],a=e.rect[3]-r.y;n.push(`${t},${a}`)}n=n.join(" ");const a=this.svgFactory.createElement(this.svgElementName);a.setAttribute("points",n),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","none"),this._createPopup(a,e),r.appendChild(a)}return this.container.append(r),this.container}}class E extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class I extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class T extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class R extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class F extends c{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.title||e.data.contents),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class P extends c{constructor(e){super(e,{isRenderable:!0});const{filename:t,content:n}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(t),this.content=n,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,id:(0,a.stringToPDFString)(t),filename:t,content:n})}render(){this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(e,this.data),this.container.appendChild(e),this.container}_download(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,a.warn)("Download cannot be started due to unavailable download manager")}}t.AnnotationLayer=class{static render(e){const t=[],n=[];for(const r of e.annotations)r&&(r.annotationType!==a.AnnotationType.POPUP?t.push(r):n.push(r));n.length&&t.push(...n);for(const n of t){const t=s.create({data:n,layer:e.div,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderInteractiveForms:"boolean"!=typeof e.renderInteractiveForms||e.renderInteractiveForms,svgFactory:new r.DOMSVGFactory,annotationStorage:e.annotationStorage||new i.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,mouseState:e.mouseState||{isDown:!1}});if(t.isRenderable){const r=t.render();if(n.hidden&&(r.style.visibility="hidden"),Array.isArray(r))for(const t of r)e.div.appendChild(t);else t instanceof v?e.div.prepend(r):e.div.appendChild(r)}}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;for(const n of e.annotations){const r=e.div.querySelectorAll(`[data-annotation-id="${n.id}"]`);r&&r.forEach((e=>{e.style.transform=t}))}e.div.removeAttribute("hidden")}}},(e,t)=>{function n(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0,t.ColorConverters=class{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_HTML([e]){const t=n(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_HTML([e,t,r]){return`#${n(e)}${n(t)}${n(r)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_HTML(e){return this.RGB_HTML(this.CMYK_RGB(e))}static RGB_CMYK([e,t,n]){const r=1-e,a=1-t,i=1-n;return["CMYK",r,a,i,Math.min(r,a,i)]}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextLayer=void 0;var r=n(2);const a=function(){const e=/\S/;function t(t,n,a){const i=document.createElement("span"),o={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(t._textDivs.push(i),s=n.str,!e.test(s))return o.isWhitespace=!0,void t._textDivProperties.set(i,o);var s;const c=r.Util.transform(t._viewport.transform,n.transform);let l=Math.atan2(c[1],c[0]);const u=a[n.fontName];u.vertical&&(l+=Math.PI/2);const h=Math.sqrt(c[2]*c[2]+c[3]*c[3]);let d,f,p=h;u.ascent?p=u.ascent*p:u.descent&&(p=(1+u.descent)*p),0===l?(d=c[4],f=c[5]-p):(d=c[4]+p*Math.sin(l),f=c[5]-p*Math.cos(l)),i.style.left=`${d}px`,i.style.top=`${f}px`,i.style.fontSize=`${h}px`,i.style.fontFamily=u.fontFamily,i.textContent=n.str,t._fontInspectorEnabled&&(i.dataset.fontName=n.fontName),0!==l&&(o.angle=l*(180/Math.PI));let g=!1;if(n.str.length>1)g=!0;else if(n.transform[0]!==n.transform[3]){const e=Math.abs(n.transform[0]),t=Math.abs(n.transform[3]);e!==t&&Math.max(e,t)/Math.min(e,t)>1.5&&(g=!0)}if(g&&(u.vertical?o.canvasWidth=n.height*t._viewport.scale:o.canvasWidth=n.width*t._viewport.scale),t._textDivProperties.set(i,o),t._textContentStream&&t._layoutText(i),t._enhanceTextSelection){let e=1,a=0;0!==l&&(e=Math.cos(l),a=Math.sin(l));const o=(u.vertical?n.height:n.width)*t._viewport.scale,s=h;let c,p;0!==l?(c=[e,a,-a,e,d,f],p=r.Util.getAxialAlignedBoundingBox([0,0,o,s],c)):p=[d,f,d+o,f+s],t._bounds.push({left:p[0],top:p[1],right:p[2],bottom:p[3],div:i,size:[o,s],m:c})}}function n(e){if(e._canceled)return;const t=e._textDivs,n=e._capability,r=t.length;if(r>1e5)return e._renderingDone=!0,void n.resolve();if(!e._textContentStream)for(let n=0;n<r;n++)e._layoutText(t[n]);e._renderingDone=!0,n.resolve()}function a(e,t,n){let r=0;for(let a=0;a<n;a++){const n=e[t++];n>0&&(r=r?Math.min(n,r):n)}return r}function i(e,t){t.sort((function(e,t){return e.x1-t.x1||e.index-t.index}));const n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];t.forEach((function(e){let t=0;for(;t<n.length&&n[t].end<=e.y1;)t++;let r,a,i=n.length-1;for(;i>=0&&n[i].start>=e.y2;)i--;let o,s,c=-1/0;for(o=t;o<=i;o++){let t;r=n[o],a=r.boundary,t=a.x2>e.x1?a.index>e.index?a.x1New:e.x1:void 0===a.x2New?(a.x2+e.x1)/2:a.x2New,t>c&&(c=t)}for(e.x1New=c,o=t;o<=i;o++)r=n[o],a=r.boundary,void 0===a.x2New?a.x2>e.x1?a.index>e.index&&(a.x2New=a.x2):a.x2New=c:a.x2New>c&&(a.x2New=Math.max(c,a.x2));const l=[];let u=null;for(o=t;o<=i;o++){r=n[o],a=r.boundary;const t=a.x2>e.x2?a:e;u===t?l[l.length-1].end=r.end:(l.push({start:r.start,end:r.end,boundary:t}),u=t)}for(n[t].start<e.y1&&(l[0].start=e.y1,l.unshift({start:n[t].start,end:e.y1,boundary:n[t].boundary})),e.y2<n[i].end&&(l[l.length-1].end=e.y2,l.push({start:e.y2,end:n[i].end,boundary:n[i].boundary})),o=t;o<=i;o++){if(r=n[o],a=r.boundary,void 0!==a.x2New)continue;let e=!1;for(s=t-1;!e&&s>=0&&n[s].start>=a.y1;s--)e=n[s].boundary===a;for(s=i+1;!e&&s<n.length&&n[s].end<=a.y2;s++)e=n[s].boundary===a;for(s=0;!e&&s<l.length;s++)e=l[s].boundary===a;e||(a.x2New=c)}Array.prototype.splice.apply(n,[t,i-t+1].concat(l))})),n.forEach((function(t){const n=t.boundary;void 0===n.x2New&&(n.x2New=Math.max(e,n.x2))}))}function o({textContent:e,textContentStream:t,container:n,viewport:a,textDivs:i,textContentItemsStr:o,enhanceTextSelection:s}){this._textContent=e,this._textContentStream=t,this._container=n,this._document=n.ownerDocument,this._viewport=a,this._textDivs=i||[],this._textContentItemsStr=o||[],this._enhanceTextSelection=!!s,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)})).catch((()=>{}))}return o.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems(e,n){for(let r=0,a=e.length;r<a;r++)this._textContentItemsStr.push(e[r].str),t(this,e[r],n)},_layoutText(e){const t=this._textDivProperties.get(e);if(t.isWhitespace)return;let n="";if(0!==t.canvasWidth){const{fontSize:r,fontFamily:a}=e.style;r===this._layoutTextLastFontSize&&a===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=`${r} ${a}`,this._layoutTextLastFontSize=r,this._layoutTextLastFontFamily=a);const{width:i}=this._layoutTextCtx.measureText(e.textContent);i>0&&(t.scale=t.canvasWidth/i,n=`scaleX(${t.scale})`)}0!==t.angle&&(n=`rotate(${t.angle}deg) ${n}`),n.length>0&&(this._enhanceTextSelection&&(t.originalTransform=n),e.style.transform=n),this._textDivProperties.set(e,t),this._container.appendChild(e)},_render:function(e){const t=(0,r.createPromiseCapability)();let a=Object.create(null);const i=this._document.createElement("canvas");if(i.mozOpaque=!0,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent){const e=this._textContent.items,n=this._textContent.styles;this._processItems(e,n),t.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const e=()=>{this._reader.read().then((({value:n,done:r})=>{r?t.resolve():(Object.assign(a,n.styles),this._processItems(n.items,a),e())}),t.reject)};this._reader=this._textContentStream.getReader(),e()}}t.promise.then((()=>{a=null,e?this._renderTimer=setTimeout((()=>{n(this),this._renderTimer=null}),e):n(this)}),this._capability.reject)},expandTextDivs:function(e){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function(e){const t=e._bounds,n=e._viewport,o=function(e,t,n){const r=n.map((function(e,t){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom,index:t,x1New:void 0,x2New:void 0}}));i(e,r);const a=new Array(n.length);return r.forEach((function(e){const t=e.index;a[t]={left:e.x1New,top:0,right:e.x2New,bottom:0}})),n.map((function(t,n){const i=a[n],o=r[n];o.x1=t.top,o.y1=e-i.right,o.x2=t.bottom,o.y2=e-i.left,o.index=n,o.x1New=void 0,o.x2New=void 0})),i(t,r),r.forEach((function(e){const t=e.index;a[t].top=e.x1New,a[t].bottom=e.x2New})),a}(n.width,n.height,t);for(let n=0;n<o.length;n++){const i=t[n].div,s=e._textDivProperties.get(i);if(0===s.angle){s.paddingLeft=t[n].left-o[n].left,s.paddingTop=t[n].top-o[n].top,s.paddingRight=o[n].right-t[n].right,s.paddingBottom=o[n].bottom-t[n].bottom,e._textDivProperties.set(i,s);continue}const c=o[n],l=t[n],u=l.m,h=u[0],d=u[1],f=[[0,0],[0,l.size[1]],[l.size[0],0],l.size],p=new Float64Array(64);f.forEach((function(e,t){const n=r.Util.applyTransform(e,u);p[t+0]=h&&(c.left-n[0])/h,p[t+4]=d&&(c.top-n[1])/d,p[t+8]=h&&(c.right-n[0])/h,p[t+12]=d&&(c.bottom-n[1])/d,p[t+16]=d&&(c.left-n[0])/-d,p[t+20]=h&&(c.top-n[1])/h,p[t+24]=d&&(c.right-n[0])/-d,p[t+28]=h&&(c.bottom-n[1])/h,p[t+32]=h&&(c.left-n[0])/-h,p[t+36]=d&&(c.top-n[1])/-d,p[t+40]=h&&(c.right-n[0])/-h,p[t+44]=d&&(c.bottom-n[1])/-d,p[t+48]=d&&(c.left-n[0])/d,p[t+52]=h&&(c.top-n[1])/-h,p[t+56]=d&&(c.right-n[0])/d,p[t+60]=h&&(c.bottom-n[1])/-h}));const g=1+Math.min(Math.abs(h),Math.abs(d));s.paddingLeft=a(p,32,16)/g,s.paddingTop=a(p,48,16)/g,s.paddingRight=a(p,0,16)/g,s.paddingBottom=a(p,16,16)/g,e._textDivProperties.set(i,s)}}(this),this._bounds=null);const t=[],n=[];for(let r=0,a=this._textDivs.length;r<a;r++){const a=this._textDivs[r],i=this._textDivProperties.get(a);i.isWhitespace||(e?(t.length=0,n.length=0,i.originalTransform&&t.push(i.originalTransform),i.paddingTop>0?(n.push(`${i.paddingTop}px`),t.push(`translateY(${-i.paddingTop}px)`)):n.push(0),i.paddingRight>0?n.push(i.paddingRight/i.scale+"px"):n.push(0),i.paddingBottom>0?n.push(`${i.paddingBottom}px`):n.push(0),i.paddingLeft>0?(n.push(i.paddingLeft/i.scale+"px"),t.push(`translateX(${-i.paddingLeft/i.scale}px)`)):n.push(0),a.style.padding=n.join(" "),t.length&&(a.style.transform=t.join(" "))):(a.style.padding=null,a.style.transform=i.originalTransform))}}},function(e){const t=new o({textContent:e.textContent,textContentStream:e.textContentStream,container:e.container,viewport:e.viewport,textDivs:e.textDivs,textContentItemsStr:e.textContentItemsStr,enhanceTextSelection:e.enhanceTextSelection});return t._render(e.timeout),t}}();t.renderTextLayer=a},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var r=n(2),a=n(1),i=n(4);let o=function(){throw new Error("Not implemented: SVGGraphics")};t.SVGGraphics=o;{const e={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},n="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/1999/xlink",u=["butt","round","square"],h=["miter","round","bevel"],d=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),t=new Int32Array(256);for(let e=0;e<256;e++){let n=e;for(let e=0;e<8;e++)n=1&n?3988292384^n>>1&2147483647:n>>1&2147483647;t[e]=n}function n(e,n,r,a){let i=a;const o=n.length;r[i]=o>>24&255,r[i+1]=o>>16&255,r[i+2]=o>>8&255,r[i+3]=255&o,i+=4,r[i]=255&e.charCodeAt(0),r[i+1]=255&e.charCodeAt(1),r[i+2]=255&e.charCodeAt(2),r[i+3]=255&e.charCodeAt(3),i+=4,r.set(n,i),i+=n.length;const s=function(e,n,r){let a=-1;for(let i=n;i<r;i++){const n=255&(a^e[i]);a=a>>>8^t[n]}return-1^a}(r,a+4,i);r[i]=s>>24&255,r[i+1]=s>>16&255,r[i+2]=s>>8&255,r[i+3]=255&s}function a(e){let t=e.length;const n=65535,r=Math.ceil(t/n),a=new Uint8Array(2+t+5*r+4);let i=0;a[i++]=120,a[i++]=156;let o=0;for(;t>n;)a[i++]=0,a[i++]=255,a[i++]=255,a[i++]=0,a[i++]=0,a.set(e.subarray(o,o+n),i),i+=n,o+=n,t-=n;a[i++]=1,a[i++]=255&t,a[i++]=t>>8&255,a[i++]=255&~t,a[i++]=(65535&~t)>>8&255,a.set(e.subarray(o),i),i+=e.length-o;const s=function(e,t,n){let r=1,a=0;for(let t=0;t<n;++t)r=(r+(255&e[t]))%65521,a=(a+r)%65521;return a<<16|r}(e,0,e.length);return a[i++]=s>>24&255,a[i++]=s>>16&255,a[i++]=s>>8&255,a[i++]=255&s,a}return function(t,o,s){return function(t,o,s,c){const l=t.width,u=t.height;let h,d,f;const p=t.data;switch(o){case r.ImageKind.GRAYSCALE_1BPP:d=0,h=1,f=l+7>>3;break;case r.ImageKind.RGB_24BPP:d=2,h=8,f=3*l;break;case r.ImageKind.RGBA_32BPP:d=6,h=8,f=4*l;break;default:throw new Error("invalid format")}const g=new Uint8Array((1+f)*u);let m=0,v=0;for(let e=0;e<u;++e)g[m++]=0,g.set(p.subarray(v,v+f),m),v+=f,m+=f;if(o===r.ImageKind.GRAYSCALE_1BPP&&c){m=0;for(let e=0;e<u;e++){m++;for(let e=0;e<f;e++)g[m++]^=255}}const b=new Uint8Array([l>>24&255,l>>16&255,l>>8&255,255&l,u>>24&255,u>>16&255,u>>8&255,255&u,h,d,0,0,0]),y=function(e){if(!i.isNodeJS)return a(e);try{let t;t=parseInt(process.versions.node)>=8?e:Buffer.from(e);const n=__webpack_require__(258).deflateSync(t,{level:9});return n instanceof Uint8Array?n:new Uint8Array(n)}catch(e){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return a(e)}(g),w=e.length+36+b.length+y.length,x=new Uint8Array(w);let C=0;return x.set(e,C),C+=e.length,n("IHDR",b,x,C),C+=12+b.length,n("IDATA",y,x,C),C+=12+y.length,n("IEND",new Uint8Array(0),x,C),(0,r.createObjectURL)(x,"image/png",s)}(t,void 0===t.kind?r.ImageKind.GRAYSCALE_1BPP:t.kind,o,s)}}();class f{constructor(){this.fontSizeScale=1,this.fontWeight=e.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=e.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,t){this.x=e,this.y=t}}function s(e){if(Number.isInteger(e))return e.toString();const t=e.toFixed(10);let n=t.length-1;if("0"!==t[n])return t;do{n--}while("0"===t[n]);return t.substring(0,"."===t[n]?n:n+1)}function c(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":`scale(${s(e[0])} ${s(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2])return`rotate(${s(180*Math.acos(e[0])/Math.PI)})`}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return`translate(${s(e[4])} ${s(e[5])})`;return`matrix(${s(e[0])} ${s(e[1])} ${s(e[2])} ${s(e[3])} ${s(e[4])} ${s(e[5])})`}let p=0,g=0,m=0;t.SVGGraphics=o=class{constructor(e,t,n=!1){this.svgFactory=new a.DOMSVGFactory,this.current=new f,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n,this._operatorIdMapping=[];for(const e in r.OPS)this._operatorIdMapping[r.OPS[e]]=e}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const t=e.fnArray,n=e.argsArray;for(let e=0,a=t.length;e<a;e++)if(t[e]===r.OPS.dependency)for(const t of n[e]){const e=t.startsWith("g_")?this.commonObjs:this.objs,n=new Promise((n=>{e.get(t,n)}));this.current.dependencies.push(n)}return Promise.all(this.current.dependencies)}transform(e,t,n,a,i,o){const s=[e,t,n,a,i,o];this.transformMatrix=r.Util.transform(this.transformMatrix,s),this.tgrp=null}getSVG(e,t){this.viewport=t;const n=this._initialize(t);return this.loadDependencies(e).then((()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),n)))}convertOpList(e){const t=this._operatorIdMapping,n=e.argsArray,r=e.fnArray,a=[];for(let e=0,i=r.length;e<i;e++){const i=r[e];a.push({fnId:i,fn:t[i],args:n[e]})}return function(e){let t=[];const n=[];for(const r of e)"save"!==r.fn?"restore"===r.fn?t=n.pop():t.push(r):(t.push({fnId:92,fn:"group",items:[]}),n.push(t),t=t[t.length-1].items);return t}(a)}executeOpTree(e){for(const t of e){const e=t.fn,n=t.fnId,a=t.args;switch(0|n){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(a);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(a[0],a[1]);break;case r.OPS.setFont:this.setFont(a);break;case r.OPS.showText:case r.OPS.showSpacedText:this.showText(a[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(a[0],a[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(a[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(a[0]);break;case r.OPS.setHScale:this.setHScale(a[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(a[0],a[1],a[2],a[3],a[4],a[5]);break;case r.OPS.setTextRise:this.setTextRise(a[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(a[0]);break;case r.OPS.setLineWidth:this.setLineWidth(a[0]);break;case r.OPS.setLineJoin:this.setLineJoin(a[0]);break;case r.OPS.setLineCap:this.setLineCap(a[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(a[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(a[0],a[1],a[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(a[0],a[1],a[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(a);break;case r.OPS.setFillColorN:this.setFillColorN(a);break;case r.OPS.shadingFill:this.shadingFill(a[0]);break;case r.OPS.setDash:this.setDash(a[0],a[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(a[0]);break;case r.OPS.setFlatness:this.setFlatness(a[0]);break;case r.OPS.setGState:this.setGState(a[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(a[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(a[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(a[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(a[0],a[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(a[0],a[1],a[2],a[3],a[4],a[5]);break;case r.OPS.constructPath:this.constructPath(a[0],a[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,r.warn)(`Unimplemented operator ${e}`)}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,t,n,r,a,i){const o=this.current;o.textMatrix=o.lineMatrix=[e,t,n,r,a,i],o.textMatrixScale=Math.sqrt(e*e+t*t),o.x=o.lineX=0,o.y=o.lineY=0,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${s(o.fontSize)}px`),o.tspan.setAttributeNS(null,"y",s(-o.y)),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtElement.appendChild(o.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=r.IDENTITY_MATRIX,e.lineMatrix=r.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,t){const n=this.current;n.x=n.lineX+=e,n.y=n.lineY+=t,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${s(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",s(-n.y))}showText(t){const a=this.current,i=a.font,o=a.fontSize;if(0===o)return;const l=a.fontSizeScale,u=a.charSpacing,h=a.wordSpacing,d=a.fontDirection,f=a.textHScale*d,p=i.vertical,g=p?1:-1,m=i.defaultVMetrics,v=o*a.fontMatrix[0];let b=0;for(const e of t){if(null===e){b+=d*h;continue}if((0,r.isNum)(e)){b+=g*e*o/1e3;continue}const t=(e.isSpace?h:0)+u,n=e.fontChar;let s,c,f,y=e.width;if(p){let t;const n=e.vmetric||m;t=e.vmetric?n[1]:.5*y,t=-t*v;const r=n[2]*v;y=n?-n[0]:y,s=t/l,c=(b+r)/l}else s=b/l,c=0;(e.isInFont||i.missingFile)&&(a.xcoords.push(a.x+s),p&&a.ycoords.push(-a.y+c),a.tspan.textContent+=n),f=p?y*v-t*d:y*v+t*d,b+=f}a.tspan.setAttributeNS(null,"x",a.xcoords.map(s).join(" ")),p?a.tspan.setAttributeNS(null,"y",a.ycoords.map(s).join(" ")):a.tspan.setAttributeNS(null,"y",s(-a.y)),p?a.y-=b:a.x+=b*f,a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${s(a.fontSize)}px`),a.fontStyle!==e.fontStyle&&a.tspan.setAttributeNS(null,"font-style",a.fontStyle),a.fontWeight!==e.fontWeight&&a.tspan.setAttributeNS(null,"font-weight",a.fontWeight);const y=a.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(y===r.TextRenderingMode.FILL||y===r.TextRenderingMode.FILL_STROKE?(a.fillColor!==e.fillColor&&a.tspan.setAttributeNS(null,"fill",a.fillColor),a.fillAlpha<1&&a.tspan.setAttributeNS(null,"fill-opacity",a.fillAlpha)):a.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?a.tspan.setAttributeNS(null,"fill","transparent"):a.tspan.setAttributeNS(null,"fill","none"),y===r.TextRenderingMode.STROKE||y===r.TextRenderingMode.FILL_STROKE){const e=1/(a.textMatrixScale||1);this._setStrokeAttributes(a.tspan,e)}let w=a.textMatrix;0!==a.textRise&&(w=w.slice(),w[5]+=a.textRise),a.txtElement.setAttributeNS(null,"transform",`${c(w)} scale(${s(f)}, -1)`),a.txtElement.setAttributeNS(n,"xml:space","preserve"),a.txtElement.appendChild(a.tspan),a.txtgrp.appendChild(a.txtElement),this._ensureTransformGroup().appendChild(a.txtElement)}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const t=(0,r.createObjectURL)(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${t}); }\n`}setFont(e){const t=this.current,n=this.commonObjs.get(e[0]);let a=e[1];t.font=n,!this.embedFonts||n.missingFile||this.embeddedFonts[n.loadedName]||(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),t.fontMatrix=n.fontMatrix||r.FONT_IDENTITY_MATRIX;let i="normal";n.black?i="900":n.bold&&(i="bold");const o=n.italic?"italic":"normal";a<0?(a=-a,t.fontDirection=-1):t.fontDirection=1,t.fontSize=a,t.fontFamily=n.loadedName,t.fontWeight=i,t.fontStyle=o,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",s(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){const e=this.current;e.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&e.txtElement?.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=u[e]}setLineJoin(e){this.current.lineJoin=h[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,t,n){this.current.strokeColor=r.Util.makeHexColor(e,t,n)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,t,n){this.current.fillColor=r.Util.makeHexColor(e,t,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const t=this.viewport.width,n=this.viewport.height,a=r.Util.inverseTransform(this.transformMatrix),i=r.Util.applyTransform([0,0],a),o=r.Util.applyTransform([0,n],a),s=r.Util.applyTransform([t,0],a),c=r.Util.applyTransform([t,n],a),l=Math.min(i[0],o[0],s[0],c[0]),u=Math.min(i[1],o[1],s[1],c[1]),h=Math.max(i[0],o[0],s[0],c[0]),d=Math.max(i[1],o[1],s[1],c[1]),f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",l),f.setAttributeNS(null,"y",u),f.setAttributeNS(null,"width",h-l),f.setAttributeNS(null,"height",d-u),f.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&f.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(f)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const t=e[1],n=e[2],a=e[3]||r.IDENTITY_MATRIX,[i,o,s,c]=e[4],l=e[5],u=e[6],h=e[7],d="shading"+m++,[f,p]=r.Util.applyTransform([i,o],a),[g,v]=r.Util.applyTransform([s,c],a),[b,y]=r.Util.singularValueDecompose2dScale(a),w=l*b,x=u*y,C=this.svgFactory.createElement("svg:pattern");C.setAttributeNS(null,"id",d),C.setAttributeNS(null,"patternUnits","userSpaceOnUse"),C.setAttributeNS(null,"width",w),C.setAttributeNS(null,"height",x),C.setAttributeNS(null,"x",`${f}`),C.setAttributeNS(null,"y",`${p}`);const k=this.svg,S=this.transformMatrix,A=this.current.fillColor,_=this.current.strokeColor,E=this.svgFactory.create(g-f,v-p);if(this.svg=E,this.transformMatrix=a,2===h){const e=r.Util.makeHexColor(...t);this.current.fillColor=e,this.current.strokeColor=e}return this.executeOpTree(this.convertOpList(n)),this.svg=k,this.transformMatrix=S,this.current.fillColor=A,this.current.strokeColor=_,C.appendChild(E.childNodes[0]),this.defs.appendChild(C),`url(#${d})`}_makeShadingPattern(e){switch(e[0]){case"RadialAxial":const t="shading"+m++,n=e[3];let a;switch(e[1]){case"axial":const n=e[4],r=e[5];a=this.svgFactory.createElement("svg:linearGradient"),a.setAttributeNS(null,"id",t),a.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),a.setAttributeNS(null,"x1",n[0]),a.setAttributeNS(null,"y1",n[1]),a.setAttributeNS(null,"x2",r[0]),a.setAttributeNS(null,"y2",r[1]);break;case"radial":const i=e[4],o=e[5],s=e[6],c=e[7];a=this.svgFactory.createElement("svg:radialGradient"),a.setAttributeNS(null,"id",t),a.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),a.setAttributeNS(null,"cx",o[0]),a.setAttributeNS(null,"cy",o[1]),a.setAttributeNS(null,"r",c),a.setAttributeNS(null,"fx",i[0]),a.setAttributeNS(null,"fy",i[1]),a.setAttributeNS(null,"fr",s);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const e of n){const t=this.svgFactory.createElement("svg:stop");t.setAttributeNS(null,"offset",e[0]),t.setAttributeNS(null,"stop-color",e[1]),a.appendChild(t)}return this.defs.appendChild(a),`url(#${t})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,t){this.current.dashArray=e,this.current.dashPhase=t}constructPath(e,t){const n=this.current;let a=n.x,i=n.y,o=[],c=0;for(const n of e)switch(0|n){case r.OPS.rectangle:a=t[c++],i=t[c++];const e=a+t[c++],n=i+t[c++];o.push("M",s(a),s(i),"L",s(e),s(i),"L",s(e),s(n),"L",s(a),s(n),"Z");break;case r.OPS.moveTo:a=t[c++],i=t[c++],o.push("M",s(a),s(i));break;case r.OPS.lineTo:a=t[c++],i=t[c++],o.push("L",s(a),s(i));break;case r.OPS.curveTo:a=t[c+4],i=t[c+5],o.push("C",s(t[c]),s(t[c+1]),s(t[c+2]),s(t[c+3]),s(a),s(i)),c+=6;break;case r.OPS.curveTo2:o.push("C",s(a),s(i),s(t[c]),s(t[c+1]),s(t[c+2]),s(t[c+3])),a=t[c+2],i=t[c+3],c+=4;break;case r.OPS.curveTo3:a=t[c+2],i=t[c+3],o.push("C",s(t[c]),s(t[c+1]),s(a),s(i),s(a),s(i)),c+=4;break;case r.OPS.closePath:o.push("Z")}o=o.join(" "),n.path&&e.length>0&&e[0]!==r.OPS.rectangle&&e[0]!==r.OPS.moveTo?o=n.path.getAttributeNS(null,"d")+o:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(n.path)),n.path.setAttributeNS(null,"d",o),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(a,i)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element)return void(this.pendingClip=null);const t="clippath"+p++,n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",t),n.setAttributeNS(null,"transform",c(this.transformMatrix));const r=e.element.cloneNode(!0);"evenodd"===this.pendingClip?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.appendChild(r),this.defs.appendChild(n),e.activeClipUrl&&(e.clipGroup=null,this.extraStack.forEach((function(e){e.clipGroup=null})),n.setAttributeNS(null,"clip-path",e.activeClipUrl)),e.activeClipUrl=`url(#${t})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const t=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",t)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n);break;case"CA":this.setStrokeAlpha(n);break;case"ca":this.setFillAlpha(n);break;default:(0,r.warn)(`Unimplemented graphic state operator ${t}`)}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,t=1){const n=this.current;let r=n.dashArray;1!==t&&r.length>0&&(r=r.map((function(e){return t*e}))),e.setAttributeNS(null,"stroke",n.strokeColor),e.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",s(n.miterLimit)),e.setAttributeNS(null,"stroke-linecap",n.lineCap),e.setAttributeNS(null,"stroke-linejoin",n.lineJoin),e.setAttributeNS(null,"stroke-width",s(t*n.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",r.map(s).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",s(t*n.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(e)}paintImageXObject(e){const t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);t?this.paintInlineImageXObject(t):(0,r.warn)(`Dependent image with object ID ${e} is not ready yet`)}paintInlineImageXObject(e,t){const n=e.width,r=e.height,a=d(e,this.forceDataSchema,!!t),i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width",s(n)),i.setAttributeNS(null,"height",s(r)),this.current.element=i,this.clip("nonzero");const o=this.svgFactory.createElement("svg:image");o.setAttributeNS(l,"xlink:href",a),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",s(-r)),o.setAttributeNS(null,"width",s(n)+"px"),o.setAttributeNS(null,"height",s(r)+"px"),o.setAttributeNS(null,"transform",`scale(${s(1/n)} ${s(-1/r)})`),t?t.appendChild(o):this._ensureTransformGroup().appendChild(o)}paintImageMaskXObject(e){const t=this.current,n=e.width,r=e.height,a=t.fillColor;t.maskId="mask"+g++;const i=this.svgFactory.createElement("svg:mask");i.setAttributeNS(null,"id",t.maskId);const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width",s(n)),o.setAttributeNS(null,"height",s(r)),o.setAttributeNS(null,"fill",a),o.setAttributeNS(null,"mask",`url(#${t.maskId})`),this.defs.appendChild(i),this._ensureTransformGroup().appendChild(o),this.paintInlineImageXObject(e,i)}paintFormXObjectBegin(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){const e=t[2]-t[0],n=t[3]-t[1],r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x",t[0]),r.setAttributeNS(null,"y",t[1]),r.setAttributeNS(null,"width",s(e)),r.setAttributeNS(null,"height",s(n)),this.current.element=r,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const t=this.svgFactory.create(e.width,e.height),n=this.svgFactory.createElement("svg:defs");t.appendChild(n),this.defs=n;const r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",c(e.transform)),t.appendChild(r),this.svg=r,t}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",c(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var r=n(2),a=n(24);const i=__webpack_require__(172),o=__webpack_require__(1),s=__webpack_require__(779),c=__webpack_require__(558),l=/^file:\/\/\/[a-zA-Z]:\//;t.PDFNodeStream=class{constructor(e){this.source=e,this.url=function(e){const t=c.parse(e);return"file:"===t.protocol||t.host?t:/^[a-z]:[/\\]/i.test(e)?c.parse(`file:///${e}`):(t.host||(t.protocol="file:"),t)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new f(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new m(this,e,t):new p(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeRequestReaders.slice(0).forEach((function(t){t.cancel(e)}))}};class u{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class h{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class f extends u{constructor(e){super(e);const t=t=>{if(404===t.statusCode){const e=new r.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const n=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:i,suggestedLength:o}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=o||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(n)};this._request=null,"http:"===this._url.protocol?this._request=o.request(d(this._url,e.httpHeaders),t):this._request=s.request(d(this._url,e.httpHeaders),t),this._request.on("error",(e=>{this._storedError=e,this._headersCapability.reject(e)})),this._request.end()}}class p extends h{constructor(e,t,n){super(e),this._httpHeaders={};for(const t in e.httpHeaders){const n=e.httpHeaders[t];void 0!==n&&(this._httpHeaders[t]=n)}this._httpHeaders.Range=`bytes=${t}-${n-1}`;const a=e=>{if(404!==e.statusCode)this._setReadableStream(e);else{const e=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=e}};this._request=null,"http:"===this._url.protocol?this._request=o.request(d(this._url,this._httpHeaders),a):this._request=s.request(d(this._url,this._httpHeaders),a),this._request.on("error",(e=>{this._storedError=e})),this._request.end()}}class g extends u{constructor(e){super(e);let t=decodeURIComponent(this._url.path);l.test(this._url.href)&&(t=t.replace(/^\//,"")),i.lstat(t,((e,n)=>{if(e)return"ENOENT"===e.code&&(e=new r.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=n.size,this._setReadableStream(i.createReadStream(t)),this._headersCapability.resolve()}))}}class m extends h{constructor(e,t,n){super(e);let r=decodeURIComponent(this._url.path);l.test(this._url.href)&&(r=r.replace(/^\//,"")),this._setReadableStream(i.createReadStream(r,{start:t,end:n-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function(e,t){return 404===e||0===e&&t.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+t+'".'):new r.UnexpectedResponseException("Unexpected server response ("+e+') while retrieving PDF "'+t+'".',e)},t.extractFilenameFromHeader=function(e){const t=e("Content-Disposition");if(t){let e=(0,a.getFilenameFromContentDispositionHeader)(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(e){}if(/\.pdf$/i.test(e))return e}return null},t.validateRangeRequestCapabilities=function({getResponseHeader:e,isHttp:t,rangeChunkSize:n,disableRange:a}){(0,r.assert)(n>0,"Range chunk size must be larger than zero");const i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(e("Content-Length"),10);return Number.isInteger(o)?(i.suggestedLength=o,o<=2*n||a||!t||"bytes"!==e("Accept-Ranges")||"identity"!==(e("Content-Encoding")||"identity")||(i.allowRangeRequests=!0),i):i},t.validateResponseStatus=function(e){return 200===e||206===e};var r=n(2),a=n(25)},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){let t=!0,n=r("filename\\*","i").exec(e);if(n){n=n[1];let e=o(n);return e=unescape(e),e=s(e),e=c(e),i(e)}if(n=function(e){const t=[];let n;const a=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=a.exec(e));){let[,e,r,a]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[r,a]}const i=[];for(let e=0;e<t.length&&e in t;++e){let[n,r]=t[e];r=o(r),n&&(r=unescape(r),0===e&&(r=s(r))),i.push(r)}return i.join("")}(e),n)return i(c(n));if(n=r("filename","i").exec(e),n){n=n[1];let e=o(n);return e=c(e),i(e)}function r(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function a(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const r=new TextDecoder(e,{fatal:!0}),a=Array.from(n,(function(e){return 255&e.charCodeAt(0)}));n=r.decode(new Uint8Array(a)),t=!1}catch(r){if(/^utf-?8$/i.test(e))try{n=decodeURIComponent(escape(n)),t=!1}catch(e){}}}return n}function i(e){return t&&/[\x80-\xff]/.test(e)&&(e=a("utf-8",e),t&&(e=a("iso-8859-1",e))),e}function o(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replace(/\\(.)/g,"$1")}e=t.join('"')}return e}function s(e){const t=e.indexOf("'");return-1===t?e:a(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function c(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,r){if("q"===n||"Q"===n)return a(t,r=(r=r.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{r=atob(r)}catch(e){}return a(t,r)}))}return""}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r=n(2),a=n(24);class i{constructor(e,t){this.url=e,t=t||{},this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this.withCredentials=t.withCredentials||!1,this.getXhr=t.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const r={begin:e,end:t};for(const e in n)r[e]=n[e];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=this.getXhr(),n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const e in this.httpHeaders){const n=this.httpHeaders[e];void 0!==n&&t.setRequestHeader(e,n)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress&&n.onProgress(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==a.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===a.status&&this.isHttp)return void(n.onError&&n.onError(a.status));const i=a.status||200;if((200!==i||206!==n.expectedStatus)&&i!==n.expectedStatus)return void(n.onError&&n.onError(a.status));const o=function(e){const t=e.response;return"string"!=typeof t?t:(0,r.stringToBytes)(t).buffer}(a);if(206===i){const e=a.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);n.onDone({begin:parseInt(t[1],10),chunk:o})}else o?n.onDone({begin:0,chunk:o}):n.onError&&n.onError(a.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}t.PDFNetworkStream=class{constructor(e){this._source=e,this._manager=new i(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new o(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new s(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeRequestReaders.slice(0).forEach((function(t){t.cancel(e)}))}};class o{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=e=>t.getResponseHeader(e),{allowRangeRequests:r,suggestedLength:i}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,this._cachedChunks.length>0||(this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[])}_onError(e){const t=this._url,n=(0,a.createResponseStatusError)(e,t);this._storedError=n,this._headersReceivedCapability.reject(n),this._requests.forEach((function(e){e.reject(n)})),this._requests=[],this._cachedChunks=[]}_onProgress(e){this.onProgress&&this.onProgress({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e),this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class s{constructor(e,t,n){this._manager=e;const r={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=e.requestRange(t,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._close()}_onProgress(e){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,r.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var r=n(2),a=n(24);function i(e,t,n){return{method:"GET",headers:e,signal:n?.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function o(e){const t=new Headers;for(const n in e){const r=e[n];void 0!==r&&t.append(n,r)}return t}t.PDFFetchStream=class{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new s(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new c(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeRequestReaders.slice(0).forEach((function(t){t.cancel(e)}))}};class s{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=o(this._stream.httpHeaders);const n=t.url;fetch(n,i(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,a.validateResponseStatus)(e.status))throw(0,a.createResponseStatusError)(e.status,n);this._reader=e.body.getReader(),this._headersCapability.resolve();const t=t=>e.headers.get(t),{allowRangeRequests:i,suggestedLength:o}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=o||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}}class c{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!s.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${n-1}`);const c=s.url;fetch(c,i(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,a.validateResponseStatus)(e.status))throw(0,a.createResponseStatusError)(e.status,c);this._readCapability.resolve(),this._reader=e.body.getReader()})).catch((e=>{if("AbortError"!==e?.name)throw e})),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__w_pdfjs_require__),t.exports}return __w_pdfjs_require__(0)})()},module.exports=factory()},16:(e,t,n)=>{("undefined"!=typeof window?window:{}).pdfjsWorker=n(624)},624:function(e){var t;t=function(){return(()=>{"use strict";var e=[(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"WorkerMessageHandler",{enumerable:!0,get:function(){return r.WorkerMessageHandler}});var r=n(1)},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerTask=t.WorkerMessageHandler=void 0;var r,a=n(2),i=n(5),o=n(6),s=n(46),c=n(4),l=n(48),u=n(49),h=n(8);class d{constructor(e){this.name=e,this.terminated=!1,this._capability=(0,a.createPromiseCapability)()}get finished(){return this._capability.promise}finish(){this._capability.resolve()}terminate(){this.terminated=!0}ensureNotTerminated(){if(this.terminated)throw new Error("Worker task was terminated")}}t.WorkerTask=d;class f{static setup(e,t){var n=!1;e.on("test",(function(t){if(n)return;if(n=!0,!(t instanceof Uint8Array))return void e.send("test",null);const r=255===t[0];e.postMessageTransfers=r,e.send("test",{supportTransfers:r})})),e.on("configure",(function(e){(0,a.setVerbosityLevel)(e.verbosity)})),e.on("GetDocRequest",(function(e){return f.createDocumentHandler(e,t)}))}static createDocumentHandler(e,t){var n,r=!1,c=null,f=[];const p=(0,a.getVerbosityLevel)(),g=e.apiVersion;if("2.7.570"!==g)throw new Error(`The API version "${g}" does not match the Worker version "2.7.570".`);const m=[];for(const e in[])m.push(e);if(m.length)throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+m.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");if("undefined"==typeof ReadableStream)throw new Error("The browser/environment lacks native support for critical functionality used by the PDF.js library (e.g. `ReadableStream`); please use an `es5`-build instead.");var v=e.docId,b=e.docBaseUrl,y=e.docId+"_worker",w=new l.MessageHandler(y,v,t);function x(){if(r)throw new Error("Worker was terminated")}function C(e){f.push(e)}function k(e){e.finish();var t=f.indexOf(e);f.splice(t,1)}async function S(e){await n.ensureDoc("checkHeader"),await n.ensureDoc("parseStartXRef"),await n.ensureDoc("parse",[e]),e||await n.ensureDoc("checkFirstPage");const[t,r]=await Promise.all([n.ensureDoc("numPages"),n.ensureDoc("fingerprint")]);return{numPages:t,fingerprint:r}}return w.postMessageTransfers=e.postMessageTransfers,w.on("GetPage",(function(e){return n.getPage(e.pageIndex).then((function(e){return Promise.all([n.ensure(e,"rotate"),n.ensure(e,"ref"),n.ensure(e,"userUnit"),n.ensure(e,"view")]).then((function([e,t,n,r]){return{rotate:e,ref:t,userUnit:n,view:r}}))}))})),w.on("GetPageIndex",(function({ref:e}){const t=i.Ref.get(e.num,e.gen);return n.ensureCatalog("getPageIndex",[t])})),w.on("GetDestinations",(function(e){return n.ensureCatalog("destinations")})),w.on("GetDestination",(function(e){return n.ensureCatalog("getDestination",[e.id])})),w.on("GetPageLabels",(function(e){return n.ensureCatalog("pageLabels")})),w.on("GetPageLayout",(function(e){return n.ensureCatalog("pageLayout")})),w.on("GetPageMode",(function(e){return n.ensureCatalog("pageMode")})),w.on("GetViewerPreferences",(function(e){return n.ensureCatalog("viewerPreferences")})),w.on("GetOpenAction",(function(e){return n.ensureCatalog("openAction")})),w.on("GetAttachments",(function(e){return n.ensureCatalog("attachments")})),w.on("GetJavaScript",(function(e){return n.ensureCatalog("javaScript")})),w.on("GetDocJSActions",(function(e){return n.ensureCatalog("jsActions")})),w.on("GetPageJSActions",(function({pageIndex:e}){return n.getPage(e).then((function(e){return e.jsActions}))})),w.on("GetOutline",(function(e){return n.ensureCatalog("documentOutline")})),w.on("GetOptionalContentConfig",(function(e){return n.ensureCatalog("optionalContentConfig")})),w.on("GetPermissions",(function(e){return n.ensureCatalog("permissions")})),w.on("GetMetadata",(function(e){return Promise.all([n.ensureDoc("documentInfo"),n.ensureCatalog("metadata")])})),w.on("GetMarkInfo",(function(e){return n.ensureCatalog("markInfo")})),w.on("GetData",(function(e){return n.requestLoadedStream(),n.onLoadedStream().then((function(e){return e.bytes}))})),w.on("GetStats",(function(e){return n.ensureXRef("stats")})),w.on("GetAnnotations",(function({pageIndex:e,intent:t}){return n.getPage(e).then((function(e){return e.getAnnotationsData(t)}))})),w.on("GetFieldObjects",(function(e){return n.ensureDoc("fieldObjects")})),w.on("HasJSActions",(function(e){return n.ensureDoc("hasJSActions")})),w.on("GetCalculationOrderIds",(function(e){return n.ensureDoc("calculationOrderIds")})),w.on("SaveDocument",(function({numPages:e,annotationStorage:t,filename:r}){n.requestLoadedStream();const o=[n.onLoadedStream(),n.ensureCatalog("acroForm"),n.ensureDoc("xref"),n.ensureDoc("startXRef")];for(let r=0;r<e;r++)o.push(n.getPage(r).then((function(e){const n=new d(`Save: page ${r}`);return C(n),e.save(w,n,t).finally((function(){k(n)}))})));return Promise.all(o).then((function([e,t,n,o,...c]){let l=[];for(const e of c)l=e.filter((e=>null!==e)).reduce(((e,t)=>e.concat(t)),l);if(0===l.length)return e.bytes;const u=t instanceof i.Dict&&t.get("XFA")||[];let h=null;if(Array.isArray(u))for(let e=0,t=u.length;e<t;e+=2)"datasets"===u[e]&&(h=u[e+1]);else(0,a.warn)("Unsupported XFA type.");let d=Object.create(null);if(n.trailer){const e=Object.create(null),t=n.trailer.get("Info")||null;t instanceof i.Dict&&t.forEach(((t,n)=>{(0,a.isString)(t)&&(0,a.isString)(n)&&(e[t]=(0,a.stringToPDFString)(n))})),d={rootRef:n.trailer.getRaw("Root")||null,encrypt:n.trailer.getRaw("Encrypt")||null,newRef:n.getNewRef(),infoRef:n.trailer.getRaw("Info")||null,info:e,fileIds:n.trailer.getRaw("ID")||null,startXRef:o,filename:r}}return n.resetNewRef(),(0,s.incrementalUpdate)({originalData:e.bytes,xrefInfo:d,newRefs:l,xref:n,datasetsRef:h})}))})),w.on("GetOperatorList",(function(e,t){var r=e.pageIndex;n.getPage(r).then((function(n){var i=new d(`GetOperatorList: page ${r}`);C(i);const o=p>=a.VerbosityLevel.INFOS?Date.now():0;n.getOperatorList({handler:w,sink:t,task:i,intent:e.intent,renderInteractiveForms:e.renderInteractiveForms,annotationStorage:e.annotationStorage}).then((function(e){k(i),o&&(0,a.info)(`page=${r+1} - getOperatorList: time=${Date.now()-o}ms, len=${e.length}`),t.close()}),(function(e){k(i),i.terminated||(w.send("UnsupportedFeature",{featureId:a.UNSUPPORTED_FEATURES.errorOperatorList}),t.error(e))}))}))})),w.on("GetTextContent",(function(e,t){var r=e.pageIndex;t.onPull=function(e){},t.onCancel=function(e){},n.getPage(r).then((function(n){var i=new d("GetTextContent: page "+r);C(i);const o=p>=a.VerbosityLevel.INFOS?Date.now():0;n.extractTextContent({handler:w,task:i,sink:t,normalizeWhitespace:e.normalizeWhitespace,combineTextItems:e.combineTextItems}).then((function(){k(i),o&&(0,a.info)(`page=${r+1} - getTextContent: time=`+(Date.now()-o)+"ms"),t.close()}),(function(e){k(i),i.terminated||t.error(e)}))}))})),w.on("FontFallback",(function(e){return n.fontFallback(e.id,w)})),w.on("Cleanup",(function(e){return n.cleanup(!0)})),w.on("Terminate",(function(e){r=!0;const t=[];if(n){n.terminate(new a.AbortException("Worker was terminated."));const e=n.cleanup();t.push(e),n=null}else(0,i.clearPrimitiveCaches)();return c&&c(new a.AbortException("Worker was terminated.")),f.forEach((function(e){t.push(e.finished),e.terminate()})),Promise.all(t).then((function(){w.destroy(),w=null}))})),w.on("Ready",(function(t){!function(e){function t(e){x(),w.send("GetDoc",{pdfInfo:e})}function i(e){if(x(),e instanceof a.PasswordException){var t=new d(`PasswordException: response ${e.code}`);C(t),w.sendWithPromise("PasswordRequest",e).then((function({password:e}){k(t),n.updatePassword(e),s()})).catch((function(){k(t),w.send("DocException",e)}))}else e instanceof a.InvalidPDFException||e instanceof a.MissingPDFException||e instanceof a.UnexpectedResponseException||e instanceof a.UnknownErrorException?w.send("DocException",e):w.send("DocException",new a.UnknownErrorException(e.message,e.toString()))}function s(){x(),S(!1).then(t,(function(e){x(),e instanceof h.XRefParseException?(n.requestLoadedStream(),n.onLoadedStream().then((function(){x(),S(!0).then(t,i)}))):i(e)}))}x(),function(e,t){var n=(0,a.createPromiseCapability)();let r;var i=e.source;if(i.data){try{r=new o.LocalPdfManager(v,i.data,i.password,t,b),n.resolve(r)}catch(e){n.reject(e)}return n.promise}var s,l=[];try{s=new u.PDFWorkerStream(w)}catch(e){return n.reject(e),n.promise}var h=s.getFullReader();h.headersReady.then((function(){if(h.isRangeSupported){var e=i.disableAutoFetch||h.isStreamingSupported;r=new o.NetworkPdfManager(v,s,{msgHandler:w,password:i.password,length:h.contentLength,disableAutoFetch:e,rangeChunkSize:i.rangeChunkSize},t,b);for(let e=0;e<l.length;e++)r.sendProgressiveData(l[e]);l=[],n.resolve(r),c=null}})).catch((function(e){n.reject(e),c=null}));var d=0;return new Promise((function(e,s){var u=function({value:e,done:f}){try{if(x(),f)return r||function(){var e=(0,a.arraysToBytes)(l);i.length&&e.length!==i.length&&(0,a.warn)("reported HTTP length is different from actual");try{r=new o.LocalPdfManager(v,e,i.password,t,b),n.resolve(r)}catch(e){n.reject(e)}l=[]}(),void(c=null);d+=(0,a.arrayByteLength)(e),h.isStreamingSupported||w.send("DocProgress",{loaded:d,total:Math.max(d,h.contentLength||0)}),r?r.sendProgressiveData(e):l.push(e),h.read().then(u,s)}catch(e){s(e)}};h.read().then(u,s)})).catch((function(e){n.reject(e),c=null})),c=function(e){s.cancelAllRequests(e)},n.promise}(e,{maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties}).then((function(e){if(r)throw e.terminate(new a.AbortException("Worker was terminated.")),new Error("Worker was terminated");(n=e).onLoadedStream().then((function(e){w.send("DataLoaded",{length:e.bytes.byteLength})}))})).then(s,i)}(e),e=null})),y}static initializeFromPort(e){var t=new l.MessageHandler("worker","main",e);f.setup(t,e),t.send("ready",null)}}t.WorkerMessageHandler=f,"undefined"==typeof window&&!c.isNodeJS&&"undefined"!=typeof self&&"function"==typeof(r=self).postMessage&&"onmessage"in r&&f.initializeFromPort(self)},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.arrayByteLength=d,t.arraysToBytes=function(e){const t=e.length;if(1===t&&e[0]instanceof Uint8Array)return e[0];let n=0;for(let r=0;r<t;r++)n+=d(e[r]);let r=0;const a=new Uint8Array(n);for(let n=0;n<t;n++){let t=e[n];t instanceof Uint8Array||(t="string"==typeof t?h(t):new Uint8Array(t));const i=t.byteLength;a.set(t,r),r+=i}return a},t.assert=s,t.bytesToString=function(e){s(null!==e&&"object"==typeof e&&void 0!==e.length,"Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const r=[];for(let a=0;a<t;a+=n){const i=Math.min(a+n,t),o=e.subarray(a,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")},t.createPromiseCapability=function(){const e=Object.create(null);let t=!1;return Object.defineProperty(e,"settled",{get:()=>t}),e.promise=new Promise((function(n,r){e.resolve=function(e){t=!0,n(e)},e.reject=function(e){t=!0,r(e)}})),e},t.createValidAbsoluteUrl=function(e,t){if(!e)return null;try{const n=t?new URL(e,t):new URL(e);if(function(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(e){}return null},t.encodeToXmlString=function(e){const t=[];let n=0;for(let r=0,a=e.length;r<a;r++){const a=e.codePointAt(r);if(32<=a&&a<=126){const i=y[a];i&&(n<r&&t.push(e.substring(n,r)),t.push(i),n=r+1)}else n<r&&t.push(e.substring(n,r)),t.push(`&#x${a.toString(16).toUpperCase()};`),a>55295&&(a<57344||a>65533)&&r++,n=r+1}return 0===t.length?e:(n<e.length&&t.push(e.substring(n,e.length)),t.join(""))},t.escapeString=function(e){return e.replace(/([()\\\n\r])/g,(e=>"\n"===e?"\\n":"\r"===e?"\\r":`\\${e}`))},t.getModificationDate=function(e=new Date){return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")},t.getVerbosityLevel=function(){return a},t.info=function(e){a>=r.INFOS&&console.log(`Info: ${e}`)},t.isArrayBuffer=function(e){return"object"==typeof e&&null!==e&&void 0!==e.byteLength},t.isArrayEqual=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},t.isAscii=function(e){return/^[\x00-\x7F]*$/.test(e)},t.isBool=function(e){return"boolean"==typeof e},t.isNum=function(e){return"number"==typeof e},t.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch(e){return!1}const r=new URL(t,n);return n.origin===r.origin},t.isString=function(e){return"string"==typeof e},t.objectFromEntries=function(e){return Object.assign(Object.create(null),Object.fromEntries(e))},t.objectSize=function(e){return Object.keys(e).length},t.removeNullCharacters=function(e){return"string"!=typeof e?(i("The argument for removeNullCharacters must be a string."),e):e.replace(u,"")},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(a=e)},t.shadow=c,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=h,t.stringToPDFString=function(e){const t=e.length,n=[];if("þ"===e[0]&&"ÿ"===e[1])for(let r=2;r<t;r+=2)n.push(String.fromCharCode(e.charCodeAt(r)<<8|e.charCodeAt(r+1)));else if("ÿ"===e[0]&&"þ"===e[1])for(let r=2;r<t;r+=2)n.push(String.fromCharCode(e.charCodeAt(r+1)<<8|e.charCodeAt(r)));else for(let r=0;r<t;++r){const t=v[e.charCodeAt(r)];n.push(t?String.fromCharCode(t):e.charAt(r))}return n.join("")},t.stringToUTF16BEString=function(e){const t=["þÿ"];for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);t.push(String.fromCharCode(r>>8&255)),t.push(String.fromCharCode(255&r))}return t.join("")},t.stringToUTF8String=function(e){return decodeURIComponent(escape(e))},t.unreachable=o,t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=i,t.VerbosityLevel=t.Util=t.UNSUPPORTED_FEATURES=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.StreamType=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.IsLittleEndianCached=t.IsEvalSupportedCached=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.createObjectURL=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,n(3),t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.PageActionEventType={O:"PageOpen",C:"PageClose"},t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const r={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=r,t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let a=r.WARNINGS;function i(e){a>=r.WARNINGS&&console.log(`Warning: ${e}`)}function o(e){throw new Error(e)}function s(e,t){e||o(t)}function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}const l=function(){function e(t){this.constructor===e&&o("Cannot initialize BaseException."),this.message=t,this.name=this.constructor.name}return e.prototype=new Error,e.constructor=e,e}();t.BaseException=l,t.PasswordException=class extends l{constructor(e,t){super(e),this.code=t}},t.UnknownErrorException=class extends l{constructor(e,t){super(e),this.details=t}},t.InvalidPDFException=class extends l{},t.MissingPDFException=class extends l{},t.UnexpectedResponseException=class extends l{constructor(e,t){super(e),this.status=t}},t.FormatError=class extends l{},t.AbortException=class extends l{};const u=/\x00/g;function h(e){s("string"==typeof e,"Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}function d(e){return void 0!==e.length?e.length:(s(void 0!==e.byteLength,"arrayByteLength - invalid argument."),e.byteLength)}const f={get value(){return c(this,"value",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}};t.IsLittleEndianCached=f;const p={get value(){return c(this,"value",function(){try{return new Function(""),!0}catch(e){return!1}}())}};t.IsEvalSupportedCached=p;const g=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));class m{static makeHexColor(e,t,n){return`#${g[e]}${g[t]}${g[n]}`}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=m.applyTransform(e,t),r=m.applyTransform(e.slice(2,4),t),a=m.applyTransform([e[0],e[3]],t),i=m.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],a[0],i[0]),Math.min(n[1],r[1],a[1],i[1]),Math.max(n[0],r[0],a[0],i[0]),Math.max(n[1],r[1],a[1],i[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static apply3dTransform(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],i=e[2]*t[1]+e[3]*t[3],o=(n+i)/2,s=Math.sqrt((n+i)*(n+i)-4*(n*i-a*r))/2,c=o+s||1,l=o-s||1;return[Math.sqrt(c),Math.sqrt(l)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){function n(e,t){return e-t}const r=[e[0],e[2],t[0],t[2]].sort(n),a=[e[1],e[3],t[1],t[3]].sort(n),i=[];return e=m.normalizeRect(e),t=m.normalizeRect(t),r[0]===e[0]&&r[1]===t[0]||r[0]===t[0]&&r[1]===e[0]?(i[0]=r[1],i[2]=r[2],a[0]===e[1]&&a[1]===t[1]||a[0]===t[1]&&a[1]===e[1]?(i[1]=a[1],i[3]=a[2],i):null):null}}t.Util=m;const v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],b=function(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(t,n,r=!1){if(!r&&URL.createObjectURL){const e=new Blob([t],{type:n});return URL.createObjectURL(e)}let a=`data:${n};base64,`;for(let n=0,r=t.length;n<r;n+=3){const i=255&t[n],o=255&t[n+1],s=255&t[n+2];a+=e[i>>2]+e[(3&i)<<4|o>>4]+e[n+1<r?(15&o)<<2|s>>6:64]+e[n+2<r?63&s:64]}return a}}();t.createObjectURL=b;const y={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"}},(e,t,n)=>{n(4)},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const n=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearPrimitiveCaches=function(){o._clearCache(),i._clearCache(),c._clearCache()},t.isCmd=function(e,t){return e instanceof o&&(void 0===t||e.cmd===t)},t.isDict=function(e,t){return e instanceof s&&(void 0===t||l(e.get("Type"),t))},t.isEOF=function(e){return e===a},t.isName=l,t.isRef=function(e){return e instanceof c},t.isRefsEqual=function(e,t){return e.num===t.num&&e.gen===t.gen},t.isStream=function(e){return"object"==typeof e&&null!==e&&void 0!==e.getBytes},t.RefSetCache=t.RefSet=t.Ref=t.Name=t.EOF=t.Dict=t.Cmd=void 0;var r=n(2),a={};t.EOF=a;var i=function(){let e=Object.create(null);function t(e){this.name=e}return t.prototype={},t.get=function(n){return e[n]||(e[n]=new t(n))},t._clearCache=function(){e=Object.create(null)},t}();t.Name=i;var o=function(){let e=Object.create(null);function t(e){this.cmd=e}return t.prototype={},t.get=function(n){return e[n]||(e[n]=new t(n))},t._clearCache=function(){e=Object.create(null)},t}();t.Cmd=o;var s=function(){var e=function(){return e};function t(t){this._map=Object.create(null),this.xref=t,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=e}return t.prototype={assignXref:function(e){this.xref=e},get size(){return Object.keys(this._map).length},get(e,t,n){let r=this._map[e];return void 0===r&&void 0!==t&&(r=this._map[t],void 0===r&&void 0!==n&&(r=this._map[n])),r instanceof c&&this.xref?this.xref.fetch(r,this.suppressEncryption):r},async getAsync(e,t,n){let r=this._map[e];return void 0===r&&void 0!==t&&(r=this._map[t],void 0===r&&void 0!==n&&(r=this._map[n])),r instanceof c&&this.xref?this.xref.fetchAsync(r,this.suppressEncryption):r},getArray(e,t,n){let r=this.get(e,t,n);if(!Array.isArray(r)||!this.xref)return r;r=r.slice();for(let e=0,t=r.length;e<t;e++)r[e]instanceof c&&(r[e]=this.xref.fetch(r[e],this.suppressEncryption));return r},getRaw:function(e){return this._map[e]},getKeys:function(){return Object.keys(this._map)},getRawValues:function(){return Object.values(this._map)},set:function(e,t){this._map[e]=t},has:function(e){return void 0!==this._map[e]},forEach:function(e){for(var t in this._map)e(t,this.get(t))}},t.empty=function(){const e=new t(null);return e.set=(e,t)=>{(0,r.unreachable)("Should not call `set` on the empty dictionary.")},e}(),t.merge=function({xref:e,dictArray:n,mergeSubDicts:r=!1}){const a=new t(e);if(!r){for(const e of n)if(e instanceof t)for(const[t,n]of Object.entries(e._map))void 0===a._map[t]&&(a._map[t]=n);return a.size>0?a:t.empty}const i=new Map;for(const e of n)if(e instanceof t)for(const[t,n]of Object.entries(e._map)){let e=i.get(t);void 0===e&&(e=[],i.set(t,e)),e.push(n)}for(const[n,r]of i){if(1===r.length||!(r[0]instanceof t)){a._map[n]=r[0];continue}const i=new t(e);for(const e of r)if(e instanceof t)for(const[t,n]of Object.entries(e._map))void 0===i._map[t]&&(i._map[t]=n);i.size>0&&(a._map[n]=i)}return i.clear(),a.size>0?a:t.empty},t}();t.Dict=s;var c=function(){let e=Object.create(null);function t(e,t){this.num=e,this.gen=t}return t.prototype={toString:function(){return 0===this.gen?`${this.num}R`:`${this.num}R${this.gen}`}},t.get=function(n,r){const a=0===r?`${n}R`:`${n}R${r}`;return e[a]||(e[a]=new t(n,r))},t._clearCache=function(){e=Object.create(null)},t}();function l(e,t){return e instanceof i&&(void 0===t||e.name===t)}t.Ref=c,t.RefSet=class{constructor(e=null){this._set=new Set(e&&e._set)}has(e){return this._set.has(e.toString())}put(e){this._set.add(e.toString())}remove(e){this._set.delete(e.toString())}forEach(e){for(const t of this._set.values())e(t)}clear(){this._set.clear()}},t.RefSetCache=class{constructor(){this._map=new Map}get size(){return this._map.size}get(e){return this._map.get(e.toString())}has(e){return this._map.has(e.toString())}put(e,t){this._map.set(e.toString(),t)}putAlias(e,t){this._map.set(e.toString(),this.get(t))}forEach(e){for(const t of this._map.values())e(t)}clear(){this._map.clear()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkPdfManager=t.LocalPdfManager=void 0;var r=n(2),a=n(7),i=n(8),o=n(9),s=n(12);class c{constructor(){this.constructor===c&&(0,r.unreachable)("Cannot initialize BasePdfManager.")}get docId(){return this._docId}get password(){return this._password}get docBaseUrl(){let e=null;if(this._docBaseUrl){const t=(0,r.createValidAbsoluteUrl)(this._docBaseUrl);t?e=t.href:(0,r.warn)(`Invalid absolute docBaseUrl: "${this._docBaseUrl}".`)}return(0,r.shadow)(this,"docBaseUrl",e)}onLoadedStream(){(0,r.unreachable)("Abstract method `onLoadedStream` called")}ensureDoc(e,t){return this.ensure(this.pdfDocument,e,t)}ensureXRef(e,t){return this.ensure(this.pdfDocument.xref,e,t)}ensureCatalog(e,t){return this.ensure(this.pdfDocument.catalog,e,t)}getPage(e){return this.pdfDocument.getPage(e)}fontFallback(e,t){return this.pdfDocument.fontFallback(e,t)}cleanup(e=!1){return this.pdfDocument.cleanup(e)}async ensure(e,t,n){(0,r.unreachable)("Abstract method `ensure` called")}requestRange(e,t){(0,r.unreachable)("Abstract method `requestRange` called")}requestLoadedStream(){(0,r.unreachable)("Abstract method `requestLoadedStream` called")}sendProgressiveData(e){(0,r.unreachable)("Abstract method `sendProgressiveData` called")}updatePassword(e){this._password=e}terminate(e){(0,r.unreachable)("Abstract method `terminate` called")}}t.LocalPdfManager=class extends c{constructor(e,t,n,r,a){super(),this._docId=e,this._password=n,this._docBaseUrl=a,this.evaluatorOptions=r;const i=new s.Stream(t);this.pdfDocument=new o.PDFDocument(this,i),this._loadedStreamPromise=Promise.resolve(i)}async ensure(e,t,n){const r=e[t];return"function"==typeof r?r.apply(e,n):r}requestRange(e,t){return Promise.resolve()}requestLoadedStream(){}onLoadedStream(){return this._loadedStreamPromise}terminate(e){}},t.NetworkPdfManager=class extends c{constructor(e,t,n,r,i){super(),this._docId=e,this._password=n.password,this._docBaseUrl=i,this.msgHandler=n.msgHandler,this.evaluatorOptions=r,this.streamManager=new a.ChunkedStreamManager(t,{msgHandler:n.msgHandler,length:n.length,disableAutoFetch:n.disableAutoFetch,rangeChunkSize:n.rangeChunkSize}),this.pdfDocument=new o.PDFDocument(this,this.streamManager.getStream())}async ensure(e,t,n){try{const r=e[t];return"function"==typeof r?r.apply(e,n):r}catch(r){if(!(r instanceof i.MissingDataException))throw r;return await this.requestRange(r.begin,r.end),this.ensure(e,t,n)}}requestRange(e,t){return this.streamManager.requestRange(e,t)}requestLoadedStream(){this.streamManager.requestAllChunks()}sendProgressiveData(e){this.streamManager.onReceiveData({chunk:e})}onLoadedStream(){return this.streamManager.onLoadedStream()}terminate(e){this.streamManager.abort(e)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkedStreamManager=t.ChunkedStream=void 0;var r=n(2),a=n(8);class i{constructor(e,t,n){this.bytes=new Uint8Array(e),this.start=0,this.pos=0,this.end=e,this.chunkSize=t,this._loadedChunks=new Set,this.numChunks=Math.ceil(e/t),this.manager=n,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}getMissingChunks(){const e=[];for(let t=0,n=this.numChunks;t<n;++t)this._loadedChunks.has(t)||e.push(t);return e}getBaseStreams(){return[this]}get numChunksLoaded(){return this._loadedChunks.size}allChunksLoaded(){return this.numChunksLoaded===this.numChunks}onReceiveData(e,t){const n=this.chunkSize;if(e%n!=0)throw new Error(`Bad begin offset: ${e}`);const r=e+t.byteLength;if(r%n!=0&&r!==this.bytes.length)throw new Error(`Bad end offset: ${r}`);this.bytes.set(new Uint8Array(t),e);const a=Math.floor(e/n),i=Math.floor((r-1)/n)+1;for(let e=a;e<i;++e)this._loadedChunks.add(e)}onReceiveProgressiveData(e){let t=this.progressiveDataLength;const n=Math.floor(t/this.chunkSize);this.bytes.set(new Uint8Array(e),t),t+=e.byteLength,this.progressiveDataLength=t;const r=t>=this.end?this.numChunks:Math.floor(t/this.chunkSize);for(let e=n;e<r;++e)this._loadedChunks.add(e)}ensureByte(e){if(e<this.progressiveDataLength)return;const t=Math.floor(e/this.chunkSize);if(t!==this.lastSuccessfulEnsureByteChunk){if(!this._loadedChunks.has(t))throw new a.MissingDataException(e,e+1);this.lastSuccessfulEnsureByteChunk=t}}ensureRange(e,t){if(e>=t)return;if(t<=this.progressiveDataLength)return;const n=this.chunkSize,r=Math.floor(e/n),i=Math.floor((t-1)/n)+1;for(let n=r;n<i;++n)if(!this._loadedChunks.has(n))throw new a.MissingDataException(e,t)}nextEmptyChunk(e){const t=this.numChunks;for(let n=0;n<t;++n){const r=(e+n)%t;if(!this._loadedChunks.has(r))return r}return null}hasChunk(e){return this._loadedChunks.has(e)}get length(){return this.end-this.start}get isEmpty(){return 0===this.length}getByte(){const e=this.pos;return e>=this.end?-1:(e>=this.progressiveDataLength&&this.ensureByte(e),this.bytes[this.pos++])}getUint16(){const e=this.getByte(),t=this.getByte();return-1===e||-1===t?-1:(e<<8)+t}getInt32(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()}getBytes(e,t=!1){const n=this.bytes,r=this.pos,a=this.end;if(!e){a>this.progressiveDataLength&&this.ensureRange(r,a);const e=n.subarray(r,a);return t?new Uint8ClampedArray(e):e}let i=r+e;i>a&&(i=a),i>this.progressiveDataLength&&this.ensureRange(r,i),this.pos=i;const o=n.subarray(r,i);return t?new Uint8ClampedArray(o):o}peekByte(){const e=this.getByte();return-1!==e&&this.pos--,e}peekBytes(e,t=!1){const n=this.getBytes(e,t);return this.pos-=n.length,n}getByteRange(e,t){return e<0&&(e=0),t>this.end&&(t=this.end),t>this.progressiveDataLength&&this.ensureRange(e,t),this.bytes.subarray(e,t)}skip(e){e||(e=1),this.pos+=e}reset(){this.pos=this.start}moveStart(){this.start=this.pos}makeSubStream(e,t,n){function r(){}t?e+t>this.progressiveDataLength&&this.ensureRange(e,e+t):e>=this.progressiveDataLength&&this.ensureByte(e),r.prototype=Object.create(this),r.prototype.getMissingChunks=function(){const e=this.chunkSize,t=Math.floor(this.start/e),n=Math.floor((this.end-1)/e)+1,r=[];for(let e=t;e<n;++e)this._loadedChunks.has(e)||r.push(e);return r},r.prototype.allChunksLoaded=function(){return this.numChunksLoaded===this.numChunks||0===this.getMissingChunks().length};const a=new r;return a.pos=a.start=e,a.end=e+t||this.end,a.dict=n,a}}t.ChunkedStream=i,t.ChunkedStreamManager=class{constructor(e,t){this.length=t.length,this.chunkSize=t.rangeChunkSize,this.stream=new i(this.length,this.chunkSize,this),this.pdfNetworkStream=e,this.disableAutoFetch=t.disableAutoFetch,this.msgHandler=t.msgHandler,this.currRequestId=0,this._chunksNeededByRequest=new Map,this._requestsByChunk=new Map,this._promisesByRequest=new Map,this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=(0,r.createPromiseCapability)()}onLoadedStream(){return this._loadedStreamCapability.promise}sendRequest(e,t){const n=this.pdfNetworkStream.getRangeReader(e,t);n.isStreamingSupported||(n.onProgress=this.onProgress.bind(this));let a=[],i=0;new Promise(((e,t)=>{const o=s=>{try{if(!s.done){const e=s.value;return a.push(e),i+=(0,r.arrayByteLength)(e),n.isStreamingSupported&&this.onProgress({loaded:i}),void n.read().then(o,t)}const c=(0,r.arraysToBytes)(a);a=null,e(c)}catch(e){t(e)}};n.read().then(o,t)})).then((t=>{this.aborted||this.onReceiveData({chunk:t,begin:e})}))}requestAllChunks(){const e=this.stream.getMissingChunks();return this._requestChunks(e),this._loadedStreamCapability.promise}_requestChunks(e){const t=this.currRequestId++,n=new Set;this._chunksNeededByRequest.set(t,n);for(const t of e)this.stream.hasChunk(t)||n.add(t);if(0===n.size)return Promise.resolve();const a=(0,r.createPromiseCapability)();this._promisesByRequest.set(t,a);const i=[];for(const e of n){let n=this._requestsByChunk.get(e);n||(n=[],this._requestsByChunk.set(e,n),i.push(e)),n.push(t)}if(i.length>0){const e=this.groupChunks(i);for(const t of e){const e=t.beginChunk*this.chunkSize,n=Math.min(t.endChunk*this.chunkSize,this.length);this.sendRequest(e,n)}}return a.promise.catch((e=>{if(!this.aborted)throw e}))}getStream(){return this.stream}requestRange(e,t){t=Math.min(t,this.length);const n=this.getBeginChunk(e),r=this.getEndChunk(t),a=[];for(let e=n;e<r;++e)a.push(e);return this._requestChunks(a)}requestRanges(e=[]){const t=[];for(const n of e){const e=this.getBeginChunk(n.begin),r=this.getEndChunk(n.end);for(let n=e;n<r;++n)t.includes(n)||t.push(n)}return t.sort((function(e,t){return e-t})),this._requestChunks(t)}groupChunks(e){const t=[];let n=-1,r=-1;for(let a=0,i=e.length;a<i;++a){const i=e[a];n<0&&(n=i),r>=0&&r+1!==i&&(t.push({beginChunk:n,endChunk:r+1}),n=i),a+1===e.length&&t.push({beginChunk:n,endChunk:i+1}),r=i}return t}onProgress(e){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+e.loaded,total:this.length})}onReceiveData(e){const t=e.chunk,n=void 0===e.begin,r=n?this.progressiveDataLength:e.begin,a=r+t.byteLength,i=Math.floor(r/this.chunkSize),o=a<this.length?Math.floor(a/this.chunkSize):Math.ceil(a/this.chunkSize);n?(this.stream.onReceiveProgressiveData(t),this.progressiveDataLength=a):this.stream.onReceiveData(r,t),this.stream.allChunksLoaded()&&this._loadedStreamCapability.resolve(this.stream);const s=[];for(let e=i;e<o;++e){const t=this._requestsByChunk.get(e);if(t){this._requestsByChunk.delete(e);for(const n of t){const t=this._chunksNeededByRequest.get(n);t.has(e)&&t.delete(e),t.size>0||s.push(n)}}}if(!this.disableAutoFetch&&0===this._requestsByChunk.size){let e;if(1===this.stream.numChunksLoaded){const t=this.stream.numChunks-1;this.stream.hasChunk(t)||(e=t)}else e=this.stream.nextEmptyChunk(o);Number.isInteger(e)&&this._requestChunks([e])}for(const e of s){const t=this._promisesByRequest.get(e);this._promisesByRequest.delete(e),t.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}onError(e){this._loadedStreamCapability.reject(e)}getBeginChunk(e){return Math.floor(e/this.chunkSize)}getEndChunk(e){return Math.floor((e-1)/this.chunkSize)+1}abort(e){this.aborted=!0,this.pdfNetworkStream&&this.pdfNetworkStream.cancelAllRequests(e);for(const t of this._promisesByRequest.values())t.reject(e)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.collectActions=function(e,t,n){const i=Object.create(null);if(t.has("AA")){const r=t.get("AA");for(const t of r.getKeys()){const o=n[t];if(!o)continue;const s=[];l(r.getRaw(t),e,s,new a.RefSet),s.length>0&&(i[o]=s)}}if(t.has("A")){const n=[];l(t.get("A"),e,n,new a.RefSet),n.length>0&&(i.Action=n)}return(0,r.objectSize)(i)>0?i:null},t.escapePDFName=function(e){const t=[];let n=0;for(let r=0,a=e.length;r<a;r++){const a=e.charCodeAt(r);(a<33||a>126||35===a||40===a||41===a||60===a||62===a||91===a||93===a||123===a||125===a||47===a||37===a)&&(n<r&&t.push(e.substring(n,r)),t.push(`#${a.toString(16)}`),n=r+1)}return 0===t.length?e:(n<e.length&&t.push(e.substring(n,e.length)),t.join(""))},t.getArrayLookupTableFactory=function(e){let t;return function(){if(e){let n=e();e=null,t=Object.create(null);for(let e=0,r=n.length;e<r;e+=2)t[n[e]]=n[e+1];n=null}return t}},t.getInheritableProperty=function({dict:e,key:t,getArray:n=!1,stopWhenFound:a=!0}){let i,o=0;for(;e;){const s=n?e.getArray(t):e.get(t);if(void 0!==s){if(a)return s;i||(i=[]),i.push(s)}if(++o>100){(0,r.warn)(`getInheritableProperty: maximum loop count exceeded for "${t}"`);break}e=e.get("Parent")}return i},t.getLookupTableFactory=function(e){let t;return function(){return e&&(t=Object.create(null),e(t),e=null),t}},t.isWhiteSpace=function(e){return 32===e||9===e||13===e||10===e},t.log2=function(e){return e<=0?0:Math.ceil(Math.log2(e))},t.parseXFAPath=function(e){const t=/(.+)\[([0-9]+)\]$/;return e.split(".").map((e=>{const n=e.match(t);return n?{name:n[1],pos:parseInt(n[2],10)}:{name:e,pos:0}}))},t.readInt8=function(e,t){return e[t]<<24>>24},t.readUint16=function(e,t){return e[t]<<8|e[t+1]},t.readUint32=function(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0},t.toRomanNumerals=function(e,t=!1){(0,r.assert)(Number.isInteger(e)&&e>0,"The number should be a positive integer.");const n=[];let a;for(;e>=1e3;)e-=1e3,n.push("M");a=e/100|0,e%=100,n.push(c[a]),a=e/10|0,e%=10,n.push(c[10+a]),n.push(c[20+e]);const i=n.join("");return t?i.toLowerCase():i},t.XRefParseException=t.XRefEntryException=t.MissingDataException=void 0;var r=n(2),a=n(5);class i extends r.BaseException{constructor(e,t){super(`Missing data [${e}, ${t})`),this.begin=e,this.end=t}}t.MissingDataException=i;class o extends r.BaseException{}t.XRefEntryException=o;class s extends r.BaseException{}t.XRefParseException=s;const c=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function l(e,t,n,i){if(!e)return;let o=null;if((0,a.isRef)(e)){if(i.has(e))return;o=e,i.put(o),e=t.fetch(e)}if(Array.isArray(e))for(const r of e)l(r,t,n,i);else if(e instanceof a.Dict){if((0,a.isName)(e.get("S"),"JavaScript")&&e.has("JS")){const t=e.get("JS");let i;i=(0,a.isStream)(t)?(0,r.bytesToString)(t.getBytes()):t,i=(0,r.stringToPDFString)(i),i&&n.push(i)}l(e.getRaw("Next"),t,n,i)}o&&i.remove(o)}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDocument=t.Page=void 0;var r=n(2),a=n(10),i=n(5),o=n(8),s=n(12),c=n(25),l=n(22),u=n(11),h=n(44),d=n(27);const f=[0,0,612,792];function p(e,t){return"display"===t&&e.viewable||"print"===t&&e.printable}class g{constructor({pdfManager:e,xref:t,pageIndex:n,pageDict:r,ref:a,globalIdFactory:i,fontCache:o,builtInCMapCache:s,globalImageCache:c,nonBlendModesSet:l}){this.pdfManager=e,this.pageIndex=n,this.pageDict=r,this.xref=t,this.ref=a,this.fontCache=o,this.builtInCMapCache=s,this.globalImageCache=c,this.nonBlendModesSet=l,this.evaluatorOptions=e.evaluatorOptions,this.resourcesPromise=null;const u={obj:0};this._localIdFactory=class extends i{static createObjId(){return`p${n}_${++u.obj}`}}}_getInheritableProperty(e,t=!1){const n=(0,o.getInheritableProperty)({dict:this.pageDict,key:e,getArray:t,stopWhenFound:!1});return Array.isArray(n)?1!==n.length&&(0,i.isDict)(n[0])?i.Dict.merge({xref:this.xref,dictArray:n}):n[0]:n}get content(){return this.pageDict.get("Contents")}get resources(){return(0,r.shadow)(this,"resources",this._getInheritableProperty("Resources")||i.Dict.empty)}_getBoundingBox(e){const t=this._getInheritableProperty(e,!0);if(Array.isArray(t)&&4===t.length){if(t[2]-t[0]!=0&&t[3]-t[1]!=0)return t;(0,r.warn)(`Empty /${e} entry.`)}return null}get mediaBox(){return(0,r.shadow)(this,"mediaBox",this._getBoundingBox("MediaBox")||f)}get cropBox(){return(0,r.shadow)(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox)}get userUnit(){let e=this.pageDict.get("UserUnit");return(!(0,r.isNum)(e)||e<=0)&&(e=1),(0,r.shadow)(this,"userUnit",e)}get view(){const{cropBox:e,mediaBox:t}=this;let n;if(e===t||(0,r.isArrayEqual)(e,t))n=t;else{const a=r.Util.intersect(e,t);a&&a[2]-a[0]!=0&&a[3]-a[1]!=0?n=a:(0,r.warn)("Empty /CropBox and /MediaBox intersection.")}return(0,r.shadow)(this,"view",n||t)}get rotate(){let e=this._getInheritableProperty("Rotate")||0;return e%90!=0?e=0:e>=360?e%=360:e<0&&(e=(e%360+360)%360),(0,r.shadow)(this,"rotate",e)}getContentStream(){const e=this.content;let t;if(Array.isArray(e)){const n=this.xref,r=[];for(const t of e)r.push(n.fetchIfRef(t));t=new s.StreamsSequenceStream(r)}else t=(0,i.isStream)(e)?e:new s.NullStream;return t}save(e,t,n){const a=new d.PartialEvaluator({xref:this.xref,handler:e,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions});return this._parsedAnnotations.then((function(e){const i=[];for(const o of e)p(o,"print")&&i.push(o.save(a,t,n).catch((function(e){return(0,r.warn)(`save - ignoring annotation data during "${t.name}" task: "${e}".`),null})));return Promise.all(i)}))}loadResources(e){return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then((()=>new a.ObjectLoader(this.resources,e,this.xref).load()))}getOperatorList({handler:e,sink:t,task:n,intent:a,renderInteractiveForms:i,annotationStorage:o}){const s=this.pdfManager.ensure(this,"getContentStream"),c=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"]),l=new d.PartialEvaluator({xref:this.xref,handler:e,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}),u=Promise.all([s,c]).then((([r])=>{const i=new h.OperatorList(a,t);return e.send("StartRenderPage",{transparency:l.hasBlendModes(this.resources,this.nonBlendModesSet),pageIndex:this.pageIndex,intent:a}),l.getOperatorList({stream:r,task:n,resources:this.resources,operatorList:i}).then((function(){return i}))}));return Promise.all([u,this._parsedAnnotations]).then((function([e,t]){if(0===t.length)return e.flush(!0),{length:e.totalLength};const s=[];for(const e of t)p(e,a)&&!e.isHidden(o)&&s.push(e.getOperatorList(l,n,i,o).catch((function(e){return(0,r.warn)(`getOperatorList - ignoring annotation data during "${n.name}" task: "${e}".`),null})));return Promise.all(s).then((function(t){e.addOp(r.OPS.beginAnnotations,[]);for(const n of t)e.addOpList(n);return e.addOp(r.OPS.endAnnotations,[]),e.flush(!0),{length:e.totalLength}}))}))}extractTextContent({handler:e,task:t,normalizeWhitespace:n,sink:r,combineTextItems:a}){const i=this.pdfManager.ensure(this,"getContentStream"),o=this.loadResources(["ExtGState","XObject","Font"]);return Promise.all([i,o]).then((([i])=>new d.PartialEvaluator({xref:this.xref,handler:e,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}).getTextContent({stream:i,task:t,resources:this.resources,normalizeWhitespace:n,combineTextItems:a,sink:r})))}getAnnotationsData(e){return this._parsedAnnotations.then((function(t){const n=[];for(let r=0,a=t.length;r<a;r++)e&&!p(t[r],e)||n.push(t[r].data);return n}))}get annotations(){const e=this._getInheritableProperty("Annots");return(0,r.shadow)(this,"annotations",Array.isArray(e)?e:[])}get _parsedAnnotations(){const e=this.pdfManager.ensure(this,"annotations").then((()=>{const e=[];for(const t of this.annotations)e.push(c.AnnotationFactory.create(this.xref,t,this.pdfManager,this._localIdFactory).catch((function(e){return(0,r.warn)(`_parsedAnnotations: "${e}".`),null})));return Promise.all(e).then((function(e){return e.filter((e=>!!e))}))}));return(0,r.shadow)(this,"_parsedAnnotations",e)}get jsActions(){const e=(0,o.collectActions)(this.xref,this.pageDict,r.PageActionEventType);return(0,r.shadow)(this,"jsActions",e)}}t.Page=g;const m=new Uint8Array([37,80,68,70,45]),v=new Uint8Array([115,116,97,114,116,120,114,101,102]),b=new Uint8Array([101,110,100,111,98,106]),y=/^[1-9]\.[0-9]$/;function w(e,t,n=1024,r=!1){const a=t.length,i=e.peekBytes(n),o=i.length-a;if(o<=0)return!1;if(r){const n=a-1;let r=i.length-1;for(;r>=n;){let o=0;for(;o<a&&i[r-o]===t[n-o];)o++;if(o>=a)return e.pos+=r-n,!0;r--}}else{let n=0;for(;n<=o;){let r=0;for(;r<a&&i[n+r]===t[r];)r++;if(r>=a)return e.pos+=n,!0;n++}}return!1}t.PDFDocument=class{constructor(e,t){let n;if((0,i.isStream)(t))n=t;else{if(!(0,r.isArrayBuffer)(t))throw new Error("PDFDocument: Unknown argument type");n=new s.Stream(t)}if(n.length<=0)throw new r.InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=e,this.stream=n,this.xref=new a.XRef(n,e),this._pagePromises=[],this._version=null;const o={font:0};this._globalIdFactory=class{static getDocId(){return`g_${e.docId}`}static createFontId(){return"f"+ ++o.font}static createObjId(){(0,r.unreachable)("Abstract method `createObjId` called.")}}}parse(e){this.xref.parse(e),this.catalog=new a.Catalog(this.pdfManager,this.xref),this.catalog.version&&(this._version=this.catalog.version)}get linearization(){let e=null;try{e=u.Linearization.create(this.stream)}catch(e){if(e instanceof o.MissingDataException)throw e;(0,r.info)(e)}return(0,r.shadow)(this,"linearization",e)}get startXRef(){const e=this.stream;let t=0;if(this.linearization)e.reset(),w(e,b)&&(t=e.pos+6-e.start);else{const n=1024,r=v.length;let a=!1,i=e.end;for(;!a&&i>0;)i-=n-r,i<0&&(i=0),e.pos=i,a=w(e,v,n,!0);if(a){let n;e.skip(9);do{n=e.getByte()}while((0,o.isWhiteSpace)(n));let r="";for(;n>=32&&n<=57;)r+=String.fromCharCode(n),n=e.getByte();t=parseInt(r,10),isNaN(t)&&(t=0)}}return(0,r.shadow)(this,"startXRef",t)}checkHeader(){const e=this.stream;if(e.reset(),!w(e,m))return;e.moveStart();let t,n="";for(;(t=e.getByte())>32&&!(n.length>=12);)n+=String.fromCharCode(t);this._version||(this._version=n.substring(5))}parseStartXRef(){this.xref.setStartXRef(this.startXRef)}get numPages(){const e=this.linearization,t=e?e.numPages:this.catalog.numPages;return(0,r.shadow)(this,"numPages",t)}_hasOnlyDocumentSignatures(e,t=0){return!!Array.isArray(e)&&e.every((e=>{if(!((e=this.xref.fetchIfRef(e))instanceof i.Dict))return!1;if(e.has("Kids"))return++t>10?((0,r.warn)("_hasOnlyDocumentSignatures: maximum recursion depth reached"),!1):this._hasOnlyDocumentSignatures(e.get("Kids"),t);const n=(0,i.isName)(e.get("FT"),"Sig"),a=e.get("Rect"),o=Array.isArray(a)&&a.every((e=>0===e));return n&&o}))}get formInfo(){const e={hasFields:!1,hasAcroForm:!1,hasXfa:!1},t=this.catalog.acroForm;if(!t)return(0,r.shadow)(this,"formInfo",e);try{const n=t.get("Fields"),r=Array.isArray(n)&&n.length>0;e.hasFields=r;const a=t.get("XFA");e.hasXfa=Array.isArray(a)&&a.length>0||(0,i.isStream)(a)&&!a.isEmpty;const o=!!(1&t.get("SigFlags"))&&this._hasOnlyDocumentSignatures(n);e.hasAcroForm=r&&!o}catch(e){if(e instanceof o.MissingDataException)throw e;(0,r.warn)(`Cannot fetch form information: "${e}".`)}return(0,r.shadow)(this,"formInfo",e)}get documentInfo(){const e={Title:r.isString,Author:r.isString,Subject:r.isString,Keywords:r.isString,Creator:r.isString,Producer:r.isString,CreationDate:r.isString,ModDate:r.isString,Trapped:i.isName};let t=this._version;"string"==typeof t&&y.test(t)||((0,r.warn)(`Invalid PDF header version number: ${t}`),t=null);const n={PDFFormatVersion:t,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection};let a;try{a=this.xref.trailer.get("Info")}catch(e){if(e instanceof o.MissingDataException)throw e;(0,r.info)("The document information dictionary is invalid.")}if((0,i.isDict)(a))for(const t of a.getKeys()){const o=a.get(t);if(e[t])e[t](o)?n[t]="string"!=typeof o?o:(0,r.stringToPDFString)(o):(0,r.info)(`Bad value in document info for "${t}".`);else if("string"==typeof t){let e;if((0,r.isString)(o))e=(0,r.stringToPDFString)(o);else{if(!((0,i.isName)(o)||(0,r.isNum)(o)||(0,r.isBool)(o))){(0,r.info)(`Unsupported value in document info for (custom) "${t}".`);continue}e=o}n.Custom||(n.Custom=Object.create(null)),n.Custom[t]=e}}return(0,r.shadow)(this,"documentInfo",n)}get fingerprint(){let e;const t=this.xref.trailer.get("ID");e=Array.isArray(t)&&t[0]&&(0,r.isString)(t[0])&&"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"!==t[0]?(0,r.stringToBytes)(t[0]):(0,l.calculateMD5)(this.stream.getByteRange(0,1024),0,1024);const n=[];for(let t=0,r=e.length;t<r;t++){const r=e[t].toString(16);n.push(r.padStart(2,"0"))}return(0,r.shadow)(this,"fingerprint",n.join(""))}_getLinearizationPage(e){const{catalog:t,linearization:n}=this,a=i.Ref.get(n.objectNumberFirst,0);return this.xref.fetchAsync(a).then((e=>{if((0,i.isDict)(e,"Page")||(0,i.isDict)(e)&&!e.has("Type")&&e.has("Contents"))return a&&!t.pageKidsCountCache.has(a)&&t.pageKidsCountCache.put(a,1),[e,a];throw new r.FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.")})).catch((n=>((0,r.info)(n),t.getPageDict(e))))}getPage(e){if(void 0!==this._pagePromises[e])return this._pagePromises[e];const{catalog:t,linearization:n}=this,r=n&&n.pageFirst===e?this._getLinearizationPage(e):t.getPageDict(e);return this._pagePromises[e]=r.then((([n,r])=>new g({pdfManager:this.pdfManager,xref:this.xref,pageIndex:e,pageDict:n,ref:r,globalIdFactory:this._globalIdFactory,fontCache:t.fontCache,builtInCMapCache:t.builtInCMapCache,globalImageCache:t.globalImageCache,nonBlendModesSet:t.nonBlendModesSet})))}checkFirstPage(){return this.getPage(0).catch((async e=>{if(e instanceof o.XRefEntryException)throw this._pagePromises.length=0,await this.cleanup(),new o.XRefParseException}))}fontFallback(e,t){return this.catalog.fontFallback(e,t)}async cleanup(e=!1){return this.catalog?this.catalog.cleanup(e):(0,i.clearPrimitiveCaches)()}_collectFieldObjects(e,t,n){const a=this.xref.fetchIfRef(t);if(a.has("T")){const t=(0,r.stringToPDFString)(a.get("T"));e=""===e?t:`${e}.${t}`}if(n.has(e)||n.set(e,[]),n.get(e).push(c.AnnotationFactory.create(this.xref,t,this.pdfManager,this._localIdFactory).then((e=>e&&e.getFieldObject())).catch((function(e){return(0,r.warn)(`_collectFieldObjects: "${e}".`),null}))),a.has("Kids")){const t=a.get("Kids");for(const r of t)this._collectFieldObjects(e,r,n)}}get fieldObjects(){if(!this.formInfo.hasFields)return(0,r.shadow)(this,"fieldObjects",Promise.resolve(null));const e=Object.create(null),t=new Map;for(const e of this.catalog.acroForm.get("Fields"))this._collectFieldObjects("",e,t);const n=[];for(const[r,a]of t)n.push(Promise.all(a).then((t=>{(t=t.filter((e=>!!e))).length>0&&(e[r]=t)})));return(0,r.shadow)(this,"fieldObjects",Promise.all(n).then((()=>e)))}get hasJSActions(){return(0,r.shadow)(this,"hasJSActions",this.fieldObjects.then((e=>null!==e&&Object.values(e).some((e=>e.some((e=>null!==e.actions))))||!!this.catalog.jsActions)))}get calculationOrderIds(){const e=this.catalog.acroForm;if(!e||!e.has("CO"))return(0,r.shadow)(this,"calculationOrderIds",null);const t=e.get("CO");if(!Array.isArray(t)||0===t.length)return(0,r.shadow)(this,"calculationOrderIds",null);const n=t.filter(i.isRef).map((e=>e.toString()));return 0===n.length?(0,r.shadow)(this,"calculationOrderIds",null):(0,r.shadow)(this,"calculationOrderIds",n)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XRef=t.ObjectLoader=t.FileSpec=t.Catalog=void 0;var r=n(2),a=n(5),i=n(8),o=n(11),s=n(22),c=n(23),l=n(24);function u(e){return(0,a.isDict)(e)?e.get("D"):e}class h{constructor(e,t){if(this.pdfManager=e,this.xref=t,this._catDict=t.getCatalogObj(),!(0,a.isDict)(this._catDict))throw new r.FormatError("Catalog object is not a dictionary.");this.fontCache=new a.RefSetCache,this.builtInCMapCache=new Map,this.globalImageCache=new l.GlobalImageCache,this.pageKidsCountCache=new a.RefSetCache,this.nonBlendModesSet=new a.RefSet}get version(){const e=this._catDict.get("Version");return(0,a.isName)(e)?(0,r.shadow)(this,"version",e.name):(0,r.shadow)(this,"version",null)}get collection(){let e=null;try{const t=this._catDict.get("Collection");(0,a.isDict)(t)&&t.size>0&&(e=t)}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.info)("Cannot fetch Collection entry; assuming no collection is present.")}return(0,r.shadow)(this,"collection",e)}get acroForm(){let e=null;try{const t=this._catDict.get("AcroForm");(0,a.isDict)(t)&&t.size>0&&(e=t)}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.info)("Cannot fetch AcroForm entry; assuming no forms are present.")}return(0,r.shadow)(this,"acroForm",e)}get metadata(){const e=this._catDict.getRaw("Metadata");if(!(0,a.isRef)(e))return(0,r.shadow)(this,"metadata",null);const t=!(this.xref.encrypt&&this.xref.encrypt.encryptMetadata),n=this.xref.fetch(e,t);let o;if(n&&(0,a.isDict)(n.dict)){const e=n.dict.get("Type"),t=n.dict.get("Subtype");if((0,a.isName)(e,"Metadata")&&(0,a.isName)(t,"XML"))try{o=(0,r.stringToUTF8String)((0,r.bytesToString)(n.getBytes()))}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.info)("Skipping invalid metadata.")}}return(0,r.shadow)(this,"metadata",o)}get markInfo(){let e=null;try{e=this._readMarkInfo()}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.warn)("Unable to read mark info.")}return(0,r.shadow)(this,"markInfo",e)}_readMarkInfo(){const e=this._catDict.get("MarkInfo");if(!(0,a.isDict)(e))return null;const t=Object.assign(Object.create(null),{Marked:!1,UserProperties:!1,Suspects:!1});for(const n in t){if(!e.has(n))continue;const a=e.get(n);(0,r.isBool)(a)&&(t[n]=a)}return t}get toplevelPagesDict(){const e=this._catDict.get("Pages");if(!(0,a.isDict)(e))throw new r.FormatError("Invalid top-level pages dictionary.");return(0,r.shadow)(this,"toplevelPagesDict",e)}get documentOutline(){let e=null;try{e=this._readDocumentOutline()}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.warn)("Unable to read document outline.")}return(0,r.shadow)(this,"documentOutline",e)}_readDocumentOutline(){let e=this._catDict.get("Outlines");if(!(0,a.isDict)(e))return null;if(e=e.getRaw("First"),!(0,a.isRef)(e))return null;const t={items:[]},n=[{obj:e,parent:t}],i=new a.RefSet;i.put(e);const o=this.xref,s=new Uint8ClampedArray(3);for(;n.length>0;){const t=n.shift(),l=o.fetchIfRef(t.obj);if(null===l)continue;if(!l.has("Title"))throw new r.FormatError("Invalid outline item encountered.");const u={url:null,dest:null};h.parseDestDictionary({destDict:l,resultObj:u,docBaseUrl:this.pdfManager.docBaseUrl});const d=l.get("Title"),f=l.get("F")||0,p=l.getArray("C"),g=l.get("Count");let m=s;!Array.isArray(p)||3!==p.length||0===p[0]&&0===p[1]&&0===p[2]||(m=c.ColorSpace.singletons.rgb.getRgb(p,0));const v={dest:u.dest,url:u.url,unsafeUrl:u.unsafeUrl,newWindow:u.newWindow,title:(0,r.stringToPDFString)(d),color:m,count:Number.isInteger(g)?g:void 0,bold:!!(2&f),italic:!!(1&f),items:[]};t.parent.items.push(v),e=l.getRaw("First"),(0,a.isRef)(e)&&!i.has(e)&&(n.push({obj:e,parent:v}),i.put(e)),e=l.getRaw("Next"),(0,a.isRef)(e)&&!i.has(e)&&(n.push({obj:e,parent:t.parent}),i.put(e))}return t.items.length>0?t.items:null}get permissions(){let e=null;try{e=this._readPermissions()}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.warn)("Unable to read permissions.")}return(0,r.shadow)(this,"permissions",e)}_readPermissions(){const e=this.xref.trailer.get("Encrypt");if(!(0,a.isDict)(e))return null;let t=e.get("P");if(!(0,r.isNum)(t))return null;t+=2**32;const n=[];for(const e in r.PermissionFlag){const a=r.PermissionFlag[e];t&a&&n.push(a)}return n}get optionalContentConfig(){let e=null;try{const t=this._catDict.get("OCProperties");if(!t)return(0,r.shadow)(this,"optionalContentConfig",null);const n=t.get("D");if(!n)return(0,r.shadow)(this,"optionalContentConfig",null);const i=t.get("OCGs");if(!Array.isArray(i))return(0,r.shadow)(this,"optionalContentConfig",null);const o=[],s=[];for(const e of i){if(!(0,a.isRef)(e))continue;s.push(e);const t=this.xref.fetchIfRef(e);o.push({id:e.toString(),name:(0,r.isString)(t.get("Name"))?(0,r.stringToPDFString)(t.get("Name")):null,intent:(0,r.isString)(t.get("Intent"))?(0,r.stringToPDFString)(t.get("Intent")):null})}e=this._readOptionalContentConfig(n,s),e.groups=o}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.warn)(`Unable to read optional content config: ${e}`)}return(0,r.shadow)(this,"optionalContentConfig",e)}_readOptionalContentConfig(e,t){function n(e){const n=[];if(Array.isArray(e))for(const r of e)(0,a.isRef)(r)&&t.includes(r)&&n.push(r.toString());return n}function i(e,n=0){if(!Array.isArray(e))return null;const r=[];for(const i of e){if((0,a.isRef)(i)&&t.includes(i)){c.put(i),r.push(i.toString());continue}const e=o(i,n);e&&r.push(e)}if(n>0)return r;const i=[];for(const e of t)c.has(e)||i.push(e.toString());return i.length&&r.push({name:null,order:i}),r}function o(e,t){if(++t>l)return(0,r.warn)("parseNestedOrder - reached MAX_NESTED_LEVELS."),null;const n=s.fetchIfRef(e);if(!Array.isArray(n))return null;const a=s.fetchIfRef(n[0]);if("string"!=typeof a)return null;const o=i(n.slice(1),t);return o&&o.length?{name:(0,r.stringToPDFString)(a),order:o}:null}const s=this.xref,c=new a.RefSet,l=10;return{name:(0,r.isString)(e.get("Name"))?(0,r.stringToPDFString)(e.get("Name")):null,creator:(0,r.isString)(e.get("Creator"))?(0,r.stringToPDFString)(e.get("Creator")):null,baseState:(0,a.isName)(e.get("BaseState"))?e.get("BaseState").name:null,on:n(e.get("ON")),off:n(e.get("OFF")),order:i(e.get("Order")),groups:null}}get numPages(){const e=this.toplevelPagesDict.get("Count");if(!Number.isInteger(e))throw new r.FormatError("Page count in top-level pages dictionary is not an integer.");return(0,r.shadow)(this,"numPages",e)}get destinations(){const e=this._readDests(),t=Object.create(null);if(e instanceof p){const n=e.getAll();for(const e in n)t[e]=u(n[e])}else e instanceof a.Dict&&e.forEach((function(e,n){n&&(t[e]=u(n))}));return(0,r.shadow)(this,"destinations",t)}getDestination(e){const t=this._readDests();return t instanceof p||t instanceof a.Dict?u(t.get(e)||null):null}_readDests(){const e=this._catDict.get("Names");return e&&e.has("Dests")?new p(e.getRaw("Dests"),this.xref):this._catDict.has("Dests")?this._catDict.get("Dests"):void 0}get pageLabels(){let e=null;try{e=this._readPageLabels()}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.warn)("Unable to read page labels.")}return(0,r.shadow)(this,"pageLabels",e)}_readPageLabels(){const e=this._catDict.getRaw("PageLabels");if(!e)return null;const t=new Array(this.numPages);let n=null,o="";const s=new g(e,this.xref).getAll();let c="",l=1;for(let e=0,u=this.numPages;e<u;e++){if(e in s){const t=s[e];if(!(0,a.isDict)(t))throw new r.FormatError("PageLabel is not a dictionary.");if(t.has("Type")&&!(0,a.isName)(t.get("Type"),"PageLabel"))throw new r.FormatError("Invalid type in PageLabel dictionary.");if(t.has("S")){const e=t.get("S");if(!(0,a.isName)(e))throw new r.FormatError("Invalid style in PageLabel dictionary.");n=e.name}else n=null;if(t.has("P")){const e=t.get("P");if(!(0,r.isString)(e))throw new r.FormatError("Invalid prefix in PageLabel dictionary.");o=(0,r.stringToPDFString)(e)}else o="";if(t.has("St")){const e=t.get("St");if(!(Number.isInteger(e)&&e>=1))throw new r.FormatError("Invalid start in PageLabel dictionary.");l=e}else l=1}switch(n){case"D":c=l;break;case"R":case"r":c=(0,i.toRomanNumerals)(l,"r"===n);break;case"A":case"a":const e=26,t=65,a=97,o="a"===n?a:t,s=l-1,u=String.fromCharCode(o+s%e),h=[];for(let t=0,n=s/e|0;t<=n;t++)h.push(u);c=h.join("");break;default:if(n)throw new r.FormatError(`Invalid style "${n}" in PageLabel dictionary.`);c=""}t[e]=o+c,l++}return t}get pageLayout(){const e=this._catDict.get("PageLayout");let t="";if((0,a.isName)(e))switch(e.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":t=e.name}return(0,r.shadow)(this,"pageLayout",t)}get pageMode(){const e=this._catDict.get("PageMode");let t="UseNone";if((0,a.isName)(e))switch(e.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":t=e.name}return(0,r.shadow)(this,"pageMode",t)}get viewerPreferences(){const e={HideToolbar:r.isBool,HideMenubar:r.isBool,HideWindowUI:r.isBool,FitWindow:r.isBool,CenterWindow:r.isBool,DisplayDocTitle:r.isBool,NonFullScreenPageMode:a.isName,Direction:a.isName,ViewArea:a.isName,ViewClip:a.isName,PrintArea:a.isName,PrintClip:a.isName,PrintScaling:a.isName,Duplex:a.isName,PickTrayByPDFSize:r.isBool,PrintPageRange:Array.isArray,NumCopies:Number.isInteger},t=this._catDict.get("ViewerPreferences");let n=null;if((0,a.isDict)(t))for(const a in e){if(!t.has(a))continue;const i=t.get(a);if(!e[a](i)){(0,r.info)(`Bad value in ViewerPreferences for "${a}".`);continue}let o;switch(a){case"NonFullScreenPageMode":switch(i.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":o=i.name;break;default:o="UseNone"}break;case"Direction":switch(i.name){case"L2R":case"R2L":o=i.name;break;default:o="L2R"}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":switch(i.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":o=i.name;break;default:o="CropBox"}break;case"PrintScaling":switch(i.name){case"None":case"AppDefault":o=i.name;break;default:o="AppDefault"}break;case"Duplex":switch(i.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":o=i.name;break;default:o="None"}break;case"PrintPageRange":if(i.length%2!=0)break;i.every(((e,t,n)=>Number.isInteger(e)&&e>0&&(0===t||e>=n[t-1])&&e<=this.numPages))&&(o=i);break;case"NumCopies":i>0&&(o=i);break;default:if("boolean"!=typeof i)throw new r.FormatError(`viewerPreferences - expected a boolean value for: ${a}`);o=i}void 0!==o?(n||(n=Object.create(null)),n[a]=o):(0,r.info)(`Bad value in ViewerPreferences for "${a}".`)}return(0,r.shadow)(this,"viewerPreferences",n)}get openAction(){const e=this._catDict.get("OpenAction"),t=Object.create(null);if((0,a.isDict)(e)){const n=new a.Dict(this.xref);n.set("A",e);const r={url:null,dest:null,action:null};h.parseDestDictionary({destDict:n,resultObj:r}),Array.isArray(r.dest)?t.dest=r.dest:r.action&&(t.action=r.action)}else Array.isArray(e)&&(t.dest=e);return(0,r.shadow)(this,"openAction",(0,r.objectSize)(t)>0?t:null)}get attachments(){const e=this._catDict.get("Names");let t=null;if(e&&e.has("EmbeddedFiles")){const n=new p(e.getRaw("EmbeddedFiles"),this.xref).getAll();for(const e in n){const a=new m(n[e],this.xref);t||(t=Object.create(null)),t[(0,r.stringToPDFString)(e)]=a.serializable}}return(0,r.shadow)(this,"attachments",t)}_collectJavaScript(){const e=this._catDict.get("Names");let t=null;function n(e,n){const i=n.get("S");if(!(0,a.isName)(i,"JavaScript"))return;let o=n.get("JS");if((0,a.isStream)(o))o=(0,r.bytesToString)(o.getBytes());else if(!(0,r.isString)(o))return;null===t&&(t=Object.create(null)),t[e]=(0,r.stringToPDFString)(o)}if(e&&e.has("JavaScript")){const t=new p(e.getRaw("JavaScript"),this.xref).getAll();for(const e in t){const r=t[e];(0,a.isDict)(r)&&n(e,r)}}const i=this._catDict.get("OpenAction");return(0,a.isDict)(i)&&(0,a.isName)(i.get("S"),"JavaScript")&&n("OpenAction",i),t}get javaScript(){const e=this._collectJavaScript();return(0,r.shadow)(this,"javaScript",e?Object.values(e):null)}get jsActions(){const e=this._collectJavaScript();let t=(0,i.collectActions)(this.xref,this._catDict,r.DocumentActionEventType);if(!t&&e&&(t=Object.create(null)),t&&e)for(const[n,r]of Object.entries(e))n in t?t[n].push(r):t[n]=[r];return(0,r.shadow)(this,"jsActions",t)}fontFallback(e,t){const n=[];return this.fontCache.forEach((function(e){n.push(e)})),Promise.all(n).then((n=>{for(const r of n)if(r.loadedName===e)return void r.fallback(t)}))}cleanup(e=!1){(0,a.clearPrimitiveCaches)(),this.globalImageCache.clear(e),this.pageKidsCountCache.clear(),this.nonBlendModesSet.clear();const t=[];return this.fontCache.forEach((function(e){t.push(e)})),Promise.all(t).then((e=>{for(const{dict:t}of e)delete t.cacheKey;this.fontCache.clear(),this.builtInCMapCache.clear()}))}getPageDict(e){const t=(0,r.createPromiseCapability)(),n=[this._catDict.getRaw("Pages")],i=new a.RefSet,o=this.xref,s=this.pageKidsCountCache;let c,l=0;return function u(){for(;n.length;){const h=n.pop();if((0,a.isRef)(h)){if(c=s.get(h),c>0&&l+c<e){l+=c;continue}return i.has(h)?void t.reject(new r.FormatError("Pages tree contains circular reference.")):(i.put(h),void o.fetchAsync(h).then((function(r){(0,a.isDict)(r,"Page")||(0,a.isDict)(r)&&!r.has("Kids")?e===l?(h&&!s.has(h)&&s.put(h,1),t.resolve([r,h])):(l++,u()):(n.push(r),u())}),t.reject))}if(!(0,a.isDict)(h))return void t.reject(new r.FormatError("Page dictionary kid reference points to wrong type of object."));if(c=h.get("Count"),Number.isInteger(c)&&c>=0){const t=h.objId;if(t&&!s.has(t)&&s.put(t,c),l+c<=e){l+=c;continue}}const d=h.get("Kids");if(!Array.isArray(d)){if((0,a.isName)(h.get("Type"),"Page")||!h.has("Type")&&h.has("Contents")){if(l===e)return void t.resolve([h,null]);l++;continue}return void t.reject(new r.FormatError("Page dictionary kids object is not an array."))}for(let e=d.length-1;e>=0;e--)n.push(d[e])}t.reject(new Error(`Page index ${e} not found.`))}(),t.promise}getPageIndex(e){const t=this.xref;let n=0;return function i(o){return function(n){let i,o=0;return t.fetchAsync(n).then((function(t){if((0,a.isRefsEqual)(n,e)&&!(0,a.isDict)(t,"Page")&&(!(0,a.isDict)(t)||t.has("Type")||!t.has("Contents")))throw new r.FormatError("The reference does not point to a /Page dictionary.");if(!t)return null;if(!(0,a.isDict)(t))throw new r.FormatError("Node must be a dictionary.");return i=t.getRaw("Parent"),t.getAsync("Parent")})).then((function(e){if(!e)return null;if(!(0,a.isDict)(e))throw new r.FormatError("Parent must be a dictionary.");return e.getAsync("Kids")})).then((function(e){if(!e)return null;const s=[];let c=!1;for(let i=0,l=e.length;i<l;i++){const l=e[i];if(!(0,a.isRef)(l))throw new r.FormatError("Kid must be a reference.");if((0,a.isRefsEqual)(l,n)){c=!0;break}s.push(t.fetchAsync(l).then((function(e){if(!(0,a.isDict)(e))throw new r.FormatError("Kid node must be a dictionary.");e.has("Count")?o+=e.get("Count"):o++})))}if(!c)throw new r.FormatError("Kid reference not found in parent's kids.");return Promise.all(s).then((function(){return[o,i]}))}))}(o).then((function(e){if(!e)return n;const[t,r]=e;return n+=t,i(r)}))}(e)}static parseDestDictionary(e){const t=e.destDict;if(!(0,a.isDict)(t))return void(0,r.warn)("parseDestDictionary: `destDict` must be a dictionary.");const n=e.resultObj;if("object"!=typeof n)return void(0,r.warn)("parseDestDictionary: `resultObj` must be an object.");const i=e.docBaseUrl||null;let o,s,c=t.get("A");if((0,a.isDict)(c)||(t.has("Dest")?c=t.get("Dest"):(c=t.get("AA"),(0,a.isDict)(c)&&(c.has("D")?c=c.get("D"):c.has("U")&&(c=c.get("U"))))),(0,a.isDict)(c)){const e=c.get("S");if(!(0,a.isName)(e))return void(0,r.warn)("parseDestDictionary: Invalid type in Action dictionary.");const t=e.name;switch(t){case"URI":o=c.get("URI"),(0,a.isName)(o)?o="/"+o.name:(0,r.isString)(o)&&(o=function(e){return e.startsWith("www.")?`http://${e}`:e}(o));break;case"GoTo":s=c.get("D");break;case"Launch":case"GoToR":const e=c.get("F");(0,a.isDict)(e)?o=e.get("F")||null:(0,r.isString)(e)&&(o=e);let i=c.get("D");if(i&&((0,a.isName)(i)&&(i=i.name),(0,r.isString)(o))){const e=o.split("#")[0];(0,r.isString)(i)?o=e+"#"+i:Array.isArray(i)&&(o=e+"#"+JSON.stringify(i))}const l=c.get("NewWindow");(0,r.isBool)(l)&&(n.newWindow=l);break;case"Named":const u=c.get("N");(0,a.isName)(u)&&(n.action=u.name);break;case"JavaScript":const h=c.get("JS");let d;if((0,a.isStream)(h)?d=(0,r.bytesToString)(h.getBytes()):(0,r.isString)(h)&&(d=h),d){const e=new RegExp("^\\s*("+["app.launchURL","window.open"].join("|").split(".").join("\\.")+")\\((?:'|\")([^'\"]*)(?:'|\")(?:,\\s*(\\w+)\\)|\\))","i").exec((0,r.stringToPDFString)(d));if(e&&e[2]){o=e[2],"true"===e[3]&&"app.launchURL"===e[1]&&(n.newWindow=!0);break}}default:(0,r.warn)(`parseDestDictionary: unsupported action type "${t}".`)}}else t.has("Dest")&&(s=t.get("Dest"));if((0,r.isString)(o)){o=function(e){try{return(0,r.stringToUTF8String)(e)}catch(t){return e}}(o);const e=(0,r.createValidAbsoluteUrl)(o,i);e&&(n.url=e.href),n.unsafeUrl=o}s&&((0,a.isName)(s)&&(s=s.name),((0,r.isString)(s)||Array.isArray(s))&&(n.dest=s))}}t.Catalog=h;var d=function(){function e(e,t){this.stream=e,this.pdfManager=t,this.entries=[],this.xrefstms=Object.create(null),this._cacheMap=new Map,this.stats={streamTypes:Object.create(null),fontTypes:Object.create(null)},this._newRefNum=null}return e.prototype={getNewRef:function(){return null===this._newRefNum&&(this._newRefNum=this.entries.length),a.Ref.get(this._newRefNum++,0)},resetNewRef:function(){this._newRefNum=null},setStartXRef:function(e){this.startXRefQueue=[e]},parse:function(e){var t;let n,o;e?((0,r.warn)("Indexing all PDF objects"),t=this.indexObjects()):t=this.readXRef(),t.assignXref(this),this.trailer=t;try{n=t.get("Encrypt")}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.warn)(`XRef.parse - Invalid "Encrypt" reference: "${e}".`)}if((0,a.isDict)(n)){var c=t.get("ID"),l=c&&c.length?c[0]:"";n.suppressEncryption=!0,this.encrypt=new s.CipherTransformFactory(n,l,this.pdfManager.password)}try{o=t.get("Root")}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.warn)(`XRef.parse - Invalid "Root" reference: "${e}".`)}if(!(0,a.isDict)(o)||!o.has("Pages")){if(!e)throw new i.XRefParseException;throw new r.FormatError("Invalid root reference")}this.root=o},processXRefTable:function(e){"tableState"in this||(this.tableState={entryNum:0,streamPos:e.lexer.stream.pos,parserBuf1:e.buf1,parserBuf2:e.buf2});var t=this.readXRefTable(e);if(!(0,a.isCmd)(t,"trailer"))throw new r.FormatError("Invalid XRef table: could not find trailer dictionary");var n=e.getObj();if(!(0,a.isDict)(n)&&n.dict&&(n=n.dict),!(0,a.isDict)(n))throw new r.FormatError("Invalid XRef table: could not parse trailer dictionary");return delete this.tableState,n},readXRefTable:function(e){var t,n=e.lexer.stream,i=this.tableState;for(n.pos=i.streamPos,e.buf1=i.parserBuf1,e.buf2=i.parserBuf2;;){if(!("firstEntryNum"in i)||!("entryCount"in i)){if((0,a.isCmd)(t=e.getObj(),"trailer"))break;i.firstEntryNum=t,i.entryCount=e.getObj()}var o=i.firstEntryNum,s=i.entryCount;if(!Number.isInteger(o)||!Number.isInteger(s))throw new r.FormatError("Invalid XRef table: wrong types in subsection header");for(var c=i.entryNum;c<s;c++){i.streamPos=n.pos,i.entryNum=c,i.parserBuf1=e.buf1,i.parserBuf2=e.buf2;var l={};l.offset=e.getObj(),l.gen=e.getObj();var u=e.getObj();if(u instanceof a.Cmd)switch(u.cmd){case"f":l.free=!0;break;case"n":l.uncompressed=!0}if(!Number.isInteger(l.offset)||!Number.isInteger(l.gen)||!l.free&&!l.uncompressed)throw new r.FormatError(`Invalid entry in XRef subsection: ${o}, ${s}`);0===c&&l.free&&1===o&&(o=0),this.entries[c+o]||(this.entries[c+o]=l)}i.entryNum=0,i.streamPos=n.pos,i.parserBuf1=e.buf1,i.parserBuf2=e.buf2,delete i.firstEntryNum,delete i.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new r.FormatError("Invalid XRef table: unexpected first object");return t},processXRefStream:function(e){if(!("streamState"in this)){var t=e.dict,n=t.get("W"),r=t.get("Index");r||(r=[0,t.get("Size")]),this.streamState={entryRanges:r,byteWidths:n,entryNum:0,streamPos:e.pos}}return this.readXRefStream(e),delete this.streamState,e.dict},readXRefStream:function(e){var t,n,a=this.streamState;e.pos=a.streamPos;for(var i=a.byteWidths,o=i[0],s=i[1],c=i[2],l=a.entryRanges;l.length>0;){var u=l[0],h=l[1];if(!Number.isInteger(u)||!Number.isInteger(h))throw new r.FormatError(`Invalid XRef range fields: ${u}, ${h}`);if(!Number.isInteger(o)||!Number.isInteger(s)||!Number.isInteger(c))throw new r.FormatError(`Invalid XRef entry fields length: ${u}, ${h}`);for(t=a.entryNum;t<h;++t){a.entryNum=t,a.streamPos=e.pos;var d=0,f=0,p=0;for(n=0;n<o;++n)d=d<<8|e.getByte();for(0===o&&(d=1),n=0;n<s;++n)f=f<<8|e.getByte();for(n=0;n<c;++n)p=p<<8|e.getByte();var g={};switch(g.offset=f,g.gen=p,d){case 0:g.free=!0;break;case 1:g.uncompressed=!0;break;case 2:break;default:throw new r.FormatError(`Invalid XRef entry type: ${d}`)}this.entries[u+t]||(this.entries[u+t]=g)}a.entryNum=0,a.streamPos=e.pos,l.splice(0,2)}},indexObjects:function(){function e(e,t){for(var n="",r=e[t];10!==r&&13!==r&&60!==r&&!(++t>=e.length);)n+=String.fromCharCode(r),r=e[t];return n}function t(e,t,n){for(var r=n.length,a=e.length,i=0;t<a;){for(var o=0;o<r&&e[t+o]===n[o];)++o;if(o>=r)break;t++,i++}return i}var n=/^(\d+)\s+(\d+)\s+obj\b/;const s=/\bendobj[\b\s]$/,c=/\s+(\d+\s+\d+\s+obj[\b\s<])$/;var l=new Uint8Array([116,114,97,105,108,101,114]),u=new Uint8Array([115,116,97,114,116,120,114,101,102]);const h=new Uint8Array([111,98,106]);var d=new Uint8Array([47,88,82,101,102]);this.entries.length=0;var f=this.stream;f.pos=0;for(var p=f.getBytes(),g=f.start,m=p.length,v=[],b=[];g<m;){var y=p[g];if(9!==y&&10!==y&&13!==y&&32!==y)if(37!==y){var w,x=e(p,g);if(x.startsWith("xref")&&(4===x.length||/\s/.test(x[4])))g+=t(p,g,l),v.push(g),g+=t(p,g,u);else if(w=n.exec(x)){const e=0|w[1],n=0|w[2];this.entries[e]&&this.entries[e].gen!==n||(this.entries[e]={offset:g-f.start,gen:n,uncompressed:!0});let a,i=g+x.length;for(;i<p.length;){const e=i+t(p,i,h)+4;a=e-g;const n=Math.max(e-25,i),o=(0,r.bytesToString)(p.subarray(n,e));if(s.test(o))break;{const e=c.exec(o);if(e&&e[1]){(0,r.warn)('indexObjects: Found new "obj" inside of another "obj", caused by missing "endobj" -- trying to recover.'),a-=e[1].length;break}}i=e}const o=p.subarray(g,g+a);var C=t(o,0,d);C<a&&o[C+5]<64&&(b.push(g-f.start),this.xrefstms[g-f.start]=1),g+=a}else x.startsWith("trailer")&&(7===x.length||/\s/.test(x[7]))?(v.push(g),g+=t(p,g,u)):g+=x.length+1}else do{if(++g>=m)break;y=p[g]}while(10!==y&&13!==y);else++g}for(let e=0,t=b.length;e<t;++e)this.startXRefQueue.push(b[e]),this.readXRef(!0);let k;for(let e=0,t=v.length;e<t;++e){f.pos=v[e];const t=new o.Parser({lexer:new o.Lexer(f),xref:this,allowStreams:!0,recoveryMode:!0});var S=t.getObj();if(!(0,a.isCmd)(S,"trailer"))continue;const n=t.getObj();if((0,a.isDict)(n)){try{const e=n.get("Root");if(!(e instanceof a.Dict))continue;const t=e.get("Pages");if(!(t instanceof a.Dict))continue;const r=t.get("Count");if(!Number.isInteger(r))continue}catch(e){if(e instanceof i.MissingDataException)throw e;continue}if(n.has("ID"))return n;k=n}}if(k)return k;throw new r.InvalidPDFException("Invalid PDF structure.")},readXRef:function(e){var t=this.stream;const n=Object.create(null);try{for(;this.startXRefQueue.length;){var s=this.startXRefQueue[0];if(n[s]){(0,r.warn)("readXRef - skipping XRef table since it was already parsed."),this.startXRefQueue.shift();continue}n[s]=!0,t.pos=s+t.start;const e=new o.Parser({lexer:new o.Lexer(t),xref:this,allowStreams:!0});var c,l=e.getObj();if((0,a.isCmd)(l,"xref")){if(c=this.processXRefTable(e),this.topDict||(this.topDict=c),l=c.get("XRefStm"),Number.isInteger(l)){var u=l;u in this.xrefstms||(this.xrefstms[u]=1,this.startXRefQueue.push(u))}}else{if(!Number.isInteger(l))throw new r.FormatError("Invalid XRef stream header");if(!Number.isInteger(e.getObj())||!(0,a.isCmd)(e.getObj(),"obj")||!(0,a.isStream)(l=e.getObj()))throw new r.FormatError("Invalid XRef stream");if(c=this.processXRefStream(l),this.topDict||(this.topDict=c),!c)throw new r.FormatError("Failed to read XRef stream")}l=c.get("Prev"),Number.isInteger(l)?this.startXRefQueue.push(l):(0,a.isRef)(l)&&this.startXRefQueue.push(l.num),this.startXRefQueue.shift()}return this.topDict}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.info)("(while reading XRef): "+e)}if(!e)throw new i.XRefParseException},getEntry:function(e){var t=this.entries[e];return t&&!t.free&&t.offset?t:null},fetchIfRef:function(e,t){return e instanceof a.Ref?this.fetch(e,t):e},fetch:function(e,t){if(!(e instanceof a.Ref))throw new Error("ref object is not a reference");const n=e.num,r=this._cacheMap.get(n);if(void 0!==r)return r instanceof a.Dict&&!r.objId&&(r.objId=e.toString()),r;let i=this.getEntry(n);return null===i?(this._cacheMap.set(n,i),i):(i=i.uncompressed?this.fetchUncompressed(e,i,t):this.fetchCompressed(e,i,t),(0,a.isDict)(i)?i.objId=e.toString():(0,a.isStream)(i)&&(i.dict.objId=e.toString()),i)},fetchUncompressed(e,t,n=!1){var r=e.gen,s=e.num;if(t.gen!==r)throw new i.XRefEntryException(`Inconsistent generation in XRef: ${e}`);var c=this.stream.makeSubStream(t.offset+this.stream.start);const l=new o.Parser({lexer:new o.Lexer(c),xref:this,allowStreams:!0});var u=l.getObj(),h=l.getObj(),d=l.getObj();if(u!==s||h!==r||!(d instanceof a.Cmd))throw new i.XRefEntryException(`Bad (uncompressed) XRef entry: ${e}`);if("obj"!==d.cmd){if(d.cmd.startsWith("obj")&&(s=parseInt(d.cmd.substring(3),10),!Number.isNaN(s)))return s;throw new i.XRefEntryException(`Bad (uncompressed) XRef entry: ${e}`)}return t=this.encrypt&&!n?l.getObj(this.encrypt.createCipherTransform(s,r)):l.getObj(),(0,a.isStream)(t)||this._cacheMap.set(s,t),t},fetchCompressed(e,t,n=!1){const s=t.offset,c=this.fetch(a.Ref.get(s,0));if(!(0,a.isStream)(c))throw new r.FormatError("bad ObjStm stream");const l=c.dict.get("First"),u=c.dict.get("N");if(!Number.isInteger(l)||!Number.isInteger(u))throw new r.FormatError("invalid first and n parameters for ObjStm stream");const h=new o.Parser({lexer:new o.Lexer(c),xref:this,allowStreams:!0}),d=new Array(u);for(let e=0;e<u;++e){const t=h.getObj();if(!Number.isInteger(t))throw new r.FormatError(`invalid object number in the ObjStm stream: ${t}`);const n=h.getObj();if(!Number.isInteger(n))throw new r.FormatError(`invalid object offset in the ObjStm stream: ${n}`);d[e]=t}const f=new Array(u);for(let e=0;e<u;++e){const t=h.getObj();if(f[e]=t,h.buf1 instanceof a.Cmd&&"endobj"===h.buf1.cmd&&h.shift(),(0,a.isStream)(t))continue;const n=d[e],r=this.entries[n];r&&r.offset===s&&r.gen===e&&this._cacheMap.set(n,t)}if(void 0===(t=f[t.gen]))throw new i.XRefEntryException(`Bad (compressed) XRef entry: ${e}`);return t},async fetchIfRefAsync(e,t){return e instanceof a.Ref?this.fetchAsync(e,t):e},async fetchAsync(e,t){try{return this.fetch(e,t)}catch(n){if(!(n instanceof i.MissingDataException))throw n;return await this.pdfManager.requestRange(n.begin,n.end),this.fetchAsync(e,t)}},getCatalogObj:function(){return this.root}},e}();t.XRef=d;class f{constructor(e,t,n){this.constructor===f&&(0,r.unreachable)("Cannot initialize NameOrNumberTree."),this.root=e,this.xref=t,this._type=n}getAll(){const e=Object.create(null);if(!this.root)return e;const t=this.xref,n=new a.RefSet;n.put(this.root);const i=[this.root];for(;i.length>0;){const o=t.fetchIfRef(i.shift());if(!(0,a.isDict)(o))continue;if(o.has("Kids")){const e=o.get("Kids");for(let t=0,a=e.length;t<a;t++){const a=e[t];if(n.has(a))throw new r.FormatError(`Duplicate entry in "${this._type}" tree.`);i.push(a),n.put(a)}continue}const s=o.get(this._type);if(Array.isArray(s))for(let n=0,r=s.length;n<r;n+=2)e[t.fetchIfRef(s[n])]=t.fetchIfRef(s[n+1])}return e}get(e){if(!this.root)return null;const t=this.xref;let n=t.fetchIfRef(this.root),a=0;for(;n.has("Kids");){if(++a>10)return(0,r.warn)(`Search depth limit reached for "${this._type}" tree.`),null;const i=n.get("Kids");if(!Array.isArray(i))return null;let o=0,s=i.length-1;for(;o<=s;){const r=o+s>>1,a=t.fetchIfRef(i[r]).get("Limits");if(e<t.fetchIfRef(a[0]))s=r-1;else{if(!(e>t.fetchIfRef(a[1]))){n=t.fetchIfRef(i[r]);break}o=r+1}}if(o>s)return null}const i=n.get(this._type);if(Array.isArray(i)){let n=0,a=i.length-2;for(;n<=a;){const r=n+a>>1,o=r+(1&r),s=t.fetchIfRef(i[o]);if(e<s)a=o-2;else{if(!(e>s))return t.fetchIfRef(i[o+1]);n=o+2}}(0,r.info)(`Falling back to an exhaustive search, for key "${e}", in "${this._type}" tree.`);for(let n=0,a=i.length;n<a;n+=2)if(t.fetchIfRef(i[n])===e)return(0,r.warn)(`The "${e}" key was found at an incorrect, i.e. out-of-order, position in "${this._type}" tree.`),t.fetchIfRef(i[n+1])}return null}}class p extends f{constructor(e,t){super(e,t,"Names")}}class g extends f{constructor(e,t){super(e,t,"Nums")}}var m=function(){function e(e,t){e&&(0,a.isDict)(e)&&(this.xref=t,this.root=e,e.has("FS")&&(this.fs=e.get("FS")),this.description=e.has("Desc")?(0,r.stringToPDFString)(e.get("Desc")):"",e.has("RF")&&(0,r.warn)("Related file specifications are not supported"),this.contentAvailable=!0,e.has("EF")||(this.contentAvailable=!1,(0,r.warn)("Non-embedded file specifications are not supported")))}function t(e){return e.has("UF")?e.get("UF"):e.has("F")?e.get("F"):e.has("Unix")?e.get("Unix"):e.has("Mac")?e.get("Mac"):e.has("DOS")?e.get("DOS"):null}return e.prototype={get filename(){if(!this._filename&&this.root){var e=t(this.root)||"unnamed";this._filename=(0,r.stringToPDFString)(e).replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\/g,"/")}return this._filename},get content(){if(!this.contentAvailable)return null;!this.contentRef&&this.root&&(this.contentRef=t(this.root.get("EF")));var e=null;if(this.contentRef){var n=this.xref.fetchIfRef(this.contentRef);n&&(0,a.isStream)(n)?e=n.getBytes():(0,r.warn)("Embedded file specification points to non-existing/invalid content")}else(0,r.warn)("Embedded file specification does not have a content");return e},get serializable(){return{filename:this.filename,content:this.content}}},e}();t.FileSpec=m;const v=function(){function e(e,t){if(e instanceof a.Dict)e=e.getRawValues();else if((0,a.isStream)(e))e=e.dict.getRawValues();else if(!Array.isArray(e))return;for(const r of e)((n=r)instanceof a.Ref||n instanceof a.Dict||Array.isArray(n)||(0,a.isStream)(n))&&t.push(r);var n}function t(e,t,n){this.dict=e,this.keys=t,this.xref=n,this.refSet=null}return t.prototype={async load(){if(!this.xref.stream.allChunksLoaded||this.xref.stream.allChunksLoaded())return;const{keys:e,dict:t}=this;this.refSet=new a.RefSet;const n=[];for(let r=0,a=e.length;r<a;r++){const a=t.getRaw(e[r]);void 0!==a&&n.push(a)}return this._walk(n)},async _walk(t){const n=[],r=[];for(;t.length;){let o=t.pop();if(o instanceof a.Ref){if(this.refSet.has(o))continue;try{this.refSet.put(o),o=this.xref.fetch(o)}catch(e){if(!(e instanceof i.MissingDataException))throw e;n.push(o),r.push({begin:e.begin,end:e.end})}}if(o&&o.getBaseStreams){const e=o.getBaseStreams();let t=!1;for(let n=0,a=e.length;n<a;n++){const a=e[n];a.allChunksLoaded&&!a.allChunksLoaded()&&(t=!0,r.push({begin:a.start,end:a.end}))}t&&n.push(o)}e(o,t)}if(r.length){await this.xref.stream.manager.requestRanges(r);for(let e=0,t=n.length;e<t;e++){const t=n[e];t instanceof a.Ref&&this.refSet.remove(t)}return this._walk(n)}this.refSet=null}},t}();t.ObjectLoader=v},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=t.Linearization=t.Lexer=void 0;var r=n(12),a=n(2),i=n(5),o=n(8),s=n(13),c=n(15),l=n(18),u=n(20);function h(e){const t=e.length;let n=1,r=0;for(let a=0;a<t;++a)n+=255&e[a],r+=n;return r%65521<<16|n%65521}class d{constructor({lexer:e,xref:t,allowStreams:n=!1,recoveryMode:r=!1}){this.lexer=e,this.xref=t,this.allowStreams=n,this.recoveryMode=r,this.imageCache=Object.create(null),this.refill()}refill(){this.buf1=this.lexer.getObj(),this.buf2=this.lexer.getObj()}shift(){this.buf2 instanceof i.Cmd&&"ID"===this.buf2.cmd?(this.buf1=this.buf2,this.buf2=null):(this.buf1=this.buf2,this.buf2=this.lexer.getObj())}tryShift(){try{return this.shift(),!0}catch(e){if(e instanceof o.MissingDataException)throw e;return!1}}getObj(e=null){const t=this.buf1;if(this.shift(),t instanceof i.Cmd)switch(t.cmd){case"BI":return this.makeInlineImage(e);case"[":const n=[];for(;!(0,i.isCmd)(this.buf1,"]")&&!(0,i.isEOF)(this.buf1);)n.push(this.getObj(e));if((0,i.isEOF)(this.buf1)){if(!this.recoveryMode)throw new a.FormatError("End of file inside array");return n}return this.shift(),n;case"<<":const r=new i.Dict(this.xref);for(;!(0,i.isCmd)(this.buf1,">>")&&!(0,i.isEOF)(this.buf1);){if(!(0,i.isName)(this.buf1)){(0,a.info)("Malformed dictionary: key must be a name object"),this.shift();continue}const t=this.buf1.name;if(this.shift(),(0,i.isEOF)(this.buf1))break;r.set(t,this.getObj(e))}if((0,i.isEOF)(this.buf1)){if(!this.recoveryMode)throw new a.FormatError("End of file inside dictionary");return r}return(0,i.isCmd)(this.buf2,"stream")?this.allowStreams?this.makeStream(r,e):r:(this.shift(),r);default:return t}if(Number.isInteger(t)){if(Number.isInteger(this.buf1)&&(0,i.isCmd)(this.buf2,"R")){const e=i.Ref.get(t,this.buf1);return this.shift(),this.shift(),e}return t}return"string"==typeof t&&e?e.decryptString(t):t}findDefaultInlineStreamEnd(e){const t=this.lexer,n=e.pos;let r,s,c=0;for(;-1!==(r=e.getByte());)if(0===c)c=69===r?1:0;else if(1===c)c=73===r?2:0;else if((0,a.assert)(2===c,"findDefaultInlineStreamEnd - invalid state."),32===r||10===r||13===r){s=e.pos;const n=e.peekBytes(10);for(let e=0,t=n.length;e<t;e++)if(r=n[e],(0!==r||0===n[e+1])&&10!==r&&13!==r&&(r<32||r>127)){c=0;break}if(2!==c)continue;if(t.knownCommands){const e=t.peekObj();e instanceof i.Cmd&&!t.knownCommands[e.cmd]&&(c=0)}else(0,a.warn)("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");if(2===c)break}else c=0;-1===r&&((0,a.warn)("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker"),s&&((0,a.warn)('... trying to recover by using the last "EI" occurrence.'),e.skip(-(e.pos-s))));let l=4;return e.skip(-l),r=e.peekByte(),e.skip(l),(0,o.isWhiteSpace)(r)||l--,e.pos-l-n}findDCTDecodeInlineStreamEnd(e){const t=e.pos;let n,r,i=!1;for(;-1!==(n=e.getByte());)if(255===n){switch(e.getByte()){case 0:break;case 255:e.skip(-1);break;case 217:i=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:r=e.getUint16(),r>2?e.skip(r-2):e.skip(-2)}if(i)break}const o=e.pos-t;return-1===n?((0,a.warn)("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead."),e.skip(-o),this.findDefaultInlineStreamEnd(e)):(this.inlineStreamSkipEI(e),o)}findASCII85DecodeInlineStreamEnd(e){const t=e.pos;let n;for(;-1!==(n=e.getByte());)if(126===n){const t=e.pos;for(n=e.peekByte();(0,o.isWhiteSpace)(n);)e.skip(),n=e.peekByte();if(62===n){e.skip();break}if(e.pos>t){const t=e.peekBytes(2);if(69===t[0]&&73===t[1])break}}const r=e.pos-t;return-1===n?((0,a.warn)("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead."),e.skip(-r),this.findDefaultInlineStreamEnd(e)):(this.inlineStreamSkipEI(e),r)}findASCIIHexDecodeInlineStreamEnd(e){const t=e.pos;let n;for(;-1!==(n=e.getByte())&&62!==n;);const r=e.pos-t;return-1===n?((0,a.warn)("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead."),e.skip(-r),this.findDefaultInlineStreamEnd(e)):(this.inlineStreamSkipEI(e),r)}inlineStreamSkipEI(e){let t,n=0;for(;-1!==(t=e.getByte());)if(0===n)n=69===t?1:0;else if(1===n)n=73===t?2:0;else if(2===n)break}makeInlineImage(e){const t=this.lexer,n=t.stream,r=new i.Dict(this.xref);let o;for(;!(0,i.isCmd)(this.buf1,"ID")&&!(0,i.isEOF)(this.buf1);){if(!(0,i.isName)(this.buf1))throw new a.FormatError("Dictionary key must be a name object");const t=this.buf1.name;if(this.shift(),(0,i.isEOF)(this.buf1))break;r.set(t,this.getObj(e))}-1!==t.beginInlineImagePos&&(o=n.pos-t.beginInlineImagePos);const s=r.get("Filter","F");let c;if((0,i.isName)(s))c=s.name;else if(Array.isArray(s)){const e=this.xref.fetchIfRef(s[0]);(0,i.isName)(e)&&(c=e.name)}const l=n.pos;let u;u="DCTDecode"===c||"DCT"===c?this.findDCTDecodeInlineStreamEnd(n):"ASCII85Decode"===c||"A85"===c?this.findASCII85DecodeInlineStreamEnd(n):"ASCIIHexDecode"===c||"AHx"===c?this.findASCIIHexDecodeInlineStreamEnd(n):this.findDefaultInlineStreamEnd(n);let d,f=n.makeSubStream(l,u,r);if(u<1e3&&o<5552){const e=f.getBytes();f.reset();const r=n.pos;n.pos=t.beginInlineImagePos;const a=n.getBytes(o);n.pos=r,d=h(e)+"_"+h(a);const s=this.imageCache[d];if(void 0!==s)return this.buf2=i.Cmd.get("EI"),this.shift(),s.reset(),s}return e&&(f=e.createStream(f,u)),f=this.filter(f,r,u),f.dict=r,void 0!==d&&(f.cacheKey=`inline_${u}_${d}`,this.imageCache[d]=f),this.buf2=i.Cmd.get("EI"),this.shift(),f}_findStreamLength(e,t){const{stream:n}=this.lexer;n.pos=e;const r=t.length;for(;n.pos<n.end;){const a=n.peekBytes(2048),i=a.length-r;if(i<=0)break;let o=0;for(;o<i;){let i=0;for(;i<r&&a[o+i]===t[i];)i++;if(i>=r)return n.pos+=o,n.pos-e;o++}n.pos+=i}return-1}makeStream(e,t){const n=this.lexer;let r=n.stream;n.skipToNextLine();const s=r.pos-1;let c=e.get("Length");if(Number.isInteger(c)||((0,a.info)(`Bad length "${c}" in stream`),c=0),r.pos=s+c,n.nextChar(),this.tryShift()&&(0,i.isCmd)(this.buf2,"endstream"))this.shift();else{const e=new Uint8Array([101,110,100,115,116,114,101,97,109]);let t=this._findStreamLength(s,e);if(t<0){const n=1;for(let i=1;i<=n;i++){const n=e.length-i,c=e.slice(0,n),l=this._findStreamLength(s,c);if(l>=0){const e=r.peekBytes(n+1)[n];if(!(0,o.isWhiteSpace)(e))break;(0,a.info)(`Found "${(0,a.bytesToString)(c)}" when searching for endstream command.`),t=l;break}}if(t<0)throw new a.FormatError("Missing endstream command.")}c=t,n.nextChar(),this.shift(),this.shift()}return this.shift(),r=r.makeSubStream(s,c,e),t&&(r=t.createStream(r,c)),r=this.filter(r,e,c),r.dict=e,r}filter(e,t,n){let r=t.get("Filter","F"),o=t.get("DecodeParms","DP");if((0,i.isName)(r))return Array.isArray(o)&&(0,a.warn)("/DecodeParms should not contain an Array, when /Filter contains a Name."),this.makeFilter(e,r.name,n,o);let s=n;if(Array.isArray(r)){const t=r,n=o;for(let c=0,l=t.length;c<l;++c){if(r=this.xref.fetchIfRef(t[c]),!(0,i.isName)(r))throw new a.FormatError(`Bad filter name "${r}"`);o=null,Array.isArray(n)&&c in n&&(o=this.xref.fetchIfRef(n[c])),e=this.makeFilter(e,r.name,s,o),s=null}}return e}makeFilter(e,t,n,i){if(0===n)return(0,a.warn)(`Empty "${t}" stream.`),new r.NullStream;try{const o=this.xref.stats.streamTypes;if("FlateDecode"===t||"Fl"===t)return o[a.StreamType.FLATE]=!0,i?new r.PredictorStream(new r.FlateStream(e,n),n,i):new r.FlateStream(e,n);if("LZWDecode"===t||"LZW"===t){o[a.StreamType.LZW]=!0;let t=1;return i?(i.has("EarlyChange")&&(t=i.get("EarlyChange")),new r.PredictorStream(new r.LZWStream(e,n,t),n,i)):new r.LZWStream(e,n,t)}return"DCTDecode"===t||"DCT"===t?(o[a.StreamType.DCT]=!0,new l.JpegStream(e,n,e.dict,i)):"JPXDecode"===t||"JPX"===t?(o[a.StreamType.JPX]=!0,new u.JpxStream(e,n,e.dict,i)):"ASCII85Decode"===t||"A85"===t?(o[a.StreamType.A85]=!0,new r.Ascii85Stream(e,n)):"ASCIIHexDecode"===t||"AHx"===t?(o[a.StreamType.AHX]=!0,new r.AsciiHexStream(e,n)):"CCITTFaxDecode"===t||"CCF"===t?(o[a.StreamType.CCF]=!0,new s.CCITTFaxStream(e,n,i)):"RunLengthDecode"===t||"RL"===t?(o[a.StreamType.RLX]=!0,new r.RunLengthStream(e,n)):"JBIG2Decode"===t?(o[a.StreamType.JBIG]=!0,new c.Jbig2Stream(e,n,e.dict,i)):((0,a.warn)(`Filter "${t}" is not supported.`),e)}catch(e){if(e instanceof o.MissingDataException)throw e;return(0,a.warn)(`Invalid stream: "${e}"`),new r.NullStream}}}t.Parser=d;const f=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function p(e){return e>=48&&e<=57?15&e:e>=65&&e<=70||e>=97&&e<=102?9+(15&e):-1}class g{constructor(e,t=null){this.stream=e,this.nextChar(),this.strBuf=[],this.knownCommands=t,this._hexStringNumWarn=0,this.beginInlineImagePos=-1}nextChar(){return this.currentChar=this.stream.getByte()}peekChar(){return this.stream.peekByte()}getNumber(){let e=this.currentChar,t=!1,n=0,r=0;if(45===e?(r=-1,e=this.nextChar(),45===e&&(e=this.nextChar())):43===e&&(r=1,e=this.nextChar()),10===e||13===e)do{e=this.nextChar()}while(10===e||13===e);if(46===e&&(n=10,e=this.nextChar()),e<48||e>57){if(10===n&&0===r&&((0,o.isWhiteSpace)(e)||-1===e))return(0,a.warn)("Lexer.getNumber - treating a single decimal point as zero."),0;throw new a.FormatError(`Invalid number: ${String.fromCharCode(e)} (charCode ${e})`)}r=r||1;let i=e-48,s=0,c=1;for(;(e=this.nextChar())>=0;)if(e>=48&&e<=57){const r=e-48;t?s=10*s+r:(0!==n&&(n*=10),i=10*i+r)}else if(46===e){if(0!==n)break;n=1}else if(45===e)(0,a.warn)("Badly formatted number: minus sign in the middle");else{if(69!==e&&101!==e)break;if(e=this.peekChar(),43===e||45===e)c=45===e?-1:1,this.nextChar();else if(e<48||e>57)break;t=!0}return 0!==n&&(i/=n),t&&(i*=10**(c*s)),r*i}getString(){let e=1,t=!1;const n=this.strBuf;n.length=0;let r=this.nextChar();for(;;){let i=!1;switch(0|r){case-1:(0,a.warn)("Unterminated string"),t=!0;break;case 40:++e,n.push("(");break;case 41:0==--e?(this.nextChar(),t=!0):n.push(")");break;case 92:switch(r=this.nextChar(),r){case-1:(0,a.warn)("Unterminated string"),t=!0;break;case 110:n.push("\n");break;case 114:n.push("\r");break;case 116:n.push("\t");break;case 98:n.push("\b");break;case 102:n.push("\f");break;case 92:case 40:case 41:n.push(String.fromCharCode(r));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:let e=15&r;r=this.nextChar(),i=!0,r>=48&&r<=55&&(e=(e<<3)+(15&r),r=this.nextChar(),r>=48&&r<=55&&(i=!1,e=(e<<3)+(15&r))),n.push(String.fromCharCode(e));break;case 13:10===this.peekChar()&&this.nextChar();break;case 10:break;default:n.push(String.fromCharCode(r))}break;default:n.push(String.fromCharCode(r))}if(t)break;i||(r=this.nextChar())}return n.join("")}getName(){let e,t;const n=this.strBuf;for(n.length=0;(e=this.nextChar())>=0&&!f[e];)if(35===e){if(e=this.nextChar(),f[e]){(0,a.warn)("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number."),n.push("#");break}const r=p(e);if(-1!==r){t=e,e=this.nextChar();const i=p(e);if(-1===i){if((0,a.warn)(`Lexer_getName: Illegal digit (${String.fromCharCode(e)}) in hexadecimal number.`),n.push("#",String.fromCharCode(t)),f[e])break;n.push(String.fromCharCode(e));continue}n.push(String.fromCharCode(r<<4|i))}else n.push("#",String.fromCharCode(e))}else n.push(String.fromCharCode(e));return n.length>127&&(0,a.warn)(`Name token is longer than allowed by the spec: ${n.length}`),i.Name.get(n.join(""))}_hexStringWarn(e){5!=this._hexStringNumWarn++?this._hexStringNumWarn>5||(0,a.warn)(`getHexString - ignoring invalid character: ${e}`):(0,a.warn)("getHexString - ignoring additional invalid characters.")}getHexString(){const e=this.strBuf;e.length=0;let t,n,r=this.currentChar,i=!0;for(this._hexStringNumWarn=0;;){if(r<0){(0,a.warn)("Unterminated hex string");break}if(62===r){this.nextChar();break}if(1!==f[r]){if(i){if(t=p(r),-1===t){this._hexStringWarn(r),r=this.nextChar();continue}}else{if(n=p(r),-1===n){this._hexStringWarn(r),r=this.nextChar();continue}e.push(String.fromCharCode(t<<4|n))}i=!i,r=this.nextChar()}else r=this.nextChar()}return e.join("")}getObj(){let e=!1,t=this.currentChar;for(;;){if(t<0)return i.EOF;if(e)10!==t&&13!==t||(e=!1);else if(37===t)e=!0;else if(1!==f[t])break;t=this.nextChar()}switch(0|t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),i.Cmd.get("[");case 93:return this.nextChar(),i.Cmd.get("]");case 60:return t=this.nextChar(),60===t?(this.nextChar(),i.Cmd.get("<<")):this.getHexString();case 62:return t=this.nextChar(),62===t?(this.nextChar(),i.Cmd.get(">>")):i.Cmd.get(">");case 123:return this.nextChar(),i.Cmd.get("{");case 125:return this.nextChar(),i.Cmd.get("}");case 41:throw this.nextChar(),new a.FormatError(`Illegal character: ${t}`)}let n=String.fromCharCode(t);const r=this.knownCommands;let o=r&&void 0!==r[n];for(;(t=this.nextChar())>=0&&!f[t];){const e=n+String.fromCharCode(t);if(o&&void 0===r[e])break;if(128===n.length)throw new a.FormatError(`Command token too long: ${n.length}`);n=e,o=r&&void 0!==r[n]}return"true"===n||"false"!==n&&("null"===n?null:("BI"===n&&(this.beginInlineImagePos=this.stream.pos),i.Cmd.get(n)))}peekObj(){const e=this.stream.pos,t=this.currentChar,n=this.beginInlineImagePos;let r;try{r=this.getObj()}catch(e){if(e instanceof o.MissingDataException)throw e;(0,a.warn)(`peekObj: ${e}`)}return this.stream.pos=e,this.currentChar=t,this.beginInlineImagePos=n,r}skipToNextLine(){let e=this.currentChar;for(;e>=0;){if(13===e){e=this.nextChar(),10===e&&this.nextChar();break}if(10===e){this.nextChar();break}e=this.nextChar()}}}t.Lexer=g,t.Linearization=class{static create(e){function t(e,t,n=!1){const r=e.get(t);if(Number.isInteger(r)&&(n?r>=0:r>0))return r;throw new Error(`The "${t}" parameter in the linearization dictionary is invalid.`)}const n=new d({lexer:new g(e),xref:null}),r=n.getObj(),o=n.getObj(),s=n.getObj(),c=n.getObj();let l,u;if(!(Number.isInteger(r)&&Number.isInteger(o)&&(0,i.isCmd)(s,"obj")&&(0,i.isDict)(c)&&(0,a.isNum)(l=c.get("Linearized"))&&l>0))return null;if((u=t(c,"L"))!==e.length)throw new Error('The "L" parameter in the linearization dictionary does not equal the stream length.');return{length:u,hints:function(e){const t=e.get("H");let n;if(Array.isArray(t)&&(2===(n=t.length)||4===n)){for(let e=0;e<n;e++){const n=t[e];if(!(Number.isInteger(n)&&n>0))throw new Error(`Hint (${e}) in the linearization dictionary is invalid.`)}return t}throw new Error("Hint array in the linearization dictionary is invalid.")}(c),objectNumberFirst:t(c,"O"),endFirst:t(c,"E"),numPages:t(c,"N"),mainXRefEntriesOffset:t(c,"T"),pageFirst:c.has("P")?t(c,"P",!0):0}}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StringStream=t.StreamsSequenceStream=t.Stream=t.RunLengthStream=t.PredictorStream=t.NullStream=t.LZWStream=t.FlateStream=t.DecryptStream=t.DecodeStream=t.AsciiHexStream=t.Ascii85Stream=void 0;var r=n(2),a=n(5),i=n(8),o=function(){function e(e,t,n,r){this.bytes=e instanceof Uint8Array?e:new Uint8Array(e),this.start=t||0,this.pos=this.start,this.end=t+n||this.bytes.length,this.dict=r}return e.prototype={get length(){return this.end-this.start},get isEmpty(){return 0===this.length},getByte:function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},getUint16:function(){var e=this.getByte(),t=this.getByte();return-1===e||-1===t?-1:(e<<8)+t},getInt32:function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},getBytes(e,t=!1){var n=this.bytes,r=this.pos,a=this.end;if(!e){const e=n.subarray(r,a);return t?new Uint8ClampedArray(e):e}var i=r+e;i>a&&(i=a),this.pos=i;const o=n.subarray(r,i);return t?new Uint8ClampedArray(o):o},peekByte:function(){var e=this.getByte();return-1!==e&&this.pos--,e},peekBytes(e,t=!1){var n=this.getBytes(e,t);return this.pos-=n.length,n},getByteRange(e,t){return e<0&&(e=0),t>this.end&&(t=this.end),this.bytes.subarray(e,t)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=this.start},moveStart:function(){this.start=this.pos},makeSubStream:function(t,n,r){return new e(this.bytes.buffer,t,n,r)}},e}();t.Stream=o;var s=function(){function e(e){const t=(0,r.stringToBytes)(e);o.call(this,t)}return e.prototype=o.prototype,e}();t.StringStream=s;var c=function(){var e=new Uint8Array(0);function t(t){if(this._rawMinBufferLength=t||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=e,this.minBufferLength=512,t)for(;this.minBufferLength<t;)this.minBufferLength*=2}return t.prototype={get length(){(0,r.unreachable)("Should not access DecodeStream.length")},get isEmpty(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength},ensureBuffer:function(e){var t=this.buffer;if(e<=t.byteLength)return t;for(var n=this.minBufferLength;n<e;)n*=2;var r=new Uint8Array(n);return r.set(t),this.buffer=r},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},getUint16:function(){var e=this.getByte(),t=this.getByte();return-1===e||-1===t?-1:(e<<8)+t},getInt32:function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},getBytes(e,t=!1){var n,r=this.pos;if(e){for(this.ensureBuffer(r+e),n=r+e;!this.eof&&this.bufferLength<n;)this.readBlock();var a=this.bufferLength;n>a&&(n=a)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}this.pos=n;const i=this.buffer.subarray(r,n);return!t||i instanceof Uint8ClampedArray?i:new Uint8ClampedArray(i)},peekByte:function(){var e=this.getByte();return-1!==e&&this.pos--,e},peekBytes(e,t=!1){var n=this.getBytes(e,t);return this.pos-=n.length,n},makeSubStream:function(e,t,n){for(var r=e+t;this.bufferLength<=r&&!this.eof;)this.readBlock();return new o(this.buffer,e,t,n)},getByteRange(e,t){(0,r.unreachable)("Should not call DecodeStream.getByteRange")},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0},getBaseStreams:function(){return this.str&&this.str.getBaseStreams?this.str.getBaseStreams():[]}},t}();t.DecodeStream=c;var l=function(){function e(e){this.streams=e;let t=0;for(let n=0,r=e.length;n<r;n++){const r=e[n];t+=r instanceof c?r._rawMinBufferLength:r.length}c.call(this,t)}return e.prototype=Object.create(c.prototype),e.prototype.readBlock=function(){var e=this.streams;if(0!==e.length){var t=e.shift().getBytes(),n=this.bufferLength,r=n+t.length;this.ensureBuffer(r).set(t,n),this.bufferLength=r}else this.eof=!0},e.prototype.getBaseStreams=function(){for(var e=[],t=0,n=this.streams.length;t<n;t++){var r=this.streams[t];r.getBaseStreams&&e.push(...r.getBaseStreams())}return e},e}();t.StreamsSequenceStream=l;var u=function(){var e=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),n=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),a=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],i=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function o(e,t){this.str=e,this.dict=e.dict;var n=e.getByte(),a=e.getByte();if(-1===n||-1===a)throw new r.FormatError(`Invalid header in flate stream: ${n}, ${a}`);if(8!=(15&n))throw new r.FormatError(`Unknown compression method in flate stream: ${n}, ${a}`);if(((n<<8)+a)%31!=0)throw new r.FormatError(`Bad FCHECK in flate stream: ${n}, ${a}`);if(32&a)throw new r.FormatError(`FDICT bit set in flate stream: ${n}, ${a}`);this.codeSize=0,this.codeBuf=0,c.call(this,t)}return o.prototype=Object.create(c.prototype),o.prototype.getBits=function(e){for(var t,n=this.str,a=this.codeSize,i=this.codeBuf;a<e;){if(-1===(t=n.getByte()))throw new r.FormatError("Bad encoding in flate stream");i|=t<<a,a+=8}return t=i&(1<<e)-1,this.codeBuf=i>>e,this.codeSize=a-=e,t},o.prototype.getCode=function(e){for(var t,n=this.str,a=e[0],i=e[1],o=this.codeSize,s=this.codeBuf;o<i&&-1!==(t=n.getByte());)s|=t<<o,o+=8;var c=a[s&(1<<i)-1],l=c>>16,u=65535&c;if(l<1||o<l)throw new r.FormatError("Bad encoding in flate stream");return this.codeBuf=s>>l,this.codeSize=o-l,u},o.prototype.generateHuffmanTable=function(e){var t,n=e.length,r=0;for(t=0;t<n;++t)e[t]>r&&(r=e[t]);for(var a=1<<r,i=new Int32Array(a),o=1,s=0,c=2;o<=r;++o,s<<=1,c<<=1)for(var l=0;l<n;++l)if(e[l]===o){var u=0,h=s;for(t=0;t<o;++t)u=u<<1|1&h,h>>=1;for(t=u;t<a;t+=c)i[t]=o<<16|l;++s}return[i,r]},o.prototype.readBlock=function(){var o,s,c=this.str,l=this.getBits(3);if(1&l&&(this.eof=!0),0!=(l>>=1)){var u,h;if(1===l)u=a,h=i;else{if(2!==l)throw new r.FormatError("Unknown block type in flate stream");var d,f=this.getBits(5)+257,p=this.getBits(5)+1,g=this.getBits(4)+4,m=new Uint8Array(e.length);for(d=0;d<g;++d)m[e[d]]=this.getBits(3);var v=this.generateHuffmanTable(m);s=0,d=0;for(var b,y,w,x=f+p,C=new Uint8Array(x);d<x;){var k=this.getCode(v);if(16===k)b=2,y=3,w=s;else if(17===k)b=3,y=3,w=s=0;else{if(18!==k){C[d++]=s=k;continue}b=7,y=11,w=s=0}for(var S=this.getBits(b)+y;S-- >0;)C[d++]=w}u=this.generateHuffmanTable(C.subarray(0,f)),h=this.generateHuffmanTable(C.subarray(f,x))}for(var A=(o=this.buffer)?o.length:0,_=this.bufferLength;;){var E=this.getCode(u);if(E<256)_+1>=A&&(A=(o=this.ensureBuffer(_+1)).length),o[_++]=E;else{if(256===E)return void(this.bufferLength=_);var I=(E=t[E-=257])>>16;I>0&&(I=this.getBits(I)),s=(65535&E)+I,E=this.getCode(h),(I=(E=n[E])>>16)>0&&(I=this.getBits(I));var T=(65535&E)+I;_+s>=A&&(A=(o=this.ensureBuffer(_+s)).length);for(var R=0;R<s;++R,++_)o[_]=o[_-T]}}}else{var F;if(-1===(F=c.getByte()))throw new r.FormatError("Bad block header in flate stream");var P=F;if(-1===(F=c.getByte()))throw new r.FormatError("Bad block header in flate stream");if(P|=F<<8,-1===(F=c.getByte()))throw new r.FormatError("Bad block header in flate stream");var D=F;if(-1===(F=c.getByte()))throw new r.FormatError("Bad block header in flate stream");if((D|=F<<8)!=(65535&~P)&&(0!==P||0!==D))throw new r.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;const e=this.bufferLength,t=e+P;if(o=this.ensureBuffer(t),this.bufferLength=t,0===P)-1===c.peekByte()&&(this.eof=!0);else{const t=c.getBytes(P);o.set(t,e),t.length<P&&(this.eof=!0)}}},o}();t.FlateStream=u;var h=function(){function e(e,t,n){if(!(0,a.isDict)(n))return e;var i=this.predictor=n.get("Predictor")||1;if(i<=1)return e;if(2!==i&&(i<10||i>15))throw new r.FormatError(`Unsupported predictor: ${i}`);this.readBlock=2===i?this.readBlockTiff:this.readBlockPng,this.str=e,this.dict=e.dict;var o=this.colors=n.get("Colors")||1,s=this.bits=n.get("BitsPerComponent")||8,l=this.columns=n.get("Columns")||1;return this.pixBytes=o*s+7>>3,this.rowBytes=l*o*s+7>>3,c.call(this,t),this}return e.prototype=Object.create(c.prototype),e.prototype.readBlockTiff=function(){var e=this.rowBytes,t=this.bufferLength,n=this.ensureBuffer(t+e),r=this.bits,a=this.colors,i=this.str.getBytes(e);if(this.eof=!i.length,!this.eof){var o,s=0,c=0,l=0,u=0,h=t;if(1===r&&1===a)for(o=0;o<e;++o){var d=i[o]^s;d^=d>>1,d^=d>>2,s=(1&(d^=d>>4))<<7,n[h++]=d}else if(8===r){for(o=0;o<a;++o)n[h++]=i[o];for(;o<e;++o)n[h]=n[h-a]+i[o],h++}else if(16===r){var f=2*a;for(o=0;o<f;++o)n[h++]=i[o];for(;o<e;o+=2){var p=((255&i[o])<<8)+(255&i[o+1])+((255&n[h-f])<<8)+(255&n[h-f+1]);n[h++]=p>>8&255,n[h++]=255&p}}else{var g=new Uint8Array(a+1),m=(1<<r)-1,v=0,b=t,y=this.columns;for(o=0;o<y;++o)for(var w=0;w<a;++w)l<r&&(s=s<<8|255&i[v++],l+=8),g[w]=g[w]+(s>>l-r)&m,l-=r,c=c<<r|g[w],(u+=r)>=8&&(n[b++]=c>>u-8&255,u-=8);u>0&&(n[b++]=(c<<8-u)+(s&(1<<8-u)-1))}this.bufferLength+=e}},e.prototype.readBlockPng=function(){var e=this.rowBytes,t=this.pixBytes,n=this.str.getByte(),a=this.str.getBytes(e);if(this.eof=!a.length,!this.eof){var i=this.bufferLength,o=this.ensureBuffer(i+e),s=o.subarray(i-e,i);0===s.length&&(s=new Uint8Array(e));var c,l,u,h=i;switch(n){case 0:for(c=0;c<e;++c)o[h++]=a[c];break;case 1:for(c=0;c<t;++c)o[h++]=a[c];for(;c<e;++c)o[h]=o[h-t]+a[c]&255,h++;break;case 2:for(c=0;c<e;++c)o[h++]=s[c]+a[c]&255;break;case 3:for(c=0;c<t;++c)o[h++]=(s[c]>>1)+a[c];for(;c<e;++c)o[h]=(s[c]+o[h-t]>>1)+a[c]&255,h++;break;case 4:for(c=0;c<t;++c)l=s[c],u=a[c],o[h++]=l+u;for(;c<e;++c){l=s[c];var d=s[c-t],f=o[h-t],p=f+l-d,g=p-f;g<0&&(g=-g);var m=p-l;m<0&&(m=-m);var v=p-d;v<0&&(v=-v),u=a[c],o[h++]=g<=m&&g<=v?f+u:m<=v?l+u:d+u}break;default:throw new r.FormatError(`Unsupported predictor: ${n}`)}this.bufferLength+=e}},e}();t.PredictorStream=h;var d=function(){function e(e,t,n){this.str=e,this.dict=e.dict,this.decrypt=n,this.nextChunk=null,this.initialized=!1,c.call(this,t)}return e.prototype=Object.create(c.prototype),e.prototype.readBlock=function(){var e;if(this.initialized?e=this.nextChunk:(e=this.str.getBytes(512),this.initialized=!0),e&&0!==e.length){this.nextChunk=this.str.getBytes(512);var t=this.nextChunk&&this.nextChunk.length>0;e=(0,this.decrypt)(e,!t);var n,r=this.bufferLength,a=e.length,i=this.ensureBuffer(r+a);for(n=0;n<a;n++)i[r++]=e[n];this.bufferLength=r}else this.eof=!0},e}();t.DecryptStream=d;var f=function(){function e(e,t){this.str=e,this.dict=e.dict,this.input=new Uint8Array(5),t&&(t*=.8),c.call(this,t)}return e.prototype=Object.create(c.prototype),e.prototype.readBlock=function(){for(var e=this.str,t=e.getByte();(0,i.isWhiteSpace)(t);)t=e.getByte();if(-1!==t&&126!==t){var n,r,a=this.bufferLength;if(122===t){for(n=this.ensureBuffer(a+4),r=0;r<4;++r)n[a+r]=0;this.bufferLength+=4}else{var o=this.input;for(o[0]=t,r=1;r<5;++r){for(t=e.getByte();(0,i.isWhiteSpace)(t);)t=e.getByte();if(o[r]=t,-1===t||126===t)break}if(n=this.ensureBuffer(a+r-1),this.bufferLength+=r-1,r<5){for(;r<5;++r)o[r]=117;this.eof=!0}var s=0;for(r=0;r<5;++r)s=85*s+(o[r]-33);for(r=3;r>=0;--r)n[a+r]=255&s,s>>=8}}else this.eof=!0},e}();t.Ascii85Stream=f;var p=function(){function e(e,t){this.str=e,this.dict=e.dict,this.firstDigit=-1,t&&(t*=.5),c.call(this,t)}return e.prototype=Object.create(c.prototype),e.prototype.readBlock=function(){var e=this.str.getBytes(8e3);if(e.length){for(var t=e.length+1>>1,n=this.ensureBuffer(this.bufferLength+t),r=this.bufferLength,a=this.firstDigit,i=0,o=e.length;i<o;i++){var s,c=e[i];if(c>=48&&c<=57)s=15&c;else{if(!(c>=65&&c<=70||c>=97&&c<=102)){if(62===c){this.eof=!0;break}continue}s=9+(15&c)}a<0?a=s:(n[r++]=a<<4|s,a=-1)}a>=0&&this.eof&&(n[r++]=a<<4,a=-1),this.firstDigit=a,this.bufferLength=r}else this.eof=!0},e}();t.AsciiHexStream=p;var g=function(){function e(e,t){this.str=e,this.dict=e.dict,c.call(this,t)}return e.prototype=Object.create(c.prototype),e.prototype.readBlock=function(){var e=this.str.getBytes(2);if(!e||e.length<2||128===e[0])this.eof=!0;else{var t,n=this.bufferLength,r=e[0];if(r<128){if((t=this.ensureBuffer(n+r+1))[n++]=e[1],r>0){var a=this.str.getBytes(r);t.set(a,n),n+=r}}else{r=257-r;var i=e[1];t=this.ensureBuffer(n+r+1);for(var o=0;o<r;o++)t[n++]=i}this.bufferLength=n}},e}();t.RunLengthStream=g;var m=function(){function e(e,t,n){this.str=e,this.dict=e.dict,this.cachedData=0,this.bitsCached=0;for(var r=4096,a={earlyChange:n,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(r),dictionaryLengths:new Uint16Array(r),dictionaryPrevCodes:new Uint16Array(r),currentSequence:new Uint8Array(r),currentSequenceLength:0},i=0;i<256;++i)a.dictionaryValues[i]=i,a.dictionaryLengths[i]=1;this.lzwState=a,c.call(this,t)}return e.prototype=Object.create(c.prototype),e.prototype.readBits=function(e){for(var t=this.bitsCached,n=this.cachedData;t<e;){var r=this.str.getByte();if(-1===r)return this.eof=!0,null;n=n<<8|r,t+=8}return this.bitsCached=t-=e,this.cachedData=n,this.lastCode=null,n>>>t&(1<<e)-1},e.prototype.readBlock=function(){var e,t,n,r=1024,a=this.lzwState;if(a){var i=a.earlyChange,o=a.nextCode,s=a.dictionaryValues,c=a.dictionaryLengths,l=a.dictionaryPrevCodes,u=a.codeLength,h=a.prevCode,d=a.currentSequence,f=a.currentSequenceLength,p=0,g=this.bufferLength,m=this.ensureBuffer(this.bufferLength+r);for(e=0;e<512;e++){var v=this.readBits(u),b=f>0;if(v<256)d[0]=v,f=1;else{if(!(v>=258)){if(256===v){u=9,o=258,f=0;continue}this.eof=!0,delete this.lzwState;break}if(v<o)for(t=(f=c[v])-1,n=v;t>=0;t--)d[t]=s[n],n=l[n];else d[f++]=d[0]}if(b&&(l[o]=h,c[o]=c[h]+1,s[o]=d[0],u=++o+i&o+i-1?u:0|Math.min(Math.log(o+i)/.6931471805599453+1,12)),h=v,r<(p+=f)){do{r+=512}while(r<p);m=this.ensureBuffer(this.bufferLength+r)}for(t=0;t<f;t++)m[g++]=d[t]}a.nextCode=o,a.codeLength=u,a.prevCode=h,a.currentSequenceLength=f,this.bufferLength=g}},e}();t.LZWStream=m;var v=function(){function e(){o.call(this,new Uint8Array(0))}return e.prototype=o.prototype,e}();t.NullStream=v},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CCITTFaxStream=void 0;var r=n(5),a=n(14),i=n(12),o=function(){function e(e,t,n){this.str=e,this.dict=e.dict,(0,r.isDict)(n)||(n=r.Dict.empty);const o={next:()=>e.getByte()};this.ccittFaxDecoder=new a.CCITTFaxDecoder(o,{K:n.get("K"),EndOfLine:n.get("EndOfLine"),EncodedByteAlign:n.get("EncodedByteAlign"),Columns:n.get("Columns"),Rows:n.get("Rows"),EndOfBlock:n.get("EndOfBlock"),BlackIs1:n.get("BlackIs1")}),i.DecodeStream.call(this,t)}return e.prototype=Object.create(i.DecodeStream.prototype),e.prototype.readBlock=function(){for(;!this.eof;){const e=this.ccittFaxDecoder.readNextChar();if(-1===e)return void(this.eof=!0);this.ensureBuffer(this.bufferLength+1),this.buffer[this.bufferLength++]=e}},e}();t.CCITTFaxStream=o},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CCITTFaxDecoder=void 0;var r=n(2);const a=function(){const e=-1,t=[[-1,-1],[-1,-1],[7,8],[7,7],[6,6],[6,6],[6,5],[6,5],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2]],n=[[-1,-1],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],a=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],i=[[-1,-1],[-1,-1],[12,-2],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],o=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],s=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];function c(e,t={}){if(!e||"function"!=typeof e.next)throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=e,this.eof=!1,this.encoding=t.K||0,this.eoline=t.EndOfLine||!1,this.byteAlign=t.EncodedByteAlign||!1,this.columns=t.Columns||1728,this.rows=t.Rows||0;let n,r=t.EndOfBlock;for(null==r&&(r=!0),this.eoblock=r,this.black=t.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;0===(n=this._lookBits(12));)this._eatBits(1);1===n&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}return c.prototype={readNextChar(){if(this.eof)return-1;const t=this.refLine,n=this.codingLine,a=this.columns;let i,o,s,c,l;if(0===this.outputBits){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;let s,l,u;if(this.err=!1,this.nextLine2D){for(c=0;n[c]<a;++c)t[c]=n[c];for(t[c++]=a,t[c]=a,n[0]=0,this.codingPos=0,i=0,o=0;n[this.codingPos]<a;)switch(s=this._getTwoDimCode(),s){case 0:this._addPixels(t[i+1],o),t[i+1]<a&&(i+=2);break;case 1:if(s=l=0,o){do{s+=u=this._getBlackCode()}while(u>=64);do{l+=u=this._getWhiteCode()}while(u>=64)}else{do{s+=u=this._getWhiteCode()}while(u>=64);do{l+=u=this._getBlackCode()}while(u>=64)}for(this._addPixels(n[this.codingPos]+s,o),n[this.codingPos]<a&&this._addPixels(n[this.codingPos]+l,1^o);t[i]<=n[this.codingPos]&&t[i]<a;)i+=2;break;case 7:if(this._addPixels(t[i]+3,o),o^=1,n[this.codingPos]<a)for(++i;t[i]<=n[this.codingPos]&&t[i]<a;)i+=2;break;case 5:if(this._addPixels(t[i]+2,o),o^=1,n[this.codingPos]<a)for(++i;t[i]<=n[this.codingPos]&&t[i]<a;)i+=2;break;case 3:if(this._addPixels(t[i]+1,o),o^=1,n[this.codingPos]<a)for(++i;t[i]<=n[this.codingPos]&&t[i]<a;)i+=2;break;case 2:if(this._addPixels(t[i],o),o^=1,n[this.codingPos]<a)for(++i;t[i]<=n[this.codingPos]&&t[i]<a;)i+=2;break;case 8:if(this._addPixelsNeg(t[i]-3,o),o^=1,n[this.codingPos]<a)for(i>0?--i:++i;t[i]<=n[this.codingPos]&&t[i]<a;)i+=2;break;case 6:if(this._addPixelsNeg(t[i]-2,o),o^=1,n[this.codingPos]<a)for(i>0?--i:++i;t[i]<=n[this.codingPos]&&t[i]<a;)i+=2;break;case 4:if(this._addPixelsNeg(t[i]-1,o),o^=1,n[this.codingPos]<a)for(i>0?--i:++i;t[i]<=n[this.codingPos]&&t[i]<a;)i+=2;break;case e:this._addPixels(a,0),this.eof=!0;break;default:(0,r.info)("bad 2d code"),this._addPixels(a,0),this.err=!0}}else for(n[0]=0,this.codingPos=0,o=0;n[this.codingPos]<a;){if(s=0,o)do{s+=u=this._getBlackCode()}while(u>=64);else do{s+=u=this._getWhiteCode()}while(u>=64);this._addPixels(n[this.codingPos]+s,o),o^=1}let h=!1;if(this.byteAlign&&(this.inputBits&=-8),this.eoblock||this.row!==this.rows-1){if(s=this._lookBits(12),this.eoline)for(;s!==e&&1!==s;)this._eatBits(1),s=this._lookBits(12);else for(;0===s;)this._eatBits(1),s=this._lookBits(12);1===s?(this._eatBits(12),h=!0):s===e&&(this.eof=!0)}else this.rowsDone=!0;if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&h&&this.byteAlign){if(s=this._lookBits(12),1===s){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(c=0;c<4;++c)s=this._lookBits(12),1!==s&&(0,r.info)("bad rtc code: "+s),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(s=this._lookBits(13),s===e)return this.eof=!0,-1;if(s>>1==1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(1&s))}n[0]>0?this.outputBits=n[this.codingPos=0]:this.outputBits=n[this.codingPos=1],this.row++}if(this.outputBits>=8)l=1&this.codingPos?0:255,this.outputBits-=8,0===this.outputBits&&n[this.codingPos]<a&&(this.codingPos++,this.outputBits=n[this.codingPos]-n[this.codingPos-1]);else{s=8,l=0;do{this.outputBits>s?(l<<=s,1&this.codingPos||(l|=255>>8-s),this.outputBits-=s,s=0):(l<<=this.outputBits,1&this.codingPos||(l|=255>>8-this.outputBits),s-=this.outputBits,this.outputBits=0,n[this.codingPos]<a?(this.codingPos++,this.outputBits=n[this.codingPos]-n[this.codingPos-1]):s>0&&(l<<=s,s=0))}while(s)}return this.black&&(l^=255),l},_addPixels(e,t){const n=this.codingLine;let a=this.codingPos;e>n[a]&&(e>this.columns&&((0,r.info)("row is wrong length"),this.err=!0,e=this.columns),1&a^t&&++a,n[a]=e),this.codingPos=a},_addPixelsNeg(e,t){const n=this.codingLine;let a=this.codingPos;if(e>n[a])e>this.columns&&((0,r.info)("row is wrong length"),this.err=!0,e=this.columns),1&a^t&&++a,n[a]=e;else if(e<n[a]){for(e<0&&((0,r.info)("invalid code"),this.err=!0,e=0);a>0&&e<n[a-1];)--a;n[a]=e}this.codingPos=a},_findTableCode(t,n,r,a){const i=a||0;for(let a=t;a<=n;++a){let t=this._lookBits(a);if(t===e)return[!0,1,!1];if(a<n&&(t<<=n-a),!i||t>=i){const e=r[t-i];if(e[0]===a)return this._eatBits(a),[!0,e[1],!0]}}return[!1,0,!1]},_getTwoDimCode(){let n,a=0;if(this.eoblock){if(a=this._lookBits(7),n=t[a],n&&n[0]>0)return this._eatBits(n[0]),n[1]}else{const e=this._findTableCode(1,7,t);if(e[0]&&e[2])return e[1]}return(0,r.info)("Bad two dim code"),e},_getWhiteCode(){let t,i=0;if(this.eoblock){if(i=this._lookBits(12),i===e)return 1;if(t=i>>5==0?n[i]:a[i>>3],t[0]>0)return this._eatBits(t[0]),t[1]}else{let e=this._findTableCode(1,9,a);if(e[0])return e[1];if(e=this._findTableCode(11,12,n),e[0])return e[1]}return(0,r.info)("bad white code"),this._eatBits(1),1},_getBlackCode(){let t,n;if(this.eoblock){if(t=this._lookBits(13),t===e)return 1;if(n=t>>7==0?i[t]:t>>9==0&&t>>7!=0?o[(t>>1)-64]:s[t>>7],n[0]>0)return this._eatBits(n[0]),n[1]}else{let e=this._findTableCode(2,6,s);if(e[0])return e[1];if(e=this._findTableCode(7,12,o,64),e[0])return e[1];if(e=this._findTableCode(10,13,i),e[0])return e[1]}return(0,r.info)("bad black code"),this._eatBits(1),1},_lookBits(t){let n;for(;this.inputBits<t;){if(-1===(n=this.source.next()))return 0===this.inputBits?e:this.inputBuf<<t-this.inputBits&65535>>16-t;this.inputBuf=this.inputBuf<<8|n,this.inputBits+=8}return this.inputBuf>>this.inputBits-t&65535>>16-t},_eatBits(e){(this.inputBits-=e)<0&&(this.inputBits=0)}},c}();t.CCITTFaxDecoder=a},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Jbig2Stream=void 0;var r=n(5),a=n(12),i=n(16),o=n(2);const s=function(){function e(e,t,n,r){this.stream=e,this.maybeLength=t,this.dict=n,this.params=r,a.DecodeStream.call(this,t)}return e.prototype=Object.create(a.DecodeStream.prototype),Object.defineProperty(e.prototype,"bytes",{get(){return(0,o.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),e.prototype.ensureBuffer=function(e){},e.prototype.readBlock=function(){if(this.eof)return;const e=new i.Jbig2Image,t=[];if((0,r.isDict)(this.params)){const e=this.params.get("JBIG2Globals");if((0,r.isStream)(e)){const n=e.getBytes();t.push({data:n,start:0,end:n.length})}}t.push({data:this.bytes,start:0,end:this.bytes.length});const n=e.parseChunks(t),a=n.length;for(let e=0;e<a;e++)n[e]^=255;this.buffer=n,this.bufferLength=a,this.eof=!0},e}();t.Jbig2Stream=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Jbig2Image=void 0;var r=n(2),a=n(8),i=n(17),o=n(14);class s extends r.BaseException{constructor(e){super(`JBIG2 error: ${e}`)}}var c=function(){function e(){}function t(e,t,n){this.data=e,this.start=t,this.end=n}function n(e,t,n){var r=e.getContexts(t),a=1;function i(e){for(var t=0,i=0;i<e;i++){var o=n.readBit(r,a);a=a<256?a<<1|o:511&(a<<1|o)|256,t=t<<1|o}return t>>>0}var o=i(1),s=i(1)?i(1)?i(1)?i(1)?i(1)?i(32)+4436:i(12)+340:i(8)+84:i(6)+20:i(4)+4:i(2);return 0===o?s:s>0?-s:null}function c(e,t,n){for(var r=e.getContexts("IAID"),a=1,i=0;i<n;i++)a=a<<1|t.readBit(r,a);return n<31?a&(1<<n)-1:2147483647&a}e.prototype={getContexts(e){return e in this?this[e]:this[e]=new Int8Array(65536)}},t.prototype={get decoder(){var e=new i.ArithmeticDecoder(this.data,this.start,this.end);return(0,r.shadow)(this,"decoder",e)},get contextCache(){var t=new e;return(0,r.shadow)(this,"contextCache",t)}};var l=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],u=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],h=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],d=[39717,1941,229,405],f=[32,8];function p(e,t,n,r,a,i,o,s){if(e)return P(new T(s.data,s.start,s.end),t,n,!1);if(0===r&&!i&&!a&&4===o.length&&3===o[0].x&&-1===o[0].y&&-3===o[1].x&&-1===o[1].y&&2===o[2].x&&-2===o[2].y&&-2===o[3].x&&-2===o[3].y)return function(e,t,n){var r,a,i,o,s,c,l,u=n.decoder,h=n.contextCache.getContexts("GB"),d=[];for(a=0;a<t;a++)for(s=d[a]=new Uint8Array(e),c=a<1?s:d[a-1],r=(l=a<2?s:d[a-2])[0]<<13|l[1]<<12|l[2]<<11|c[0]<<7|c[1]<<6|c[2]<<5|c[3]<<4,i=0;i<e;i++)s[i]=o=u.readBit(h,r),r=(31735&r)<<1|(i+3<e?l[i+3]<<11:0)|(i+4<e?c[i+4]<<4:0)|o;return d}(t,n,s);var c=!!i,l=u[r].concat(o);l.sort((function(e,t){return e.y-t.y||e.x-t.x}));var h,f,p=l.length,g=new Int8Array(p),m=new Int8Array(p),v=[],b=0,y=0,w=0,x=0;for(f=0;f<p;f++)g[f]=l[f].x,m[f]=l[f].y,y=Math.min(y,l[f].x),w=Math.max(w,l[f].x),x=Math.min(x,l[f].y),f<p-1&&l[f].y===l[f+1].y&&l[f].x===l[f+1].x-1?b|=1<<p-1-f:v.push(f);var C=v.length,k=new Int8Array(C),S=new Int8Array(C),A=new Uint16Array(C);for(h=0;h<C;h++)f=v[h],k[h]=l[f].x,S[h]=l[f].y,A[h]=1<<p-1-f;for(var _,E,I,R,F,D=-y,O=-x,N=t-w,M=d[r],L=new Uint8Array(t),B=[],U=s.decoder,j=s.contextCache.getContexts("GB"),q=0,z=0,W=0;W<n;W++)if(a&&(q^=U.readBit(j,M)))B.push(L);else for(L=new Uint8Array(L),B.push(L),_=0;_<t;_++)if(c&&i[W][_])L[_]=0;else{if(_>=D&&_<N&&W>=O)for(z=z<<1&b,f=0;f<C;f++)E=W+S[f],I=_+k[f],(R=B[E][I])&&(z|=R=A[f]);else for(z=0,F=p-1,f=0;f<p;f++,F--)(I=_+g[f])>=0&&I<t&&(E=W+m[f])>=0&&(R=B[E][I])&&(z|=R<<F);var G=U.readBit(j,z);L[_]=G}return B}function g(e,t,n,r,a,i,o,c,l){var u=h[n].coding;0===n&&(u=u.concat([c[0]]));var d,p=u.length,g=new Int32Array(p),m=new Int32Array(p);for(d=0;d<p;d++)g[d]=u[d].x,m[d]=u[d].y;var v=h[n].reference;0===n&&(v=v.concat([c[1]]));var b=v.length,y=new Int32Array(b),w=new Int32Array(b);for(d=0;d<b;d++)y[d]=v[d].x,w[d]=v[d].y;for(var x=r[0].length,C=r.length,k=f[n],S=[],A=l.decoder,_=l.contextCache.getContexts("GR"),E=0,I=0;I<t;I++){if(o&&(E^=A.readBit(_,k)))throw new s("prediction is not supported");var T=new Uint8Array(e);S.push(T);for(var R=0;R<e;R++){var F,P,D=0;for(d=0;d<p;d++)F=I+m[d],P=R+g[d],F<0||P<0||P>=e?D<<=1:D=D<<1|S[F][P];for(d=0;d<b;d++)F=I+w[d]-i,P=R+y[d]-a,F<0||F>=C||P<0||P>=x?D<<=1:D=D<<1|r[F][P];var O=A.readBit(_,D);T[R]=O}}return S}function m(e,t,r,a,i,o,l,u,h,d,f,p,m,v,b,y,w,x,C){if(e&&t)throw new s("refinement with Huffman is not supported");var k,S,A=[];for(k=0;k<a;k++){if(S=new Uint8Array(r),i)for(var _=0;_<r;_++)S[_]=i;A.push(S)}var E=w.decoder,I=w.contextCache,T=e?-v.tableDeltaT.decode(C):-n(I,"IADT",E),R=0;for(k=0;k<o;){T+=e?v.tableDeltaT.decode(C):n(I,"IADT",E);for(var F=R+=e?v.tableFirstS.decode(C):n(I,"IAFS",E);;){let a=0;l>1&&(a=e?C.readBits(x):n(I,"IAIT",E));var P=l*T+a,D=e?v.symbolIDTable.decode(C):c(I,E,h),O=t&&(e?C.readBit():n(I,"IARI",E)),N=u[D],M=N[0].length,L=N.length;if(O){var B=n(I,"IARDW",E),U=n(I,"IARDH",E);N=g(M+=B,L+=U,b,N,(B>>1)+n(I,"IARDX",E),(U>>1)+n(I,"IARDY",E),!1,y,w)}var j,q,z,W=P-(1&p?0:L-1),G=F-(2&p?M-1:0);if(d){for(j=0;j<L;j++)if(S=A[G+j]){z=N[j];var H=Math.min(r-W,M);switch(m){case 0:for(q=0;q<H;q++)S[W+q]|=z[q];break;case 2:for(q=0;q<H;q++)S[W+q]^=z[q];break;default:throw new s(`operator ${m} is not supported`)}}F+=L-1}else{for(q=0;q<L;q++)if(S=A[W+q])switch(z=N[q],m){case 0:for(j=0;j<M;j++)S[G+j]|=z[j];break;case 2:for(j=0;j<M;j++)S[G+j]^=z[j];break;default:throw new s(`operator ${m} is not supported`)}F+=M-1}k++;var V=e?v.tableDeltaS.decode(C):n(I,"IADS",E);if(null===V)break;F+=V+f}}return A}function v(e,t){var n={};n.number=(0,a.readUint32)(e,t);var r=e[t+4],i=63&r;if(!l[i])throw new s("invalid segment type: "+i);n.type=i,n.typeName=l[i],n.deferredNonRetain=!!(128&r);var o=!!(64&r),c=e[t+5],u=c>>5&7,h=[31&c],d=t+6;if(7===c){u=536870911&(0,a.readUint32)(e,d-1),d+=3;var f=u+7>>3;for(h[0]=e[d++];--f>0;)h.push(e[d++])}else if(5===c||6===c)throw new s("invalid referred-to flags");n.retainBits=h;let p=4;n.number<=256?p=1:n.number<=65536&&(p=2);var g,m,v=[];for(g=0;g<u;g++){let t;t=1===p?e[d]:2===p?(0,a.readUint16)(e,d):(0,a.readUint32)(e,d),v.push(t),d+=p}if(n.referredTo=v,o?(n.pageAssociation=(0,a.readUint32)(e,d),d+=4):n.pageAssociation=e[d++],n.length=(0,a.readUint32)(e,d),d+=4,4294967295===n.length){if(38!==i)throw new s("invalid unknown segment length");var b=y(e,d),x=!!(1&e[d+w]),C=new Uint8Array(6);for(x||(C[0]=255,C[1]=172),C[2]=b.height>>>24&255,C[3]=b.height>>16&255,C[4]=b.height>>8&255,C[5]=255&b.height,g=d,m=e.length;g<m;g++){for(var k=0;k<6&&C[k]===e[g+k];)k++;if(6===k){n.length=g+6;break}}if(4294967295===n.length)throw new s("segment end was not found")}return n.headerEnd=d,n}function b(e,t,n,r){for(var a=[],i=n;i<r;){var o=v(t,i);i=o.headerEnd;var s={header:o,data:t};if(e.randomAccess||(s.start=i,i+=o.length,s.end=i),a.push(s),51===o.type)break}if(e.randomAccess)for(var c=0,l=a.length;c<l;c++)a[c].start=i,i+=a[c].header.length,a[c].end=i;return a}function y(e,t){return{width:(0,a.readUint32)(e,t),height:(0,a.readUint32)(e,t+4),x:(0,a.readUint32)(e,t+8),y:(0,a.readUint32)(e,t+12),combinationOperator:7&e[t+16]}}var w=17;function x(e,t){var n,r,i,o,c=e.header,l=e.data,u=e.start,h=e.end;switch(c.type){case 0:var d={},f=(0,a.readUint16)(l,u);if(d.huffman=!!(1&f),d.refinement=!!(2&f),d.huffmanDHSelector=f>>2&3,d.huffmanDWSelector=f>>4&3,d.bitmapSizeSelector=f>>6&1,d.aggregationInstancesSelector=f>>7&1,d.bitmapCodingContextUsed=!!(256&f),d.bitmapCodingContextRetained=!!(512&f),d.template=f>>10&3,d.refinementTemplate=f>>12&1,u+=2,!d.huffman){for(o=0===d.template?4:1,r=[],i=0;i<o;i++)r.push({x:(0,a.readInt8)(l,u),y:(0,a.readInt8)(l,u+1)}),u+=2;d.at=r}if(d.refinement&&!d.refinementTemplate){for(r=[],i=0;i<2;i++)r.push({x:(0,a.readInt8)(l,u),y:(0,a.readInt8)(l,u+1)}),u+=2;d.refinementAt=r}d.numberOfExportedSymbols=(0,a.readUint32)(l,u),u+=4,d.numberOfNewSymbols=(0,a.readUint32)(l,u),u+=4,n=[d,c.number,c.referredTo,l,u,h];break;case 6:case 7:var p={};p.info=y(l,u),u+=w;var g=(0,a.readUint16)(l,u);if(u+=2,p.huffman=!!(1&g),p.refinement=!!(2&g),p.logStripSize=g>>2&3,p.stripSize=1<<p.logStripSize,p.referenceCorner=g>>4&3,p.transposed=!!(64&g),p.combinationOperator=g>>7&3,p.defaultPixelValue=g>>9&1,p.dsOffset=g<<17>>27,p.refinementTemplate=g>>15&1,p.huffman){var m=(0,a.readUint16)(l,u);u+=2,p.huffmanFS=3&m,p.huffmanDS=m>>2&3,p.huffmanDT=m>>4&3,p.huffmanRefinementDW=m>>6&3,p.huffmanRefinementDH=m>>8&3,p.huffmanRefinementDX=m>>10&3,p.huffmanRefinementDY=m>>12&3,p.huffmanRefinementSizeSelector=!!(16384&m)}if(p.refinement&&!p.refinementTemplate){for(r=[],i=0;i<2;i++)r.push({x:(0,a.readInt8)(l,u),y:(0,a.readInt8)(l,u+1)}),u+=2;p.refinementAt=r}p.numberOfSymbolInstances=(0,a.readUint32)(l,u),u+=4,n=[p,c.referredTo,l,u,h];break;case 16:const e={},t=l[u++];e.mmr=!!(1&t),e.template=t>>1&3,e.patternWidth=l[u++],e.patternHeight=l[u++],e.maxPatternIndex=(0,a.readUint32)(l,u),u+=4,n=[e,c.number,l,u,h];break;case 22:case 23:const k={};k.info=y(l,u),u+=w;const S=l[u++];k.mmr=!!(1&S),k.template=S>>1&3,k.enableSkip=!!(8&S),k.combinationOperator=S>>4&7,k.defaultPixelValue=S>>7&1,k.gridWidth=(0,a.readUint32)(l,u),u+=4,k.gridHeight=(0,a.readUint32)(l,u),u+=4,k.gridOffsetX=4294967295&(0,a.readUint32)(l,u),u+=4,k.gridOffsetY=4294967295&(0,a.readUint32)(l,u),u+=4,k.gridVectorX=(0,a.readUint16)(l,u),u+=2,k.gridVectorY=(0,a.readUint16)(l,u),u+=2,n=[k,c.referredTo,l,u,h];break;case 38:case 39:var v={};v.info=y(l,u),u+=w;var b=l[u++];if(v.mmr=!!(1&b),v.template=b>>1&3,v.prediction=!!(8&b),!v.mmr){for(o=0===v.template?4:1,r=[],i=0;i<o;i++)r.push({x:(0,a.readInt8)(l,u),y:(0,a.readInt8)(l,u+1)}),u+=2;v.at=r}n=[v,l,u,h];break;case 48:var x={width:(0,a.readUint32)(l,u),height:(0,a.readUint32)(l,u+4),resolutionX:(0,a.readUint32)(l,u+8),resolutionY:(0,a.readUint32)(l,u+12)};4294967295===x.height&&delete x.height;var C=l[u+16];(0,a.readUint16)(l,u+17),x.lossless=!!(1&C),x.refinement=!!(2&C),x.defaultPixelValue=C>>2&1,x.combinationOperator=C>>3&3,x.requiresBuffer=!!(32&C),x.combinationOperatorOverride=!!(64&C),n=[x];break;case 49:case 50:case 51:break;case 53:n=[c.number,l,u,h];break;case 62:break;default:throw new s(`segment type ${c.typeName}(${c.type}) is not implemented`)}var k="on"+c.typeName;k in t&&t[k].apply(t,n)}function C(e,t){for(var n=0,r=e.length;n<r;n++)x(e[n],t)}function k(){}function S(e){2===e.length?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=e[0],this.rangeLength=0,this.prefixCode=e[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=e[0],this.prefixLength=e[1],this.rangeLength=e[2],this.prefixCode=e[3],this.isLowerRange="lower"===e[4])}function A(e){this.children=[],e?(this.isLeaf=!0,this.rangeLength=e.rangeLength,this.rangeLow=e.rangeLow,this.isLowerRange=e.isLowerRange,this.isOOB=e.isOOB):this.isLeaf=!1}function _(e,t){t||this.assignPrefixCodes(e),this.rootNode=new A(null);for(let t=0,n=e.length;t<n;t++){const n=e[t];n.prefixLength>0&&this.rootNode.buildTree(n,n.prefixLength-1)}}k.prototype={onPageInformation:function(e){this.currentPageInfo=e;var t=e.width+7>>3,n=new Uint8ClampedArray(t*e.height);if(e.defaultPixelValue)for(var r=0,a=n.length;r<a;r++)n[r]=255;this.buffer=n},drawBitmap:function(e,t){var n,r,a,i,o=this.currentPageInfo,c=e.width,l=e.height,u=o.width+7>>3,h=o.combinationOperatorOverride?e.combinationOperator:o.combinationOperator,d=this.buffer,f=128>>(7&e.x),p=e.y*u+(e.x>>3);switch(h){case 0:for(n=0;n<l;n++){for(a=f,i=p,r=0;r<c;r++)t[n][r]&&(d[i]|=a),(a>>=1)||(a=128,i++);p+=u}break;case 2:for(n=0;n<l;n++){for(a=f,i=p,r=0;r<c;r++)t[n][r]&&(d[i]^=a),(a>>=1)||(a=128,i++);p+=u}break;default:throw new s(`operator ${h} is not supported`)}},onImmediateGenericRegion:function(e,n,r,a){var i=e.info,o=new t(n,r,a),s=p(e.mmr,i.width,i.height,e.template,e.prediction,null,e.at,o);this.drawBitmap(i,s)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(e,r,i,o,l,u){let h,d;e.huffman&&(h=function(e,t,n){let r,a,i,o,c=0;switch(e.huffmanDHSelector){case 0:case 1:r=I(e.huffmanDHSelector+4);break;case 3:r=R(c,t,n),c++;break;default:throw new s("invalid Huffman DH selector")}switch(e.huffmanDWSelector){case 0:case 1:a=I(e.huffmanDWSelector+2);break;case 3:a=R(c,t,n),c++;break;default:throw new s("invalid Huffman DW selector")}return e.bitmapSizeSelector?(i=R(c,t,n),c++):i=I(1),o=e.aggregationInstancesSelector?R(c,t,n):I(1),{tableDeltaHeight:r,tableDeltaWidth:a,tableBitmapSize:i,tableAggregateInstances:o}}(e,i,this.customTables),d=new T(o,l,u));var f=this.symbols;f||(this.symbols=f={});for(var v=[],b=0,y=i.length;b<y;b++){const e=f[i[b]];e&&(v=v.concat(e))}var w=new t(o,l,u);f[r]=function(e,t,r,i,o,l,u,h,d,f,v,b){if(e&&t)throw new s("symbol refinement with Huffman is not supported");var y=[],w=0,x=(0,a.log2)(r.length+i),C=v.decoder,k=v.contextCache;let S,A;for(e&&(S=I(1),A=[],x=Math.max(x,1));y.length<i;){w+=e?l.tableDeltaHeight.decode(b):n(k,"IADH",C);let a=0,i=0;const o=e?A.length:0;for(;;){var _,E=e?l.tableDeltaWidth.decode(b):n(k,"IADW",C);if(null===E)break;if(a+=E,i+=a,t){var T=n(k,"IAAI",C);if(T>1)_=m(e,t,a,w,0,T,1,r.concat(y),x,0,0,1,0,l,d,f,v,0,b);else{var R=c(k,C,x),D=n(k,"IARDX",C),O=n(k,"IARDY",C);_=g(a,w,d,R<r.length?r[R]:y[R-r.length],D,O,!1,f,v)}y.push(_)}else e?A.push(a):(_=p(!1,a,w,u,!1,null,h,v),y.push(_))}if(e&&!t){const e=l.tableBitmapSize.decode(b);let t;if(b.byteAlign(),0===e)t=F(b,i,w);else{const n=b.end,r=b.position+e;b.end=r,t=P(b,i,w,!1),b.end=n,b.position=r}const n=A.length;if(o===n-1)y.push(t);else{let e,r,a,i,s,c=0;for(e=o;e<n;e++){for(i=A[e],a=c+i,s=[],r=0;r<w;r++)s.push(t[r].subarray(c,a));y.push(s),c=a}}}}for(var N=[],M=[],L=!1,B=r.length+i;M.length<B;){for(var U=e?S.decode(b):n(k,"IAEX",C);U--;)M.push(L);L=!L}for(var j=0,q=r.length;j<q;j++)M[j]&&N.push(r[j]);for(var z=0;z<i;j++,z++)M[j]&&N.push(y[z]);return N}(e.huffman,e.refinement,v,e.numberOfNewSymbols,e.numberOfExportedSymbols,h,e.template,e.at,e.refinementTemplate,e.refinementAt,w,d)},onImmediateTextRegion:function(e,n,r,i,o){var c=e.info;let l,u;for(var h=this.symbols,d=[],f=0,p=n.length;f<p;f++){const e=h[n[f]];e&&(d=d.concat(e))}var g=(0,a.log2)(d.length);e.huffman&&(u=new T(r,i,o),l=function(e,t,n,r,a){const i=[];for(let e=0;e<=34;e++){const t=a.readBits(4);i.push(new S([e,t,0,0]))}const o=new _(i,!1);i.length=0;for(let e=0;e<r;){const t=o.decode(a);if(t>=32){let n,r,o;switch(t){case 32:if(0===e)throw new s("no previous value in symbol ID table");r=a.readBits(2)+3,n=i[e-1].prefixLength;break;case 33:r=a.readBits(3)+3,n=0;break;case 34:r=a.readBits(7)+11,n=0;break;default:throw new s("invalid code length in symbol ID table")}for(o=0;o<r;o++)i.push(new S([e,n,0,0])),e++}else i.push(new S([e,t,0,0])),e++}a.byteAlign();const c=new _(i,!1);let l,u,h,d=0;switch(e.huffmanFS){case 0:case 1:l=I(e.huffmanFS+6);break;case 3:l=R(d,t,n),d++;break;default:throw new s("invalid Huffman FS selector")}switch(e.huffmanDS){case 0:case 1:case 2:u=I(e.huffmanDS+8);break;case 3:u=R(d,t,n),d++;break;default:throw new s("invalid Huffman DS selector")}switch(e.huffmanDT){case 0:case 1:case 2:h=I(e.huffmanDT+11);break;case 3:h=R(d,t,n),d++;break;default:throw new s("invalid Huffman DT selector")}if(e.refinement)throw new s("refinement with Huffman is not supported");return{symbolIDTable:c,tableFirstS:l,tableDeltaS:u,tableDeltaT:h}}(e,n,this.customTables,d.length,u));var v=new t(r,i,o),b=m(e.huffman,e.refinement,c.width,c.height,e.defaultPixelValue,e.numberOfSymbolInstances,e.stripSize,d,g,e.transposed,e.dsOffset,e.referenceCorner,e.combinationOperator,l,e.refinementTemplate,e.refinementAt,v,e.logStripSize,u);this.drawBitmap(c,b)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)},onPatternDictionary(e,n,r,a,i){let o=this.patterns;o||(this.patterns=o={});const s=new t(r,a,i);o[n]=function(e,t,n,r,a,i){const o=[];e||(o.push({x:-t,y:0}),0===a&&(o.push({x:-3,y:-1}),o.push({x:2,y:-2}),o.push({x:-2,y:-2})));const s=p(e,(r+1)*t,n,a,!1,null,o,i),c=[];for(let e=0;e<=r;e++){const r=[],a=t*e,i=a+t;for(let e=0;e<n;e++)r.push(s[e].subarray(a,i));c.push(r)}return c}(e.mmr,e.patternWidth,e.patternHeight,e.maxPatternIndex,e.template,s)},onImmediateHalftoneRegion(e,n,r,i,o){const c=this.patterns[n[0]],l=e.info,u=new t(r,i,o),h=function(e,t,n,r,i,o,c,l,u,h,d,f,g,m,v){if(c)throw new s("skip is not supported");if(0!==l)throw new s("operator "+l+" is not supported in halftone region");const b=[];let y,w,x;for(y=0;y<i;y++){if(x=new Uint8Array(r),o)for(w=0;w<r;w++)x[w]=o;b.push(x)}const C=t.length,k=t[0],S=k[0].length,A=k.length,_=(0,a.log2)(C),E=[];e||(E.push({x:n<=1?3:2,y:-1}),0===n&&(E.push({x:-3,y:-1}),E.push({x:2,y:-2}),E.push({x:-2,y:-2})));const I=[];let R,F,D,O,N,M,L,B,U,j,q;for(e&&(R=new T(v.data,v.start,v.end)),y=_-1;y>=0;y--)F=e?P(R,u,h,!0):p(!1,u,h,n,!1,null,E,v),I[y]=F;for(D=0;D<h;D++)for(O=0;O<u;O++){for(N=0,M=0,w=_-1;w>=0;w--)N=I[w][D][O]^N,M|=N<<w;if(L=t[M],B=d+D*m+O*g>>8,U=f+D*g-O*m>>8,B>=0&&B+S<=r&&U>=0&&U+A<=i)for(y=0;y<A;y++)for(q=b[U+y],j=L[y],w=0;w<S;w++)q[B+w]|=j[w];else{let e,t;for(y=0;y<A;y++)if(t=U+y,!(t<0||t>=i))for(q=b[t],j=L[y],w=0;w<S;w++)e=B+w,e>=0&&e<r&&(q[e]|=j[w])}}return b}(e.mmr,c,e.template,l.width,l.height,e.defaultPixelValue,e.enableSkip,e.combinationOperator,e.gridWidth,e.gridHeight,e.gridOffsetX,e.gridOffsetY,e.gridVectorX,e.gridVectorY,u);this.drawBitmap(l,h)},onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion.apply(this,arguments)},onTables(e,t,n,r){let i=this.customTables;i||(this.customTables=i={}),i[e]=function(e,t,n){const r=e[t],i=4294967295&(0,a.readUint32)(e,t+1),o=4294967295&(0,a.readUint32)(e,t+5),s=new T(e,t+9,n),c=1+(r>>1&7),l=1+(r>>4&7),u=[];let h,d,f=i;do{h=s.readBits(c),d=s.readBits(l),u.push(new S([f,h,d,0])),f+=1<<d}while(f<o);return h=s.readBits(c),u.push(new S([i-1,h,32,0,"lower"])),h=s.readBits(c),u.push(new S([o,h,32,0])),1&r&&(h=s.readBits(c),u.push(new S([h,0]))),new _(u,!1)}(t,n,r)}},A.prototype={buildTree(e,t){const n=e.prefixCode>>t&1;if(t<=0)this.children[n]=new A(e);else{let r=this.children[n];r||(this.children[n]=r=new A(null)),r.buildTree(e,t-1)}},decodeNode(e){if(this.isLeaf){if(this.isOOB)return null;const t=e.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-t:t)}const t=this.children[e.readBit()];if(!t)throw new s("invalid Huffman data");return t.decodeNode(e)}},_.prototype={decode(e){return this.rootNode.decodeNode(e)},assignPrefixCodes(e){const t=e.length;let n=0;for(let r=0;r<t;r++)n=Math.max(n,e[r].prefixLength);const r=new Uint32Array(n+1);for(let n=0;n<t;n++)r[e[n].prefixLength]++;let a,i,o,s=1,c=0;for(r[0]=0;s<=n;){for(c=c+r[s-1]<<1,a=c,i=0;i<t;)o=e[i],o.prefixLength===s&&(o.prefixCode=a,a++),i++;s++}}};const E={};function I(e){let t,n=E[e];if(n)return n;switch(e){case 1:t=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:t=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:t=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:t=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:t=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:t=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:t=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:t=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:t=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:t=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:t=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:t=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:t=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:t=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:t=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new s(`standard table B.${e} does not exist`)}for(let e=0,n=t.length;e<n;e++)t[e]=new S(t[e]);return n=new _(t,!0),E[e]=n,n}function T(e,t,n){this.data=e,this.start=t,this.end=n,this.position=t,this.shift=-1,this.currentByte=0}function R(e,t,n){let r=0;for(let a=0,i=t.length;a<i;a++){const i=n[t[a]];if(i){if(e===r)return i;r++}}throw new s("can't find custom Huffman table")}function F(e,t,n){const r=[];for(let a=0;a<n;a++){const n=new Uint8Array(t);r.push(n);for(let r=0;r<t;r++)n[r]=e.readBit();e.byteAlign()}return r}function P(e,t,n,r){const a={K:-1,Columns:t,Rows:n,BlackIs1:!0,EndOfBlock:r},i=new o.CCITTFaxDecoder(e,a),s=[];let c,l=!1;for(let e=0;e<n;e++){const e=new Uint8Array(t);s.push(e);let n=-1;for(let r=0;r<t;r++)n<0&&(c=i.readNextChar(),-1===c&&(c=0,l=!0),n=7),e[r]=c>>n&1,n--}if(r&&!l){const e=5;for(let t=0;t<e&&-1!==i.readNextChar();t++);}return s}function D(){}return T.prototype={readBit(){if(this.shift<0){if(this.position>=this.end)throw new s("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}const e=this.currentByte>>this.shift&1;return this.shift--,e},readBits(e){let t,n=0;for(t=e-1;t>=0;t--)n|=this.readBit()<<t;return n},byteAlign(){this.shift=-1},next(){return this.position>=this.end?-1:this.data[this.position++]}},D.prototype={parseChunks:e=>function(e){for(var t=new k,n=0,r=e.length;n<r;n++){var a=e[n];C(b({},a.data,a.start,a.end),t)}return t.buffer}(e),parse(e){const{imgData:t,width:n,height:r}=function(e){const t=e.length;let n=0;if(151!==e[n]||74!==e[n+1]||66!==e[n+2]||50!==e[n+3]||13!==e[n+4]||10!==e[n+5]||26!==e[n+6]||10!==e[n+7])throw new s("parseJbig2 - invalid header.");const r=Object.create(null);n+=8;const i=e[n++];r.randomAccess=!(1&i),2&i||(r.numberOfPages=(0,a.readUint32)(e,n),n+=4);const o=b(r,e,n,t),c=new k;C(o,c);const{width:l,height:u}=c.currentPageInfo,h=c.buffer,d=new Uint8ClampedArray(l*u);let f=0,p=0;for(let e=0;e<u;e++){let e,t=0;for(let n=0;n<l;n++)t||(t=128,e=h[p++]),d[f++]=e&t?0:255,t>>=1}return{imgData:d,width:l,height:u}}(e);return this.width=n,this.height=r,t}},D}();t.Jbig2Image=c},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ArithmeticDecoder=void 0;const n=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];t.ArithmeticDecoder=class{constructor(e,t,n){this.data=e,this.bp=t,this.dataEnd=n,this.chigh=e[t],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const e=this.data;let t=this.bp;255===e[t]?e[t+1]>143?(this.clow+=65280,this.ct=8):(t++,this.clow+=e[t]<<9,this.ct=7,this.bp=t):(t++,this.clow+=t<this.dataEnd?e[t]<<8:65280,this.ct=8,this.bp=t),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(e,t){let r=e[t]>>1,a=1&e[t];const i=n[r],o=i.qe;let s,c=this.a-o;if(this.chigh<o)c<o?(c=o,s=a,r=i.nmps):(c=o,s=1^a,1===i.switchFlag&&(a=s),r=i.nlps);else{if(this.chigh-=o,0!=(32768&c))return this.a=c,a;c<o?(s=1^a,1===i.switchFlag&&(a=s),r=i.nlps):(s=a,r=i.nmps)}do{0===this.ct&&this.byteIn(),c<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&c));return this.a=c,e[t]=r<<1|a,s}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JpegStream=void 0;var r=n(12),a=n(5),i=n(19),o=n(2);const s=function(){function e(e,t,n,a){let i;for(;-1!==(i=e.getByte());)if(255===i){e.skip(-1);break}this.stream=e,this.maybeLength=t,this.dict=n,this.params=a,r.DecodeStream.call(this,t)}return e.prototype=Object.create(r.DecodeStream.prototype),Object.defineProperty(e.prototype,"bytes",{get:function(){return(0,o.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),e.prototype.ensureBuffer=function(e){},e.prototype.readBlock=function(){if(this.eof)return;const e={decodeTransform:void 0,colorTransform:void 0},t=this.dict.getArray("Decode","D");if(this.forceRGB&&Array.isArray(t)){const n=this.dict.get("BitsPerComponent")||8,r=t.length,a=new Int32Array(r);let i=!1;const o=(1<<n)-1;for(let e=0;e<r;e+=2)a[e]=256*(t[e+1]-t[e])|0,a[e+1]=t[e]*o|0,256===a[e]&&0===a[e+1]||(i=!0);i&&(e.decodeTransform=a)}if((0,a.isDict)(this.params)){const t=this.params.get("ColorTransform");Number.isInteger(t)&&(e.colorTransform=t)}const n=new i.JpegImage(e);n.parse(this.bytes);const r=n.getData({width:this.drawWidth,height:this.drawHeight,forceRGB:this.forceRGB,isSourcePDF:!0});this.buffer=r,this.bufferLength=r.length,this.eof=!0},e}();t.JpegStream=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JpegImage=void 0;var r=n(2),a=n(8);class i extends r.BaseException{constructor(e){super(`JPEG error: ${e}`)}}class o extends r.BaseException{constructor(e,t){super(e),this.scanLines=t}}class s extends r.BaseException{}var c=function(){var e=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),t=4017,n=799,c=3406,l=2276,u=1567,h=3784,d=5793,f=2896;function p({decodeTransform:e=null,colorTransform:t=-1}={}){this._decodeTransform=e,this._colorTransform=t}function g(e,t){for(var n,r,a=0,i=[],o=16;o>0&&!e[o-1];)o--;i.push({children:[],index:0});var s,c=i[0];for(n=0;n<o;n++){for(r=0;r<e[n];r++){for((c=i.pop()).children[c.index]=t[a];c.index>0;)c=i.pop();for(c.index++,i.push(c);i.length<=n;)i.push(s={children:[],index:0}),c.children[c.index]=s.children,c=s;a++}n+1<o&&(i.push(s={children:[],index:0}),c.children[c.index]=s.children,c=s)}return i[0].children}function m(e,t,n){return 64*((e.blocksPerLine+1)*t+n)}function v(t,n,c,l,u,h,d,f,p,g=!1){var v=c.mcusPerLine,b=c.progressive;const y=n;let x=0,C=0;function k(){if(C>0)return C--,x>>C&1;if(x=t[n++],255===x){var e=t[n++];if(e){if(220===e&&g){n+=2;const e=(0,a.readUint16)(t,n);if(n+=2,e>0&&e!==c.scanLines)throw new o("Found DNL marker (0xFFDC) while parsing scan data",e)}else if(217===e){if(g){const e=R*(8===c.precision?8:0);if(e>0&&Math.round(c.scanLines/e)>=10)throw new o("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",e)}throw new s("Found EOI marker (0xFFD9) while parsing scan data")}throw new i(`unexpected marker ${(x<<8|e).toString(16)}`)}}return C=7,x>>>7}function S(e){for(var t=e;;){switch(typeof(t=t[k()])){case"number":return t;case"object":continue}throw new i("invalid huffman sequence")}}function A(e){for(var t=0;e>0;)t=t<<1|k(),e--;return t}function _(e){if(1===e)return 1===k()?1:-1;var t=A(e);return t>=1<<e-1?t:t+(-1<<e)+1}var E,I=0,T=0;let R=0;function F(e,t,n,r,a){var i=n%v;R=(n/v|0)*e.v+r;var o=i*e.h+a;t(e,m(e,R,o))}function P(e,t,n){R=n/e.blocksPerLine|0;var r=n%e.blocksPerLine;t(e,m(e,R,r))}var D,O,N,M,L,B,U=l.length;B=b?0===h?0===f?function(e,t){var n=S(e.huffmanTableDC),r=0===n?0:_(n)<<p;e.blockData[t]=e.pred+=r}:function(e,t){e.blockData[t]|=k()<<p}:0===f?function(t,n){if(I>0)I--;else for(var r=h,a=d;r<=a;){var i=S(t.huffmanTableAC),o=15&i,s=i>>4;if(0!==o){var c=e[r+=s];t.blockData[n+c]=_(o)*(1<<p),r++}else{if(s<15){I=A(s)+(1<<s)-1;break}r+=16}}}:function(t,n){for(var r,a,o=h,s=d,c=0;o<=s;){const s=n+e[o],l=t.blockData[s]<0?-1:1;switch(T){case 0:if(c=(a=S(t.huffmanTableAC))>>4,0==(r=15&a))c<15?(I=A(c)+(1<<c),T=4):(c=16,T=1);else{if(1!==r)throw new i("invalid ACn encoding");E=_(r),T=c?2:3}continue;case 1:case 2:t.blockData[s]?t.blockData[s]+=l*(k()<<p):0==--c&&(T=2===T?3:0);break;case 3:t.blockData[s]?t.blockData[s]+=l*(k()<<p):(t.blockData[s]=E<<p,T=0);break;case 4:t.blockData[s]&&(t.blockData[s]+=l*(k()<<p))}o++}4===T&&0==--I&&(T=0)}:function(t,n){var r=S(t.huffmanTableDC),a=0===r?0:_(r);t.blockData[n]=t.pred+=a;for(var i=1;i<64;){var o=S(t.huffmanTableAC),s=15&o,c=o>>4;if(0!==s){var l=e[i+=c];t.blockData[n+l]=_(s),i++}else{if(c<15)break;i+=16}}};var j,q,z,W,G=0;for(q=1===U?l[0].blocksPerLine*l[0].blocksPerColumn:v*c.mcusPerColumn;G<=q;){var H=u?Math.min(q-G,u):q;if(H>0){for(O=0;O<U;O++)l[O].pred=0;if(I=0,1===U)for(D=l[0],L=0;L<H;L++)P(D,B,G),G++;else for(L=0;L<H;L++){for(O=0;O<U;O++)for(z=(D=l[O]).h,W=D.v,N=0;N<W;N++)for(M=0;M<z;M++)F(D,B,G,N,M);G++}}if(C=0,!(j=w(t,n)))break;if(j.invalid){const e=H>0?"unexpected":"excessive";(0,r.warn)(`decodeScan - ${e} MCU data, current marker is: ${j.invalid}`),n=j.offset}if(!(j.marker>=65488&&j.marker<=65495))break;n+=2}return n-y}function b(e,r,a){var o,s,p,g,m,v,b,y,w,x,C,k,S,A,_,E,I,T=e.quantizationTable,R=e.blockData;if(!T)throw new i("missing required Quantization Table.");for(var F=0;F<64;F+=8)w=R[r+F],x=R[r+F+1],C=R[r+F+2],k=R[r+F+3],S=R[r+F+4],A=R[r+F+5],_=R[r+F+6],E=R[r+F+7],w*=T[F],0!=(x|C|k|S|A|_|E)?(x*=T[F+1],C*=T[F+2],k*=T[F+3],S*=T[F+4],A*=T[F+5],_*=T[F+6],E*=T[F+7],s=(o=(o=d*w+128>>8)+(s=d*S+128>>8)+1>>1)-s,I=(p=C)*h+(g=_)*u+128>>8,p=p*u-g*h+128>>8,b=(m=(m=f*(x-E)+128>>8)+(b=A<<4)+1>>1)-b,v=(y=(y=f*(x+E)+128>>8)+(v=k<<4)+1>>1)-v,g=(o=o+(g=I)+1>>1)-g,p=(s=s+p+1>>1)-p,I=m*l+y*c+2048>>12,m=m*c-y*l+2048>>12,y=I,I=v*n+b*t+2048>>12,v=v*t-b*n+2048>>12,b=I,a[F]=o+y,a[F+7]=o-y,a[F+1]=s+b,a[F+6]=s-b,a[F+2]=p+v,a[F+5]=p-v,a[F+3]=g+m,a[F+4]=g-m):(I=d*w+512>>10,a[F]=I,a[F+1]=I,a[F+2]=I,a[F+3]=I,a[F+4]=I,a[F+5]=I,a[F+6]=I,a[F+7]=I);for(var P=0;P<8;++P)w=a[P],0!=((x=a[P+8])|(C=a[P+16])|(k=a[P+24])|(S=a[P+32])|(A=a[P+40])|(_=a[P+48])|(E=a[P+56]))?(s=(o=4112+((o=d*w+2048>>12)+(s=d*S+2048>>12)+1>>1))-s,I=(p=C)*h+(g=_)*u+2048>>12,p=p*u-g*h+2048>>12,g=I,b=(m=(m=f*(x-E)+2048>>12)+(b=A)+1>>1)-b,v=(y=(y=f*(x+E)+2048>>12)+(v=k)+1>>1)-v,I=m*l+y*c+2048>>12,m=m*c-y*l+2048>>12,y=I,I=v*n+b*t+2048>>12,v=v*t-b*n+2048>>12,(w=(o=o+g+1>>1)+y)<16?w=0:w>=4080?w=255:w>>=4,(x=(s=s+p+1>>1)+(b=I))<16?x=0:x>=4080?x=255:x>>=4,(C=(p=s-p)+v)<16?C=0:C>=4080?C=255:C>>=4,(k=(g=o-g)+m)<16?k=0:k>=4080?k=255:k>>=4,(S=g-m)<16?S=0:S>=4080?S=255:S>>=4,(A=p-v)<16?A=0:A>=4080?A=255:A>>=4,(_=s-b)<16?_=0:_>=4080?_=255:_>>=4,(E=o-y)<16?E=0:E>=4080?E=255:E>>=4,R[r+P]=w,R[r+P+8]=x,R[r+P+16]=C,R[r+P+24]=k,R[r+P+32]=S,R[r+P+40]=A,R[r+P+48]=_,R[r+P+56]=E):(I=(I=d*w+8192>>14)<-2040?0:I>=2024?255:I+2056>>4,R[r+P]=I,R[r+P+8]=I,R[r+P+16]=I,R[r+P+24]=I,R[r+P+32]=I,R[r+P+40]=I,R[r+P+48]=I,R[r+P+56]=I)}function y(e,t){for(var n=t.blocksPerLine,r=t.blocksPerColumn,a=new Int16Array(64),i=0;i<r;i++)for(var o=0;o<n;o++)b(t,m(t,i,o),a);return t.blockData}function w(e,t,n=t){const r=e.length-1;var i=n<t?n:t;if(t>=r)return null;var o=(0,a.readUint16)(e,t);if(o>=65472&&o<=65534)return{invalid:null,marker:o,offset:t};for(var s=(0,a.readUint16)(e,i);!(s>=65472&&s<=65534);){if(++i>=r)return null;s=(0,a.readUint16)(e,i)}return{invalid:o.toString(16),marker:s,offset:i}}return p.prototype={parse(t,{dnlScanLines:n=null}={}){function c(){const e=(0,a.readUint16)(t,d);let n=(d+=2)+e-2;var i=w(t,n,d);i&&i.invalid&&((0,r.warn)("readDataBlock - incorrect length, current marker is: "+i.invalid),n=i.offset);var o=t.subarray(d,n);return d+=o.length,o}function l(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),n=Math.ceil(e.scanLines/8/e.maxV),r=0;r<e.components.length;r++){z=e.components[r];var a=Math.ceil(Math.ceil(e.samplesPerLine/8)*z.h/e.maxH),i=Math.ceil(Math.ceil(e.scanLines/8)*z.v/e.maxV),o=t*z.h,s=n*z.v*64*(o+1);z.blockData=new Int16Array(s),z.blocksPerLine=a,z.blocksPerColumn=i}e.mcusPerLine=t,e.mcusPerColumn=n}var u,h,d=0,f=null,p=null;let m=0;var b=[],x=[],C=[];let k=(0,a.readUint16)(t,d);if(d+=2,65496!==k)throw new i("SOI not found");k=(0,a.readUint16)(t,d),d+=2;e:for(;65497!==k;){var S,A,_;switch(k){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var E=c();65504===k&&74===E[0]&&70===E[1]&&73===E[2]&&70===E[3]&&0===E[4]&&(f={version:{major:E[5],minor:E[6]},densityUnits:E[7],xDensity:E[8]<<8|E[9],yDensity:E[10]<<8|E[11],thumbWidth:E[12],thumbHeight:E[13],thumbData:E.subarray(14,14+3*E[12]*E[13])}),65518===k&&65===E[0]&&100===E[1]&&111===E[2]&&98===E[3]&&101===E[4]&&(p={version:E[5]<<8|E[6],flags0:E[7]<<8|E[8],flags1:E[9]<<8|E[10],transformCode:E[11]});break;case 65499:for(var I=(0,a.readUint16)(t,d)+(d+=2)-2;d<I;){var T=t[d++],R=new Uint16Array(64);if(T>>4==0)for(A=0;A<64;A++)R[e[A]]=t[d++];else{if(T>>4!=1)throw new i("DQT - invalid table spec");for(A=0;A<64;A++)R[e[A]]=(0,a.readUint16)(t,d),d+=2}b[15&T]=R}break;case 65472:case 65473:case 65474:if(u)throw new i("Only single frame JPEGs supported");d+=2,(u={}).extended=65473===k,u.progressive=65474===k,u.precision=t[d++];const y=(0,a.readUint16)(t,d);d+=2,u.scanLines=n||y,u.samplesPerLine=(0,a.readUint16)(t,d),d+=2,u.components=[],u.componentIds={};var F,P=t[d++],D=0,O=0;for(S=0;S<P;S++){F=t[d];var N=t[d+1]>>4,M=15&t[d+1];D<N&&(D=N),O<M&&(O=M);var L=t[d+2];_=u.components.push({h:N,v:M,quantizationId:L,quantizationTable:null}),u.componentIds[F]=_-1,d+=3}u.maxH=D,u.maxV=O,l(u);break;case 65476:const J=(0,a.readUint16)(t,d);for(d+=2,S=2;S<J;){var B=t[d++],U=new Uint8Array(16),j=0;for(A=0;A<16;A++,d++)j+=U[A]=t[d];var q=new Uint8Array(j);for(A=0;A<j;A++,d++)q[A]=t[d];S+=17+j,(B>>4==0?C:x)[15&B]=g(U,q)}break;case 65501:d+=2,h=(0,a.readUint16)(t,d),d+=2;break;case 65498:const Z=1==++m&&!n;d+=2;var z,W=t[d++],G=[];for(S=0;S<W;S++){const e=t[d++];var H=u.componentIds[e];(z=u.components[H]).index=e;var V=t[d++];z.huffmanTableDC=C[V>>4],z.huffmanTableAC=x[15&V],G.push(z)}var $=t[d++],X=t[d++],K=t[d++];try{var Y=v(t,d,u,G,h,$,X,K>>4,15&K,Z);d+=Y}catch(e){if(e instanceof o)return(0,r.warn)(`${e.message} -- attempting to re-parse the JPEG image.`),this.parse(t,{dnlScanLines:e.scanLines});if(e instanceof s){(0,r.warn)(`${e.message} -- ignoring the rest of the image data.`);break e}throw e}break;case 65500:d+=4;break;case 65535:255!==t[d]&&d--;break;default:const Q=w(t,d-2,d-3);if(Q&&Q.invalid){(0,r.warn)("JpegImage.parse - unexpected data, current marker is: "+Q.invalid),d=Q.offset;break}if(!Q||d>=t.length-1){(0,r.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break e}throw new i("JpegImage.parse - unknown marker: "+k.toString(16))}k=(0,a.readUint16)(t,d),d+=2}for(this.width=u.samplesPerLine,this.height=u.scanLines,this.jfif=f,this.adobe=p,this.components=[],S=0;S<u.components.length;S++){var J=b[(z=u.components[S]).quantizationId];J&&(z.quantizationTable=J),this.components.push({index:z.index,output:y(0,z),scaleX:z.h/u.maxH,scaleY:z.v/u.maxV,blocksPerLine:z.blocksPerLine,blocksPerColumn:z.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData(e,t,n=!1){var r,a,i,o,s,c,l,u,h,d,f,p=this.width/e,g=this.height/t,m=0,v=this.components.length,b=e*t*v,y=new Uint8ClampedArray(b),w=new Uint32Array(e),x=4294967288;let C;for(l=0;l<v;l++){if(a=(r=this.components[l]).scaleX*p,i=r.scaleY*g,m=l,f=r.output,o=r.blocksPerLine+1<<3,a!==C){for(s=0;s<e;s++)u=0|s*a,w[s]=(u&x)<<3|7&u;C=a}for(c=0;c<t;c++)for(d=o*((u=0|c*i)&x)|(7&u)<<3,s=0;s<e;s++)y[m]=f[d+w[s]],m+=v}let k=this._decodeTransform;if(n||4!==v||k||(k=new Int32Array([-256,255,-256,255,-256,255,-256,255])),k)for(l=0;l<b;)for(u=0,h=0;u<v;u++,l++,h+=2)y[l]=(y[l]*k[h]>>8)+k[h+1];return y},get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform&&(82!==this.components[0].index||71!==this.components[1].index||66!==this.components[2].index):1===this._colorTransform},_convertYccToRgb:function(e){for(var t,n,r,a=0,i=e.length;a<i;a+=3)t=e[a],n=e[a+1],r=e[a+2],e[a]=t-179.456+1.402*r,e[a+1]=t+135.459-.344*n-.714*r,e[a+2]=t-226.816+1.772*n;return e},_convertYcckToRgb:function(e){for(var t,n,r,a,i=0,o=0,s=e.length;o<s;o+=4)t=e[o],n=e[o+1],r=e[o+2],a=e[o+3],e[i++]=n*(-660635669420364e-19*n+.000437130475926232*r-54080610064599e-18*t+.00048449797120281*a-.154362151871126)-122.67195406894+r*(-.000957964378445773*r+.000817076911346625*t-.00477271405408747*a+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*a+.48357088451265)+a*(-.000336197177618394*a+.484791561490776),e[i++]=107.268039397724+n*(219927104525741e-19*n-.000640992018297945*r+.000659397001245577*t+.000426105652938837*a-.176491792462875)+r*(-.000778269941513683*r+.00130872261408275*t+.000770482631801132*a-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*a+.25802910206845)+a*(-.000318913117588328*a-.213742400323665),e[i++]=n*(-.000570115196973677*n-263409051004589e-19*r+.0020741088115012*t-.00288260236853442*a+.814272968359295)-20.810012546947+r*(-153496057440975e-19*r-.000132689043961446*t+.000560833691242812*a-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*a+.116935020465145)+a*(-.000343531996510555*a+.24165260232407);return e.subarray(0,i)},_convertYcckToCmyk:function(e){for(var t,n,r,a=0,i=e.length;a<i;a+=4)t=e[a],n=e[a+1],r=e[a+2],e[a]=434.456-t-1.402*r,e[a+1]=119.541-t+.344*n+.714*r,e[a+2]=481.816-t-1.772*n;return e},_convertCmykToRgb:function(e){for(var t,n,r,a,i=0,o=0,s=e.length;o<s;o+=4)t=e[o],n=e[o+1],r=e[o+2],a=e[o+3],e[i++]=255+t*(-6747147073602441e-20*t+.0008379262121013727*n+.0002894718188643294*r+.003264231057537806*a-1.1185611867203937)+n*(26374107616089405e-21*n-8626949158638572e-20*r-.0002748769067499491*a-.02155688794978967)+r*(-3878099212869363e-20*r-.0003267808279485286*a+.0686742238595345)-a*(.0003361971776183937*a+.7430659151342254),e[i++]=255+t*(.00013596372813588848*t+.000924537132573585*n+.00010567359618683593*r+.0004791864687436512*a-.3109689587515875)+n*(-.00023545346108370344*n+.0002702845253534714*r+.0020200308977307156*a-.7488052167015494)+r*(6834815998235662e-20*r+.00015168452363460973*a-.09751927774728933)-a*(.0003189131175883281*a+.7364883807733168),e[i++]=255+t*(13598650411385307e-21*t+.00012423956175490851*n+.0004751985097583589*r-36729317476630422e-22*a-.05562186980264034)+n*(.00016141380598724676*n+.0009692239130725186*r+.0007782692450036253*a-.44015232367526463)+r*(5.068882914068769e-7*r+.0017778369011375071*a-.7591454649749609)-a*(.0003435319965105553*a+.7063770186160144);return e.subarray(0,i)},getData({width:e,height:t,forceRGB:n=!1,isSourcePDF:r=!1}){if(this.numComponents>4)throw new i("Unsupported color mode");var a=this._getLinearizedBlockData(e,t,r);if(1===this.numComponents&&n){for(var o=a.length,s=new Uint8ClampedArray(3*o),c=0,l=0;l<o;l++){var u=a[l];s[c++]=u,s[c++]=u,s[c++]=u}return s}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded)return n?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(n)return this._convertCmykToRgb(a)}return a}},p}();t.JpegImage=c},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JpxStream=void 0;var r=n(12),a=n(21),i=n(2);const o=function(){function e(e,t,n,a){this.stream=e,this.maybeLength=t,this.dict=n,this.params=a,r.DecodeStream.call(this,t)}return e.prototype=Object.create(r.DecodeStream.prototype),Object.defineProperty(e.prototype,"bytes",{get:function(){return(0,i.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),e.prototype.ensureBuffer=function(e){},e.prototype.readBlock=function(){if(this.eof)return;const e=new a.JpxImage;e.parse(this.bytes);const t=e.width,n=e.height,r=e.componentsCount,i=e.tiles.length;if(1===i)this.buffer=e.tiles[0].items;else{const a=new Uint8ClampedArray(t*n*r);for(let n=0;n<i;n++){const i=e.tiles[n],o=i.width,s=i.height,c=i.left,l=i.top,u=i.items;let h=0,d=(t*l+c)*r;const f=t*r,p=o*r;for(let e=0;e<s;e++){const e=u.subarray(h,h+p);a.set(e,d),h+=p,d+=f}}this.buffer=a}this.bufferLength=this.buffer.length,this.eof=!0},e}();t.JpxStream=o},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JpxImage=void 0;var r=n(2),a=n(8),i=n(17);class o extends r.BaseException{constructor(e){super(`JPX error: ${e}`)}}var s=function(){var e={LL:0,LH:1,HL:1,HH:2};function t(){this.failOnCorruptedImage=!1}function n(e,t){e.x0=Math.ceil(t.XOsiz/e.XRsiz),e.x1=Math.ceil(t.Xsiz/e.XRsiz),e.y0=Math.ceil(t.YOsiz/e.YRsiz),e.y1=Math.ceil(t.Ysiz/e.YRsiz),e.width=e.x1-e.x0,e.height=e.y1-e.y0}function s(e,t){for(var n,r=e.SIZ,a=[],i=Math.ceil((r.Xsiz-r.XTOsiz)/r.XTsiz),o=Math.ceil((r.Ysiz-r.YTOsiz)/r.YTsiz),s=0;s<o;s++)for(var c=0;c<i;c++)(n={}).tx0=Math.max(r.XTOsiz+c*r.XTsiz,r.XOsiz),n.ty0=Math.max(r.YTOsiz+s*r.YTsiz,r.YOsiz),n.tx1=Math.min(r.XTOsiz+(c+1)*r.XTsiz,r.Xsiz),n.ty1=Math.min(r.YTOsiz+(s+1)*r.YTsiz,r.Ysiz),n.width=n.tx1-n.tx0,n.height=n.ty1-n.ty0,n.components=[],a.push(n);e.tiles=a;for(var l=0,u=r.Csiz;l<u;l++)for(var h=t[l],d=0,f=a.length;d<f;d++){var p={};n=a[d],p.tcx0=Math.ceil(n.tx0/h.XRsiz),p.tcy0=Math.ceil(n.ty0/h.YRsiz),p.tcx1=Math.ceil(n.tx1/h.XRsiz),p.tcy1=Math.ceil(n.ty1/h.YRsiz),p.width=p.tcx1-p.tcx0,p.height=p.tcy1-p.tcy0,n.components[l]=p}}function c(e,t,n){var r=t.codingStyleParameters,a={};return r.entropyCoderWithCustomPrecincts?(a.PPx=r.precinctsSizes[n].PPx,a.PPy=r.precinctsSizes[n].PPy):(a.PPx=15,a.PPy=15),a.xcb_=n>0?Math.min(r.xcb,a.PPx-1):Math.min(r.xcb,a.PPx),a.ycb_=n>0?Math.min(r.ycb,a.PPy-1):Math.min(r.ycb,a.PPy),a}function l(e,t,n){var r=1<<n.PPx,a=1<<n.PPy,i=0===t.resLevel,o=1<<n.PPx+(i?0:-1),s=1<<n.PPy+(i?0:-1),c=t.trx1>t.trx0?Math.ceil(t.trx1/r)-Math.floor(t.trx0/r):0,l=t.try1>t.try0?Math.ceil(t.try1/a)-Math.floor(t.try0/a):0,u=c*l;t.precinctParameters={precinctWidth:r,precinctHeight:a,numprecinctswide:c,numprecinctshigh:l,numprecincts:u,precinctWidthInSubband:o,precinctHeightInSubband:s}}function u(e,t,n){var r,a,i,o,s=n.xcb_,c=n.ycb_,l=1<<s,u=1<<c,h=t.tbx0>>s,d=t.tby0>>c,f=t.tbx1+l-1>>s,p=t.tby1+u-1>>c,g=t.resolution.precinctParameters,m=[],v=[];for(a=d;a<p;a++)for(r=h;r<f;r++)if((i={cbx:r,cby:a,tbx0:l*r,tby0:u*a,tbx1:l*(r+1),tby1:u*(a+1)}).tbx0_=Math.max(t.tbx0,i.tbx0),i.tby0_=Math.max(t.tby0,i.tby0),i.tbx1_=Math.min(t.tbx1,i.tbx1),i.tby1_=Math.min(t.tby1,i.tby1),o=Math.floor((i.tbx0_-t.tbx0)/g.precinctWidthInSubband)+Math.floor((i.tby0_-t.tby0)/g.precinctHeightInSubband)*g.numprecinctswide,i.precinctNumber=o,i.subbandType=t.type,i.Lblock=3,!(i.tbx1_<=i.tbx0_||i.tby1_<=i.tby0_)){m.push(i);var b=v[o];void 0!==b?(r<b.cbxMin?b.cbxMin=r:r>b.cbxMax&&(b.cbxMax=r),a<b.cbyMin?b.cbxMin=a:a>b.cbyMax&&(b.cbyMax=a)):v[o]=b={cbxMin:r,cbyMin:a,cbxMax:r,cbyMax:a},i.precinct=b}t.codeblockParameters={codeblockWidth:s,codeblockHeight:c,numcodeblockwide:f-h+1,numcodeblockhigh:p-d+1},t.codeblocks=m,t.precincts=v}function h(e,t,n){for(var r=[],a=e.subbands,i=0,o=a.length;i<o;i++)for(var s=a[i].codeblocks,c=0,l=s.length;c<l;c++){var u=s[c];u.precinctNumber===t&&r.push(u)}return{layerNumber:n,codeblocks:r}}function d(e){for(var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],a=r.codingStyleDefaultParameters.layersCount,i=t.Csiz,s=0,c=0;c<i;c++)s=Math.max(s,r.components[c].codingStyleParameters.decompositionLevelsCount);var l=0,u=0,d=0,f=0;this.nextPacket=function(){for(;l<a;l++){for(;u<=s;u++){for(;d<i;d++){var e=r.components[d];if(!(u>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[u],n=t.precinctParameters.numprecincts;f<n;){var c=h(t,f,l);return f++,c}f=0}}d=0}u=0}throw new o("Out of packets")}}function f(e){for(var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],a=r.codingStyleDefaultParameters.layersCount,i=t.Csiz,s=0,c=0;c<i;c++)s=Math.max(s,r.components[c].codingStyleParameters.decompositionLevelsCount);var l=0,u=0,d=0,f=0;this.nextPacket=function(){for(;l<=s;l++){for(;u<a;u++){for(;d<i;d++){var e=r.components[d];if(!(l>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[l],n=t.precinctParameters.numprecincts;f<n;){var c=h(t,f,u);return f++,c}f=0}}d=0}u=0}throw new o("Out of packets")}}function p(e){var t,n,r,a,i=e.SIZ,s=e.currentTile.index,c=e.tiles[s],l=c.codingStyleDefaultParameters.layersCount,u=i.Csiz,d=0;for(r=0;r<u;r++){const e=c.components[r];d=Math.max(d,e.codingStyleParameters.decompositionLevelsCount)}var f=new Int32Array(d+1);for(n=0;n<=d;++n){var p=0;for(r=0;r<u;++r){var g=c.components[r].resolutions;n<g.length&&(p=Math.max(p,g[n].precinctParameters.numprecincts))}f[n]=p}t=0,n=0,r=0,a=0,this.nextPacket=function(){for(;n<=d;n++){for(;a<f[n];a++){for(;r<u;r++){const o=c.components[r];if(!(n>o.codingStyleParameters.decompositionLevelsCount)){var e=o.resolutions[n],i=e.precinctParameters.numprecincts;if(!(a>=i)){for(;t<l;){var s=h(e,a,t);return t++,s}t=0}}}r=0}a=0}throw new o("Out of packets")}}function g(e){var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],a=r.codingStyleDefaultParameters.layersCount,i=t.Csiz,s=b(r),c=s,l=0,u=0,d=0,f=0,p=0;this.nextPacket=function(){for(;p<c.maxNumHigh;p++){for(;f<c.maxNumWide;f++){for(;d<i;d++){for(var e=r.components[d],t=e.codingStyleParameters.decompositionLevelsCount;u<=t;u++){var n=e.resolutions[u],g=s.components[d].resolutions[u],m=v(f,p,g,c,n);if(null!==m){for(;l<a;){var b=h(n,m,l);return l++,b}l=0}}u=0}d=0}f=0}throw new o("Out of packets")}}function m(e){var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],a=r.codingStyleDefaultParameters.layersCount,i=t.Csiz,s=b(r),c=0,l=0,u=0,d=0,f=0;this.nextPacket=function(){for(;u<i;++u){for(var e=r.components[u],t=s.components[u],n=e.codingStyleParameters.decompositionLevelsCount;f<t.maxNumHigh;f++){for(;d<t.maxNumWide;d++){for(;l<=n;l++){var p=e.resolutions[l],g=t.resolutions[l],m=v(d,f,g,t,p);if(null!==m){for(;c<a;){var b=h(p,m,c);return c++,b}c=0}}l=0}d=0}f=0}throw new o("Out of packets")}}function v(e,t,n,r,a){var i=e*r.minWidth,o=t*r.minHeight;if(i%n.width!=0||o%n.height!=0)return null;var s=o/n.width*a.precinctParameters.numprecinctswide;return i/n.height+s}function b(e){for(var t=e.components.length,n=Number.MAX_VALUE,r=Number.MAX_VALUE,a=0,i=0,o=new Array(t),s=0;s<t;s++){for(var c=e.components[s],l=c.codingStyleParameters.decompositionLevelsCount,u=new Array(l+1),h=Number.MAX_VALUE,d=Number.MAX_VALUE,f=0,p=0,g=1,m=l;m>=0;--m){var v=c.resolutions[m],b=g*v.precinctParameters.precinctWidth,y=g*v.precinctParameters.precinctHeight;h=Math.min(h,b),d=Math.min(d,y),f=Math.max(f,v.precinctParameters.numprecinctswide),p=Math.max(p,v.precinctParameters.numprecinctshigh),u[m]={width:b,height:y},g<<=1}n=Math.min(n,h),r=Math.min(r,d),a=Math.max(a,f),i=Math.max(i,p),o[s]={resolutions:u,minWidth:h,minHeight:d,maxNumWide:f,maxNumHigh:p}}return{components:o,minWidth:n,minHeight:r,maxNumWide:a,maxNumHigh:i}}function y(e){for(var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],a=t.Csiz,i=0;i<a;i++){for(var s=r.components[i],h=s.codingStyleParameters.decompositionLevelsCount,v=[],b=[],y=0;y<=h;y++){var w,x=c(0,s,y),C={},k=1<<h-y;if(C.trx0=Math.ceil(s.tcx0/k),C.try0=Math.ceil(s.tcy0/k),C.trx1=Math.ceil(s.tcx1/k),C.try1=Math.ceil(s.tcy1/k),C.resLevel=y,l(0,C,x),v.push(C),0===y)(w={}).type="LL",w.tbx0=Math.ceil(s.tcx0/k),w.tby0=Math.ceil(s.tcy0/k),w.tbx1=Math.ceil(s.tcx1/k),w.tby1=Math.ceil(s.tcy1/k),w.resolution=C,u(0,w,x),b.push(w),C.subbands=[w];else{var S=1<<h-y+1,A=[];(w={}).type="HL",w.tbx0=Math.ceil(s.tcx0/S-.5),w.tby0=Math.ceil(s.tcy0/S),w.tbx1=Math.ceil(s.tcx1/S-.5),w.tby1=Math.ceil(s.tcy1/S),w.resolution=C,u(0,w,x),b.push(w),A.push(w),(w={}).type="LH",w.tbx0=Math.ceil(s.tcx0/S),w.tby0=Math.ceil(s.tcy0/S-.5),w.tbx1=Math.ceil(s.tcx1/S),w.tby1=Math.ceil(s.tcy1/S-.5),w.resolution=C,u(0,w,x),b.push(w),A.push(w),(w={}).type="HH",w.tbx0=Math.ceil(s.tcx0/S-.5),w.tby0=Math.ceil(s.tcy0/S-.5),w.tbx1=Math.ceil(s.tcx1/S-.5),w.tby1=Math.ceil(s.tcy1/S-.5),w.resolution=C,u(0,w,x),b.push(w),A.push(w),C.subbands=A}}s.resolutions=v,s.subbands=b}var _=r.codingStyleDefaultParameters.progressionOrder;switch(_){case 0:r.packetsIterator=new d(e);break;case 1:r.packetsIterator=new f(e);break;case 2:r.packetsIterator=new p(e);break;case 3:r.packetsIterator=new g(e);break;case 4:r.packetsIterator=new m(e);break;default:throw new o(`Unsupported progression order ${_}`)}}function w(e,t,n,r){var i,o=0,s=0,c=!1;function l(e){for(;s<e;){var r=t[n+o];o++,c?(i=i<<7|r,s+=7,c=!1):(i=i<<8|r,s+=8),255===r&&(c=!0)}return i>>>(s-=e)&(1<<e)-1}function u(e){return 255===t[n+o-1]&&t[n+o]===e?(h(1),!0):255===t[n+o]&&t[n+o+1]===e&&(h(2),!0)}function h(e){o+=e}function d(){s=0,c&&(o++,c=!1)}function f(){if(0===l(1))return 1;if(0===l(1))return 2;var e=l(2);return e<3?e+3:(e=l(5))<31?e+6:(e=l(7))+37}for(var p=e.currentTile.index,g=e.tiles[p],m=e.COD.sopMarkerUsed,v=e.COD.ephMarkerUsed,b=g.packetsIterator;o<r;){d(),m&&u(145)&&h(4);var y=b.nextPacket();if(l(1)){for(var w,x=y.layerNumber,C=[],k=0,_=y.codeblocks.length;k<_;k++){var E=(w=y.codeblocks[k]).precinct,I=w.cbx-E.cbxMin,T=w.cby-E.cbyMin,R=!1,F=!1;if(void 0!==w.included)R=!!l(1);else{var P,D;if(void 0!==(E=w.precinct).inclusionTree)P=E.inclusionTree;else{var O=E.cbxMax-E.cbxMin+1,N=E.cbyMax-E.cbyMin+1;P=new A(O,N,x),D=new S(O,N),E.inclusionTree=P,E.zeroBitPlanesTree=D}if(P.reset(I,T,x))for(;;){if(!l(1)){P.incrementValue(x);break}if(!P.nextLevel()){w.included=!0,R=F=!0;break}}}if(R){if(F){for((D=E.zeroBitPlanesTree).reset(I,T);;)if(l(1)){if(!D.nextLevel())break}else D.incrementValue();w.zeroBitPlanes=D.value}for(var M=f();l(1);)w.Lblock++;var L=(0,a.log2)(M),B=l((M<1<<L?L-1:L)+w.Lblock);C.push({codeblock:w,codingpasses:M,dataLength:B})}}for(d(),v&&u(146);C.length>0;){var U=C.shift();void 0===(w=U.codeblock).data&&(w.data=[]),w.data.push({data:t,start:n+o,end:n+o+U.dataLength,codingpasses:U.codingpasses}),o+=U.dataLength}}}return o}function x(e,t,n,r,a,o,s,c){for(var l=r.tbx0,u=r.tby0,h=r.tbx1-r.tbx0,d=r.codeblocks,f="H"===r.type.charAt(0)?1:0,p="H"===r.type.charAt(1)?t:0,g=0,m=d.length;g<m;++g){var v=d[g],b=v.tbx1_-v.tbx0_,y=v.tby1_-v.tby0_;if(0!==b&&0!==y&&void 0!==v.data){var w,x;w=new _(b,y,v.subbandType,v.zeroBitPlanes,o),x=2;var C,k,S,A=v.data,E=0,I=0;for(C=0,k=A.length;C<k;C++)E+=(S=A[C]).end-S.start,I+=S.codingpasses;var T=new Uint8Array(E),R=0;for(C=0,k=A.length;C<k;C++){var F=(S=A[C]).data.subarray(S.start,S.end);T.set(F,R),R+=F.length}var P=new i.ArithmeticDecoder(T,0,E);for(w.setDecoder(P),C=0;C<I;C++){switch(x){case 0:w.runSignificancePropagationPass();break;case 1:w.runMagnitudeRefinementPass();break;case 2:w.runCleanupPass(),c&&w.checkSegmentationSymbol()}x=(x+1)%3}var D,O,N,M=v.tbx0_-l+(v.tby0_-u)*h,L=w.coefficentsSign,B=w.coefficentsMagnitude,U=w.bitsDecoded,j=s?0:.5;R=0;var q="LL"!==r.type;for(C=0;C<y;C++){var z=2*(M/h|0)*(t-h)+f+p;for(D=0;D<b;D++){if(0!==(O=B[R]))O=(O+j)*a,0!==L[R]&&(O=-O),N=U[R],e[q?z+(M<<1):M]=s&&N>=o?O:O*(1<<o-N);M++,R++}M+=h-b}}}}function C(t,n,r){for(var a=n.components[r],i=a.codingStyleParameters,o=a.quantizationParameters,s=i.decompositionLevelsCount,c=o.SPqcds,l=o.scalarExpounded,u=o.guardBits,h=i.segmentationSymbolUsed,d=t.components[r].precision,f=i.reversibleTransformation,p=f?new T:new I,g=[],m=0,v=0;v<=s;v++){for(var b=a.resolutions[v],y=b.trx1-b.trx0,w=b.try1-b.try0,C=new Float32Array(y*w),k=0,S=b.subbands.length;k<S;k++){var A,_;l?(A=c[m].mu,_=c[m].epsilon,m++):(A=c[0].mu,_=c[0].epsilon+(v>0?1-v:0));var E=b.subbands[k],R=e[E.type];x(C,y,0,E,f?1:2**(d+R-_)*(1+A/2048),u+_-1,f,h)}g.push({width:y,height:w,items:C})}var F=p.calculate(g,a.tcx0,a.tcy0);return{left:a.tcx0,top:a.tcy0,width:F.width,height:F.height,items:F.items}}function k(e,t){for(var n=e.SIZ.Csiz,r=e.tiles[t],a=0;a<n;a++){var i=r.components[a],o=void 0!==e.currentTile.QCC[a]?e.currentTile.QCC[a]:e.currentTile.QCD;i.quantizationParameters=o;var s=void 0!==e.currentTile.COC[a]?e.currentTile.COC[a]:e.currentTile.COD;i.codingStyleParameters=s}r.codingStyleDefaultParameters=e.currentTile.COD}t.prototype={parse:function(e){if(65359!==(0,a.readUint16)(e,0))for(var t=0,n=e.length;t<n;){var i=8,s=(0,a.readUint32)(e,t),c=(0,a.readUint32)(e,t+4);if(t+=i,1===s&&(s=4294967296*(0,a.readUint32)(e,t)+(0,a.readUint32)(e,t+4),t+=8,i+=8),0===s&&(s=n-t+i),s<i)throw new o("Invalid box field size");var l=s-i,u=!0;switch(c){case 1785737832:u=!1;break;case 1668246642:var h=e[t];if(1===h){var d=(0,a.readUint32)(e,t+3);switch(d){case 16:case 17:case 18:break;default:(0,r.warn)("Unknown colorspace "+d)}}else 2===h&&(0,r.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(e,t,t+l);break;case 1783636e3:218793738!==(0,a.readUint32)(e,t)&&(0,r.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var f=String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,255&c);(0,r.warn)("Unsupported header type "+c+" ("+f+")")}u&&(t+=l)}else this.parseCodestream(e,0,e.length)},parseImageProperties:function(e){for(var t=e.getByte();t>=0;)if(65361==(t<<8|(t=e.getByte()))){e.skip(4);var n=e.getInt32()>>>0,r=e.getInt32()>>>0,a=e.getInt32()>>>0,i=e.getInt32()>>>0;e.skip(16);var s=e.getUint16();return this.width=n-a,this.height=r-i,this.componentsCount=s,void(this.bitsPerComponent=8)}throw new o("No size marker found in JPX stream")},parseCodestream:function(e,t,i){var c={},l=!1;try{for(var u=t;u+1<i;){var h=(0,a.readUint16)(e,u);u+=2;var d,f,p,g,m,v,b=0;switch(h){case 65359:c.mainHeader=!0;break;case 65497:break;case 65361:b=(0,a.readUint16)(e,u);var x={};x.Xsiz=(0,a.readUint32)(e,u+4),x.Ysiz=(0,a.readUint32)(e,u+8),x.XOsiz=(0,a.readUint32)(e,u+12),x.YOsiz=(0,a.readUint32)(e,u+16),x.XTsiz=(0,a.readUint32)(e,u+20),x.YTsiz=(0,a.readUint32)(e,u+24),x.XTOsiz=(0,a.readUint32)(e,u+28),x.YTOsiz=(0,a.readUint32)(e,u+32);var S=(0,a.readUint16)(e,u+36);x.Csiz=S;var A=[];d=u+38;for(var _=0;_<S;_++){var E={precision:1+(127&e[d]),isSigned:!!(128&e[d]),XRsiz:e[d+1],YRsiz:e[d+2]};d+=3,n(E,x),A.push(E)}c.SIZ=x,c.components=A,s(c,A),c.QCC=[],c.COC=[];break;case 65372:b=(0,a.readUint16)(e,u);var I={};switch(d=u+2,31&(f=e[d++])){case 0:g=8,m=!0;break;case 1:g=16,m=!1;break;case 2:g=16,m=!0;break;default:throw new Error("Invalid SQcd value "+f)}for(I.noQuantization=8===g,I.scalarExpounded=m,I.guardBits=f>>5,p=[];d<b+u;){var T={};8===g?(T.epsilon=e[d++]>>3,T.mu=0):(T.epsilon=e[d]>>3,T.mu=(7&e[d])<<8|e[d+1],d+=2),p.push(T)}I.SPqcds=p,c.mainHeader?c.QCD=I:(c.currentTile.QCD=I,c.currentTile.QCC=[]);break;case 65373:b=(0,a.readUint16)(e,u);var R,F={};switch(d=u+2,c.SIZ.Csiz<257?R=e[d++]:(R=(0,a.readUint16)(e,d),d+=2),31&(f=e[d++])){case 0:g=8,m=!0;break;case 1:g=16,m=!1;break;case 2:g=16,m=!0;break;default:throw new Error("Invalid SQcd value "+f)}for(F.noQuantization=8===g,F.scalarExpounded=m,F.guardBits=f>>5,p=[];d<b+u;)T={},8===g?(T.epsilon=e[d++]>>3,T.mu=0):(T.epsilon=e[d]>>3,T.mu=(7&e[d])<<8|e[d+1],d+=2),p.push(T);F.SPqcds=p,c.mainHeader?c.QCC[R]=F:c.currentTile.QCC[R]=F;break;case 65362:b=(0,a.readUint16)(e,u);var P={};d=u+2;var D=e[d++];P.entropyCoderWithCustomPrecincts=!!(1&D),P.sopMarkerUsed=!!(2&D),P.ephMarkerUsed=!!(4&D),P.progressionOrder=e[d++],P.layersCount=(0,a.readUint16)(e,d),d+=2,P.multipleComponentTransform=e[d++],P.decompositionLevelsCount=e[d++],P.xcb=2+(15&e[d++]),P.ycb=2+(15&e[d++]);var O=e[d++];if(P.selectiveArithmeticCodingBypass=!!(1&O),P.resetContextProbabilities=!!(2&O),P.terminationOnEachCodingPass=!!(4&O),P.verticallyStripe=!!(8&O),P.predictableTermination=!!(16&O),P.segmentationSymbolUsed=!!(32&O),P.reversibleTransformation=e[d++],P.entropyCoderWithCustomPrecincts){for(var N=[];d<b+u;){var M=e[d++];N.push({PPx:15&M,PPy:M>>4})}P.precinctsSizes=N}var L=[];P.selectiveArithmeticCodingBypass&&L.push("selectiveArithmeticCodingBypass"),P.resetContextProbabilities&&L.push("resetContextProbabilities"),P.terminationOnEachCodingPass&&L.push("terminationOnEachCodingPass"),P.verticallyStripe&&L.push("verticallyStripe"),P.predictableTermination&&L.push("predictableTermination"),L.length>0&&(l=!0,(0,r.warn)(`JPX: Unsupported COD options (${L.join(", ")}).`)),c.mainHeader?c.COD=P:(c.currentTile.COD=P,c.currentTile.COC=[]);break;case 65424:b=(0,a.readUint16)(e,u),(v={}).index=(0,a.readUint16)(e,u+2),v.length=(0,a.readUint32)(e,u+4),v.dataEnd=v.length+u-2,v.partIndex=e[u+8],v.partsCount=e[u+9],c.mainHeader=!1,0===v.partIndex&&(v.COD=c.COD,v.COC=c.COC.slice(0),v.QCD=c.QCD,v.QCC=c.QCC.slice(0)),c.currentTile=v;break;case 65427:0===(v=c.currentTile).partIndex&&(k(c,v.index),y(c)),w(c,e,u,b=v.dataEnd-u);break;case 65363:(0,r.warn)("JPX: Codestream code 0xFF53 (COC) is not implemented.");case 65365:case 65367:case 65368:case 65380:b=(0,a.readUint16)(e,u);break;default:throw new Error("Unknown codestream code: "+h.toString(16))}u+=b}}catch(e){if(l||this.failOnCorruptedImage)throw new o(e.message);(0,r.warn)(`JPX: Trying to recover from: "${e.message}".`)}this.tiles=function(e){for(var t=e.SIZ,n=e.components,r=t.Csiz,a=[],i=0,o=e.tiles.length;i<o;i++){var s,c=e.tiles[i],l=[];for(s=0;s<r;s++)l[s]=C(e,c,s);var u,h,d,f,p,g,m,v=l[0],b=new Uint8ClampedArray(v.items.length*r),y={left:v.left,top:v.top,width:v.width,height:v.height,items:b},w=0;if(c.codingStyleDefaultParameters.multipleComponentTransform){var x=4===r,k=l[0].items,S=l[1].items,A=l[2].items,_=x?l[3].items:null;h=.5+(128<<(u=n[0].precision-8));var E=c.components[0],I=r-3;if(f=k.length,E.codingStyleParameters.reversibleTransformation)for(d=0;d<f;d++,w+=I){p=k[d]+h,g=S[d];const e=p-((m=A[d])+g>>2);b[w++]=e+m>>u,b[w++]=e>>u,b[w++]=e+g>>u}else for(d=0;d<f;d++,w+=I)p=k[d]+h,g=S[d],m=A[d],b[w++]=p+1.402*m>>u,b[w++]=p-.34413*g-.71414*m>>u,b[w++]=p+1.772*g>>u;if(x)for(d=0,w=3;d<f;d++,w+=4)b[w]=_[d]+h>>u}else for(s=0;s<r;s++){var T=l[s].items;for(h=.5+(128<<(u=n[s].precision-8)),w=s,d=0,f=T.length;d<f;d++)b[w]=T[d]+h>>u,w+=r}a.push(y)}return a}(c),this.width=c.SIZ.Xsiz-c.SIZ.XOsiz,this.height=c.SIZ.Ysiz-c.SIZ.YOsiz,this.componentsCount=c.SIZ.Csiz}};var S=function(){function e(e,t){var n=(0,a.log2)(Math.max(e,t))+1;this.levels=[];for(var r=0;r<n;r++){var i={width:e,height:t,items:[]};this.levels.push(i),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t){for(var n,r=0,a=0;r<this.levels.length;){var i=e+t*(n=this.levels[r]).width;if(void 0!==n.items[i]){a=n.items[i];break}n.index=i,e>>=1,t>>=1,r++}r--,(n=this.levels[r]).items[n.index]=a,this.currentLevel=r,delete this.value},incrementValue:function(){var e=this.levels[this.currentLevel];e.items[e.index]++},nextLevel:function(){var e=this.currentLevel,t=this.levels[e],n=t.items[t.index];return--e<0?(this.value=n,!1):(this.currentLevel=e,(t=this.levels[e]).items[t.index]=n,!0)}},e}(),A=function(){function e(e,t,n){var r=(0,a.log2)(Math.max(e,t))+1;this.levels=[];for(var i=0;i<r;i++){for(var o=new Uint8Array(e*t),s=0,c=o.length;s<c;s++)o[s]=n;var l={width:e,height:t,items:o};this.levels.push(l),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t,n){for(var r=0;r<this.levels.length;){var a=this.levels[r],i=e+t*a.width;a.index=i;var o=a.items[i];if(255===o)break;if(o>n)return this.currentLevel=r,this.propagateValues(),!1;e>>=1,t>>=1,r++}return this.currentLevel=r-1,!0},incrementValue:function(e){var t=this.levels[this.currentLevel];t.items[t.index]=e+1,this.propagateValues()},propagateValues:function(){for(var e=this.currentLevel,t=this.levels[e],n=t.items[t.index];--e>=0;)(t=this.levels[e]).items[t.index]=n},nextLevel:function(){var e=this.currentLevel,t=this.levels[e],n=t.items[t.index];return t.items[t.index]=255,!(--e<0||(this.currentLevel=e,(t=this.levels[e]).items[t.index]=n,0))}},e}(),_=function(){var e=17,t=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),n=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),r=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function a(e,a,i,o,s){let c;this.width=e,this.height=a,c="HH"===i?r:"HL"===i?n:t,this.contextLabelTable=c;var l=e*a;let u;this.neighborsSignificance=new Uint8Array(l),this.coefficentsSign=new Uint8Array(l),u=s>14?new Uint32Array(l):s>6?new Uint16Array(l):new Uint8Array(l),this.coefficentsMagnitude=u,this.processingFlags=new Uint8Array(l);var h=new Uint8Array(l);if(0!==o)for(var d=0;d<l;d++)h[d]=o;this.bitsDecoded=h,this.reset()}return a.prototype={setDecoder:function(e){this.decoder=e},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(e,t,n){var r,a=this.neighborsSignificance,i=this.width,o=this.height,s=t>0,c=t+1<i;e>0&&(r=n-i,s&&(a[r-1]+=16),c&&(a[r+1]+=16),a[r]+=4),e+1<o&&(r=n+i,s&&(a[r-1]+=16),c&&(a[r+1]+=16),a[r]+=4),s&&(a[n-1]+=1),c&&(a[n+1]+=1),a[n]|=128},runSignificancePropagationPass:function(){for(var e=this.decoder,t=this.width,n=this.height,r=this.coefficentsMagnitude,a=this.coefficentsSign,i=this.neighborsSignificance,o=this.processingFlags,s=this.contexts,c=this.contextLabelTable,l=this.bitsDecoded,u=0;u<n;u+=4)for(var h=0;h<t;h++)for(var d=u*t+h,f=0;f<4;f++,d+=t){var p=u+f;if(p>=n)break;if(o[d]&=-2,!r[d]&&i[d]){var g=c[i[d]];if(e.readBit(s,g)){var m=this.decodeSignBit(p,h,d);a[d]=m,r[d]=1,this.setNeighborsSignificance(p,h,d),o[d]|=2}l[d]++,o[d]|=1}}},decodeSignBit:function(e,t,n){var r,a,i,o,s,c,l=this.width,u=this.height,h=this.coefficentsMagnitude,d=this.coefficentsSign;o=t>0&&0!==h[n-1],t+1<l&&0!==h[n+1]?(i=d[n+1],r=o?1-i-(a=d[n-1]):1-i-i):r=o?1-(a=d[n-1])-a:0;var f=3*r;return o=e>0&&0!==h[n-l],e+1<u&&0!==h[n+l]?(i=d[n+l],r=o?1-i-(a=d[n-l])+f:1-i-i+f):r=o?1-(a=d[n-l])-a+f:f,r>=0?(s=9+r,c=this.decoder.readBit(this.contexts,s)):(s=9-r,c=1^this.decoder.readBit(this.contexts,s)),c},runMagnitudeRefinementPass:function(){for(var e,t=this.decoder,n=this.width,r=this.height,a=this.coefficentsMagnitude,i=this.neighborsSignificance,o=this.contexts,s=this.bitsDecoded,c=this.processingFlags,l=n*r,u=4*n,h=0;h<l;h=e){e=Math.min(l,h+u);for(var d=0;d<n;d++)for(var f=h+d;f<e;f+=n)if(a[f]&&0==(1&c[f])){var p=16;0!=(2&c[f])&&(c[f]^=2,p=0==(127&i[f])?15:14);var g=t.readBit(o,p);a[f]=a[f]<<1|g,s[f]++,c[f]|=1}}},runCleanupPass:function(){for(var t,n=this.decoder,r=this.width,a=this.height,i=this.neighborsSignificance,o=this.coefficentsMagnitude,s=this.coefficentsSign,c=this.contexts,l=this.contextLabelTable,u=this.bitsDecoded,h=this.processingFlags,d=r,f=2*r,p=3*r,g=0;g<a;g=t){t=Math.min(g+4,a);for(var m=g*r,v=g+3<a,b=0;b<r;b++){var y,w=m+b,x=0,C=w,k=g;if(v&&0===h[w]&&0===h[w+d]&&0===h[w+f]&&0===h[w+p]&&0===i[w]&&0===i[w+d]&&0===i[w+f]&&0===i[w+p]){if(!n.readBit(c,18)){u[w]++,u[w+d]++,u[w+f]++,u[w+p]++;continue}0!=(x=n.readBit(c,e)<<1|n.readBit(c,e))&&(k=g+x,C+=x*r),y=this.decodeSignBit(k,b,C),s[C]=y,o[C]=1,this.setNeighborsSignificance(k,b,C),h[C]|=2,C=w;for(var S=g;S<=k;S++,C+=r)u[C]++;x++}for(k=g+x;k<t;k++,C+=r)if(!o[C]&&0==(1&h[C])){var A=l[i[C]];1===n.readBit(c,A)&&(y=this.decodeSignBit(k,b,C),s[C]=y,o[C]=1,this.setNeighborsSignificance(k,b,C),h[C]|=2),u[C]++}}}},checkSegmentationSymbol:function(){var t=this.decoder,n=this.contexts;if(10!=(t.readBit(n,e)<<3|t.readBit(n,e)<<2|t.readBit(n,e)<<1|t.readBit(n,e)))throw new o("Invalid segmentation symbol")}},a}(),E=function(){function e(){}return e.prototype.calculate=function(e,t,n){for(var r=e[0],a=1,i=e.length;a<i;a++)r=this.iterate(r,e[a],t,n);return r},e.prototype.extend=function(e,t,n){var r=t-1,a=t+1,i=t+n-2,o=t+n;e[r--]=e[a++],e[o++]=e[i--],e[r--]=e[a++],e[o++]=e[i--],e[r--]=e[a++],e[o++]=e[i--],e[r]=e[a],e[o]=e[i]},e.prototype.iterate=function(e,t,n,r){var a,i,o,s,c,l,u=e.width,h=e.height,d=e.items,f=t.width,p=t.height,g=t.items;for(o=0,a=0;a<h;a++)for(s=2*a*f,i=0;i<u;i++,o++,s+=2)g[s]=d[o];d=e.items=null;var m=new Float32Array(f+8);if(1===f){if(0!=(1&n))for(l=0,o=0;l<p;l++,o+=f)g[o]*=.5}else for(l=0,o=0;l<p;l++,o+=f)m.set(g.subarray(o,o+f),4),this.extend(m,4,f),this.filter(m,4,f),g.set(m.subarray(4,4+f),o);var v=16,b=[];for(a=0;a<v;a++)b.push(new Float32Array(p+8));var y,w=0;if(e=4+p,1===p){if(0!=(1&r))for(c=0;c<f;c++)g[c]*=.5}else for(c=0;c<f;c++){if(0===w){for(v=Math.min(f-c,v),o=c,s=4;s<e;o+=f,s++)for(y=0;y<v;y++)b[y][s]=g[o+y];w=v}var x=b[--w];if(this.extend(x,4,p),this.filter(x,4,p),0===w)for(o=c-v+1,s=4;s<e;o+=f,s++)for(y=0;y<v;y++)g[o+y]=b[y][s]}return{width:f,height:p,items:g}},e}(),I=function(){function e(){E.call(this)}return e.prototype=Object.create(E.prototype),e.prototype.filter=function(e,t,n){var r,a,i,o,s=n>>1,c=-1.586134342059924,l=-.052980118572961,u=.882911075530934,h=.443506852043971,d=1.230174104914001;for(r=(t|=0)-3,a=s+4;a--;r+=2)e[r]*=.8128930661159609;for(i=h*e[(r=t-2)-1],a=s+3;a--&&(o=h*e[r+1],e[r]=d*e[r]-i-o,a--);r+=2)i=h*e[(r+=2)+1],e[r]=d*e[r]-i-o;for(i=u*e[(r=t-1)-1],a=s+2;a--&&(o=u*e[r+1],e[r]-=i+o,a--);r+=2)i=u*e[(r+=2)+1],e[r]-=i+o;for(i=l*e[(r=t)-1],a=s+1;a--&&(o=l*e[r+1],e[r]-=i+o,a--);r+=2)i=l*e[(r+=2)+1],e[r]-=i+o;if(0!==s)for(i=c*e[(r=t+1)-1],a=s;a--&&(o=c*e[r+1],e[r]-=i+o,a--);r+=2)i=c*e[(r+=2)+1],e[r]-=i+o},e}(),T=function(){function e(){E.call(this)}return e.prototype=Object.create(E.prototype),e.prototype.filter=function(e,t,n){var r,a,i=n>>1;for(r=t|=0,a=i+1;a--;r+=2)e[r]-=e[r-1]+e[r+1]+2>>2;for(r=t+1,a=i;a--;r+=2)e[r]+=e[r-1]+e[r+1]>>1},e}();return t}();t.JpxImage=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDF20=t.PDF17=t.CipherTransformFactory=t.calculateSHA512=t.calculateSHA384=t.calculateSHA256=t.calculateMD5=t.ARCFourCipher=t.AES256Cipher=t.AES128Cipher=void 0;var r=n(2),a=n(5),i=n(12),o=function(){function e(e){this.a=0,this.b=0;var t,n,r=new Uint8Array(256),a=0,i=e.length;for(t=0;t<256;++t)r[t]=t;for(t=0;t<256;++t)a=a+(n=r[t])+e[t%i]&255,r[t]=r[a],r[a]=n;this.s=r}return e.prototype={encryptBlock:function(e){var t,n,r,a=e.length,i=this.a,o=this.b,s=this.s,c=new Uint8Array(a);for(t=0;t<a;++t)r=s[o=o+(n=s[i=i+1&255])&255],s[i]=r,s[o]=n,c[t]=e[t]^s[n+r&255];return this.a=i,this.b=o,c}},e.prototype.decryptBlock=e.prototype.encryptBlock,e.prototype.encrypt=e.prototype.encryptBlock,e}();t.ARCFourCipher=o;var s,c,l=(s=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),c=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]),function(e,t,n){var r,a,i,o=1732584193,l=-271733879,u=-1732584194,h=271733878,d=n+72&-64,f=new Uint8Array(d);for(r=0;r<n;++r)f[r]=e[t++];for(f[r++]=128,i=d-8;r<i;)f[r++]=0;f[r++]=n<<3&255,f[r++]=n>>5&255,f[r++]=n>>13&255,f[r++]=n>>21&255,f[r++]=n>>>29&255,f[r++]=0,f[r++]=0,f[r++]=0;var p=new Int32Array(16);for(r=0;r<d;){for(a=0;a<16;++a,r+=4)p[a]=f[r]|f[r+1]<<8|f[r+2]<<16|f[r+3]<<24;var g,m,v=o,b=l,y=u,w=h;for(a=0;a<64;++a){a<16?(g=b&y|~b&w,m=a):a<32?(g=w&b|~w&y,m=5*a+1&15):a<48?(g=b^y^w,m=3*a+5&15):(g=y^(b|~w),m=7*a&15);var x=w,C=v+g+c[a]+p[m]|0,k=s[a];w=y,y=b,b=b+(C<<k|C>>>32-k)|0,v=x}o=o+v|0,l=l+b|0,u=u+y|0,h=h+w|0}return new Uint8Array([255&o,o>>8&255,o>>16&255,o>>>24&255,255&l,l>>8&255,l>>16&255,l>>>24&255,255&u,u>>8&255,u>>16&255,u>>>24&255,255&h,h>>8&255,h>>16&255,h>>>24&255])});t.calculateMD5=l;var u=function(){function e(e,t){this.high=0|e,this.low=0|t}return e.prototype={and:function(e){this.high&=e.high,this.low&=e.low},xor:function(e){this.high^=e.high,this.low^=e.low},or:function(e){this.high|=e.high,this.low|=e.low},shiftRight:function(e){e>=32?(this.low=this.high>>>e-32|0,this.high=0):(this.low=this.low>>>e|this.high<<32-e,this.high=this.high>>>e|0)},shiftLeft:function(e){e>=32?(this.high=this.low<<e-32,this.low=0):(this.high=this.high<<e|this.low>>>32-e,this.low=this.low<<e)},rotateRight:function(e){var t,n;32&e?(n=this.low,t=this.high):(t=this.low,n=this.high),e&=31,this.low=t>>>e|n<<32-e,this.high=n>>>e|t<<32-e},not:function(){this.high=~this.high,this.low=~this.low},add:function(e){var t=(this.low>>>0)+(e.low>>>0),n=(this.high>>>0)+(e.high>>>0);t>4294967295&&(n+=1),this.low=0|t,this.high=0|n},copyTo:function(e,t){e[t]=this.high>>>24&255,e[t+1]=this.high>>16&255,e[t+2]=this.high>>8&255,e[t+3]=255&this.high,e[t+4]=this.low>>>24&255,e[t+5]=this.low>>16&255,e[t+6]=this.low>>8&255,e[t+7]=255&this.low},assign:function(e){this.high=e.high,this.low=e.low}},e}(),h=function(){function e(e,t){return e>>>t|e<<32-t}function t(e,t,n){return e&t^~e&n}function n(e,t,n){return e&t^e&n^t&n}function r(t){return e(t,2)^e(t,13)^e(t,22)}function a(t){return e(t,6)^e(t,11)^e(t,25)}function i(t){return e(t,7)^e(t,18)^t>>>3}var o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];return function(s,c,l){var u,h,d,f=1779033703,p=3144134277,g=1013904242,m=2773480762,v=1359893119,b=2600822924,y=528734635,w=1541459225,x=64*Math.ceil((l+9)/64),C=new Uint8Array(x);for(u=0;u<l;++u)C[u]=s[c++];for(C[u++]=128,d=x-8;u<d;)C[u++]=0;C[u++]=0,C[u++]=0,C[u++]=0,C[u++]=l>>>29&255,C[u++]=l>>21&255,C[u++]=l>>13&255,C[u++]=l>>5&255,C[u++]=l<<3&255;var k,S=new Uint32Array(64);for(u=0;u<x;){for(h=0;h<16;++h)S[h]=C[u]<<24|C[u+1]<<16|C[u+2]<<8|C[u+3],u+=4;for(h=16;h<64;++h)S[h]=0|(e(k=S[h-2],17)^e(k,19)^k>>>10)+S[h-7]+i(S[h-15])+S[h-16];var A,_,E=f,I=p,T=g,R=m,F=v,P=b,D=y,O=w;for(h=0;h<64;++h)A=O+a(F)+t(F,P,D)+o[h]+S[h],_=r(E)+n(E,I,T),O=D,D=P,P=F,F=R+A|0,R=T,T=I,I=E,E=A+_|0;f=f+E|0,p=p+I|0,g=g+T|0,m=m+R|0,v=v+F|0,b=b+P|0,y=y+D|0,w=w+O|0}return new Uint8Array([f>>24&255,f>>16&255,f>>8&255,255&f,p>>24&255,p>>16&255,p>>8&255,255&p,g>>24&255,g>>16&255,g>>8&255,255&g,m>>24&255,m>>16&255,m>>8&255,255&m,v>>24&255,v>>16&255,v>>8&255,255&v,b>>24&255,b>>16&255,b>>8&255,255&b,y>>24&255,y>>16&255,y>>8&255,255&y,w>>24&255,w>>16&255,w>>8&255,255&w])}}();t.calculateSHA256=h;var d=function(){function e(e,t,n,r,a){e.assign(t),e.and(n),a.assign(t),a.not(),a.and(r),e.xor(a)}function t(e,t,n,r,a){e.assign(t),e.and(n),a.assign(t),a.and(r),e.xor(a),a.assign(n),a.and(r),e.xor(a)}function n(e,t,n){e.assign(t),e.rotateRight(28),n.assign(t),n.rotateRight(34),e.xor(n),n.assign(t),n.rotateRight(39),e.xor(n)}function r(e,t,n){e.assign(t),e.rotateRight(14),n.assign(t),n.rotateRight(18),e.xor(n),n.assign(t),n.rotateRight(41),e.xor(n)}function a(e,t,n){e.assign(t),e.rotateRight(1),n.assign(t),n.rotateRight(8),e.xor(n),n.assign(t),n.shiftRight(7),e.xor(n)}function i(e,t,n){e.assign(t),e.rotateRight(19),n.assign(t),n.rotateRight(61),e.xor(n),n.assign(t),n.shiftRight(6),e.xor(n)}var o=[new u(1116352408,3609767458),new u(1899447441,602891725),new u(3049323471,3964484399),new u(3921009573,2173295548),new u(961987163,4081628472),new u(1508970993,3053834265),new u(2453635748,2937671579),new u(2870763221,3664609560),new u(3624381080,2734883394),new u(310598401,1164996542),new u(607225278,1323610764),new u(1426881987,3590304994),new u(1925078388,4068182383),new u(2162078206,991336113),new u(2614888103,633803317),new u(3248222580,3479774868),new u(3835390401,2666613458),new u(4022224774,944711139),new u(264347078,2341262773),new u(604807628,2007800933),new u(770255983,1495990901),new u(1249150122,1856431235),new u(1555081692,3175218132),new u(1996064986,2198950837),new u(2554220882,3999719339),new u(2821834349,766784016),new u(2952996808,2566594879),new u(3210313671,3203337956),new u(3336571891,1034457026),new u(3584528711,2466948901),new u(113926993,3758326383),new u(338241895,168717936),new u(666307205,1188179964),new u(773529912,1546045734),new u(1294757372,1522805485),new u(1396182291,2643833823),new u(1695183700,2343527390),new u(1986661051,1014477480),new u(2177026350,1206759142),new u(2456956037,344077627),new u(2730485921,1290863460),new u(2820302411,3158454273),new u(3259730800,3505952657),new u(3345764771,106217008),new u(3516065817,3606008344),new u(3600352804,1432725776),new u(4094571909,1467031594),new u(275423344,851169720),new u(430227734,3100823752),new u(506948616,1363258195),new u(659060556,3750685593),new u(883997877,3785050280),new u(958139571,3318307427),new u(1322822218,3812723403),new u(1537002063,2003034995),new u(1747873779,3602036899),new u(1955562222,1575990012),new u(2024104815,1125592928),new u(2227730452,2716904306),new u(2361852424,442776044),new u(2428436474,593698344),new u(2756734187,3733110249),new u(3204031479,2999351573),new u(3329325298,3815920427),new u(3391569614,3928383900),new u(3515267271,566280711),new u(3940187606,3454069534),new u(4118630271,4000239992),new u(116418474,1914138554),new u(174292421,2731055270),new u(289380356,3203993006),new u(460393269,320620315),new u(685471733,587496836),new u(852142971,1086792851),new u(1017036298,365543100),new u(1126000580,2618297676),new u(1288033470,3409855158),new u(1501505948,4234509866),new u(1607167915,987167468),new u(1816402316,1246189591)];return function(s,c,l,h){var d,f,p,g,m,v,b,y;(h=!!h)?(d=new u(3418070365,3238371032),f=new u(1654270250,914150663),p=new u(2438529370,812702999),g=new u(355462360,4144912697),m=new u(1731405415,4290775857),v=new u(2394180231,1750603025),b=new u(3675008525,1694076839),y=new u(1203062813,3204075428)):(d=new u(1779033703,4089235720),f=new u(3144134277,2227873595),p=new u(1013904242,4271175723),g=new u(2773480762,1595750129),m=new u(1359893119,2917565137),v=new u(2600822924,725511199),b=new u(528734635,4215389547),y=new u(1541459225,327033209));var w,x,C,k=128*Math.ceil((l+17)/128),S=new Uint8Array(k);for(w=0;w<l;++w)S[w]=s[c++];for(S[w++]=128,C=k-16;w<C;)S[w++]=0;S[w++]=0,S[w++]=0,S[w++]=0,S[w++]=0,S[w++]=0,S[w++]=0,S[w++]=0,S[w++]=0,S[w++]=0,S[w++]=0,S[w++]=0,S[w++]=l>>>29&255,S[w++]=l>>21&255,S[w++]=l>>13&255,S[w++]=l>>5&255,S[w++]=l<<3&255;var A=new Array(80);for(w=0;w<80;w++)A[w]=new u(0,0);var _,E,I=new u(0,0),T=new u(0,0),R=new u(0,0),F=new u(0,0),P=new u(0,0),D=new u(0,0),O=new u(0,0),N=new u(0,0),M=new u(0,0),L=new u(0,0),B=new u(0,0),U=new u(0,0);for(w=0;w<k;){for(x=0;x<16;++x)A[x].high=S[w]<<24|S[w+1]<<16|S[w+2]<<8|S[w+3],A[x].low=S[w+4]<<24|S[w+5]<<16|S[w+6]<<8|S[w+7],w+=8;for(x=16;x<80;++x)i(_=A[x],A[x-2],U),_.add(A[x-7]),a(B,A[x-15],U),_.add(B),_.add(A[x-16]);for(I.assign(d),T.assign(f),R.assign(p),F.assign(g),P.assign(m),D.assign(v),O.assign(b),N.assign(y),x=0;x<80;++x)M.assign(N),r(B,P,U),M.add(B),e(B,P,D,O,U),M.add(B),M.add(o[x]),M.add(A[x]),n(L,I,U),t(B,I,T,R,U),L.add(B),_=N,N=O,O=D,D=P,F.add(M),P=F,F=R,R=T,T=I,_.assign(M),_.add(L),I=_;d.add(I),f.add(T),p.add(R),g.add(F),m.add(P),v.add(D),b.add(O),y.add(N)}return h?(E=new Uint8Array(48),d.copyTo(E,0),f.copyTo(E,8),p.copyTo(E,16),g.copyTo(E,24),m.copyTo(E,32),v.copyTo(E,40)):(E=new Uint8Array(64),d.copyTo(E,0),f.copyTo(E,8),p.copyTo(E,16),g.copyTo(E,24),m.copyTo(E,32),v.copyTo(E,40),b.copyTo(E,48),y.copyTo(E,56)),E}}();t.calculateSHA512=d;var f=function(e,t,n){return d(e,t,n,!0)};t.calculateSHA384=f;var p=function(){function e(){}return e.prototype={decryptBlock:function(e){return e},encrypt:function(e){return e}},e}();class g{constructor(){this.constructor===g&&(0,r.unreachable)("Cannot initialize AESBaseCipher."),this._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),this._inv_s=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),this._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),this._mixCol=new Uint8Array(256);for(let e=0;e<256;e++)this._mixCol[e]=e<128?e<<1:e<<1^27;this.buffer=new Uint8Array(16),this.bufferPosition=0}_expandKey(e){(0,r.unreachable)("Cannot call `_expandKey` on the base class")}_decrypt(e,t){let n,r,a;const i=new Uint8Array(16);i.set(e);for(let e=0,n=this._keySize;e<16;++e,++n)i[e]^=t[n];for(let e=this._cyclesOfRepetition-1;e>=1;--e){n=i[13],i[13]=i[9],i[9]=i[5],i[5]=i[1],i[1]=n,n=i[14],r=i[10],i[14]=i[6],i[10]=i[2],i[6]=n,i[2]=r,n=i[15],r=i[11],a=i[7],i[15]=i[3],i[11]=n,i[7]=r,i[3]=a;for(let e=0;e<16;++e)i[e]=this._inv_s[i[e]];for(let n=0,r=16*e;n<16;++n,++r)i[n]^=t[r];for(let e=0;e<16;e+=4){const t=this._mix[i[e]],r=this._mix[i[e+1]],a=this._mix[i[e+2]],o=this._mix[i[e+3]];n=t^r>>>8^r<<24^a>>>16^a<<16^o>>>24^o<<8,i[e]=n>>>24&255,i[e+1]=n>>16&255,i[e+2]=n>>8&255,i[e+3]=255&n}}n=i[13],i[13]=i[9],i[9]=i[5],i[5]=i[1],i[1]=n,n=i[14],r=i[10],i[14]=i[6],i[10]=i[2],i[6]=n,i[2]=r,n=i[15],r=i[11],a=i[7],i[15]=i[3],i[11]=n,i[7]=r,i[3]=a;for(let e=0;e<16;++e)i[e]=this._inv_s[i[e]],i[e]^=t[e];return i}_encrypt(e,t){const n=this._s;let r,a,i;const o=new Uint8Array(16);o.set(e);for(let e=0;e<16;++e)o[e]^=t[e];for(let e=1;e<this._cyclesOfRepetition;e++){for(let e=0;e<16;++e)o[e]=n[o[e]];i=o[1],o[1]=o[5],o[5]=o[9],o[9]=o[13],o[13]=i,i=o[2],a=o[6],o[2]=o[10],o[6]=o[14],o[10]=i,o[14]=a,i=o[3],a=o[7],r=o[11],o[3]=o[15],o[7]=i,o[11]=a,o[15]=r;for(let e=0;e<16;e+=4){const t=o[e+0],n=o[e+1],a=o[e+2],i=o[e+3];r=t^n^a^i,o[e+0]^=r^this._mixCol[t^n],o[e+1]^=r^this._mixCol[n^a],o[e+2]^=r^this._mixCol[a^i],o[e+3]^=r^this._mixCol[i^t]}for(let n=0,r=16*e;n<16;++n,++r)o[n]^=t[r]}for(let e=0;e<16;++e)o[e]=n[o[e]];i=o[1],o[1]=o[5],o[5]=o[9],o[9]=o[13],o[13]=i,i=o[2],a=o[6],o[2]=o[10],o[6]=o[14],o[10]=i,o[14]=a,i=o[3],a=o[7],r=o[11],o[3]=o[15],o[7]=i,o[11]=a,o[15]=r;for(let e=0,n=this._keySize;e<16;++e,++n)o[e]^=t[n];return o}_decryptBlock2(e,t){const n=e.length;let r=this.buffer,a=this.bufferPosition;const i=[];let o=this.iv;for(let t=0;t<n;++t){if(r[a]=e[t],++a,a<16)continue;const n=this._decrypt(r,this._key);for(let e=0;e<16;++e)n[e]^=o[e];o=r,i.push(n),r=new Uint8Array(16),a=0}if(this.buffer=r,this.bufferLength=a,this.iv=o,0===i.length)return new Uint8Array(0);let s=16*i.length;if(t){const e=i[i.length-1];let t=e[15];if(t<=16){for(let n=15,r=16-t;n>=r;--n)if(e[n]!==t){t=0;break}s-=t,i[i.length-1]=e.subarray(0,16-t)}}const c=new Uint8Array(s);for(let e=0,t=0,n=i.length;e<n;++e,t+=16)c.set(i[e],t);return c}decryptBlock(e,t,n=null){const r=e.length,a=this.buffer;let i=this.bufferPosition;if(n)this.iv=n;else{for(let t=0;i<16&&t<r;++t,++i)a[i]=e[t];if(i<16)return this.bufferLength=i,new Uint8Array(0);this.iv=a,e=e.subarray(16)}return this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=this._decryptBlock2,this.decryptBlock(e,t)}encrypt(e,t){const n=e.length;let r=this.buffer,a=this.bufferPosition;const i=[];t||(t=new Uint8Array(16));for(let o=0;o<n;++o){if(r[a]=e[o],++a,a<16)continue;for(let e=0;e<16;++e)r[e]^=t[e];const n=this._encrypt(r,this._key);t=n,i.push(n),r=new Uint8Array(16),a=0}if(this.buffer=r,this.bufferLength=a,this.iv=t,0===i.length)return new Uint8Array(0);const o=16*i.length,s=new Uint8Array(o);for(let e=0,t=0,n=i.length;e<n;++e,t+=16)s.set(i[e],t);return s}}class m extends g{constructor(e){super(),this._cyclesOfRepetition=10,this._keySize=160,this._rcon=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),this._key=this._expandKey(e)}_expandKey(e){const t=this._s,n=this._rcon,r=new Uint8Array(176);r.set(e);for(let e=16,a=1;e<176;++a){let i=r[e-3],o=r[e-2],s=r[e-1],c=r[e-4];i=t[i],o=t[o],s=t[s],c=t[c],i^=n[a];for(let t=0;t<4;++t)r[e]=i^=r[e-16],e++,r[e]=o^=r[e-16],e++,r[e]=s^=r[e-16],e++,r[e]=c^=r[e-16],e++}return r}}t.AES128Cipher=m;class v extends g{constructor(e){super(),this._cyclesOfRepetition=14,this._keySize=224,this._key=this._expandKey(e)}_expandKey(e){const t=this._s,n=new Uint8Array(240);n.set(e);let r,a,i,o,s=1;for(let e=32,c=1;e<240;++c){e%32==16?(r=t[r],a=t[a],i=t[i],o=t[o]):e%32==0&&(r=n[e-3],a=n[e-2],i=n[e-1],o=n[e-4],r=t[r],a=t[a],i=t[i],o=t[o],r^=s,(s<<=1)>=256&&(s=255&(27^s)));for(let t=0;t<4;++t)n[e]=r^=n[e-32],e++,n[e]=a^=n[e-32],e++,n[e]=i^=n[e-32],e++,n[e]=o^=n[e-32],e++}return n}}t.AES256Cipher=v;var b=function(){function e(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function t(){}return t.prototype={checkOwnerPassword:function(t,n,r,a){var i=new Uint8Array(t.length+56);return i.set(t,0),i.set(n,t.length),i.set(r,t.length+n.length),e(h(i,0,i.length),a)},checkUserPassword:function(t,n,r){var a=new Uint8Array(t.length+8);return a.set(t,0),a.set(n,t.length),e(h(a,0,a.length),r)},getOwnerKey:function(e,t,n,r){var a=new Uint8Array(e.length+56);a.set(e,0),a.set(t,e.length),a.set(n,e.length+t.length);var i=h(a,0,a.length);return new v(i).decryptBlock(r,!1,new Uint8Array(16))},getUserKey:function(e,t,n){var r=new Uint8Array(e.length+8);r.set(e,0),r.set(t,e.length);var a=h(r,0,r.length);return new v(a).decryptBlock(n,!1,new Uint8Array(16))}},t}();t.PDF17=b;var y=function(){function e(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}function t(t,n,r){for(var a=h(n,0,n.length).subarray(0,32),i=[0],o=0;o<64||i[i.length-1]>o-32;){var s=t.length+a.length+r.length,c=new Uint8Array(64*s),l=e(t,a);l=e(l,r);for(var u=0,p=0;u<64;u++,p+=s)c.set(l,p);i=new m(a.subarray(0,16)).encrypt(c,a.subarray(16,32));for(var g=0,v=0;v<16;v++)g*=1,g%=3,g+=(i[v]>>>0)%3,g%=3;0===g?a=h(i,0,i.length):1===g?a=f(i,0,i.length):2===g&&(a=d(i,0,i.length)),o++}return a.subarray(0,32)}function n(){}function r(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return n.prototype={hash:function(e,n,r){return t(e,n,r)},checkOwnerPassword:function(e,n,a,i){var o=new Uint8Array(e.length+56);return o.set(e,0),o.set(n,e.length),o.set(a,e.length+n.length),r(t(e,o,a),i)},checkUserPassword:function(e,n,a){var i=new Uint8Array(e.length+8);return i.set(e,0),i.set(n,e.length),r(t(e,i,[]),a)},getOwnerKey:function(e,n,r,a){var i=new Uint8Array(e.length+56);i.set(e,0),i.set(n,e.length),i.set(r,e.length+n.length);var o=t(e,i,r);return new v(o).decryptBlock(a,!1,new Uint8Array(16))},getUserKey:function(e,n,r){var a=new Uint8Array(e.length+8);a.set(e,0),a.set(n,e.length);var i=t(e,a,[]);return new v(i).decryptBlock(r,!1,new Uint8Array(16))}},n}();t.PDF20=y;var w=function(){function e(e,t){this.StringCipherConstructor=e,this.StreamCipherConstructor=t}return e.prototype={createStream:function(e,t){var n=new this.StreamCipherConstructor;return new i.DecryptStream(e,t,(function(e,t){return n.decryptBlock(e,t)}))},decryptString:function(e){var t=new this.StringCipherConstructor,n=(0,r.stringToBytes)(e);return n=t.decryptBlock(n,!0),(0,r.bytesToString)(n)},encryptString:function(e){const t=new this.StringCipherConstructor;if(t instanceof g){const n=e.length,a=16-n%16;16!==a&&(e=e.padEnd(16*Math.ceil(n/16),String.fromCharCode(a)));const i=new Uint8Array(16);if("undefined"!=typeof crypto)crypto.getRandomValues(i);else for(let e=0;e<16;e++)i[e]=Math.floor(256*Math.random());let o=(0,r.stringToBytes)(e);o=t.encrypt(o,i);const s=new Uint8Array(16+o.length);return s.set(i),s.set(o,16),(0,r.bytesToString)(s)}let n=(0,r.stringToBytes)(e);return n=t.encrypt(n),(0,r.bytesToString)(n)}},e}(),x=function(){var e=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);function t(t,n,r,a,i,s,c,u){var h,d,f=40+r.length+t.length,p=new Uint8Array(f),g=0;if(n)for(d=Math.min(32,n.length);g<d;++g)p[g]=n[g];for(h=0;g<32;)p[g++]=e[h++];for(h=0,d=r.length;h<d;++h)p[g++]=r[h];for(p[g++]=255&i,p[g++]=i>>8&255,p[g++]=i>>16&255,p[g++]=i>>>24&255,h=0,d=t.length;h<d;++h)p[g++]=t[h];s>=4&&!u&&(p[g++]=255,p[g++]=255,p[g++]=255,p[g++]=255);var m=l(p,0,g),v=c>>3;if(s>=3)for(h=0;h<50;++h)m=l(m,0,v);var b,y=m.subarray(0,v);if(s>=3){for(g=0;g<32;++g)p[g]=e[g];for(h=0,d=t.length;h<d;++h)p[g++]=t[h];b=new o(y).encryptBlock(l(p,0,g)),d=y.length;var w,x=new Uint8Array(d);for(h=1;h<=19;++h){for(w=0;w<d;++w)x[w]=y[w]^h;b=new o(x).encryptBlock(b)}for(h=0,d=b.length;h<d;++h)if(a[h]!==b[h])return null}else for(h=0,d=(b=new o(y).encryptBlock(e)).length;h<d;++h)if(a[h]!==b[h])return null;return y}var n=a.Name.get("Identity");function i(i,s,c){var u=i.get("Filter");if(!(0,a.isName)(u,"Standard"))throw new r.FormatError("unknown encryption method");this.dict=i;var h=i.get("V");if(!Number.isInteger(h)||1!==h&&2!==h&&4!==h&&5!==h)throw new r.FormatError("unsupported encryption algorithm");this.algorithm=h;var d=i.get("Length");if(!d)if(h<=3)d=40;else{var f=i.get("CF"),p=i.get("StmF");if((0,a.isDict)(f)&&(0,a.isName)(p)){f.suppressEncryption=!0;var g=f.get(p.name);(d=g&&g.get("Length")||128)<40&&(d<<=3)}}if(!Number.isInteger(d)||d<40||d%8!=0)throw new r.FormatError("invalid key length");var m=(0,r.stringToBytes)(i.get("O")).subarray(0,32),v=(0,r.stringToBytes)(i.get("U")).subarray(0,32),w=i.get("P"),x=i.get("R"),C=(4===h||5===h)&&!1!==i.get("EncryptMetadata");this.encryptMetadata=C;var k,S,A=(0,r.stringToBytes)(s);if(c){if(6===x)try{c=(0,r.utf8StringToString)(c)}catch(e){(0,r.warn)("CipherTransformFactory: Unable to convert UTF8 encoded password.")}k=(0,r.stringToBytes)(c)}if(5!==h)S=t(A,k,m,v,w,x,d,C);else{var _=(0,r.stringToBytes)(i.get("O")).subarray(32,40),E=(0,r.stringToBytes)(i.get("O")).subarray(40,48),I=(0,r.stringToBytes)(i.get("U")).subarray(0,48),T=(0,r.stringToBytes)(i.get("U")).subarray(32,40),R=(0,r.stringToBytes)(i.get("U")).subarray(40,48),F=(0,r.stringToBytes)(i.get("OE")),P=(0,r.stringToBytes)(i.get("UE"));(0,r.stringToBytes)(i.get("Perms")),S=function(e,t,n,r,a,i,o,s,c,l,u,h){if(t){var d=Math.min(127,t.length);t=t.subarray(0,d)}else t=[];var f;return(f=6===e?new y:new b).checkUserPassword(t,s,o)?f.getUserKey(t,c,u):t.length&&f.checkOwnerPassword(t,r,i,n)?f.getOwnerKey(t,a,i,l):null}(x,k,m,_,E,I,v,T,R,F,P)}if(!S&&!c)throw new r.PasswordException("No password given",r.PasswordResponses.NEED_PASSWORD);if(!S&&c&&(S=t(A,function(t,n,r,a){var i,s,c=new Uint8Array(32),u=0;for(s=Math.min(32,t.length);u<s;++u)c[u]=t[u];for(i=0;u<32;)c[u++]=e[i++];var h,d=l(c,0,u),f=a>>3;if(r>=3)for(i=0;i<50;++i)d=l(d,0,d.length);if(r>=3){h=n;var p,g=new Uint8Array(f);for(i=19;i>=0;i--){for(p=0;p<f;++p)g[p]=d[p]^i;h=new o(g).encryptBlock(h)}}else h=new o(d.subarray(0,f)).encryptBlock(n);return h}(k,m,x,d),m,v,w,x,d,C)),!S)throw new r.PasswordException("Incorrect Password",r.PasswordResponses.INCORRECT_PASSWORD);if(this.encryptionKey=S,h>=4){var D=i.get("CF");(0,a.isDict)(D)&&(D.suppressEncryption=!0),this.cf=D,this.stmf=i.get("StmF")||n,this.strf=i.get("StrF")||n,this.eff=i.get("EFF")||this.stmf}}function s(e,t,n,r){var a,i,o=new Uint8Array(n.length+9);for(a=0,i=n.length;a<i;++a)o[a]=n[a];return o[a++]=255&e,o[a++]=e>>8&255,o[a++]=e>>16&255,o[a++]=255&t,o[a++]=t>>8&255,r&&(o[a++]=115,o[a++]=65,o[a++]=108,o[a++]=84),l(o,0,a).subarray(0,Math.min(n.length+5,16))}function c(e,t,n,i,c){if(!(0,a.isName)(t))throw new r.FormatError("Invalid crypt filter name.");var l,u=e.get(t.name);if(null!=u&&(l=u.get("CFM")),!l||"None"===l.name)return function(){return new p};if("V2"===l.name)return function(){return new o(s(n,i,c,!1))};if("AESV2"===l.name)return function(){return new m(s(n,i,c,!0))};if("AESV3"===l.name)return function(){return new v(c)};throw new r.FormatError("Unknown crypto method")}return i.prototype={createCipherTransform:function(e,t){if(4===this.algorithm||5===this.algorithm)return new w(c(this.cf,this.stmf,e,t,this.encryptionKey),c(this.cf,this.strf,e,t,this.encryptionKey));var n=s(e,t,this.encryptionKey,!1),r=function(){return new o(n)};return new w(r,r)}},i}();t.CipherTransformFactory=x},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorSpace=void 0;var r=n(2),a=n(5),i=n(8);class o{constructor(e,t){this.constructor===o&&(0,r.unreachable)("Cannot initialize ColorSpace."),this.name=e,this.numComps=t}getRgb(e,t){const n=new Uint8ClampedArray(3);return this.getRgbItem(e,t,n,0),n}getRgbItem(e,t,n,a){(0,r.unreachable)("Should not call ColorSpace.getRgbItem")}getRgbBuffer(e,t,n,a,i,o,s){(0,r.unreachable)("Should not call ColorSpace.getRgbBuffer")}getOutputLength(e,t){(0,r.unreachable)("Should not call ColorSpace.getOutputLength")}isPassthrough(e){return!1}isDefaultDecode(e,t){return o.isDefaultDecode(e,this.numComps)}fillRgb(e,t,n,r,a,i,o,s,c){const l=t*n;let u=null;const h=1<<o,d=n!==a||t!==r;if(this.isPassthrough(o))u=s;else if(1===this.numComps&&l>h&&"DeviceGray"!==this.name&&"DeviceRGB"!==this.name){const t=o<=8?new Uint8Array(h):new Uint16Array(h);for(let e=0;e<h;e++)t[e]=e;const n=new Uint8ClampedArray(3*h);if(this.getRgbBuffer(t,0,h,n,0,o,0),d){u=new Uint8Array(3*l);let e=0;for(let t=0;t<l;++t){const r=3*s[t];u[e++]=n[r],u[e++]=n[r+1],u[e++]=n[r+2]}}else{let t=0;for(let r=0;r<l;++r){const a=3*s[r];e[t++]=n[a],e[t++]=n[a+1],e[t++]=n[a+2],t+=c}}}else d?(u=new Uint8ClampedArray(3*l),this.getRgbBuffer(s,0,l,u,0,o,0)):this.getRgbBuffer(s,0,r*i,e,0,o,c);if(u)if(d)!function(e,t,n,r,a,i,o){o=1!==o?0:o;const s=n/a,c=r/i;let l,u=0;const h=new Uint16Array(a),d=3*n;for(let e=0;e<a;e++)h[e]=3*Math.floor(e*s);for(let n=0;n<i;n++){const r=Math.floor(n*c)*d;for(let n=0;n<a;n++)l=r+h[n],t[u++]=e[l++],t[u++]=e[l++],t[u++]=e[l++],u+=o}}(u,e,t,n,r,a,c);else{let t=0,n=0;for(let a=0,o=r*i;a<o;a++)e[t++]=u[n++],e[t++]=u[n++],e[t++]=u[n++],t+=c}}get usesZeroToOneRange(){return(0,r.shadow)(this,"usesZeroToOneRange",!0)}static _cache(e,t,n,r){if(!n)throw new Error('ColorSpace._cache - expected "localColorSpaceCache" argument.');if(!r)throw new Error('ColorSpace._cache - expected "parsedColorSpace" argument.');let i,o;e instanceof a.Ref&&(o=e,e=t.fetch(e)),e instanceof a.Name&&(i=e.name),(i||o)&&n.set(i,o,r)}static getCached(e,t,n){if(!n)throw new Error('ColorSpace.getCached - expected "localColorSpaceCache" argument.');if(e instanceof a.Ref){const r=n.getByRef(e);if(r)return r;try{e=t.fetch(e)}catch(e){if(e instanceof i.MissingDataException)throw e}}if(e instanceof a.Name){const t=n.getByName(e.name);if(t)return t}return null}static async parseAsync({cs:e,xref:t,resources:n=null,pdfFunctionFactory:r,localColorSpaceCache:a}){const i=this._parse(e,t,n,r);return this._cache(e,t,a,i),i}static parse({cs:e,xref:t,resources:n=null,pdfFunctionFactory:r,localColorSpaceCache:a}){const i=this.getCached(e,t,a);if(i)return i;const o=this._parse(e,t,n,r);return this._cache(e,t,a,o),o}static _parse(e,t,n=null,i){if(e=t.fetchIfRef(e),(0,a.isName)(e))switch(e.name){case"DeviceGray":case"G":return this.singletons.gray;case"DeviceRGB":case"RGB":return this.singletons.rgb;case"DeviceCMYK":case"CMYK":return this.singletons.cmyk;case"Pattern":return new c(null);default:if((0,a.isDict)(n)){const r=n.get("ColorSpace");if((0,a.isDict)(r)){const o=r.get(e.name);if(o){if((0,a.isName)(o))return this._parse(o,t,n,i);e=o;break}}}throw new r.FormatError(`Unrecognized ColorSpace: ${e.name}`)}if(Array.isArray(e)){const a=t.fetchIfRef(e[0]).name;let o,u,h,d,m,v;switch(a){case"DeviceGray":case"G":return this.singletons.gray;case"DeviceRGB":case"RGB":return this.singletons.rgb;case"DeviceCMYK":case"CMYK":return this.singletons.cmyk;case"CalGray":return o=t.fetchIfRef(e[1]),d=o.getArray("WhitePoint"),m=o.getArray("BlackPoint"),v=o.get("Gamma"),new f(d,m,v);case"CalRGB":o=t.fetchIfRef(e[1]),d=o.getArray("WhitePoint"),m=o.getArray("BlackPoint"),v=o.getArray("Gamma");const b=o.getArray("Matrix");return new p(d,m,v,b);case"ICCBased":const y=t.fetchIfRef(e[1]).dict;u=y.get("N");const w=y.get("Alternate");if(w){const e=this._parse(w,t,n,i);if(e.numComps===u)return e;(0,r.warn)("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(1===u)return this.singletons.gray;if(3===u)return this.singletons.rgb;if(4===u)return this.singletons.cmyk;break;case"Pattern":return h=e[1]||null,h&&(h=this._parse(h,t,n,i)),new c(h);case"Indexed":case"I":h=this._parse(e[1],t,n,i);const x=t.fetchIfRef(e[2])+1,C=t.fetchIfRef(e[3]);return new l(h,x,C);case"Separation":case"DeviceN":const k=t.fetchIfRef(e[1]);u=Array.isArray(k)?k.length:1,h=this._parse(e[2],t,n,i);const S=i.create(e[3]);return new s(u,h,S);case"Lab":o=t.fetchIfRef(e[1]),d=o.getArray("WhitePoint"),m=o.getArray("BlackPoint");const A=o.getArray("Range");return new g(d,m,A);default:throw new r.FormatError(`Unimplemented ColorSpace object: ${a}`)}}throw new r.FormatError(`Unrecognized ColorSpace object: ${e}`)}static isDefaultDecode(e,t){if(!Array.isArray(e))return!0;if(2*t!==e.length)return(0,r.warn)("The decode map is not the correct length"),!0;for(let t=0,n=e.length;t<n;t+=2)if(0!==e[t]||1!==e[t+1])return!1;return!0}static get singletons(){return(0,r.shadow)(this,"singletons",{get gray(){return(0,r.shadow)(this,"gray",new u)},get rgb(){return(0,r.shadow)(this,"rgb",new h)},get cmyk(){return(0,r.shadow)(this,"cmyk",new d)}})}}t.ColorSpace=o;class s extends o{constructor(e,t,n){super("Alternate",e),this.base=t,this.tintFn=n,this.tmpBuf=new Float32Array(t.numComps)}getRgbItem(e,t,n,r){const a=this.tmpBuf;this.tintFn(e,t,a,0),this.base.getRgbItem(a,0,n,r)}getRgbBuffer(e,t,n,r,a,i,o){const s=this.tintFn,c=this.base,l=1/((1<<i)-1),u=c.numComps,h=c.usesZeroToOneRange,d=(c.isPassthrough(8)||!h)&&0===o;let f=d?a:0;const p=d?r:new Uint8ClampedArray(u*n),g=this.numComps,m=new Float32Array(g),v=new Float32Array(u);let b,y;for(b=0;b<n;b++){for(y=0;y<g;y++)m[y]=e[t++]*l;if(s(m,0,v,0),h)for(y=0;y<u;y++)p[f++]=255*v[y];else c.getRgbItem(v,0,p,f),f+=u}d||c.getRgbBuffer(p,0,n,r,a,8,o)}getOutputLength(e,t){return this.base.getOutputLength(e*this.base.numComps/this.numComps,t)}}class c extends o{constructor(e){super("Pattern",null),this.base=e}isDefaultDecode(e,t){(0,r.unreachable)("Should not call PatternCS.isDefaultDecode")}}class l extends o{constructor(e,t,n){super("Indexed",1),this.base=e,this.highVal=t;const i=e.numComps*t;if(this.lookup=new Uint8Array(i),(0,a.isStream)(n)){const e=n.getBytes(i);this.lookup.set(e)}else{if("string"!=typeof n)throw new r.FormatError(`IndexedCS - unrecognized lookup table: ${n}`);for(let e=0;e<i;++e)this.lookup[e]=255&n.charCodeAt(e)}}getRgbItem(e,t,n,r){const a=this.base.numComps,i=e[t]*a;this.base.getRgbBuffer(this.lookup,i,1,n,r,8,0)}getRgbBuffer(e,t,n,r,a,i,o){const s=this.base,c=s.numComps,l=s.getOutputLength(c,o),u=this.lookup;for(let i=0;i<n;++i){const n=e[t++]*c;s.getRgbBuffer(u,n,1,r,a,8,o),a+=l}}getOutputLength(e,t){return this.base.getOutputLength(e*this.base.numComps,t)}isDefaultDecode(e,t){return!Array.isArray(e)||(2!==e.length?((0,r.warn)("Decode map length is not correct"),!0):!Number.isInteger(t)||t<1?((0,r.warn)("Bits per component is not correct"),!0):0===e[0]&&e[1]===(1<<t)-1)}}class u extends o{constructor(){super("DeviceGray",1)}getRgbItem(e,t,n,r){const a=255*e[t];n[r]=n[r+1]=n[r+2]=a}getRgbBuffer(e,t,n,r,a,i,o){const s=255/((1<<i)-1);let c=t,l=a;for(let t=0;t<n;++t){const t=s*e[c++];r[l++]=t,r[l++]=t,r[l++]=t,l+=o}}getOutputLength(e,t){return e*(3+t)}}class h extends o{constructor(){super("DeviceRGB",3)}getRgbItem(e,t,n,r){n[r]=255*e[t],n[r+1]=255*e[t+1],n[r+2]=255*e[t+2]}getRgbBuffer(e,t,n,r,a,i,o){if(8===i&&0===o)return void r.set(e.subarray(t,t+3*n),a);const s=255/((1<<i)-1);let c=t,l=a;for(let t=0;t<n;++t)r[l++]=s*e[c++],r[l++]=s*e[c++],r[l++]=s*e[c++],l+=o}getOutputLength(e,t){return e*(3+t)/3|0}isPassthrough(e){return 8===e}}const d=function(){function e(e,t,n,r,a){const i=e[t]*n,o=e[t+1]*n,s=e[t+2]*n,c=e[t+3]*n;r[a]=255+i*(-4.387332384609988*i+54.48615194189176*o+18.82290502165302*s+212.25662451639585*c-285.2331026137004)+o*(1.7149763477362134*o-5.6096736904047315*s+-17.873870861415444*c-5.497006427196366)+s*(-2.5217340131683033*s-21.248923337353073*c+17.5119270841813)+c*(-21.86122147463605*c-189.48180835922747),r[a+1]=255+i*(8.841041422036149*i+60.118027045597366*o+6.871425592049007*s+31.159100130055922*c-79.2970844816548)+o*(-15.310361306967817*o+17.575251261109482*s+131.35250912493976*c-190.9453302588951)+s*(4.444339102852739*s+9.8632861493405*c-24.86741582555878)+c*(-20.737325471181034*c-187.80453709719578),r[a+2]=255+i*(.8842522430003296*i+8.078677503112928*o+30.89978309703729*s-.23883238689178934*c-14.183576799673286)+o*(10.49593273432072*o+63.02378494754052*s+50.606957656360734*c-112.23884253719248)+s*(.03296041114873217*s+115.60384449646641*c-193.58209356861505)+c*(-22.33816807309886*c-180.12613974708367)}return class extends o{constructor(){super("DeviceCMYK",4)}getRgbItem(t,n,r,a){e(t,n,1,r,a)}getRgbBuffer(t,n,r,a,i,o,s){const c=1/((1<<o)-1);for(let o=0;o<r;o++)e(t,n,c,a,i),n+=4,i+=3+s}getOutputLength(e,t){return e/4*(3+t)|0}}}(),f=function(){function e(e,t,n,r,a,i){const o=(t[n]*i)**e.G,s=e.YW*o,c=Math.max(295.8*s**.3333333333333333-40.8,0);r[a]=c,r[a+1]=c,r[a+2]=c}return class extends o{constructor(e,t,n){if(super("CalGray",1),!e)throw new r.FormatError("WhitePoint missing - required for color space CalGray");if(t=t||[0,0,0],n=n||1,this.XW=e[0],this.YW=e[1],this.ZW=e[2],this.XB=t[0],this.YB=t[1],this.ZB=t[2],this.G=n,this.XW<0||this.ZW<0||1!==this.YW)throw new r.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(this.XB<0||this.YB<0||this.ZB<0)&&((0,r.info)(`Invalid BlackPoint for ${this.name}, falling back to default.`),this.XB=this.YB=this.ZB=0),0===this.XB&&0===this.YB&&0===this.ZB||(0,r.warn)(`${this.name}, BlackPoint: XB: ${this.XB}, YB: ${this.YB}, ZB: ${this.ZB}, only default values are supported.`),this.G<1&&((0,r.info)(`Invalid Gamma: ${this.G} for ${this.name}, falling back to default.`),this.G=1)}getRgbItem(t,n,r,a){e(this,t,n,r,a,1)}getRgbBuffer(t,n,r,a,i,o,s){const c=1/((1<<o)-1);for(let o=0;o<r;++o)e(this,t,n,a,i,c),n+=1,i+=3+s}getOutputLength(e,t){return e*(3+t)}}}(),p=function(){const e=new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),t=new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),n=new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252]),a=new Float32Array([1,1,1]),i=new Float32Array(3),s=new Float32Array(3),c=new Float32Array(3);function l(e,t,n){n[0]=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],n[1]=e[3]*t[0]+e[4]*t[1]+e[5]*t[2],n[2]=e[6]*t[0]+e[7]*t[1]+e[8]*t[2]}function u(e){return e<=.0031308?h(0,1,12.92*e):e>=.99554525?1:h(0,1,1.055*e**(1/2.4)-.055)}function h(e,t,n){return Math.max(e,Math.min(t,n))}function d(e){return e<0?-d(-e):e>8?((e+16)/116)**3:.0011070564598794539*e}function f(r,o,f,p,g,m){const v=h(0,1,o[f]*m),b=h(0,1,o[f+1]*m),y=h(0,1,o[f+2]*m),w=1===v?1:v**r.GR,x=1===b?1:b**r.GG,C=1===y?1:y**r.GB,k=r.MXA*w+r.MXB*x+r.MXC*C,S=r.MYA*w+r.MYB*x+r.MYC*C,A=r.MZA*w+r.MZB*x+r.MZC*C,_=s;_[0]=k,_[1]=S,_[2]=A;const E=c;!function(n,r,a){if(1===n[0]&&1===n[2])return a[0]=r[0],a[1]=r[1],void(a[2]=r[2]);const o=a;l(e,r,o);const s=i;!function(e,t,n){n[0]=1*t[0]/e[0],n[1]=1*t[1]/e[1],n[2]=1*t[2]/e[2]}(n,o,s),l(t,s,a)}(r.whitePoint,_,E);const I=s;!function(e,t,n){if(0===e[0]&&0===e[1]&&0===e[2])return n[0]=t[0],n[1]=t[1],void(n[2]=t[2]);const r=d(0),a=(1-r)/(1-d(e[0])),i=1-a,o=(1-r)/(1-d(e[1])),s=1-o,c=(1-r)/(1-d(e[2])),l=1-c;n[0]=t[0]*a+i,n[1]=t[1]*o+s,n[2]=t[2]*c+l}(r.blackPoint,E,I);const T=c;!function(n,r,a){const o=a;l(e,r,o);const s=i;!function(e,t,n){n[0]=.95047*t[0]/e[0],n[1]=1*t[1]/e[1],n[2]=1.08883*t[2]/e[2]}(n,o,s),l(t,s,a)}(a,I,T);const R=s;l(n,T,R),p[g]=255*u(R[0]),p[g+1]=255*u(R[1]),p[g+2]=255*u(R[2])}return class extends o{constructor(e,t,n,a){if(super("CalRGB",3),!e)throw new r.FormatError("WhitePoint missing - required for color space CalRGB");t=t||new Float32Array(3),n=n||new Float32Array([1,1,1]),a=a||new Float32Array([1,0,0,0,1,0,0,0,1]);const i=e[0],o=e[1],s=e[2];this.whitePoint=e;const c=t[0],l=t[1],u=t[2];if(this.blackPoint=t,this.GR=n[0],this.GG=n[1],this.GB=n[2],this.MXA=a[0],this.MYA=a[1],this.MZA=a[2],this.MXB=a[3],this.MYB=a[4],this.MZB=a[5],this.MXC=a[6],this.MYC=a[7],this.MZC=a[8],i<0||s<0||1!==o)throw new r.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(c<0||l<0||u<0)&&((0,r.info)(`Invalid BlackPoint for ${this.name} [${c}, ${l}, ${u}], falling back to default.`),this.blackPoint=new Float32Array(3)),(this.GR<0||this.GG<0||this.GB<0)&&((0,r.info)(`Invalid Gamma [${this.GR}, ${this.GG}, ${this.GB}] for ${this.name}, falling back to default.`),this.GR=this.GG=this.GB=1)}getRgbItem(e,t,n,r){f(this,e,t,n,r,1)}getRgbBuffer(e,t,n,r,a,i,o){const s=1/((1<<i)-1);for(let i=0;i<n;++i)f(this,e,t,r,a,s),t+=3,a+=3+o}getOutputLength(e,t){return e*(3+t)/3|0}}}(),g=function(){function e(e){let t;return t=e>=6/29?e*e*e:108/841*(e-4/29),t}function t(e,t,n,r){return n+e*(r-n)/t}function n(n,r,a,i,o,s){let c=r[a],l=r[a+1],u=r[a+2];!1!==i&&(c=t(c,i,0,100),l=t(l,i,n.amin,n.amax),u=t(u,i,n.bmin,n.bmax)),l>n.amax?l=n.amax:l<n.amin&&(l=n.amin),u>n.bmax?u=n.bmax:u<n.bmin&&(u=n.bmin);const h=(c+16)/116,d=h+l/500,f=h-u/200,p=n.XW*e(d),g=n.YW*e(h),m=n.ZW*e(f);let v,b,y;n.ZW<1?(v=3.1339*p+-1.617*g+-.4906*m,b=-.9785*p+1.916*g+.0333*m,y=.072*p+-.229*g+1.4057*m):(v=3.2406*p+-1.5372*g+-.4986*m,b=-.9689*p+1.8758*g+.0415*m,y=.0557*p+-.204*g+1.057*m),o[s]=255*Math.sqrt(v),o[s+1]=255*Math.sqrt(b),o[s+2]=255*Math.sqrt(y)}return class extends o{constructor(e,t,n){if(super("Lab",3),!e)throw new r.FormatError("WhitePoint missing - required for color space Lab");if(t=t||[0,0,0],n=n||[-100,100,-100,100],this.XW=e[0],this.YW=e[1],this.ZW=e[2],this.amin=n[0],this.amax=n[1],this.bmin=n[2],this.bmax=n[3],this.XB=t[0],this.YB=t[1],this.ZB=t[2],this.XW<0||this.ZW<0||1!==this.YW)throw new r.FormatError("Invalid WhitePoint components, no fallback available");(this.XB<0||this.YB<0||this.ZB<0)&&((0,r.info)("Invalid BlackPoint, falling back to default"),this.XB=this.YB=this.ZB=0),(this.amin>this.amax||this.bmin>this.bmax)&&((0,r.info)("Invalid Range, falling back to defaults"),this.amin=-100,this.amax=100,this.bmin=-100,this.bmax=100)}getRgbItem(e,t,r,a){n(this,e,t,!1,r,a)}getRgbBuffer(e,t,r,a,i,o,s){const c=(1<<o)-1;for(let o=0;o<r;o++)n(this,e,t,c,a,i),t+=3,i+=3+s}getOutputLength(e,t){return e*(3+t)/3|0}isDefaultDecode(e,t){return!0}get usesZeroToOneRange(){return(0,r.shadow)(this,"usesZeroToOneRange",!1)}}}()},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalTilingPatternCache=t.LocalImageCache=t.LocalGStateCache=t.LocalFunctionCache=t.LocalColorSpaceCache=t.GlobalImageCache=void 0;var r=n(2),a=n(5);class i{constructor(e){this.constructor===i&&(0,r.unreachable)("Cannot initialize BaseLocalCache."),e&&e.onlyRefs||(this._nameRefMap=new Map,this._imageMap=new Map),this._imageCache=new a.RefSetCache}getByName(e){const t=this._nameRefMap.get(e);return t?this.getByRef(t):this._imageMap.get(e)||null}getByRef(e){return this._imageCache.get(e)||null}set(e,t,n){(0,r.unreachable)("Abstract method `set` called.")}}t.LocalImageCache=class extends i{set(e,t=null,n){if(!e)throw new Error('LocalImageCache.set - expected "name" argument.');if(t){if(this._imageCache.has(t))return;return this._nameRefMap.set(e,t),void this._imageCache.put(t,n)}this._imageMap.has(e)||this._imageMap.set(e,n)}},t.LocalColorSpaceCache=class extends i{set(e=null,t=null,n){if(!e&&!t)throw new Error('LocalColorSpaceCache.set - expected "name" and/or "ref" argument.');if(t){if(this._imageCache.has(t))return;return e&&this._nameRefMap.set(e,t),void this._imageCache.put(t,n)}this._imageMap.has(e)||this._imageMap.set(e,n)}},t.LocalFunctionCache=class extends i{constructor(e){super({onlyRefs:!0})}getByName(e){(0,r.unreachable)("Should not call `getByName` method.")}set(e=null,t,n){if(!t)throw new Error('LocalFunctionCache.set - expected "ref" argument.');this._imageCache.has(t)||this._imageCache.put(t,n)}},t.LocalGStateCache=class extends i{set(e,t=null,n){if(!e)throw new Error('LocalGStateCache.set - expected "name" argument.');if(t){if(this._imageCache.has(t))return;return this._nameRefMap.set(e,t),void this._imageCache.put(t,n)}this._imageMap.has(e)||this._imageMap.set(e,n)}},t.LocalTilingPatternCache=class extends i{set(e,t=null,n){if(!e)throw new Error('LocalTilingPatternCache.set - expected "name" argument.');if(t){if(this._imageCache.has(t))return;return this._nameRefMap.set(e,t),void this._imageCache.put(t,n)}this._imageMap.has(e)||this._imageMap.set(e,n)}};class o{static get NUM_PAGES_THRESHOLD(){return(0,r.shadow)(this,"NUM_PAGES_THRESHOLD",2)}static get MAX_IMAGES_TO_CACHE(){return(0,r.shadow)(this,"MAX_IMAGES_TO_CACHE",10)}constructor(){this._refCache=new a.RefSetCache,this._imageCache=new a.RefSetCache}shouldCache(e,t){const n=this._refCache.get(e);return!((n?n.size+(n.has(t)?0:1):1)<o.NUM_PAGES_THRESHOLD||!this._imageCache.has(e)&&this._imageCache.size>=o.MAX_IMAGES_TO_CACHE)}addPageIndex(e,t){let n=this._refCache.get(e);n||(n=new Set,this._refCache.put(e,n)),n.add(t)}getData(e,t){const n=this._refCache.get(e);return n?n.size<o.NUM_PAGES_THRESHOLD?null:this._imageCache.has(e)?(n.add(t),this._imageCache.get(e)):null:null}setData(e,t){if(!this._refCache.has(e))throw new Error('GlobalImageCache.setData - expected "addPageIndex" to have been called.');this._imageCache.has(e)||(this._imageCache.size>=o.MAX_IMAGES_TO_CACHE?(0,r.info)("GlobalImageCache.setData - ignoring image above MAX_IMAGES_TO_CACHE."):this._imageCache.put(e,t))}clear(e=!1){e||this._refCache.clear(),this._imageCache.clear()}}t.GlobalImageCache=o},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getQuadPoints=d,t.MarkupAnnotation=t.AnnotationFactory=t.AnnotationBorderStyle=t.Annotation=void 0;var r=n(2),a=n(10),i=n(8),o=n(26),s=n(5),c=n(23),l=n(44),u=n(12),h=n(46);function d(e,t){if(!e.has("QuadPoints"))return null;const n=e.getArray("QuadPoints");if(!Array.isArray(n)||0===n.length||n.length%8>0)return null;const r=[];for(let e=0,a=n.length/8;e<a;e++){r.push([]);for(let a=8*e,i=8*e+8;a<i;a+=2){const i=n[a],o=n[a+1];if(null!==t&&(i<t[0]||i>t[2]||o<t[1]||o>t[3]))return null;r[e].push({x:i,y:o})}}return r.map((e=>{const[t,n,r,a]=e.reduce((([e,t,n,r],a)=>[Math.min(e,a.x),Math.max(t,a.x),Math.min(n,a.y),Math.max(r,a.y)]),[Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE]);return[{x:t,y:a},{x:n,y:a},{x:t,y:r},{x:n,y:r}]}))}function f(e,t,n){const[a,i,o,s]=r.Util.getAxialAlignedBoundingBox(t,n);if(a===o||i===s)return[1,0,0,1,e[0],e[1]];const c=(e[2]-e[0])/(o-a),l=(e[3]-e[1])/(s-i);return[c,0,0,l,e[0]-a*c,e[1]-i*l]}t.AnnotationFactory=class{static create(e,t,n,r){return n.ensureCatalog("acroForm").then((a=>n.ensure(this,"_create",[e,t,n,r,a])))}static _create(e,t,n,a,o){const c=e.fetchIfRef(t);if(!(0,s.isDict)(c))return;const l=(0,s.isRef)(t)?t.toString():`annot_${a.createObjId()}`;let u=c.get("Subtype");u=(0,s.isName)(u)?u.name:null;const h={xref:e,ref:t,dict:c,subtype:u,id:l,pdfManager:n,acroForm:o instanceof s.Dict?o:s.Dict.empty};switch(u){case"Link":return new C(h);case"Text":return new x(h);case"Widget":let e=(0,i.getInheritableProperty)({dict:c,key:"FT"});switch(e=(0,s.isName)(e)?e.name:null,e){case"Tx":return new b(h);case"Btn":return new y(h);case"Ch":return new w(h)}return(0,r.warn)('Unimplemented widget field type "'+e+'", falling back to base field type.'),new v(h);case"Popup":return new k(h);case"FreeText":return new S(h);case"Line":return new A(h);case"Square":return new _(h);case"Circle":return new E(h);case"PolyLine":return new I(h);case"Polygon":return new T(h);case"Caret":return new R(h);case"Ink":return new F(h);case"Highlight":return new P(h);case"Underline":return new D(h);case"Squiggly":return new O(h);case"StrikeOut":return new N(h);case"Stamp":return new M(h);case"FileAttachment":return new L(h);default:return u?(0,r.warn)('Unimplemented annotation type "'+u+'", falling back to base annotation.'):(0,r.warn)("Annotation is missing the required /Subtype."),new p(h)}}};class p{constructor(e){const t=e.dict;this.setContents(t.get("Contents")),this.setModificationDate(t.get("M")),this.setFlags(t.get("F")),this.setRectangle(t.getArray("Rect")),this.setColor(t.getArray("C")),this.setBorderStyle(t),this.setAppearance(t),this._streams=[],this.appearance&&this._streams.push(this.appearance),this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,contents:this.contents,hasAppearance:!!this.appearance,id:e.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:e.subtype},this._fallbackFontDict=null}_hasFlag(e,t){return!!(e&t)}_isViewable(e){return!this._hasFlag(e,r.AnnotationFlag.INVISIBLE)&&!this._hasFlag(e,r.AnnotationFlag.NOVIEW)}_isPrintable(e){return this._hasFlag(e,r.AnnotationFlag.PRINT)&&!this._hasFlag(e,r.AnnotationFlag.INVISIBLE)}isHidden(e){const t=e&&e[this.data.id];return t&&"hidden"in t?t.hidden:this._hasFlag(this.flags,r.AnnotationFlag.HIDDEN)}get viewable(){return null!==this.data.quadPoints&&(0===this.flags||this._isViewable(this.flags))}get printable(){return null!==this.data.quadPoints&&0!==this.flags&&this._isPrintable(this.flags)}setContents(e){this.contents=(0,r.stringToPDFString)(e||"")}setModificationDate(e){this.modificationDate=(0,r.isString)(e)?e:null}setFlags(e){this.flags=Number.isInteger(e)&&e>0?e:0}hasFlag(e){return this._hasFlag(this.flags,e)}setRectangle(e){Array.isArray(e)&&4===e.length?this.rectangle=r.Util.normalizeRect(e):this.rectangle=[0,0,0,0]}setColor(e){const t=new Uint8ClampedArray(3);if(Array.isArray(e))switch(e.length){case 0:this.color=null;break;case 1:c.ColorSpace.singletons.gray.getRgbItem(e,0,t,0),this.color=t;break;case 3:c.ColorSpace.singletons.rgb.getRgbItem(e,0,t,0),this.color=t;break;case 4:c.ColorSpace.singletons.cmyk.getRgbItem(e,0,t,0),this.color=t;break;default:this.color=t}else this.color=t}setBorderStyle(e){if(this.borderStyle=new g,(0,s.isDict)(e))if(e.has("BS")){const t=e.get("BS"),n=t.get("Type");n&&!(0,s.isName)(n,"Border")||(this.borderStyle.setWidth(t.get("W"),this.rectangle),this.borderStyle.setStyle(t.get("S")),this.borderStyle.setDashArray(t.getArray("D")))}else if(e.has("Border")){const t=e.getArray("Border");Array.isArray(t)&&t.length>=3&&(this.borderStyle.setHorizontalCornerRadius(t[0]),this.borderStyle.setVerticalCornerRadius(t[1]),this.borderStyle.setWidth(t[2],this.rectangle),4===t.length&&this.borderStyle.setDashArray(t[3]))}else this.borderStyle.setWidth(0)}setAppearance(e){this.appearance=null;const t=e.get("AP");if(!(0,s.isDict)(t))return;const n=t.get("N");if((0,s.isStream)(n))return void(this.appearance=n);if(!(0,s.isDict)(n))return;const r=e.get("AS");(0,s.isName)(r)&&n.has(r.name)&&(this.appearance=n.get(r.name))}loadResources(e){return this.appearance.dict.getAsync("Resources").then((t=>{if(t)return new a.ObjectLoader(t,e,t.xref).load().then((function(){return t}))}))}getOperatorList(e,t,n,a){if(!this.appearance)return Promise.resolve(new l.OperatorList);const i=this.appearance,o=this.data,s=i.dict,c=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"]),u=s.getArray("BBox")||[0,0,1,1],h=s.getArray("Matrix")||[1,0,0,1,0,0],d=f(o.rect,u,h);return c.then((n=>{const a=new l.OperatorList;return a.addOp(r.OPS.beginAnnotation,[o.rect,d,h]),e.getOperatorList({stream:i,task:t,resources:n,operatorList:a,fallbackFontDict:this._fallbackFontDict}).then((()=>(a.addOp(r.OPS.endAnnotation,[]),this.reset(),a)))}))}async save(e,t,n){return null}getFieldObject(){return null}reset(){for(const e of this._streams)e.reset()}}t.Annotation=p;class g{constructor(){this.width=1,this.style=r.AnnotationBorderStyleType.SOLID,this.dashArray=[3],this.horizontalCornerRadius=0,this.verticalCornerRadius=0}setWidth(e,t=[0,0,0,0]){if((0,s.isName)(e))this.width=0;else if(Number.isInteger(e)){if(e>0){const n=(t[2]-t[0])/2,a=(t[3]-t[1])/2;n>0&&a>0&&(e>n||e>a)&&((0,r.warn)(`AnnotationBorderStyle.setWidth - ignoring width: ${e}`),e=1)}this.width=e}}setStyle(e){if((0,s.isName)(e))switch(e.name){case"S":this.style=r.AnnotationBorderStyleType.SOLID;break;case"D":this.style=r.AnnotationBorderStyleType.DASHED;break;case"B":this.style=r.AnnotationBorderStyleType.BEVELED;break;case"I":this.style=r.AnnotationBorderStyleType.INSET;break;case"U":this.style=r.AnnotationBorderStyleType.UNDERLINE}}setDashArray(e){if(Array.isArray(e)&&e.length>0){let t=!0,n=!0;for(const r of e){if(!(+r>=0)){t=!1;break}r>0&&(n=!1)}t&&!n?this.dashArray=e:this.width=0}else e&&(this.width=0)}setHorizontalCornerRadius(e){Number.isInteger(e)&&(this.horizontalCornerRadius=e)}setVerticalCornerRadius(e){Number.isInteger(e)&&(this.verticalCornerRadius=e)}}t.AnnotationBorderStyle=g;class m extends p{constructor(e){super(e);const t=e.dict;if(t.has("IRT")){const e=t.getRaw("IRT");this.data.inReplyTo=(0,s.isRef)(e)?e.toString():null;const n=t.get("RT");this.data.replyType=(0,s.isName)(n)?n.name:r.AnnotationReplyType.REPLY}if(this.data.replyType===r.AnnotationReplyType.GROUP){const e=t.get("IRT");this.data.title=(0,r.stringToPDFString)(e.get("T")||""),this.setContents(e.get("Contents")),this.data.contents=this.contents,e.has("CreationDate")?(this.setCreationDate(e.get("CreationDate")),this.data.creationDate=this.creationDate):this.data.creationDate=null,e.has("M")?(this.setModificationDate(e.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,this.data.hasPopup=e.has("Popup"),e.has("C")?(this.setColor(e.getArray("C")),this.data.color=this.color):this.data.color=null}else this.data.title=(0,r.stringToPDFString)(t.get("T")||""),this.setCreationDate(t.get("CreationDate")),this.data.creationDate=this.creationDate,this.data.hasPopup=t.has("Popup"),t.has("C")||(this.data.color=null)}setCreationDate(e){this.creationDate=(0,r.isString)(e)?e:null}_setDefaultAppearance({xref:e,extra:t,strokeColor:n,fillColor:r,blendMode:a,pointsCallback:i}){let o=Number.MAX_VALUE,c=Number.MAX_VALUE,l=Number.MIN_VALUE,h=Number.MIN_VALUE;const d=["q"];t&&d.push(t),n&&d.push(`${n[0]} ${n[1]} ${n[2]} RG`),r&&d.push(`${r[0]} ${r[1]} ${r[2]} rg`);for(const e of this.data.quadPoints){const[t,n,r,a]=i(d,e);o=Math.min(o,t),l=Math.max(l,n),c=Math.min(c,r),h=Math.max(h,a)}d.push("Q");const f=new s.Dict(e),p=new s.Dict(e);p.set("Subtype",s.Name.get("Form"));const g=new u.StringStream(d.join(" "));g.dict=p,f.set("Fm0",g);const m=new s.Dict(e);a&&m.set("BM",s.Name.get(a));const v=new s.Dict(e);v.set("GS0",m);const b=new s.Dict(e);b.set("ExtGState",v),b.set("XObject",f);const y=new s.Dict(e);y.set("Resources",b);const w=this.data.rect=[o,c,l,h];y.set("BBox",w),this.appearance=new u.StringStream("/GS0 gs /Fm0 Do"),this.appearance.dict=y,this._streams.push(this.appearance,g)}}t.MarkupAnnotation=m;class v extends p{constructor(e){super(e);const t=e.dict,n=this.data;this.ref=e.ref,n.annotationType=r.AnnotationType.WIDGET,n.fieldName=this._constructFieldName(t),n.actions=(0,i.collectActions)(e.xref,t,r.AnnotationActionEventType);const a=(0,i.getInheritableProperty)({dict:t,key:"V",getArray:!0});n.fieldValue=this._decodeFormValue(a);const c=(0,i.getInheritableProperty)({dict:t,key:"DV",getArray:!0});n.defaultFieldValue=this._decodeFormValue(c),n.alternativeText=(0,r.stringToPDFString)(t.get("TU")||"");const l=(0,i.getInheritableProperty)({dict:t,key:"DA"})||e.acroForm.get("DA")||"";n.defaultAppearance=(0,r.isString)(l)?l:"",n.defaultAppearanceData=(0,o.parseDefaultAppearance)(n.defaultAppearance);const u=(0,i.getInheritableProperty)({dict:t,key:"FT"});n.fieldType=(0,s.isName)(u)?u.name:null;const h=(0,i.getInheritableProperty)({dict:t,key:"DR"}),d=e.acroForm.get("DR"),f=this.appearance&&this.appearance.dict.get("Resources");this._fieldResources={localResources:h,acroFormResources:d,appearanceResources:f,mergedResources:s.Dict.merge({xref:e.xref,dictArray:[h,f,d],mergeSubDicts:!0})},n.fieldFlags=(0,i.getInheritableProperty)({dict:t,key:"Ff"}),(!Number.isInteger(n.fieldFlags)||n.fieldFlags<0)&&(n.fieldFlags=0),n.readOnly=this.hasFieldFlag(r.AnnotationFieldFlag.READONLY),n.hidden=this._hasFlag(n.annotationFlags,r.AnnotationFlag.HIDDEN),"Sig"===n.fieldType&&(n.fieldValue=null,this.setFlags(r.AnnotationFlag.HIDDEN),n.hidden=!0)}_constructFieldName(e){if(!e.has("T")&&!e.has("Parent"))return(0,r.warn)("Unknown field name, falling back to empty field name."),"";if(!e.has("Parent"))return(0,r.stringToPDFString)(e.get("T"));const t=[];e.has("T")&&t.unshift((0,r.stringToPDFString)(e.get("T")));let n=e;for(;n.has("Parent")&&(n=n.get("Parent"),(0,s.isDict)(n));)n.has("T")&&t.unshift((0,r.stringToPDFString)(n.get("T")));return t.join(".")}_decodeFormValue(e){return Array.isArray(e)?e.filter((e=>(0,r.isString)(e))).map((e=>(0,r.stringToPDFString)(e))):(0,s.isName)(e)?(0,r.stringToPDFString)(e.name):(0,r.isString)(e)?(0,r.stringToPDFString)(e):null}hasFieldFlag(e){return!!(this.data.fieldFlags&e)}getOperatorList(e,t,n,a){return n?Promise.resolve(new l.OperatorList):this._hasText?this._getAppearance(e,t,a).then((i=>{if(this.appearance&&null===i)return super.getOperatorList(e,t,n,a);const o=new l.OperatorList;if(!this.data.defaultAppearance||null===i)return o;const s=[1,0,0,1,0,0],c=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],h=f(this.data.rect,c,s);o.addOp(r.OPS.beginAnnotation,[this.data.rect,h,s]);const d=new u.StringStream(i);return e.getOperatorList({stream:d,task:t,resources:this._fieldResources.mergedResources,operatorList:o}).then((function(){return o.addOp(r.OPS.endAnnotation,[]),o}))})):super.getOperatorList(e,t,n,a)}async save(e,t,n){const a=n[this.data.id]&&n[this.data.id].value;if(a===this.data.fieldValue||void 0===a)return null;let i=await this._getAppearance(e,t,n);if(null===i)return null;const{xref:o}=e,c=o.fetchIfRef(this.ref);if(!(0,s.isDict)(c))return null;const l=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],u={path:(0,r.stringToPDFString)(c.get("T")||""),value:a},d=o.getNewRef(),f=new s.Dict(o);f.set("N",d);const p=o.encrypt;let g=null,m=null;p&&(g=p.createCipherTransform(this.ref.num,this.ref.gen),m=p.createCipherTransform(d.num,d.gen),i=m.encryptString(i)),c.set("V",(0,r.isAscii)(a)?a:(0,r.stringToUTF16BEString)(a)),c.set("AP",f),c.set("M",`D:${(0,r.getModificationDate)()}`);const v=new s.Dict(o);v.set("Length",i.length),v.set("Subtype",s.Name.get("Form")),v.set("Resources",this._getSaveFieldResources(o)),v.set("BBox",l);const b=[`${this.ref.num} ${this.ref.gen} obj\n`];(0,h.writeDict)(c,b,g),b.push("\nendobj\n");const y=[`${d.num} ${d.gen} obj\n`];return(0,h.writeDict)(v,y,m),y.push(" stream\n"),y.push(i),y.push("\nendstream\nendobj\n"),[{ref:this.ref,data:b.join(""),xfa:u},{ref:d,data:y.join(""),xfa:null}]}async _getAppearance(e,t,n){const a=this.hasFieldFlag(r.AnnotationFieldFlag.PASSWORD);if(!n||a)return null;const i=n[this.data.id]&&n[this.data.id].value;if(void 0===i)return null;if(""===i)return"";const s=this.data.rect[3]-this.data.rect[1],c=this.data.rect[2]-this.data.rect[0];this.data.defaultAppearance||(this.data.defaultAppearance="/Helvetica 0 Tf 0 g",this.data.defaultAppearanceData=(0,o.parseDefaultAppearance)(this.data.defaultAppearance));const l=await this._getFontData(e,t),u=this._computeFontSize(l,s);let h=l.descent;isNaN(h)&&(h=0);const d=2+Math.abs(h)*u,f=this.data.defaultAppearance,p=this.data.textAlignment;if(this.data.multiLine)return this._getMultilineAppearance(f,i,l,u,c,s,p,2,d);const g=l.encodeString(i).join("");return this.data.comb?this._getCombAppearance(f,l,g,c,2,d):0===p||p>2?"/Tx BMC q BT "+f+` 1 0 0 1 2 ${d} Tm (${(0,r.escapeString)(g)}) Tj ET Q EMC`:"/Tx BMC q BT "+f+` 1 0 0 1 0 0 Tm ${this._renderText(g,l,u,c,p,2,d)} ET Q EMC`}async _getFontData(e,t){const n=new l.OperatorList,r={font:null,clone(){return this}},{fontName:a,fontSize:i}=this.data.defaultAppearanceData;return await e.handleSetFont(this._fieldResources.mergedResources,[a,i],null,n,t,r,null),r.font}_computeFontSize(e,t){let n=this.data.defaultAppearanceData.fontSize;if(!n){const{fontColor:r,fontName:a}=this.data.defaultAppearanceData;let i;if(e.capHeight)i=e.capHeight;else{const t=e.charsToGlyphs(e.encodeString("M").join(""));i=1===t.length&&t[0].width?t[0].width/1e3*.7:.7}n=Math.max(1,Math.floor(t/(1.5*i))),this.data.defaultAppearance=(0,o.createDefaultAppearance)({fontSize:n,fontName:a,fontColor:r})}return n}_renderText(e,t,n,a,i,o,s){const c=t.charsToGlyphs(e),l=n/1e3;let u,h=0;for(const e of c)h+=e.width*l;return u=1===i?(a-h)/2:2===i?a-h-o:o,u=u.toFixed(2),`${u} ${s=s.toFixed(2)} Td (${(0,r.escapeString)(e)}) Tj`}_getSaveFieldResources(e){const{localResources:t,appearanceResources:n,acroFormResources:r}=this._fieldResources,a=this.data.defaultAppearanceData&&this.data.defaultAppearanceData.fontName.name;if(!a)return t||s.Dict.empty;for(const e of[t,n])if(e instanceof s.Dict){const t=e.get("Font");if(t instanceof s.Dict&&t.has(a))return e}if(r instanceof s.Dict){const n=r.get("Font");if(n instanceof s.Dict&&n.has(a)){const r=new s.Dict(e);r.set(a,n.getRaw(a));const i=new s.Dict(e);return i.set("Font",r),s.Dict.merge({xref:e,dictArray:[i,t],mergeSubDicts:!0})}}return t||s.Dict.empty}getFieldObject(){return"Sig"===this.data.fieldType?{id:this.data.id,value:null,type:"signature"}:null}}class b extends v{constructor(e){super(e),this._hasText=!0;const t=e.dict;(0,r.isString)(this.data.fieldValue)||(this.data.fieldValue="");let n=(0,i.getInheritableProperty)({dict:t,key:"Q"});(!Number.isInteger(n)||n<0||n>2)&&(n=null),this.data.textAlignment=n;let a=(0,i.getInheritableProperty)({dict:t,key:"MaxLen"});(!Number.isInteger(a)||a<0)&&(a=null),this.data.maxLen=a,this.data.multiLine=this.hasFieldFlag(r.AnnotationFieldFlag.MULTILINE),this.data.comb=this.hasFieldFlag(r.AnnotationFieldFlag.COMB)&&!this.hasFieldFlag(r.AnnotationFieldFlag.MULTILINE)&&!this.hasFieldFlag(r.AnnotationFieldFlag.PASSWORD)&&!this.hasFieldFlag(r.AnnotationFieldFlag.FILESELECT)&&null!==this.data.maxLen}_getCombAppearance(e,t,n,a,i,o){const s=(a/this.data.maxLen).toFixed(2),c=[],l=t.getCharPositions(n);for(const[e,t]of l)c.push(`(${(0,r.escapeString)(n.substring(e,t))}) Tj`);return"/Tx BMC q BT "+e+` 1 0 0 1 ${i} ${o} Tm ${c.join(` ${s} 0 Td `)} ET Q EMC`}_getMultilineAppearance(e,t,n,r,a,i,o,s,c){const l=t.split(/\r\n|\r|\n/),u=[],h=a-2*s;for(const e of l){const t=this._splitLine(e,n,r,h);for(const e of t){const t=0===u.length?s:0;u.push(this._renderText(e,n,r,a,o,t,-r))}}return"/Tx BMC q BT "+e+` 1 0 0 1 0 ${i} Tm ${u.join("\n")} ET Q EMC`}_splitLine(e,t,n,r){e=t.encodeString(e).join("");const a=t.charsToGlyphs(e);if(a.length<=1)return[e];const i=t.getCharPositions(e),o=n/1e3,s=[];let c=-1,l=-1,u=-1,h=0,d=0;for(let t=0,n=a.length;t<n;t++){const[n,f]=i[t],p=a[t],g=p.width*o;" "===p.unicode?d+g>r?(s.push(e.substring(h,n)),h=n,d=g,c=-1,u=-1):(d+=g,c=n,l=f,u=t):d+g>r?-1!==c?(s.push(e.substring(h,l)),h=l,t=u+1,c=-1,d=0):(s.push(e.substring(h,n)),h=n,d=g):d+=g}return h<e.length&&s.push(e.substring(h,e.length)),s}getFieldObject(){return{id:this.data.id,value:this.data.fieldValue,defaultValue:this.data.defaultFieldValue,multiline:this.data.multiLine,password:this.hasFieldFlag(r.AnnotationFieldFlag.PASSWORD),charLimit:this.data.maxLen,comb:this.data.comb,editable:!this.data.readOnly,hidden:this.data.hidden,name:this.data.fieldName,rect:this.data.rect,actions:this.data.actions,type:"text"}}}class y extends v{constructor(e){super(e),this.checkedAppearance=null,this.uncheckedAppearance=null,this.data.checkBox=!this.hasFieldFlag(r.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(r.AnnotationFieldFlag.PUSHBUTTON),this.data.radioButton=this.hasFieldFlag(r.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(r.AnnotationFieldFlag.PUSHBUTTON),this.data.pushButton=this.hasFieldFlag(r.AnnotationFieldFlag.PUSHBUTTON),this.data.isTooltipOnly=!1,this.data.checkBox?this._processCheckBox(e):this.data.radioButton?this._processRadioButton(e):this.data.pushButton?this._processPushButton(e):(0,r.warn)("Invalid field flags for button widget annotation")}getOperatorList(e,t,n,r){if(this.data.pushButton)return super.getOperatorList(e,t,!1,r);if(r){const a=r[this.data.id]&&r[this.data.id].value;if(void 0===a)return super.getOperatorList(e,t,n,r);let i;if(i=a?this.checkedAppearance:this.uncheckedAppearance,i){const a=this.appearance;this.appearance=i;const o=super.getOperatorList(e,t,n,r);return this.appearance=a,o}return Promise.resolve(new l.OperatorList)}return super.getOperatorList(e,t,n,r)}async save(e,t,n){return this.data.checkBox?this._saveCheckbox(e,t,n):this.data.radioButton?this._saveRadioButton(e,t,n):null}async _saveCheckbox(e,t,n){const a=n[this.data.id]&&n[this.data.id].value;if(void 0===a)return null;if((this.data.fieldValue&&"Off"!==this.data.fieldValue)===a)return null;const i=e.xref.fetchIfRef(this.ref);if(!(0,s.isDict)(i))return null;const o={path:(0,r.stringToPDFString)(i.get("T")||""),value:a?this.data.exportValue:""},c=s.Name.get(a?this.data.exportValue:"Off");i.set("V",c),i.set("AS",c),i.set("M",`D:${(0,r.getModificationDate)()}`);const l=e.xref.encrypt;let u=null;l&&(u=l.createCipherTransform(this.ref.num,this.ref.gen));const d=[`${this.ref.num} ${this.ref.gen} obj\n`];return(0,h.writeDict)(i,d,u),d.push("\nendobj\n"),[{ref:this.ref,data:d.join(""),xfa:o}]}async _saveRadioButton(e,t,n){const a=n[this.data.id]&&n[this.data.id].value;if(void 0===a)return null;if(this.data.fieldValue===this.data.buttonValue===a)return null;const i=e.xref.fetchIfRef(this.ref);if(!(0,s.isDict)(i))return null;const o={path:(0,r.stringToPDFString)(i.get("T")||""),value:a?this.data.buttonValue:""},c=s.Name.get(a?this.data.buttonValue:"Off");let l=null;const u=e.xref.encrypt;if(a)if((0,s.isRef)(this.parent)){const t=e.xref.fetch(this.parent);let n=null;u&&(n=u.createCipherTransform(this.parent.num,this.parent.gen)),t.set("V",c),l=[`${this.parent.num} ${this.parent.gen} obj\n`],(0,h.writeDict)(t,l,n),l.push("\nendobj\n")}else(0,s.isDict)(this.parent)&&this.parent.set("V",c);i.set("AS",c),i.set("M",`D:${(0,r.getModificationDate)()}`);let d=null;u&&(d=u.createCipherTransform(this.ref.num,this.ref.gen));const f=[`${this.ref.num} ${this.ref.gen} obj\n`];(0,h.writeDict)(i,f,d),f.push("\nendobj\n");const p=[{ref:this.ref,data:f.join(""),xfa:o}];return null!==l&&p.push({ref:this.parent,data:l.join(""),xfa:null}),p}_processCheckBox(e){const t=e.dict.get("AP");if(!(0,s.isDict)(t))return;const n=t.get("N");if(!(0,s.isDict)(n))return;const r=n.getKeys();r.includes("Off")||r.push("Off"),2===r.length&&(this.data.exportValue="Off"===r[0]?r[1]:r[0],this.checkedAppearance=n.get(this.data.exportValue),this.uncheckedAppearance=n.get("Off")||null,this._streams.push(this.checkedAppearance),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict)}_processRadioButton(e){this.data.fieldValue=this.data.buttonValue=null;const t=e.dict.get("Parent");if((0,s.isDict)(t)){this.parent=e.dict.getRaw("Parent");const n=t.get("V");(0,s.isName)(n)&&(this.data.fieldValue=this._decodeFormValue(n))}const n=e.dict.get("AP");if(!(0,s.isDict)(n))return;const r=n.get("N");if((0,s.isDict)(r)){for(const e of r.getKeys())if("Off"!==e){this.data.buttonValue=this._decodeFormValue(e);break}this.checkedAppearance=r.get(this.data.buttonValue),this.uncheckedAppearance=r.get("Off")||null,this._streams.push(this.checkedAppearance),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict}}_processPushButton(e){e.dict.has("A")||e.dict.has("AA")||this.data.alternativeText?(this.data.isTooltipOnly=!e.dict.has("A")&&!e.dict.has("AA"),a.Catalog.parseDestDictionary({destDict:e.dict,resultObj:this.data,docBaseUrl:e.pdfManager.docBaseUrl})):(0,r.warn)("Push buttons without action dictionaries are not supported")}getFieldObject(){let e,t="button";return this.data.checkBox?(t="checkbox",e=this.data.exportValue):this.data.radioButton&&(t="radiobutton",e=this.data.buttonValue),{id:this.data.id,value:this.data.fieldValue||"Off",defaultValue:this.data.defaultFieldValue,exportValues:e,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,hidden:this.data.hidden,actions:this.data.actions,type:t}}get fallbackFontDict(){const e=new s.Dict;return e.set("BaseFont",s.Name.get("ZapfDingbats")),e.set("Type",s.Name.get("FallbackType")),e.set("Subtype",s.Name.get("FallbackType")),e.set("Encoding",s.Name.get("ZapfDingbatsEncoding")),(0,r.shadow)(this,"fallbackFontDict",e)}}class w extends v{constructor(e){super(e),this.data.options=[];const t=(0,i.getInheritableProperty)({dict:e.dict,key:"Opt"});if(Array.isArray(t)){const n=e.xref;for(let e=0,r=t.length;e<r;e++){const r=n.fetchIfRef(t[e]),a=Array.isArray(r);this.data.options[e]={exportValue:this._decodeFormValue(a?n.fetchIfRef(r[0]):r),displayValue:this._decodeFormValue(a?n.fetchIfRef(r[1]):r)}}}(0,r.isString)(this.data.fieldValue)?this.data.fieldValue=[this.data.fieldValue]:this.data.fieldValue||(this.data.fieldValue=[]),this.data.combo=this.hasFieldFlag(r.AnnotationFieldFlag.COMBO),this.data.multiSelect=this.hasFieldFlag(r.AnnotationFieldFlag.MULTISELECT),this._hasText=!0}getFieldObject(){const e=this.data.combo?"combobox":"listbox",t=this.data.fieldValue.length>0?this.data.fieldValue[0]:null;return{id:this.data.id,value:t,defaultValue:this.data.defaultFieldValue,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,numItems:this.data.fieldValue.length,multipleSelection:this.data.multiSelect,hidden:this.data.hidden,actions:this.data.actions,type:e}}}class x extends m{constructor(e){super(e);const t=e.dict;this.data.annotationType=r.AnnotationType.TEXT,this.data.hasAppearance?this.data.name="NoIcon":(this.data.rect[1]=this.data.rect[3]-22,this.data.rect[2]=this.data.rect[0]+22,this.data.name=t.has("Name")?t.get("Name").name:"Note"),t.has("State")?(this.data.state=t.get("State")||null,this.data.stateModel=t.get("StateModel")||null):(this.data.state=null,this.data.stateModel=null)}}class C extends p{constructor(e){super(e),this.data.annotationType=r.AnnotationType.LINK;const t=d(e.dict,this.rectangle);t&&(this.data.quadPoints=t),a.Catalog.parseDestDictionary({destDict:e.dict,resultObj:this.data,docBaseUrl:e.pdfManager.docBaseUrl})}}class k extends p{constructor(e){super(e),this.data.annotationType=r.AnnotationType.POPUP;let t=e.dict.get("Parent");if(!t)return void(0,r.warn)("Popup annotation has a missing or invalid parent annotation.");const n=t.get("Subtype");this.data.parentType=(0,s.isName)(n)?n.name:null;const a=e.dict.getRaw("Parent");this.data.parentId=(0,s.isRef)(a)?a.toString():null;const i=t.getArray("Rect");Array.isArray(i)&&4===i.length?this.data.parentRect=r.Util.normalizeRect(i):this.data.parentRect=[0,0,0,0];const o=t.get("RT");if((0,s.isName)(o,r.AnnotationReplyType.GROUP)&&(t=t.get("IRT")),t.has("M")?(this.setModificationDate(t.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,t.has("C")?(this.setColor(t.getArray("C")),this.data.color=this.color):this.data.color=null,!this.viewable){const e=t.get("F");this._isViewable(e)&&this.setFlags(e)}this.data.title=(0,r.stringToPDFString)(t.get("T")||""),this.data.contents=(0,r.stringToPDFString)(t.get("Contents")||"")}}class S extends m{constructor(e){super(e),this.data.annotationType=r.AnnotationType.FREETEXT}}class A extends m{constructor(e){super(e),this.data.annotationType=r.AnnotationType.LINE,this.data.lineCoordinates=r.Util.normalizeRect(e.dict.getArray("L"))}}class _ extends m{constructor(e){super(e),this.data.annotationType=r.AnnotationType.SQUARE}}class E extends m{constructor(e){super(e),this.data.annotationType=r.AnnotationType.CIRCLE}}class I extends m{constructor(e){super(e),this.data.annotationType=r.AnnotationType.POLYLINE,this.data.vertices=[];const t=e.dict.getArray("Vertices");if(Array.isArray(t))for(let e=0,n=t.length;e<n;e+=2)this.data.vertices.push({x:t[e],y:t[e+1]})}}class T extends I{constructor(e){super(e),this.data.annotationType=r.AnnotationType.POLYGON}}class R extends m{constructor(e){super(e),this.data.annotationType=r.AnnotationType.CARET}}class F extends m{constructor(e){super(e),this.data.annotationType=r.AnnotationType.INK,this.data.inkLists=[];const t=e.dict.getArray("InkList");if(!Array.isArray(t))return;const n=e.xref;for(let e=0,r=t.length;e<r;++e){this.data.inkLists.push([]);for(let r=0,a=t[e].length;r<a;r+=2)this.data.inkLists[e].push({x:n.fetchIfRef(t[e][r]),y:n.fetchIfRef(t[e][r+1])})}}}class P extends m{constructor(e){if(super(e),this.data.annotationType=r.AnnotationType.HIGHLIGHT,this.data.quadPoints=d(e.dict,null)){if(!this.appearance){const t=this.color?Array.from(this.color).map((e=>e/255)):[1,1,0];this._setDefaultAppearance({xref:e.xref,fillColor:t,blendMode:"Multiply",pointsCallback:(e,t)=>(e.push(`${t[0].x} ${t[0].y} m`),e.push(`${t[1].x} ${t[1].y} l`),e.push(`${t[3].x} ${t[3].y} l`),e.push(`${t[2].x} ${t[2].y} l`),e.push("f"),[t[0].x,t[1].x,t[3].y,t[1].y])})}}else this.data.hasPopup=!1}}class D extends m{constructor(e){if(super(e),this.data.annotationType=r.AnnotationType.UNDERLINE,this.data.quadPoints=d(e.dict,null)){if(!this.appearance){const t=this.color?Array.from(this.color).map((e=>e/255)):[0,0,0];this._setDefaultAppearance({xref:e.xref,extra:"[] 0 d 1 w",strokeColor:t,pointsCallback:(e,t)=>(e.push(`${t[2].x} ${t[2].y} m`),e.push(`${t[3].x} ${t[3].y} l`),e.push("S"),[t[0].x,t[1].x,t[3].y,t[1].y])})}}else this.data.hasPopup=!1}}class O extends m{constructor(e){if(super(e),this.data.annotationType=r.AnnotationType.SQUIGGLY,this.data.quadPoints=d(e.dict,null)){if(!this.appearance){const t=this.color?Array.from(this.color).map((e=>e/255)):[0,0,0];this._setDefaultAppearance({xref:e.xref,extra:"[] 0 d 1 w",strokeColor:t,pointsCallback:(e,t)=>{const n=(t[0].y-t[2].y)/6;let r=n,a=t[2].x;const i=t[2].y,o=t[3].x;e.push(`${a} ${i+r} m`);do{a+=2,r=0===r?n:0,e.push(`${a} ${i+r} l`)}while(a<o);return e.push("S"),[t[2].x,o,i-2*n,i+2*n]}})}}else this.data.hasPopup=!1}}class N extends m{constructor(e){if(super(e),this.data.annotationType=r.AnnotationType.STRIKEOUT,this.data.quadPoints=d(e.dict,null)){if(!this.appearance){const t=this.color?Array.from(this.color).map((e=>e/255)):[0,0,0];this._setDefaultAppearance({xref:e.xref,extra:"[] 0 d 1 w",strokeColor:t,pointsCallback:(e,t)=>(e.push((t[0].x+t[2].x)/2+` ${(t[0].y+t[2].y)/2} m`),e.push((t[1].x+t[3].x)/2+` ${(t[1].y+t[3].y)/2} l`),e.push("S"),[t[0].x,t[1].x,t[3].y,t[1].y])})}}else this.data.hasPopup=!1}}class M extends m{constructor(e){super(e),this.data.annotationType=r.AnnotationType.STAMP}}class L extends m{constructor(e){super(e);const t=new a.FileSpec(e.dict.get("FS"),e.xref);this.data.annotationType=r.AnnotationType.FILEATTACHMENT,this.data.file=t.serializable}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultAppearance=function({fontSize:e,fontName:t,fontColor:n}){let r;return r=n.every((e=>0===e))?"0 g":Array.from(n).map((e=>(e/255).toFixed(2))).join(" ")+" rg",`/${(0,o.escapePDFName)(t.name)} ${e} Tf ${r}`},t.parseDefaultAppearance=function(e){return new l(e).parse()};var r=n(5),a=n(2),i=n(23),o=n(8),s=n(27),c=n(12);class l extends s.EvaluatorPreprocessor{constructor(e){super(new c.StringStream(e))}parse(){const e={fn:0,args:[]},t={fontSize:0,fontName:r.Name.get(""),fontColor:new Uint8ClampedArray([0,0,0])};try{for(;e.args.length=0,this.read(e);){if(0!==this.savedStatesDepth)continue;const{fn:n,args:o}=e;switch(0|n){case a.OPS.setFont:const[e,n]=o;(0,r.isName)(e)&&(t.fontName=e),"number"==typeof n&&n>0&&(t.fontSize=n);break;case a.OPS.setFillRGBColor:i.ColorSpace.singletons.rgb.getRgbItem(o,0,t.fontColor,0);break;case a.OPS.setFillGray:i.ColorSpace.singletons.gray.getRgbItem(o,0,t.fontColor,0);break;case a.OPS.setFillColorSpace:i.ColorSpace.singletons.cmyk.getRgbItem(o,0,t.fontColor,0)}}}catch(e){(0,a.warn)(`parseDefaultAppearance - ignoring errors: "${e}".`)}return t}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PartialEvaluator=t.EvaluatorPreprocessor=void 0;var r=n(2),a=n(28),i=n(5),o=n(29),s=n(32),c=n(8),l=n(35),u=n(34),h=n(38),d=n(39),f=n(11),p=n(24),g=n(41),m=n(23),v=n(12),b=n(33),y=n(42),w=n(43),x=n(44),C=n(45);const k=Object.freeze({maxImageSize:-1,disableFontFace:!1,ignoreErrors:!1,isEvalSupported:!0,fontExtraProperties:!1}),S=Promise.resolve();function A(e,t=!1){if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++){const n=A(e[t],!0);if(n)return n}return(0,r.warn)(`Unsupported blend mode Array: ${e}`),"source-over"}if(!(0,i.isName)(e))return t?null:"source-over";switch(e.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}return t?null:((0,r.warn)(`Unsupported blend mode: ${e.name}`),"source-over")}class _{static get TIME_SLOT_DURATION_MS(){return(0,r.shadow)(this,"TIME_SLOT_DURATION_MS",20)}static get CHECK_TIME_EVERY(){return(0,r.shadow)(this,"CHECK_TIME_EVERY",100)}constructor(){this.reset()}check(){return!(++this.checked<_.CHECK_TIME_EVERY)&&(this.checked=0,this.endTime<=Date.now())}reset(){this.endTime=Date.now()+_.TIME_SLOT_DURATION_MS,this.checked=0}}class E{constructor({xref:e,handler:t,pageIndex:n,idFactory:r,fontCache:a,builtInCMapCache:i,globalImageCache:o,options:s=null}){this.xref=e,this.handler=t,this.pageIndex=n,this.idFactory=r,this.fontCache=a,this.builtInCMapCache=i,this.globalImageCache=o,this.options=s||k,this.parsingType3Font=!1,this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this)}get _pdfFunctionFactory(){const e=new d.PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported});return(0,r.shadow)(this,"_pdfFunctionFactory",e)}clone(e=k){var t=Object.create(this);return t.options=e,t}hasBlendModes(e,t){if(!(e instanceof i.Dict))return!1;if(e.objId&&t.has(e.objId))return!1;const n=new i.RefSet(t);e.objId&&n.put(e.objId);for(var a=[e],o=this.xref;a.length;){var s=a.shift(),l=s.get("ExtGState");if(l instanceof i.Dict)for(let e of l.getRawValues()){if(e instanceof i.Ref){if(n.has(e))continue;try{e=o.fetch(e)}catch(t){if(t instanceof c.MissingDataException)throw t;n.put(e),(0,r.info)(`hasBlendModes - ignoring ExtGState: "${t}".`);continue}}if(!(e instanceof i.Dict))continue;e.objId&&n.put(e.objId);const t=e.get("BM");if(t instanceof i.Name){if("Normal"!==t.name)return!0}else if(void 0!==t&&Array.isArray(t))for(const e of t)if(e instanceof i.Name&&"Normal"!==e.name)return!0}var u=s.get("XObject");if(u instanceof i.Dict)for(let e of u.getRawValues()){if(e instanceof i.Ref){if(n.has(e))continue;try{e=o.fetch(e)}catch(t){if(t instanceof c.MissingDataException)throw t;n.put(e),(0,r.info)(`hasBlendModes - ignoring XObject: "${t}".`);continue}}if((0,i.isStream)(e)){e.dict.objId&&n.put(e.dict.objId);var h=e.dict.get("Resources");h instanceof i.Dict&&(h.objId&&n.has(h.objId)||(a.push(h),h.objId&&n.put(h.objId)))}}}return n.forEach((e=>{t.put(e)})),!1}async fetchBuiltInCMap(e){const t=this.builtInCMapCache.get(e);if(t)return t;const n=this.handler.sendWithStream("FetchBuiltInCMap",{name:e}).getReader(),a=await new Promise((function(e,t){!function r(){n.read().then((function({value:t,done:n}){n||(e(t),r())}),t)}()}));return a.compressionType!==r.CMapCompressionType.NONE&&this.builtInCMapCache.set(e,a),a}async buildFormXObject(e,t,n,a,o,s,c){var l=t.dict,u=l.getArray("Matrix"),h=l.getArray("BBox");h=Array.isArray(h)&&4===h.length?r.Util.normalizeRect(h):null;let d=null;l.has("OC")&&(d=await this.parseMarkedContentProps(l.get("OC"),e),a.addOp(r.OPS.beginMarkedContentProps,["OC",d]));var f=l.get("Group");if(f){var p={matrix:u,bbox:h,smask:n,isolated:!1,knockout:!1},g=f.get("S"),v=null;if((0,i.isName)(g,"Transparency")&&(p.isolated=f.get("I")||!1,p.knockout=f.get("K")||!1,f.has("CS"))){const t=f.getRaw("CS");v=m.ColorSpace.getCached(t,this.xref,c)||await this.parseColorSpace({cs:t,resources:e,localColorSpaceCache:c})}n&&n.backdrop&&(v=v||m.ColorSpace.singletons.rgb,n.backdrop=v.getRgb(n.backdrop,0)),a.addOp(r.OPS.beginGroup,[p])}return a.addOp(r.OPS.paintFormXObjectBegin,[u,h]),this.getOperatorList({stream:t,task:o,resources:l.get("Resources")||e,operatorList:a,initialState:s}).then((function(){a.addOp(r.OPS.paintFormXObjectEnd,[]),f&&a.addOp(r.OPS.endGroup,[p]),d&&a.addOp(r.OPS.endMarkedContent,[])}))}_sendImgData(e,t,n=!1){const r=t?[t.data.buffer]:null;return this.parsingType3Font||n?this.handler.send("commonobj",[e,"Image",t],r):this.handler.send("obj",[e,this.pageIndex,"Image",t],r)}async buildPaintImageXObject({resources:e,image:t,isInline:n=!1,operatorList:a,cacheKey:i,localImageCache:o,localColorSpaceCache:s}){var c=t.dict;const l=c.objId;var u=c.get("Width","W"),h=c.get("Height","H");if(!(u&&(0,r.isNum)(u)&&h&&(0,r.isNum)(h)))return void(0,r.warn)("Image dimensions are missing, or not numbers.");var d,f,p=this.options.maxImageSize;if(-1!==p&&u*h>p)return void(0,r.warn)("Image exceeded maximum allowed size and was removed.");if(c.get("ImageMask","IM")){var g=c.get("Width","W"),m=c.get("Height","H"),b=g+7>>3,y=t.getBytes(b*m,!0),w=c.getArray("Decode","D");return(d=C.PDFImage.createMask({imgArray:y,width:g,height:m,imageIsFromDecodeStream:t instanceof v.DecodeStream,inverseDecode:!!w&&w[0]>0})).cached=!!i,f=[d],a.addOp(r.OPS.paintImageMaskXObject,f),void(i&&o.set(i,l,{fn:r.OPS.paintImageMaskXObject,args:f}))}var x=c.get("SMask","SM")||!1,k=c.get("Mask")||!1;if(n&&!x&&!k&&u+h<200){const i=new C.PDFImage({xref:this.xref,res:e,image:t,isInline:n,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:s});return d=i.createImageData(!0),void a.addOp(r.OPS.paintInlineImageXObject,[d])}let S=`img_${this.idFactory.createObjId()}`,A=!1;this.parsingType3Font?S=`${this.idFactory.getDocId()}_type3_${S}`:l&&(A=this.globalImageCache.shouldCache(l,this.pageIndex),A&&(S=`${this.idFactory.getDocId()}_${S}`)),a.addDependency(S),f=[S,u,h],C.PDFImage.buildImage({xref:this.xref,res:e,image:t,isInline:n,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:s}).then((e=>(d=e.createImageData(!1),this._sendImgData(S,d,A)))).catch((e=>((0,r.warn)(`Unable to decode image "${S}": "${e}".`),this._sendImgData(S,null,A)))),a.addOp(r.OPS.paintImageXObject,f),i&&(o.set(i,l,{fn:r.OPS.paintImageXObject,args:f}),l&&((0,r.assert)(!n,"Cannot cache an inline image globally."),this.globalImageCache.addPageIndex(l,this.pageIndex),A&&this.globalImageCache.setData(l,{objId:S,fn:r.OPS.paintImageXObject,args:f})))}handleSMask(e,t,n,r,a,i){var o=e.get("G"),s={subtype:e.get("S").name,backdrop:e.get("BC")},c=e.get("TR");if((0,d.isPDFFunction)(c)){const e=this._pdfFunctionFactory.create(c);for(var l=new Uint8Array(256),u=new Float32Array(1),h=0;h<256;h++)u[0]=h/255,e(u,0,u,0),l[h]=255*u[0]|0;s.transferMap=l}return this.buildFormXObject(t,o,s,n,r,a.state.clone(),i)}handleTransferFunction(e){let t;if(Array.isArray(e))t=e;else{if(!(0,d.isPDFFunction)(e))return null;t=[e]}const n=[];let r=0,a=0;for(const e of t){const t=this.xref.fetchIfRef(e);if(r++,(0,i.isName)(t,"Identity")){n.push(null);continue}if(!(0,d.isPDFFunction)(t))return null;const o=this._pdfFunctionFactory.create(t),s=new Uint8Array(256),c=new Float32Array(1);for(let e=0;e<256;e++)c[0]=e/255,o(c,0,c,0),s[e]=255*c[0]|0;n.push(s),a++}return 1!==r&&4!==r||0===a?null:n}handleTilingType(e,t,n,a,o,s,c,l,u){const d=new x.OperatorList,f=i.Dict.merge({xref:this.xref,dictArray:[o.get("Resources"),n]});return this.getOperatorList({stream:a,task:c,resources:f,operatorList:d}).then((function(){const n=d.getIR(),r=(0,h.getTilingPatternIR)(n,o,t);s.addDependencies(d.dependencies),s.addOp(e,r),l&&u.set(l,o.objId,{operatorListIR:n,dict:o})})).catch((e=>{if(!(e instanceof r.AbortException)){if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorTilingPattern}),void(0,r.warn)(`handleTilingType - ignoring pattern: "${e}".`);throw e}}))}handleSetFont(e,t,n,a,i,s,c=null){var l;return t&&(l=(t=t.slice())[0].name),this.loadFont(l,n,e,c).then((t=>t.font.isType3Font?t.loadType3Data(this,e,i).then((function(){return a.addDependencies(t.type3Dependencies),t})).catch((e=>(this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorFontLoadType3}),new I({loadedName:"g_font_error",font:new o.ErrorFont(`Type3 font load error: ${e}`),dict:t.font,extraProperties:this.options.fontExtraProperties})))):t)).then((e=>(s.font=e.font,e.send(this.handler),e.loadedName)))}handleText(e,t){const n=t.font,a=n.charsToGlyphs(e);return n.data&&(t.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG||"Pattern"===t.fillColorSpace.name||n.disableFontFace||this.options.disableFontFace)&&E.buildFontPaths(n,a,this.handler),a}ensureStateFont(e){if(e.font)return;const t=new r.FormatError("Missing setFont (Tf) operator before text rendering operator.");if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorFontState}),void(0,r.warn)(`ensureStateFont: "${t}".`);throw t}async setGState({resources:e,gState:t,operatorList:n,cacheKey:a,task:o,stateManager:s,localGStateCache:c,localColorSpaceCache:l}){const u=t.objId;let h=!0;for(var d=[],f=t.getKeys(),p=Promise.resolve(),g=0,m=f.length;g<m;g++){const a=f[g],c=t.get(a);switch(a){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":d.push([a,c]);break;case"Font":h=!1,p=p.then((()=>this.handleSetFont(e,null,c[0],n,o,s.state).then((function(e){n.addDependency(e),d.push([a,[e,c[1]]])}))));break;case"BM":d.push([a,A(c)]);break;case"SMask":if((0,i.isName)(c,"None")){d.push([a,!1]);break}(0,i.isDict)(c)?(h=!1,p=p.then((()=>this.handleSMask(c,e,n,o,s,l))),d.push([a,!0])):(0,r.warn)("Unsupported SMask type");break;case"TR":const t=this.handleTransferFunction(c);d.push([a,t]);break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":(0,r.info)("graphic state operator "+a);break;default:(0,r.info)("Unknown graphic state operator "+a)}}return p.then((function(){d.length>0&&n.addOp(r.OPS.setGState,[d]),h&&c.set(a,u,d)}))}loadFont(e,t,n,a=null){const s=async()=>new I({loadedName:"g_font_error",font:new o.ErrorFont(`Font "${e}" is not available.`),dict:t,extraProperties:this.options.fontExtraProperties});var c,l=this.xref;if(t){if(!(0,i.isRef)(t))throw new r.FormatError('The "font" object should be a reference.');c=t}else{var u=n.get("Font");u&&(c=u.getRaw(e))}if(!c){const n=`Font "${e||t&&t.toString()}" is not available`;if(!this.options.ignoreErrors&&!this.parsingType3Font)return(0,r.warn)(`${n}.`),s();this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorFontMissing}),(0,r.warn)(`${n} -- attempting to fallback to a default font.`),c=a||E.fallbackFontDict}if(this.fontCache.has(c))return this.fontCache.get(c);if(t=l.fetchIfRef(c),!(0,i.isDict)(t))return s();if(t.cacheKey&&this.fontCache.has(t.cacheKey))return this.fontCache.get(t.cacheKey);var h=(0,r.createPromiseCapability)();let d;try{d=this.preEvaluateFont(t)}catch(e){return(0,r.warn)(`loadFont - ignoring preEvaluateFont errors: "${e}".`),s()}const{descriptor:f,hash:p}=d;var g,m=(0,i.isRef)(c);if(m&&(g=`f${c.toString()}`),p&&(0,i.isDict)(f)){f.fontAliases||(f.fontAliases=Object.create(null));var v=f.fontAliases;if(v[p]){var b=v[p].aliasRef;if(m&&b&&this.fontCache.has(b))return this.fontCache.putAlias(c,b),this.fontCache.get(c)}else v[p]={fontID:this.idFactory.createFontId()};m&&(v[p].aliasRef=c),g=v[p].fontID}return m?this.fontCache.put(c,h.promise):(g||(g=this.idFactory.createFontId()),t.cacheKey=`cacheKey_${g}`,this.fontCache.put(t.cacheKey,h.promise)),(0,r.assert)(g&&g.startsWith("f"),'The "fontID" must be (correctly) defined.'),t.loadedName=`${this.idFactory.getDocId()}_${g}`,this.translateFont(d).then((e=>{void 0!==e.fontType&&(l.stats.fontTypes[e.fontType]=!0),h.resolve(new I({loadedName:t.loadedName,font:e,dict:t,extraProperties:this.options.fontExtraProperties}))})).catch((e=>{this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorFontTranslate});try{var n=f&&f.get("FontFile3"),a=n&&n.get("Subtype"),i=(0,o.getFontType)(d.type,a&&a.name);l.stats.fontTypes[i]=!0}catch(e){}h.resolve(new I({loadedName:t.loadedName,font:new o.ErrorFont(e instanceof Error?e.message:e),dict:t,extraProperties:this.options.fontExtraProperties}))})),h.promise}buildPath(e,t,n,a=!1){var i=e.length-1;if(n||(n=[]),i<0||e.fnArray[i]!==r.OPS.constructPath)a&&((0,r.warn)(`Encountered path operator "${t}" inside of a text object.`),e.addOp(r.OPS.save,null)),e.addOp(r.OPS.constructPath,[[t],n]),a&&e.addOp(r.OPS.restore,null);else{var o=e.argsArray[i];o[0].push(t),Array.prototype.push.apply(o[1],n)}}parseColorSpace({cs:e,resources:t,localColorSpaceCache:n}){return m.ColorSpace.parseAsync({cs:e,xref:this.xref,resources:t,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:n}).catch((e=>{if(e instanceof r.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorColorSpace}),(0,r.warn)(`parseColorSpace - ignoring ColorSpace: "${e}".`),null;throw e}))}handleColorN(e,t,n,a,o,s,l,u,d){const f=n.pop();if(f instanceof i.Name){const b=f.name,y=d.getByName(b);if(y)try{const r=a.base?a.base.getRgb(n,0):null,i=(0,h.getTilingPatternIR)(y.operatorListIR,y.dict,r);return void e.addOp(t,i)}catch(e){if(e instanceof c.MissingDataException)throw e}let w=o.get(b);if(w){var p=(0,i.isStream)(w)?w.dict:w,g=p.get("PatternType");if(1===g){const r=a.base?a.base.getRgb(n,0):null;return this.handleTilingType(t,r,s,w,p,e,l,b,d)}if(2===g){var m=p.get("Shading"),v=p.getArray("Matrix");return w=h.Pattern.parseShading(m,v,this.xref,s,this.handler,this._pdfFunctionFactory,u),void e.addOp(t,w.getIR())}throw new r.FormatError(`Unknown PatternType: ${g}`)}}throw new r.FormatError(`Unknown PatternName: ${f}`)}async parseMarkedContentProps(e,t){let n;if((0,i.isName)(e))n=t.get("Properties").get(e.name);else{if(!(0,i.isDict)(e))throw new r.FormatError("Optional content properties malformed.");n=e}const a=n.get("Type").name;if("OCG"===a)return{type:a,id:n.objId};if("OCMD"===a){const e=n.get("OCGs");if(Array.isArray(e)||(0,i.isDict)(e)){const t=[];Array.isArray(e)?n.get("OCGs").forEach((e=>{t.push(e.toString())})):t.push(e.objId);let r=null;return n.get("VE")&&(r=!0),{type:a,ids:t,policy:(0,i.isName)(n.get("P"))?n.get("P").name:null,expression:r}}if((0,i.isRef)(e))return{type:a,id:e.toString()}}return null}getOperatorList({stream:e,task:t,resources:n,operatorList:a,initialState:o=null,fallbackFontDict:s=null}){if(n=n||i.Dict.empty,o=o||new F,!a)throw new Error('getOperatorList: missing "operatorList" parameter');var c=this,l=this.xref;let u=!1;const d=new p.LocalImageCache,f=new p.LocalColorSpaceCache,g=new p.LocalGStateCache,v=new p.LocalTilingPatternCache;var b=n.get("XObject")||i.Dict.empty,y=n.get("Pattern")||i.Dict.empty,w=new T(o),x=new P(e,l,w),C=new _;function k(e){for(var t=0,n=x.savedStatesDepth;t<n;t++)a.addOp(r.OPS.restore,[])}return new Promise((function e(o,p){const A=function(t){Promise.all([t,a.ready]).then((function(){try{e(o,p)}catch(e){p(e)}}),p)};t.ensureNotTerminated(),C.reset();for(var _,E,I,T,R,F={};!(_=C.check())&&(F.args=null,x.read(F));){var P=F.args,D=F.fn;switch(0|D){case r.OPS.paintXObject:if(R=P[0].name){const e=d.getByName(R);if(e){a.addOp(e.fn,e.args),P=null;continue}}return void A(new Promise((function(e,o){if(!R)throw new r.FormatError("XObject must be referred to by name.");let s=b.getRaw(R);if(s instanceof i.Ref){const t=d.getByRef(s);if(t)return a.addOp(t.fn,t.args),void e();const n=c.globalImageCache.getData(s,c.pageIndex);if(n)return a.addDependency(n.objId),a.addOp(n.fn,n.args),void e();s=l.fetch(s)}if(!(0,i.isStream)(s))throw new r.FormatError("XObject should be a stream");const u=s.dict.get("Subtype");if(!(0,i.isName)(u))throw new r.FormatError("XObject should have a Name subtype");if("Form"===u.name)return w.save(),void c.buildFormXObject(n,s,null,a,t,w.state.clone(),f).then((function(){w.restore(),e()}),o);if("Image"!==u.name){if("PS"!==u.name)throw new r.FormatError(`Unhandled XObject subtype ${u.name}`);(0,r.info)("Ignored XObject subtype PS"),e()}else c.buildPaintImageXObject({resources:n,image:s,operatorList:a,cacheKey:R,localImageCache:d,localColorSpaceCache:f}).then(e,o)})).catch((function(e){if(!(e instanceof r.AbortException)){if(c.options.ignoreErrors)return c.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorXObject}),void(0,r.warn)(`getOperatorList - ignoring XObject: "${e}".`);throw e}})));case r.OPS.setFont:var O=P[1];return void A(c.handleSetFont(n,P,null,a,t,w.state,s).then((function(e){a.addDependency(e),a.addOp(r.OPS.setFont,[e,O])})));case r.OPS.beginText:u=!0;break;case r.OPS.endText:u=!1;break;case r.OPS.endInlineImage:var N=P[0].cacheKey;if(N){const e=d.getByName(N);if(e){a.addOp(e.fn,e.args),P=null;continue}}return void A(c.buildPaintImageXObject({resources:n,image:P[0],isInline:!0,operatorList:a,cacheKey:N,localImageCache:d,localColorSpaceCache:f}));case r.OPS.showText:if(!w.state.font){c.ensureStateFont(w.state);continue}P[0]=c.handleText(P[0],w.state);break;case r.OPS.showSpacedText:if(!w.state.font){c.ensureStateFont(w.state);continue}var M=P[0],L=[],B=M.length,U=w.state;for(E=0;E<B;++E){var j=M[E];(0,r.isString)(j)?Array.prototype.push.apply(L,c.handleText(j,U)):(0,r.isNum)(j)&&L.push(j)}P[0]=L,D=r.OPS.showText;break;case r.OPS.nextLineShowText:if(!w.state.font){c.ensureStateFont(w.state);continue}a.addOp(r.OPS.nextLine),P[0]=c.handleText(P[0],w.state),D=r.OPS.showText;break;case r.OPS.nextLineSetSpacingShowText:if(!w.state.font){c.ensureStateFont(w.state);continue}a.addOp(r.OPS.nextLine),a.addOp(r.OPS.setWordSpacing,[P.shift()]),a.addOp(r.OPS.setCharSpacing,[P.shift()]),P[0]=c.handleText(P[0],w.state),D=r.OPS.showText;break;case r.OPS.setTextRenderingMode:w.state.textRenderingMode=P[0];break;case r.OPS.setFillColorSpace:{const e=m.ColorSpace.getCached(P[0],l,f);if(e){w.state.fillColorSpace=e;continue}return void A(c.parseColorSpace({cs:P[0],resources:n,localColorSpaceCache:f}).then((function(e){e&&(w.state.fillColorSpace=e)})))}case r.OPS.setStrokeColorSpace:{const e=m.ColorSpace.getCached(P[0],l,f);if(e){w.state.strokeColorSpace=e;continue}return void A(c.parseColorSpace({cs:P[0],resources:n,localColorSpaceCache:f}).then((function(e){e&&(w.state.strokeColorSpace=e)})))}case r.OPS.setFillColor:P=(T=w.state.fillColorSpace).getRgb(P,0),D=r.OPS.setFillRGBColor;break;case r.OPS.setStrokeColor:P=(T=w.state.strokeColorSpace).getRgb(P,0),D=r.OPS.setStrokeRGBColor;break;case r.OPS.setFillGray:w.state.fillColorSpace=m.ColorSpace.singletons.gray,P=m.ColorSpace.singletons.gray.getRgb(P,0),D=r.OPS.setFillRGBColor;break;case r.OPS.setStrokeGray:w.state.strokeColorSpace=m.ColorSpace.singletons.gray,P=m.ColorSpace.singletons.gray.getRgb(P,0),D=r.OPS.setStrokeRGBColor;break;case r.OPS.setFillCMYKColor:w.state.fillColorSpace=m.ColorSpace.singletons.cmyk,P=m.ColorSpace.singletons.cmyk.getRgb(P,0),D=r.OPS.setFillRGBColor;break;case r.OPS.setStrokeCMYKColor:w.state.strokeColorSpace=m.ColorSpace.singletons.cmyk,P=m.ColorSpace.singletons.cmyk.getRgb(P,0),D=r.OPS.setStrokeRGBColor;break;case r.OPS.setFillRGBColor:w.state.fillColorSpace=m.ColorSpace.singletons.rgb,P=m.ColorSpace.singletons.rgb.getRgb(P,0);break;case r.OPS.setStrokeRGBColor:w.state.strokeColorSpace=m.ColorSpace.singletons.rgb,P=m.ColorSpace.singletons.rgb.getRgb(P,0);break;case r.OPS.setFillColorN:if("Pattern"===(T=w.state.fillColorSpace).name)return void A(c.handleColorN(a,r.OPS.setFillColorN,P,T,y,n,t,f,v));P=T.getRgb(P,0),D=r.OPS.setFillRGBColor;break;case r.OPS.setStrokeColorN:if("Pattern"===(T=w.state.strokeColorSpace).name)return void A(c.handleColorN(a,r.OPS.setStrokeColorN,P,T,y,n,t,f,v));P=T.getRgb(P,0),D=r.OPS.setStrokeRGBColor;break;case r.OPS.shadingFill:var q=n.get("Shading");if(!q)throw new r.FormatError("No shading resource found");var z=q.get(P[0].name);if(!z)throw new r.FormatError("No shading object found");P=[h.Pattern.parseShading(z,null,l,n,c.handler,c._pdfFunctionFactory,f).getIR()],D=r.OPS.shadingFill;break;case r.OPS.setGState:if(R=P[0].name){const e=g.getByName(R);if(e){e.length>0&&a.addOp(r.OPS.setGState,[e]),P=null;continue}}return void A(new Promise((function(e,o){if(!R)throw new r.FormatError("GState must be referred to by name.");const s=n.get("ExtGState");if(!(s instanceof i.Dict))throw new r.FormatError("ExtGState should be a dictionary.");const l=s.get(R);if(!(l instanceof i.Dict))throw new r.FormatError("GState should be a dictionary.");c.setGState({resources:n,gState:l,operatorList:a,cacheKey:R,task:t,stateManager:w,localGStateCache:g,localColorSpaceCache:f}).then(e,o)})).catch((function(e){if(!(e instanceof r.AbortException)){if(c.options.ignoreErrors)return c.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorExtGState}),void(0,r.warn)(`getOperatorList - ignoring ExtGState: "${e}".`);throw e}})));case r.OPS.moveTo:case r.OPS.lineTo:case r.OPS.curveTo:case r.OPS.curveTo2:case r.OPS.curveTo3:case r.OPS.closePath:case r.OPS.rectangle:c.buildPath(a,D,P,u);continue;case r.OPS.markPoint:case r.OPS.markPointProps:case r.OPS.beginCompat:case r.OPS.endCompat:continue;case r.OPS.beginMarkedContentProps:if(!(0,i.isName)(P[0])){(0,r.warn)(`Expected name for beginMarkedContentProps arg0=${P[0]}`);continue}if("OC"===P[0].name)return void A(c.parseMarkedContentProps(P[1],n).then((e=>{a.addOp(r.OPS.beginMarkedContentProps,["OC",e])})).catch((e=>{if(!(e instanceof r.AbortException)){if(c.options.ignoreErrors)return c.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorMarkedContent}),void(0,r.warn)(`getOperatorList - ignoring beginMarkedContentProps: "${e}".`);throw e}})));P=[P[0].name];break;case r.OPS.beginMarkedContent:case r.OPS.endMarkedContent:default:if(null!==P){for(E=0,I=P.length;E<I&&!(P[E]instanceof i.Dict);E++);if(E<I){(0,r.warn)("getOperatorList - ignoring operator: "+D);continue}}}a.addOp(D,P)}_?A(S):(k(),o())})).catch((e=>{if(!(e instanceof r.AbortException)){if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorOperatorList}),(0,r.warn)(`getOperatorList - ignoring errors during "${t.name}" task: "${e}".`),void k();throw e}}))}getTextContent({stream:e,task:t,resources:n,stateManager:a=null,normalizeWhitespace:o=!1,combineTextItems:s=!1,sink:c,seenStyles:u=Object.create(null)}){n=n||i.Dict.empty,a=a||new T(new R);var h=/\s/g,d={items:[],styles:Object.create(null)},f={initialized:!1,str:[],width:0,height:0,vertical:!1,lastAdvanceWidth:0,lastAdvanceHeight:0,textAdvanceScale:0,spaceWidth:0,fakeSpaceMin:1/0,fakeMultiSpaceMin:1/0,fakeMultiSpaceMax:-0,textRunBreakAllowed:!1,transform:null,fontName:null},m=this,v=this.xref,b=null;const y=new p.LocalImageCache,w=new p.LocalGStateCache;var x,C=new P(e,v,a);function k(){if(f.initialized)return f;var e=x.font;e.loadedName in u||(u[e.loadedName]=!0,d.styles[e.loadedName]={fontFamily:e.fallbackName,ascent:e.ascent,descent:e.descent,vertical:e.vertical}),f.fontName=e.loadedName;var t=[x.fontSize*x.textHScale,0,0,x.fontSize,0,x.textRise];if(e.isType3Font&&x.fontSize<=1&&!(0,r.isArrayEqual)(x.fontMatrix,r.FONT_IDENTITY_MATRIX)){const n=e.bbox[3]-e.bbox[1];n>0&&(t[3]*=n*x.fontMatrix[3])}var n=r.Util.transform(x.ctm,r.Util.transform(x.textMatrix,t));f.transform=n,e.vertical?(f.width=Math.sqrt(n[0]*n[0]+n[1]*n[1]),f.height=0,f.vertical=!0):(f.width=0,f.height=Math.sqrt(n[2]*n[2]+n[3]*n[3]),f.vertical=!1);var a=x.textLineMatrix[0],i=x.textLineMatrix[1],o=Math.sqrt(a*a+i*i);a=x.ctm[0],i=x.ctm[1];var s=Math.sqrt(a*a+i*i);f.textAdvanceScale=s*o,f.lastAdvanceWidth=0,f.lastAdvanceHeight=0;var c=e.spaceWidth/1e3*x.fontSize;return c?(f.spaceWidth=c,f.fakeSpaceMin=.3*c,f.fakeMultiSpaceMin=1.5*c,f.fakeMultiSpaceMax=4*c,f.textRunBreakAllowed=!e.isMonospace):(f.spaceWidth=0,f.fakeSpaceMin=1/0,f.fakeMultiSpaceMin=1/0,f.fakeMultiSpaceMax=0,f.textRunBreakAllowed=!1),f.initialized=!0,f}function A(e){for(var t,n=0,r=e.length;n<r&&(t=e.charCodeAt(n))>=32&&t<=127;)n++;return n<r?e.replace(h," "):e}function E(e,t){return m.loadFont(e,t,n).then((function(e){x.font=e.font,x.fontMatrix=e.font.fontMatrix||r.FONT_IDENTITY_MATRIX}))}function I(e){for(var t=x.font,n=k(),r=0,a=0,i=t.charsToGlyphs(e),o=0;o<i.length;o++){var s,c=i[o];s=t.vertical&&c.vmetric?c.vmetric[0]:c.width;var u=c.unicode,h=(0,l.getNormalizedUnicodes)();void 0!==h[u]&&(u=h[u]),u=(0,l.reverseIfRtl)(u);var d=x.charSpacing;if(c.isSpace){var f=x.wordSpacing;d+=f,f>0&&F(f,n.str)}var p=0,g=0;t.vertical?a+=g=s*x.fontMatrix[0]*x.fontSize+d:r+=p=(s*x.fontMatrix[0]*x.fontSize+d)*x.textHScale,x.translateTextMatrix(p,g),n.str.push(u)}return t.vertical?(n.lastAdvanceHeight=a,n.height+=Math.abs(a)):(n.lastAdvanceWidth=r,n.width+=r),n}function F(e,t){if(!(e<f.fakeSpaceMin))if(e<f.fakeMultiSpaceMin)t.push(" ");else for(var n=Math.round(e/f.spaceWidth);n-- >0;)t.push(" ")}function D(){var e,t,n;f.initialized&&(f.vertical?f.height*=f.textAdvanceScale:f.width*=f.textAdvanceScale,d.items.push((t=(e=f).str.join(""),n=(0,g.bidi)(t,-1,e.vertical),{str:o?A(n.str):n.str,dir:n.dir,width:e.width,height:e.height,transform:e.transform,fontName:e.fontName})),f.initialized=!1,f.str.length=0)}function O(){const e=d.items.length;e>0&&(c.enqueue(d,e),d.items=[],d.styles=Object.create(null))}var N=new _;return new Promise((function e(l,h){const p=function(t){O(),Promise.all([t,c.ready]).then((function(){try{e(l,h)}catch(e){h(e)}}),h)};t.ensureNotTerminated(),N.reset();for(var g,A={},_=[];!(g=N.check())&&(_.length=0,A.args=_,C.read(A));){x=a.state;var R,P=A.fn;switch(_=A.args,0|P){case r.OPS.setFont:var M=_[0].name,L=_[1];if(x.font&&M===x.fontName&&L===x.fontSize)break;return D(),x.fontName=M,x.fontSize=L,void p(E(M,null));case r.OPS.setTextRise:D(),x.textRise=_[0];break;case r.OPS.setHScale:D(),x.textHScale=_[0]/100;break;case r.OPS.setLeading:D(),x.leading=_[0];break;case r.OPS.moveText:var B=!!x.font&&0===(x.font.vertical?_[0]:_[1]);if(R=_[0]-_[1],s&&B&&f.initialized&&R>0&&R<=f.fakeMultiSpaceMax){x.translateTextLineMatrix(_[0],_[1]),f.width+=_[0]-f.lastAdvanceWidth,f.height+=_[1]-f.lastAdvanceHeight,F(_[0]-f.lastAdvanceWidth-(_[1]-f.lastAdvanceHeight),f.str);break}D(),x.translateTextLineMatrix(_[0],_[1]),x.textMatrix=x.textLineMatrix.slice();break;case r.OPS.setLeadingMoveText:D(),x.leading=-_[1],x.translateTextLineMatrix(_[0],_[1]),x.textMatrix=x.textLineMatrix.slice();break;case r.OPS.nextLine:D(),x.carriageReturn();break;case r.OPS.setTextMatrix:if(R=x.calcTextLineMatrixAdvance(_[0],_[1],_[2],_[3],_[4],_[5]),s&&null!==R&&f.initialized&&R.value>0&&R.value<=f.fakeMultiSpaceMax){x.translateTextLineMatrix(R.width,R.height),f.width+=R.width-f.lastAdvanceWidth,f.height+=R.height-f.lastAdvanceHeight,F(R.width-f.lastAdvanceWidth-(R.height-f.lastAdvanceHeight),f.str);break}D(),x.setTextMatrix(_[0],_[1],_[2],_[3],_[4],_[5]),x.setTextLineMatrix(_[0],_[1],_[2],_[3],_[4],_[5]);break;case r.OPS.setCharSpacing:x.charSpacing=_[0];break;case r.OPS.setWordSpacing:x.wordSpacing=_[0];break;case r.OPS.beginText:D(),x.textMatrix=r.IDENTITY_MATRIX.slice(),x.textLineMatrix=r.IDENTITY_MATRIX.slice();break;case r.OPS.showSpacedText:if(!a.state.font){m.ensureStateFont(a.state);continue}for(var U,j=_[0],q=0,z=j.length;q<z;q++)if("string"==typeof j[q])I(j[q]);else if((0,r.isNum)(j[q])){k(),R=j[q]*x.fontSize/1e3;var W=!1;x.font.vertical?(U=R,x.translateTextMatrix(0,U),(W=f.textRunBreakAllowed&&R>f.fakeMultiSpaceMax)||(f.height+=U)):(U=(R=-R)*x.textHScale,x.translateTextMatrix(U,0),(W=f.textRunBreakAllowed&&R>f.fakeMultiSpaceMax)||(f.width+=U)),W?D():R>0&&F(R,f.str)}break;case r.OPS.showText:if(!a.state.font){m.ensureStateFont(a.state);continue}I(_[0]);break;case r.OPS.nextLineShowText:if(!a.state.font){m.ensureStateFont(a.state);continue}D(),x.carriageReturn(),I(_[0]);break;case r.OPS.nextLineSetSpacingShowText:if(!a.state.font){m.ensureStateFont(a.state);continue}D(),x.wordSpacing=_[0],x.charSpacing=_[1],x.carriageReturn(),I(_[2]);break;case r.OPS.paintXObject:D(),b||(b=n.get("XObject")||i.Dict.empty);var G=_[0].name;if(G&&y.getByName(G))break;return void p(new Promise((function(e,l){if(!G)throw new r.FormatError("XObject must be referred to by name.");let h=b.getRaw(G);if(h instanceof i.Ref){if(y.getByRef(h))return void e();h=v.fetch(h)}if(!(0,i.isStream)(h))throw new r.FormatError("XObject should be a stream");const d=h.dict.get("Subtype");if(!(0,i.isName)(d))throw new r.FormatError("XObject should have a Name subtype");if("Form"!==d.name)return y.set(G,h.dict.objId,!0),void e();const f=a.state.clone(),p=new T(f),g=h.dict.getArray("Matrix");Array.isArray(g)&&6===g.length&&p.transform(g),O();const w={enqueueInvoked:!1,enqueue(e,t){this.enqueueInvoked=!0,c.enqueue(e,t)},get desiredSize(){return c.desiredSize},get ready(){return c.ready}};m.getTextContent({stream:h,task:t,resources:h.dict.get("Resources")||n,stateManager:p,normalizeWhitespace:o,combineTextItems:s,sink:w,seenStyles:u}).then((function(){w.enqueueInvoked||y.set(G,h.dict.objId,!0),e()}),l)})).catch((function(e){if(!(e instanceof r.AbortException)){if(!m.options.ignoreErrors)throw e;(0,r.warn)(`getTextContent - ignoring XObject: "${e}".`)}})));case r.OPS.setGState:if((G=_[0].name)&&w.getByName(G))break;return void p(new Promise((function(e,t){if(!G)throw new r.FormatError("GState must be referred to by name.");const a=n.get("ExtGState");if(!(a instanceof i.Dict))throw new r.FormatError("ExtGState should be a dictionary.");const o=a.get(G);if(!(o instanceof i.Dict))throw new r.FormatError("GState should be a dictionary.");const s=o.get("Font");if(!s)return w.set(G,o.objId,!0),void e();D(),x.fontName=null,x.fontSize=s[1],E(null,s[0]).then(e,t)})).catch((function(e){if(!(e instanceof r.AbortException)){if(!m.options.ignoreErrors)throw e;(0,r.warn)(`getTextContent - ignoring ExtGState: "${e}".`)}})))}if(d.items.length>=c.desiredSize){g=!0;break}}g?p(S):(D(),O(),l())})).catch((e=>{if(!(e instanceof r.AbortException)){if(this.options.ignoreErrors)return(0,r.warn)(`getTextContent - ignoring errors during "${t.name}" task: "${e}".`),D(),void O();throw e}}))}extractDataStructures(e,t,n){const a=this.xref;let c;var l=e.get("ToUnicode")||t.get("ToUnicode"),u=l?this.readToUnicode(l):Promise.resolve(void 0);if(n.composite){var h=e.get("CIDSystemInfo");(0,i.isDict)(h)&&(n.cidSystemInfo={registry:(0,r.stringToPDFString)(h.get("Registry")),ordering:(0,r.stringToPDFString)(h.get("Ordering")),supplement:h.get("Supplement")});var d=e.get("CIDToGIDMap");(0,i.isStream)(d)&&(c=d.getBytes())}var f,p=[],g=null;if(e.has("Encoding")){if(f=e.get("Encoding"),(0,i.isDict)(f)){if(g=f.get("BaseEncoding"),g=(0,i.isName)(g)?g.name:null,f.has("Differences"))for(var m=f.get("Differences"),v=0,b=0,y=m.length;b<y;b++){var w=a.fetchIfRef(m[b]);if((0,r.isNum)(w))v=w;else{if(!(0,i.isName)(w))throw new r.FormatError(`Invalid entry in 'Differences' array: ${w}`);p[v++]=w.name}}}else{if(!(0,i.isName)(f))throw new r.FormatError("Encoding is not a Name nor a Dict");g=f.name}"MacRomanEncoding"!==g&&"MacExpertEncoding"!==g&&"WinAnsiEncoding"!==g&&(g=null)}if(g)n.defaultEncoding=(0,s.getEncoding)(g).slice();else{var x=!!(n.flags&o.FontFlags.Symbolic),C=!!(n.flags&o.FontFlags.Nonsymbolic);f=s.StandardEncoding,"TrueType"!==n.type||C||(f=s.WinAnsiEncoding),x&&(f=s.MacRomanEncoding,n.file||(/Symbol/i.test(n.name)?f=s.SymbolSetEncoding:/Dingbats|Wingdings/i.test(n.name)&&(f=s.ZapfDingbatsEncoding))),n.defaultEncoding=f}return n.differences=p,n.baseEncodingName=g,n.hasEncoding=!!g||p.length>0,n.dict=e,u.then((e=>(n.toUnicode=e,this.buildToUnicode(n)))).then((e=>(n.toUnicode=e,c&&(n.cidToGidMap=this.readCidToGidMap(c,e)),n)))}_buildSimpleFontToUnicode(e,t=!1){(0,r.assert)(!e.composite,"Must be a simple font.");const n=[],a=e.defaultEncoding.slice(),i=e.baseEncodingName,c=e.differences;for(const e in c){const t=c[e];".notdef"!==t&&(a[e]=t)}const u=(0,b.getGlyphsUnicode)();for(const r in a){let o=a[r];if(""!==o)if(void 0!==u[o])n[r]=String.fromCharCode(u[o]);else{let a=0;switch(o[0]){case"G":3===o.length&&(a=parseInt(o.substring(1),16));break;case"g":5===o.length&&(a=parseInt(o.substring(1),16));break;case"C":case"c":if(o.length>=3&&o.length<=4){const n=o.substring(1);if(t){a=parseInt(n,16);break}if(a=+n,Number.isNaN(a)&&Number.isInteger(parseInt(n,16)))return this._buildSimpleFontToUnicode(e,!0)}break;default:const n=(0,l.getUnicodeForGlyph)(o,u);-1!==n&&(a=n)}if(a>0&&a<=1114111&&Number.isInteger(a)){if(i&&a===+r){const e=(0,s.getEncoding)(i);if(e&&(o=e[r])){n[r]=String.fromCharCode(u[o]);continue}}n[r]=String.fromCodePoint(a)}}}return new o.ToUnicodeMap(n)}buildToUnicode(e){if(e.hasIncludedToUnicodeMap=!!e.toUnicode&&e.toUnicode.length>0,e.hasIncludedToUnicodeMap)return!e.composite&&e.hasEncoding&&(e.fallbackToUnicode=this._buildSimpleFontToUnicode(e)),Promise.resolve(e.toUnicode);if(!e.composite)return Promise.resolve(this._buildSimpleFontToUnicode(e));if(e.composite&&(e.cMap.builtInCMap&&!(e.cMap instanceof a.IdentityCMap)||"Adobe"===e.cidSystemInfo.registry&&("GB1"===e.cidSystemInfo.ordering||"CNS1"===e.cidSystemInfo.ordering||"Japan1"===e.cidSystemInfo.ordering||"Korea1"===e.cidSystemInfo.ordering))){const t=e.cidSystemInfo.registry,n=e.cidSystemInfo.ordering,s=i.Name.get(t+"-"+n+"-UCS2");return a.CMapFactory.create({encoding:s,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(t){const n=e.cMap,a=[];return n.forEach((function(e,n){if(n>65535)throw new r.FormatError("Max size of CID is 65,535");const i=t.lookup(n);i&&(a[e]=String.fromCharCode((i.charCodeAt(0)<<8)+i.charCodeAt(1)))})),new o.ToUnicodeMap(a)}))}return Promise.resolve(new o.IdentityToUnicodeMap(e.firstChar,e.lastChar))}readToUnicode(e){var t=e;return(0,i.isName)(t)?a.CMapFactory.create({encoding:t,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(e){return e instanceof a.IdentityCMap?new o.IdentityToUnicodeMap(0,65535):new o.ToUnicodeMap(e.getMap())})):(0,i.isStream)(t)?a.CMapFactory.create({encoding:t,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(e){if(e instanceof a.IdentityCMap)return new o.IdentityToUnicodeMap(0,65535);var t=new Array(e.length);return e.forEach((function(e,n){for(var r=[],a=0;a<n.length;a+=2){var i=n.charCodeAt(a)<<8|n.charCodeAt(a+1);if(55296==(63488&i)){a+=2;var o=n.charCodeAt(a)<<8|n.charCodeAt(a+1);r.push(((1023&i)<<10)+(1023&o)+65536)}else r.push(i)}t[e]=String.fromCodePoint.apply(String,r)})),new o.ToUnicodeMap(t)}),(e=>{if(e instanceof r.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.errorFontToUnicode}),(0,r.warn)(`readToUnicode - ignoring ToUnicode data: "${e}".`),null;throw e})):Promise.resolve(null)}readCidToGidMap(e,t){for(var n=[],r=0,a=e.length;r<a;r++){var i=e[r++]<<8|e[r];const a=r>>1;(0!==i||t.has(a))&&(n[a]=i)}return n}extractWidths(e,t,n){var r,a,s,c,l,u,h,d,f=this.xref,p=[],g=0,m=[];if(n.composite){if(g=e.has("DW")?e.get("DW"):1e3,d=e.get("W"))for(a=0,s=d.length;a<s;a++)if(u=f.fetchIfRef(d[a++]),h=f.fetchIfRef(d[a]),Array.isArray(h))for(c=0,l=h.length;c<l;c++)p[u++]=f.fetchIfRef(h[c]);else{var v=f.fetchIfRef(d[++a]);for(c=u;c<=h;c++)p[c]=v}if(n.vertical){var b=e.getArray("DW2")||[880,-1e3];if(r=[b[1],.5*g,b[0]],b=e.get("W2"))for(a=0,s=b.length;a<s;a++)if(u=f.fetchIfRef(b[a++]),h=f.fetchIfRef(b[a]),Array.isArray(h))for(c=0,l=h.length;c<l;c++)m[u++]=[f.fetchIfRef(h[c++]),f.fetchIfRef(h[c++]),f.fetchIfRef(h[c])];else{var y=[f.fetchIfRef(b[++a]),f.fetchIfRef(b[++a]),f.fetchIfRef(b[++a])];for(c=u;c<=h;c++)m[c]=y}}}else{var w=n.firstChar;if(d=e.get("Widths")){for(c=w,a=0,s=d.length;a<s;a++)p[c++]=f.fetchIfRef(d[a]);g=parseFloat(t.get("MissingWidth"))||0}else{var x=e.get("BaseFont");if((0,i.isName)(x)){var C=this.getBaseFontMetrics(x.name);p=this.buildCharCodeToWidth(C.widths,n),g=C.defaultWidth}}}var k=!0,S=g;for(var A in p){var _=p[A];if(_)if(S){if(S!==_){k=!1;break}}else S=_}k&&(n.flags|=o.FontFlags.FixedPitch),n.defaultWidth=g,n.widths=p,n.defaultVMetrics=r,n.vmetrics=m}isSerifFont(e){var t=e.split("-")[0];return t in(0,u.getSerifFonts)()||-1!==t.search(/serif/gi)}getBaseFontMetrics(e){var t=0,n=[],a=!1,i=(0,u.getStdFontMap)()[e]||e,o=(0,y.getMetrics)();i in o||(i=this.isSerifFont(e)?"Times-Roman":"Helvetica");var s=o[i];return(0,r.isNum)(s)?(t=s,a=!0):n=s(),{defaultWidth:t,monospace:a,widths:n}}buildCharCodeToWidth(e,t){for(var n=Object.create(null),r=t.differences,a=t.defaultEncoding,i=0;i<256;i++)i in r&&e[r[i]]?n[i]=e[r[i]]:i in a&&e[a[i]]&&(n[i]=e[a[i]]);return n}preEvaluateFont(e){var t=e,n=e.get("Subtype");if(!(0,i.isName)(n))throw new r.FormatError("invalid font Subtype");var a,o=!1;if("Type0"===n.name){var s=e.get("DescendantFonts");if(!s)throw new r.FormatError("Descendant fonts are not specified");if(!((e=Array.isArray(s)?this.xref.fetchIfRef(s[0]):s)instanceof i.Dict))throw new r.FormatError("Descendant font is not a dictionary.");if(n=e.get("Subtype"),!(0,i.isName)(n))throw new r.FormatError("invalid font Subtype");o=!0}var c=e.get("FontDescriptor");if(c){var l=new w.MurmurHash3_64,u=t.getRaw("Encoding");if((0,i.isName)(u))l.update(u.name);else if((0,i.isRef)(u))l.update(u.toString());else if((0,i.isDict)(u))for(const e of u.getRawValues())if((0,i.isName)(e))l.update(e.name);else if((0,i.isRef)(e))l.update(e.toString());else if(Array.isArray(e)){for(var h=e.length,d=new Array(h),f=0;f<h;f++){var p=e[f];(0,i.isName)(p)?d[f]=p.name:((0,r.isNum)(p)||(0,i.isRef)(p))&&(d[f]=p.toString())}l.update(d.join())}const n=e.get("FirstChar")||0,s=e.get("LastChar")||(o?65535:255);l.update(`${n}-${s}`);var g=e.get("ToUnicode")||t.get("ToUnicode");if((0,i.isStream)(g)){var m=g.str||g;a=m.buffer?new Uint8Array(m.buffer.buffer,0,m.bufferLength):new Uint8Array(m.bytes.buffer,m.start,m.end-m.start),l.update(a)}else(0,i.isName)(g)&&l.update(g.name);var v=e.get("Widths")||t.get("Widths");v&&(a=new Uint8Array(new Uint32Array(v).buffer),l.update(a))}return{descriptor:c,dict:e,baseDict:t,composite:o,type:n.name,hash:l?l.hexdigest():""}}async translateFont(e){var t,n=e.baseDict,s=e.dict,c=e.composite,l=e.descriptor,h=e.type,d=c?65535:255;const f=s.get("FirstChar")||0,p=s.get("LastChar")||d;if(!l){if("Type3"!==h){var g=s.get("BaseFont");if(!(0,i.isName)(g))throw new r.FormatError("Base font is not specified");g=g.name.replace(/[,_]/g,"-");var m=this.getBaseFontMetrics(g),v=g.split("-")[0],b=(this.isSerifFont(v)?o.FontFlags.Serif:0)|(m.monospace?o.FontFlags.FixedPitch:0)|((0,u.getSymbolsFonts)()[v]?o.FontFlags.Symbolic:o.FontFlags.Nonsymbolic);t={type:h,name:g,widths:m.widths,defaultWidth:m.defaultWidth,flags:b,firstChar:f,lastChar:p};const e=s.get("Widths");return this.extractDataStructures(s,s,t).then((t=>{if(e){const n=[];let r=f;for(let t=0,a=e.length;t<a;t++)n[r++]=this.xref.fetchIfRef(e[t]);t.widths=n}else t.widths=this.buildCharCodeToWidth(m.widths,t);return new o.Font(g,null,t)}))}(l=new i.Dict(null)).set("FontName",i.Name.get(h)),l.set("FontBBox",s.getArray("FontBBox")||[0,0,0,0])}var y=l.get("FontName"),w=s.get("BaseFont");if((0,r.isString)(y)&&(y=i.Name.get(y)),(0,r.isString)(w)&&(w=i.Name.get(w)),"Type3"!==h){var x=y&&y.name,C=w&&w.name;x!==C&&((0,r.info)(`The FontDescriptor's FontName is "${x}" but should be the same as the Font's BaseFont "${C}".`),x&&C&&C.startsWith(x)&&(y=w))}if(y=y||w,!(0,i.isName)(y))throw new r.FormatError("invalid font name");var k=l.get("FontFile","FontFile2","FontFile3");if(k&&k.dict){var S=k.dict.get("Subtype");S&&(S=S.name);var A=k.dict.get("Length1"),_=k.dict.get("Length2"),E=k.dict.get("Length3")}if(t={type:h,name:y.name,subtype:S,file:k,length1:A,length2:_,length3:E,loadedName:n.loadedName,composite:c,fixedPitch:!1,fontMatrix:s.getArray("FontMatrix")||r.FONT_IDENTITY_MATRIX,firstChar:f||0,lastChar:p||d,bbox:l.getArray("FontBBox"),ascent:l.get("Ascent"),descent:l.get("Descent"),xHeight:l.get("XHeight"),capHeight:l.get("CapHeight"),flags:l.get("Flags"),italicAngle:l.get("ItalicAngle"),isType3Font:!1},c){const e=n.get("Encoding");(0,i.isName)(e)&&(t.cidEncoding=e.name);const r=await a.CMapFactory.create({encoding:e,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});t.cMap=r,t.vertical=t.cMap.vertical}return this.extractDataStructures(s,n,t).then((e=>(this.extractWidths(s,l,e),"Type3"===h&&(e.isType3Font=!0),new o.Font(y.name,k,e))))}static buildFontPaths(e,t,n){function r(t){e.renderer.hasBuiltPath(t)||n.send("commonobj",[`${e.loadedName}_path_${t}`,"FontPath",e.renderer.getPathJs(t)])}for(const e of t){r(e.fontChar);const t=e.accent;t&&t.fontChar&&r(t.fontChar)}}static get fallbackFontDict(){const e=new i.Dict;return e.set("BaseFont",i.Name.get("PDFJS-FallbackFont")),e.set("Type",i.Name.get("FallbackType")),e.set("Subtype",i.Name.get("FallbackType")),e.set("Encoding",i.Name.get("WinAnsiEncoding")),(0,r.shadow)(this,"fallbackFontDict",e)}}t.PartialEvaluator=E;class I{constructor({loadedName:e,font:t,dict:n,extraProperties:r=!1}){this.loadedName=e,this.font=t,this.dict=n,this._extraProperties=r,this.type3Loaded=null,this.type3Dependencies=t.isType3Font?new Set:null,this.sent=!1}send(e){this.sent||(this.sent=!0,e.send("commonobj",[this.loadedName,"Font",this.font.exportData(this._extraProperties)]))}fallback(e){if(!this.font.data)return;this.font.disableFontFace=!0;const t=this.font.glyphCacheValues;E.buildFontPaths(this.font,t,e)}loadType3Data(e,t,n){if(this.type3Loaded)return this.type3Loaded;if(!this.font.isType3Font)throw new Error("Must be a Type3 font.");var a=Object.create(e.options);a.ignoreErrors=!1;var i=e.clone(a);i.parsingType3Font=!0;const o=this.font,s=this.type3Dependencies;var c=Promise.resolve(),l=this.dict.get("CharProcs"),u=this.dict.get("Resources")||t,h=Object.create(null);for(const e of l.getKeys())c=c.then((()=>{var t=l.get(e),a=new x.OperatorList;return i.getOperatorList({stream:t,task:n,resources:u,operatorList:a}).then((()=>{a.fnArray[0]===r.OPS.setCharWidthAndBounds&&this._removeType3ColorOperators(a),h[e]=a.getIR();for(const e of a.dependencies)s.add(e)})).catch((function(t){(0,r.warn)(`Type3 font resource "${e}" is not available.`);const n=new x.OperatorList;h[e]=n.getIR()}))}));return this.type3Loaded=c.then((function(){o.charProcOperatorList=h})),this.type3Loaded}_removeType3ColorOperators(e){let t=1,n=e.length;for(;t<n;){switch(e.fnArray[t]){case r.OPS.setStrokeColorSpace:case r.OPS.setFillColorSpace:case r.OPS.setStrokeColor:case r.OPS.setStrokeColorN:case r.OPS.setFillColor:case r.OPS.setFillColorN:case r.OPS.setStrokeGray:case r.OPS.setFillGray:case r.OPS.setStrokeRGBColor:case r.OPS.setFillRGBColor:case r.OPS.setStrokeCMYKColor:case r.OPS.setFillCMYKColor:case r.OPS.shadingFill:case r.OPS.setRenderingIntent:e.fnArray.splice(t,1),e.argsArray.splice(t,1),n--;continue;case r.OPS.setGState:const[a]=e.argsArray[t];let i=0,o=a.length;for(;i<o;){const[e]=a[i];switch(e){case"TR":case"TR2":case"HT":case"BG":case"BG2":case"UCR":case"UCR2":a.splice(i,1),o--;continue}i++}}t++}}}class T{constructor(e=new F){this.state=e,this.stateStack=[]}save(){var e=this.state;this.stateStack.push(this.state),this.state=e.clone()}restore(){var e=this.stateStack.pop();e&&(this.state=e)}transform(e){this.state.ctm=r.Util.transform(this.state.ctm,e)}}class R{constructor(){this.ctm=new Float32Array(r.IDENTITY_MATRIX),this.fontName=null,this.fontSize=0,this.font=null,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.textMatrix=r.IDENTITY_MATRIX.slice(),this.textLineMatrix=r.IDENTITY_MATRIX.slice(),this.charSpacing=0,this.wordSpacing=0,this.leading=0,this.textHScale=1,this.textRise=0}setTextMatrix(e,t,n,r,a,i){var o=this.textMatrix;o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=a,o[5]=i}setTextLineMatrix(e,t,n,r,a,i){var o=this.textLineMatrix;o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=a,o[5]=i}translateTextMatrix(e,t){var n=this.textMatrix;n[4]=n[0]*e+n[2]*t+n[4],n[5]=n[1]*e+n[3]*t+n[5]}translateTextLineMatrix(e,t){var n=this.textLineMatrix;n[4]=n[0]*e+n[2]*t+n[4],n[5]=n[1]*e+n[3]*t+n[5]}calcTextLineMatrixAdvance(e,t,n,r,a,i){var o=this.font;if(!o)return null;var s=this.textLineMatrix;if(e!==s[0]||t!==s[1]||n!==s[2]||r!==s[3])return null;var c=a-s[4],l=i-s[5];if(o.vertical&&0!==c||!o.vertical&&0!==l)return null;var u,h,d=e*r-t*n;return o.vertical?(u=-l*n/d,h=l*e/d):(u=c*r/d,h=-c*t/d),{width:u,height:h,value:o.vertical?h:u}}calcRenderMatrix(e){var t=[this.fontSize*this.textHScale,0,0,this.fontSize,0,this.textRise];return r.Util.transform(e,r.Util.transform(this.textMatrix,t))}carriageReturn(){this.translateTextLineMatrix(0,-this.leading),this.textMatrix=this.textLineMatrix.slice()}clone(){var e=Object.create(this);return e.textMatrix=this.textMatrix.slice(),e.textLineMatrix=this.textLineMatrix.slice(),e.fontMatrix=this.fontMatrix.slice(),e}}class F{constructor(){this.ctm=new Float32Array(r.IDENTITY_MATRIX),this.font=null,this.textRenderingMode=r.TextRenderingMode.FILL,this.fillColorSpace=m.ColorSpace.singletons.gray,this.strokeColorSpace=m.ColorSpace.singletons.gray}clone(){return Object.create(this)}}class P{static get opMap(){const e=(0,c.getLookupTableFactory)((function(e){e.w={id:r.OPS.setLineWidth,numArgs:1,variableArgs:!1},e.J={id:r.OPS.setLineCap,numArgs:1,variableArgs:!1},e.j={id:r.OPS.setLineJoin,numArgs:1,variableArgs:!1},e.M={id:r.OPS.setMiterLimit,numArgs:1,variableArgs:!1},e.d={id:r.OPS.setDash,numArgs:2,variableArgs:!1},e.ri={id:r.OPS.setRenderingIntent,numArgs:1,variableArgs:!1},e.i={id:r.OPS.setFlatness,numArgs:1,variableArgs:!1},e.gs={id:r.OPS.setGState,numArgs:1,variableArgs:!1},e.q={id:r.OPS.save,numArgs:0,variableArgs:!1},e.Q={id:r.OPS.restore,numArgs:0,variableArgs:!1},e.cm={id:r.OPS.transform,numArgs:6,variableArgs:!1},e.m={id:r.OPS.moveTo,numArgs:2,variableArgs:!1},e.l={id:r.OPS.lineTo,numArgs:2,variableArgs:!1},e.c={id:r.OPS.curveTo,numArgs:6,variableArgs:!1},e.v={id:r.OPS.curveTo2,numArgs:4,variableArgs:!1},e.y={id:r.OPS.curveTo3,numArgs:4,variableArgs:!1},e.h={id:r.OPS.closePath,numArgs:0,variableArgs:!1},e.re={id:r.OPS.rectangle,numArgs:4,variableArgs:!1},e.S={id:r.OPS.stroke,numArgs:0,variableArgs:!1},e.s={id:r.OPS.closeStroke,numArgs:0,variableArgs:!1},e.f={id:r.OPS.fill,numArgs:0,variableArgs:!1},e.F={id:r.OPS.fill,numArgs:0,variableArgs:!1},e["f*"]={id:r.OPS.eoFill,numArgs:0,variableArgs:!1},e.B={id:r.OPS.fillStroke,numArgs:0,variableArgs:!1},e["B*"]={id:r.OPS.eoFillStroke,numArgs:0,variableArgs:!1},e.b={id:r.OPS.closeFillStroke,numArgs:0,variableArgs:!1},e["b*"]={id:r.OPS.closeEOFillStroke,numArgs:0,variableArgs:!1},e.n={id:r.OPS.endPath,numArgs:0,variableArgs:!1},e.W={id:r.OPS.clip,numArgs:0,variableArgs:!1},e["W*"]={id:r.OPS.eoClip,numArgs:0,variableArgs:!1},e.BT={id:r.OPS.beginText,numArgs:0,variableArgs:!1},e.ET={id:r.OPS.endText,numArgs:0,variableArgs:!1},e.Tc={id:r.OPS.setCharSpacing,numArgs:1,variableArgs:!1},e.Tw={id:r.OPS.setWordSpacing,numArgs:1,variableArgs:!1},e.Tz={id:r.OPS.setHScale,numArgs:1,variableArgs:!1},e.TL={id:r.OPS.setLeading,numArgs:1,variableArgs:!1},e.Tf={id:r.OPS.setFont,numArgs:2,variableArgs:!1},e.Tr={id:r.OPS.setTextRenderingMode,numArgs:1,variableArgs:!1},e.Ts={id:r.OPS.setTextRise,numArgs:1,variableArgs:!1},e.Td={id:r.OPS.moveText,numArgs:2,variableArgs:!1},e.TD={id:r.OPS.setLeadingMoveText,numArgs:2,variableArgs:!1},e.Tm={id:r.OPS.setTextMatrix,numArgs:6,variableArgs:!1},e["T*"]={id:r.OPS.nextLine,numArgs:0,variableArgs:!1},e.Tj={id:r.OPS.showText,numArgs:1,variableArgs:!1},e.TJ={id:r.OPS.showSpacedText,numArgs:1,variableArgs:!1},e["'"]={id:r.OPS.nextLineShowText,numArgs:1,variableArgs:!1},e['"']={id:r.OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:!1},e.d0={id:r.OPS.setCharWidth,numArgs:2,variableArgs:!1},e.d1={id:r.OPS.setCharWidthAndBounds,numArgs:6,variableArgs:!1},e.CS={id:r.OPS.setStrokeColorSpace,numArgs:1,variableArgs:!1},e.cs={id:r.OPS.setFillColorSpace,numArgs:1,variableArgs:!1},e.SC={id:r.OPS.setStrokeColor,numArgs:4,variableArgs:!0},e.SCN={id:r.OPS.setStrokeColorN,numArgs:33,variableArgs:!0},e.sc={id:r.OPS.setFillColor,numArgs:4,variableArgs:!0},e.scn={id:r.OPS.setFillColorN,numArgs:33,variableArgs:!0},e.G={id:r.OPS.setStrokeGray,numArgs:1,variableArgs:!1},e.g={id:r.OPS.setFillGray,numArgs:1,variableArgs:!1},e.RG={id:r.OPS.setStrokeRGBColor,numArgs:3,variableArgs:!1},e.rg={id:r.OPS.setFillRGBColor,numArgs:3,variableArgs:!1},e.K={id:r.OPS.setStrokeCMYKColor,numArgs:4,variableArgs:!1},e.k={id:r.OPS.setFillCMYKColor,numArgs:4,variableArgs:!1},e.sh={id:r.OPS.shadingFill,numArgs:1,variableArgs:!1},e.BI={id:r.OPS.beginInlineImage,numArgs:0,variableArgs:!1},e.ID={id:r.OPS.beginImageData,numArgs:0,variableArgs:!1},e.EI={id:r.OPS.endInlineImage,numArgs:1,variableArgs:!1},e.Do={id:r.OPS.paintXObject,numArgs:1,variableArgs:!1},e.MP={id:r.OPS.markPoint,numArgs:1,variableArgs:!1},e.DP={id:r.OPS.markPointProps,numArgs:2,variableArgs:!1},e.BMC={id:r.OPS.beginMarkedContent,numArgs:1,variableArgs:!1},e.BDC={id:r.OPS.beginMarkedContentProps,numArgs:2,variableArgs:!1},e.EMC={id:r.OPS.endMarkedContent,numArgs:0,variableArgs:!1},e.BX={id:r.OPS.beginCompat,numArgs:0,variableArgs:!1},e.EX={id:r.OPS.endCompat,numArgs:0,variableArgs:!1},e.BM=null,e.BD=null,e.true=null,e.fa=null,e.fal=null,e.fals=null,e.false=null,e.nu=null,e.nul=null,e.null=null}));return(0,r.shadow)(this,"opMap",e())}static get MAX_INVALID_PATH_OPS(){return(0,r.shadow)(this,"MAX_INVALID_PATH_OPS",20)}constructor(e,t,n=new T){this.parser=new f.Parser({lexer:new f.Lexer(e,P.opMap),xref:t}),this.stateManager=n,this.nonProcessedArgs=[],this._numInvalidPathOPS=0}get savedStatesDepth(){return this.stateManager.stateStack.length}read(e){for(var t=e.args;;){var n=this.parser.getObj();if(n instanceof i.Cmd){var a=n.cmd,o=P.opMap[a];if(!o){(0,r.warn)(`Unknown command "${a}".`);continue}var s=o.id,c=o.numArgs,l=null!==t?t.length:0;if(o.variableArgs)l>c&&(0,r.info)(`Command ${a}: expected [0, ${c}] args, but received ${l} args.`);else{if(l!==c){for(var u=this.nonProcessedArgs;l>c;)u.push(t.shift()),l--;for(;l<c&&0!==u.length;)null===t&&(t=[]),t.unshift(u.pop()),l++}if(l<c){const e=`command ${a}: expected ${c} args, but received ${l} args.`;if(s>=r.OPS.moveTo&&s<=r.OPS.endPath&&++this._numInvalidPathOPS>P.MAX_INVALID_PATH_OPS)throw new r.FormatError(`Invalid ${e}`);(0,r.warn)(`Skipping ${e}`),null!==t&&(t.length=0);continue}}return this.preprocessCommand(s,t),e.fn=s,e.args=t,!0}if(n===i.EOF)return!1;if(null!==n&&(null===t&&(t=[]),t.push(n),t.length>33))throw new r.FormatError("Too many arguments")}}preprocessCommand(e,t){switch(0|e){case r.OPS.save:this.stateManager.save();break;case r.OPS.restore:this.stateManager.restore();break;case r.OPS.transform:this.stateManager.transform(t)}}}t.EvaluatorPreprocessor=P},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IdentityCMap=t.CMapFactory=t.CMap=void 0;var r=n(2),a=n(5),i=n(11),o=n(8),s=n(12),c=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"];const l=2**24-1;class u{constructor(e=!1){this.codespaceRanges=[[],[],[],[]],this.numCodespaceRanges=0,this._map=[],this.name="",this.vertical=!1,this.useCMap=null,this.builtInCMap=e}addCodespaceRange(e,t,n){this.codespaceRanges[e-1].push(t,n),this.numCodespaceRanges++}mapCidRange(e,t,n){if(t-e>l)throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");for(;e<=t;)this._map[e++]=n++}mapBfRange(e,t,n){if(t-e>l)throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");for(var r=n.length-1;e<=t;)this._map[e++]=n,n=n.substring(0,r)+String.fromCharCode(n.charCodeAt(r)+1)}mapBfRangeToArray(e,t,n){if(t-e>l)throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");const r=n.length;let a=0;for(;e<=t&&a<r;)this._map[e]=n[a++],++e}mapOne(e,t){this._map[e]=t}lookup(e){return this._map[e]}contains(e){return void 0!==this._map[e]}forEach(e){const t=this._map,n=t.length;if(n<=65536)for(let r=0;r<n;r++)void 0!==t[r]&&e(r,t[r]);else for(const n in t)e(n,t[n])}charCodeOf(e){const t=this._map;if(t.length<=65536)return t.indexOf(e);for(const n in t)if(t[n]===e)return 0|n;return-1}getMap(){return this._map}readCharCode(e,t,n){let r=0;const a=this.codespaceRanges;for(let i=0,o=a.length;i<o;i++){r=(r<<8|e.charCodeAt(t+i))>>>0;const o=a[i];for(let e=0,t=o.length;e<t;){const t=o[e++],a=o[e++];if(r>=t&&r<=a)return n.charcode=r,void(n.length=i+1)}}n.charcode=0,n.length=1}getCharCodeLength(e){const t=this.codespaceRanges;for(let n=0,r=t.length;n<r;n++){const r=t[n];for(let t=0,a=r.length;t<a;){const a=r[t++],i=r[t++];if(e>=a&&e<=i)return n+1}}return 1}get length(){return this._map.length}get isIdentityCMap(){if("Identity-H"!==this.name&&"Identity-V"!==this.name)return!1;if(65536!==this._map.length)return!1;for(let e=0;e<65536;e++)if(this._map[e]!==e)return!1;return!0}}t.CMap=u;class h extends u{constructor(e,t){super(),this.vertical=e,this.addCodespaceRange(t,0,65535)}mapCidRange(e,t,n){(0,r.unreachable)("should not call mapCidRange")}mapBfRange(e,t,n){(0,r.unreachable)("should not call mapBfRange")}mapBfRangeToArray(e,t,n){(0,r.unreachable)("should not call mapBfRangeToArray")}mapOne(e,t){(0,r.unreachable)("should not call mapCidOne")}lookup(e){return Number.isInteger(e)&&e<=65535?e:void 0}contains(e){return Number.isInteger(e)&&e<=65535}forEach(e){for(let t=0;t<=65535;t++)e(t,t)}charCodeOf(e){return Number.isInteger(e)&&e<=65535?e:-1}getMap(){const e=new Array(65536);for(let t=0;t<=65535;t++)e[t]=t;return e}get length(){return 65536}get isIdentityCMap(){(0,r.unreachable)("should not access .isIdentityCMap")}}t.IdentityCMap=h;var d=function(){function e(e,t){for(var n=0,r=0;r<=t;r++)n=n<<8|e[r];return n>>>0}function t(e,t){return 1===t?String.fromCharCode(e[0],e[1]):3===t?String.fromCharCode(e[0],e[1],e[2],e[3]):String.fromCharCode.apply(null,e.subarray(0,t+1))}function n(e,t,n){for(var r=0,a=n;a>=0;a--)r+=e[a]+t[a],e[a]=255&r,r>>=8}function a(e,t){for(var n=1,r=t;r>=0&&n>0;r--)n+=e[r],e[r]=255&n,n>>=8}var i=16;function o(e){this.buffer=e,this.pos=0,this.end=e.length,this.tmpBuf=new Uint8Array(19)}function s(){}return o.prototype={readByte(){return this.pos>=this.end?-1:this.buffer[this.pos++]},readNumber(){var e,t=0;do{var n=this.readByte();if(n<0)throw new r.FormatError("unexpected EOF in bcmap");e=!(128&n),t=t<<7|127&n}while(!e);return t},readSigned(){var e=this.readNumber();return 1&e?~(e>>>1):e>>>1},readHex(e,t){e.set(this.buffer.subarray(this.pos,this.pos+t+1)),this.pos+=t+1},readHexNumber(e,t){var n,a=this.tmpBuf,i=0;do{var o=this.readByte();if(o<0)throw new r.FormatError("unexpected EOF in bcmap");n=!(128&o),a[i++]=127&o}while(!n);for(var s=t,c=0,l=0;s>=0;){for(;l<8&&a.length>0;)c=a[--i]<<l|c,l+=7;e[s]=255&c,s--,c>>=8,l-=8}},readHexSigned(e,t){this.readHexNumber(e,t);for(var n=1&e[t]?255:0,r=0,a=0;a<=t;a++)r=(1&r)<<8|e[a],e[a]=r>>1^n},readString(){for(var e=this.readNumber(),t="",n=0;n<e;n++)t+=String.fromCharCode(this.readNumber());return t}},s.prototype={process:function(r,s,c){return new Promise((function(l,u){var h=new o(r),d=h.readByte();s.vertical=!!(1&d);for(var f,p,g=null,m=new Uint8Array(i),v=new Uint8Array(i),b=new Uint8Array(i),y=new Uint8Array(i),w=new Uint8Array(i);(p=h.readByte())>=0;){var x=p>>5;if(7!==x){var C=!!(16&p),k=15&p;if(k+1>i)throw new Error("processBinaryCMap: Invalid dataSize.");var S,A=h.readNumber();switch(x){case 0:for(h.readHex(m,k),h.readHexNumber(v,k),n(v,m,k),s.addCodespaceRange(k+1,e(m,k),e(v,k)),S=1;S<A;S++)a(v,k),h.readHexNumber(m,k),n(m,v,k),h.readHexNumber(v,k),n(v,m,k),s.addCodespaceRange(k+1,e(m,k),e(v,k));break;case 1:for(h.readHex(m,k),h.readHexNumber(v,k),n(v,m,k),h.readNumber(),S=1;S<A;S++)a(v,k),h.readHexNumber(m,k),n(m,v,k),h.readHexNumber(v,k),n(v,m,k),h.readNumber();break;case 2:for(h.readHex(b,k),f=h.readNumber(),s.mapOne(e(b,k),f),S=1;S<A;S++)a(b,k),C||(h.readHexNumber(w,k),n(b,w,k)),f=h.readSigned()+(f+1),s.mapOne(e(b,k),f);break;case 3:for(h.readHex(m,k),h.readHexNumber(v,k),n(v,m,k),f=h.readNumber(),s.mapCidRange(e(m,k),e(v,k),f),S=1;S<A;S++)a(v,k),C?m.set(v):(h.readHexNumber(m,k),n(m,v,k)),h.readHexNumber(v,k),n(v,m,k),f=h.readNumber(),s.mapCidRange(e(m,k),e(v,k),f);break;case 4:for(h.readHex(b,1),h.readHex(y,k),s.mapOne(e(b,1),t(y,k)),S=1;S<A;S++)a(b,1),C||(h.readHexNumber(w,1),n(b,w,1)),a(y,k),h.readHexSigned(w,k),n(y,w,k),s.mapOne(e(b,1),t(y,k));break;case 5:for(h.readHex(m,1),h.readHexNumber(v,1),n(v,m,1),h.readHex(y,k),s.mapBfRange(e(m,1),e(v,1),t(y,k)),S=1;S<A;S++)a(v,1),C?m.set(v):(h.readHexNumber(m,1),n(m,v,1)),h.readHexNumber(v,1),n(v,m,1),h.readHex(y,k),s.mapBfRange(e(m,1),e(v,1),t(y,k));break;default:return void u(new Error("processBinaryCMap: Unknown type: "+x))}}else switch(31&p){case 0:h.readString();break;case 1:g=h.readString()}}l(g?c(g):s)}))}},s}(),f=function(){function e(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t>>>0}function t(e){if(!(0,r.isString)(e))throw new r.FormatError("Malformed CMap: expected string.")}function n(e){if(!Number.isInteger(e))throw new r.FormatError("Malformed CMap: expected int.")}function l(n,r){for(;;){var i=r.getObj();if((0,a.isEOF)(i))break;if((0,a.isCmd)(i,"endbfchar"))return;t(i);var o=e(i);t(i=r.getObj());var s=i;n.mapOne(o,s)}}function f(n,i){for(;;){var o=i.getObj();if((0,a.isEOF)(o))break;if((0,a.isCmd)(o,"endbfrange"))return;t(o);var s=e(o);t(o=i.getObj());var c=e(o);if(o=i.getObj(),Number.isInteger(o)||(0,r.isString)(o)){var l=Number.isInteger(o)?String.fromCharCode(o):o;n.mapBfRange(s,c,l)}else{if(!(0,a.isCmd)(o,"["))break;o=i.getObj();for(var u=[];!(0,a.isCmd)(o,"]")&&!(0,a.isEOF)(o);)u.push(o),o=i.getObj();n.mapBfRangeToArray(s,c,u)}}throw new r.FormatError("Invalid bf range.")}function p(r,i){for(;;){var o=i.getObj();if((0,a.isEOF)(o))break;if((0,a.isCmd)(o,"endcidchar"))return;t(o);var s=e(o);n(o=i.getObj());var c=o;r.mapOne(s,c)}}function g(r,i){for(;;){var o=i.getObj();if((0,a.isEOF)(o))break;if((0,a.isCmd)(o,"endcidrange"))return;t(o);var s=e(o);t(o=i.getObj());var c=e(o);n(o=i.getObj());var l=o;r.mapCidRange(s,c,l)}}function m(t,n){for(;;){var i=n.getObj();if((0,a.isEOF)(i))break;if((0,a.isCmd)(i,"endcodespacerange"))return;if(!(0,r.isString)(i))break;var o=e(i);if(i=n.getObj(),!(0,r.isString)(i))break;var s=e(i);t.addCodespaceRange(i.length,o,s)}throw new r.FormatError("Invalid codespace range.")}function v(e,t){var n=t.getObj();Number.isInteger(n)&&(e.vertical=!!n)}function b(e,t){var n=t.getObj();(0,a.isName)(n)&&(0,r.isString)(n.name)&&(e.name=n.name)}function y(e,t,n,i){var s,c;e:for(;;)try{var u=t.getObj();if((0,a.isEOF)(u))break;if((0,a.isName)(u))"WMode"===u.name?v(e,t):"CMapName"===u.name&&b(e,t),s=u;else if((0,a.isCmd)(u))switch(u.cmd){case"endcmap":break e;case"usecmap":(0,a.isName)(s)&&(c=s.name);break;case"begincodespacerange":m(e,t);break;case"beginbfchar":l(e,t);break;case"begincidchar":p(e,t);break;case"beginbfrange":f(e,t);break;case"begincidrange":g(e,t)}}catch(e){if(e instanceof o.MissingDataException)throw e;(0,r.warn)("Invalid cMap data: "+e);continue}return!i&&c&&(i=c),i?w(e,n,i):Promise.resolve(e)}function w(e,t,n){return x(n,t).then((function(t){if(e.useCMap=t,0===e.numCodespaceRanges){for(var n=e.useCMap.codespaceRanges,r=0;r<n.length;r++)e.codespaceRanges[r]=n[r].slice();e.numCodespaceRanges=e.useCMap.numCodespaceRanges}return e.useCMap.forEach((function(t,n){e.contains(t)||e.mapOne(t,e.useCMap.lookup(t))})),e}))}function x(e,t){return"Identity-H"===e?Promise.resolve(new h(!1,2)):"Identity-V"===e?Promise.resolve(new h(!0,2)):c.includes(e)?t?t(e).then((function(e){var n=e.cMapData,a=e.compressionType,o=new u(!0);if(a===r.CMapCompressionType.BINARY)return(new d).process(n,o,(function(e){return w(o,t,e)}));if(a===r.CMapCompressionType.NONE){var c=new i.Lexer(new s.Stream(n));return y(o,c,t,null)}return Promise.reject(new Error("TODO: Only BINARY/NONE CMap compression is currently supported."))})):Promise.reject(new Error("Built-in CMap parameters are not provided.")):Promise.reject(new Error("Unknown CMap name: "+e))}return{async create(e){var t=e.encoding,n=e.fetchBuiltInCMap,r=e.useCMap;if((0,a.isName)(t))return x(t.name,n);if((0,a.isStream)(t))return y(new u,new i.Lexer(t),n,r).then((function(e){return e.isIdentityCMap?x(e.name,n):e}));throw new Error("Encoding required.")}}}();t.CMapFactory=f},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFontType=C,t.ToUnicodeMap=t.SEAC_ANALYSIS_ENABLED=t.IdentityToUnicodeMap=t.FontFlags=t.Font=t.ErrorFont=void 0;var r=n(2),a=n(30),i=n(33),o=n(32),s=n(34),c=n(35),l=n(8),u=n(36),h=n(28),d=n(12),f=n(37);const p=[[57344,63743],[1048576,1114109]];var g=1e3,m=!0;t.SEAC_ANALYSIS_ENABLED=m;const v=["ascent","bbox","black","bold","charProcOperatorList","composite","data","defaultVMetrics","defaultWidth","descent","fallbackName","fontMatrix","fontType","isMonospace","isSerifFont","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","type","vertical"],b=["cMap","defaultEncoding","differences","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"];var y={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};t.FontFlags=y;var w=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function x(e){if(e.fontMatrix&&e.fontMatrix[0]!==r.FONT_IDENTITY_MATRIX[0]){var t=.001/e.fontMatrix[0],n=e.widths;for(var a in n)n[a]*=t;e.defaultWidth*=t}}function C(e,t){switch(e){case"Type1":return"Type1C"===t?r.FontType.TYPE1C:r.FontType.TYPE1;case"CIDFontType0":return"CIDFontType0C"===t?r.FontType.CIDFONTTYPE0C:r.FontType.CIDFONTTYPE0;case"OpenType":return r.FontType.OPENTYPE;case"TrueType":return r.FontType.TRUETYPE;case"CIDFontType2":return r.FontType.CIDFONTTYPE2;case"MMType1":return r.FontType.MMTYPE1;case"Type0":return r.FontType.TYPE0;default:return r.FontType.UNKNOWN}}function k(e,t){if(void 0!==t[e])return e;var n=(0,c.getUnicodeForGlyph)(e,t);if(-1!==n)for(var a in t)if(t[a]===n)return a;return(0,r.info)("Unable to recover a standard glyph name for: "+e),e}var S=function(){function e(e,t,n,r,a,i,o,s){this.fontChar=e,this.unicode=t,this.accent=n,this.width=r,this.vmetric=a,this.operatorListId=i,this.isSpace=o,this.isInFont=s}return e.prototype.matchesForCache=function(e,t,n,r,a,i,o,s){return this.fontChar===e&&this.unicode===t&&this.accent===n&&this.width===r&&this.vmetric===a&&this.operatorListId===i&&this.isSpace===o&&this.isInFont===s},e}(),A=function(){function e(e=[]){this._map=e}return e.prototype={get length(){return this._map.length},forEach(e){for(var t in this._map)e(t,this._map[t].charCodeAt(0))},has(e){return void 0!==this._map[e]},get(e){return this._map[e]},charCodeOf(e){const t=this._map;if(t.length<=65536)return t.indexOf(e);for(const n in t)if(t[n]===e)return 0|n;return-1},amend(e){for(var t in e)this._map[t]=e[t]}},e}();t.ToUnicodeMap=A;var _=function(){function e(e,t){this.firstChar=e,this.lastChar=t}return e.prototype={get length(){return this.lastChar+1-this.firstChar},forEach(e){for(var t=this.firstChar,n=this.lastChar;t<=n;t++)e(t,t)},has(e){return this.firstChar<=e&&e<=this.lastChar},get(e){if(this.firstChar<=e&&e<=this.lastChar)return String.fromCharCode(e)},charCodeOf(e){return Number.isInteger(e)&&e>=this.firstChar&&e<=this.lastChar?e:-1},amend(e){(0,r.unreachable)("Should not call amend()")}},e}();t.IdentityToUnicodeMap=_;var E=function(){function e(e,t,n){e[t]=n>>8&255,e[t+1]=255&n}function t(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function n(e,t,n){var r,a;if(n instanceof Uint8Array)e.set(n,t);else if("string"==typeof n)for(r=0,a=n.length;r<a;r++)e[t++]=255&n.charCodeAt(r);else for(r=0,a=n.length;r<a;r++)e[t++]=255&n[r]}function a(e){this.sfnt=e,this.tables=Object.create(null)}return a.getSearchParams=function(e,t){for(var n=1,r=0;(n^e)>n;)n<<=1,r++;var a=n*t;return{range:a,entry:r,rangeShift:t*e-a}},a.prototype={toArray:function(){var i=this.sfnt,o=this.tables,s=Object.keys(o);s.sort();var c,u,h,d,f,p=s.length,g=12+16*p,m=[g];for(c=0;c<p;c++)g+=((d=o[s[c]]).length+3&-4)>>>0,m.push(g);var v=new Uint8Array(g);for(c=0;c<p;c++)d=o[s[c]],n(v,m[c],d);"true"===i&&(i=(0,r.string32)(65536)),v[0]=255&i.charCodeAt(0),v[1]=255&i.charCodeAt(1),v[2]=255&i.charCodeAt(2),v[3]=255&i.charCodeAt(3),e(v,4,p);var b=a.getSearchParams(p,16);for(e(v,6,b.range),e(v,8,b.entry),e(v,10,b.rangeShift),g=12,c=0;c<p;c++){f=s[c],v[g]=255&f.charCodeAt(0),v[g+1]=255&f.charCodeAt(1),v[g+2]=255&f.charCodeAt(2),v[g+3]=255&f.charCodeAt(3);var y=0;for(u=m[c],h=m[c+1];u<h;u+=4)y=y+(0,l.readUint32)(v,u)>>>0;t(v,g+4,y),t(v,g+8,m[c]),t(v,g+12,o[f].length),g+=16}return v},addTable:function(e,t){if(e in this.tables)throw new Error("Table "+e+" already exists");this.tables[e]=t}},a}(),I=function(){function e(e,t,n){var a;this.name=e,this.loadedName=n.loadedName,this.isType3Font=n.isType3Font,this.missingFile=!1,this.glyphCache=Object.create(null),this.isSerifFont=!!(n.flags&y.Serif),this.isSymbolicFont=!!(n.flags&y.Symbolic),this.isMonospace=!!(n.flags&y.FixedPitch);var i=n.type,o=n.subtype;this.type=i,this.subtype=o;let s="sans-serif";if(this.isMonospace?s="monospace":this.isSerifFont&&(s="serif"),this.fallbackName=s,this.differences=n.differences,this.widths=n.widths,this.defaultWidth=n.defaultWidth,this.composite=n.composite,this.cMap=n.cMap,this.capHeight=n.capHeight/g,this.ascent=n.ascent/g,this.descent=n.descent/g,this.fontMatrix=n.fontMatrix,this.bbox=n.bbox,this.defaultEncoding=n.defaultEncoding,this.toUnicode=n.toUnicode,this.fallbackToUnicode=n.fallbackToUnicode||new A,this.toFontChar=[],"Type3"!==n.type){if(this.cidEncoding=n.cidEncoding,this.vertical=!!n.vertical,this.vertical&&(this.vmetrics=n.vmetrics,this.defaultVMetrics=n.defaultVMetrics),!t||t.isEmpty)return t&&(0,r.warn)('Font file is empty in "'+e+'" ('+this.loadedName+")"),void this.fallbackToSystemFont(n);[i,o]=function(e,{type:t,subtype:n,composite:a}){let i,o;return function(e){var t=e.peekBytes(4);return 65536===(0,l.readUint32)(t,0)||"true"===(0,r.bytesToString)(t)}(e)||T(e)?i=a?"CIDFontType2":"TrueType":function(e){var t=e.peekBytes(4);return"OTTO"===(0,r.bytesToString)(t)}(e)?i=a?"CIDFontType2":"OpenType":function(e){var t=e.peekBytes(2);return 37===t[0]&&33===t[1]||128===t[0]&&1===t[1]}(e)?i=a?"CIDFontType0":"MMType1"===t?"MMType1":"Type1":function(e){const t=e.peekBytes(4);return t[0]>=1&&t[3]>=1&&t[3]<=4}(e)?a?(i="CIDFontType0",o="CIDFontType0C"):(i="MMType1"===t?"MMType1":"Type1",o="Type1C"):((0,r.warn)("getFontFileType: Unable to detect correct font file Type/Subtype."),i=t,o=n),[i,o]}(t,n),i===this.type&&o===this.subtype||(0,r.info)(`Inconsistent font file Type/SubType, expected: ${this.type}/${this.subtype} but found: ${i}/${o}.`);try{var c;switch(i){case"MMType1":(0,r.info)("MMType1 font ("+e+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";var u="Type1C"===o||"CIDFontType0C"===o?new P(t,n):new F(e,t,n);x(n),c=this.convert(e,u,n);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype",c=this.checkAndRepair(e,t,n),this.isOpenType&&(x(n),i="OpenType");break;default:throw new r.FormatError(`Font ${i} is not supported`)}}catch(e){return(0,r.warn)(e),void this.fallbackToSystemFont(n)}this.data=c,this.fontType=C(i,o),this.fontMatrix=n.fontMatrix,this.widths=n.widths,this.defaultWidth=n.defaultWidth,this.toUnicode=n.toUnicode,this.seacMap=n.seacMap}else{for(a=0;a<256;a++)this.toFontChar[a]=this.differences[a]||n.defaultEncoding[a];this.fontType=r.FontType.TYPE3}}function t(e,t){return(e<<8)+t}function n(e,t){var n=(e<<8)+t;return 32768&n?n-65536:n}function f(e){return String.fromCharCode(e>>8&255,255&e)}function I(e){return e>32767?e=32767:e<-32768&&(e=-32768),String.fromCharCode(e>>8&255,255&e)}function T(e){const t=e.peekBytes(4);return"ttcf"===(0,r.bytesToString)(t)}function R(e,t,n){for(var r,a=[],i=0,o=e.length;i<o;i++)-1!==(r=(0,c.getUnicodeForGlyph)(e[i],t))&&(a[i]=r);for(var s in n)-1!==(r=(0,c.getUnicodeForGlyph)(n[s],t))&&(a[+s]=r);return a}function D(e,t,n){var a=Object.create(null),i=[],o=0,s=p[o][0],c=p[o][1];for(var l in e){var u=e[l|=0];if(t(u)){if(s>c){if(++o>=p.length){(0,r.warn)("Ran out of space in font private use area.");break}s=p[o][0],c=p[o][1]}var h=s++;0===u&&(u=n),a[h]=u,i[l]=h}}return{toFontChar:i,charCodeToGlyphId:a,nextAvailableFontCharCode:s}}function O(e,t){var n,a,i,o,s=function(e,t){var n=[];for(var r in e)e[r]>=t||n.push({fontCharCode:0|r,glyphId:e[r]});0===n.length&&n.push({fontCharCode:0,glyphId:0}),n.sort((function(e,t){return e.fontCharCode-t.fontCharCode}));for(var a=[],i=n.length,o=0;o<i;){var s=n[o].fontCharCode,c=[n[o].glyphId];++o;for(var l=s;o<i&&l+1===n[o].fontCharCode&&(c.push(n[o].glyphId),++o,65535!=++l););a.push([s,l,c])}return a}(e,t),c=s[s.length-1][1]>65535?2:1,l="\0\0"+f(c)+"\0\0"+(0,r.string32)(4+8*c);for(n=s.length-1;n>=0&&!(s[n][0]<=65535);--n);var u=n+1;s[n][0]<65535&&65535===s[n][1]&&(s[n][1]=65534);var h,d,p,g,m=s[n][1]<65535?1:0,v=u+m,b=E.getSearchParams(v,2),y="",w="",x="",C="",k="",S=0;for(n=0,a=u;n<a;n++){d=(h=s[n])[0],p=h[1],y+=f(d),w+=f(p);var A=!0;for(i=1,o=(g=h[2]).length;i<o;++i)if(g[i]!==g[i-1]+1){A=!1;break}if(A)x+=f(g[0]-d&65535),C+=f(0);else{var _=2*(v-n)+2*S;for(S+=p-d+1,x+=f(0),C+=f(_),i=0,o=g.length;i<o;++i)k+=f(g[i])}}m>0&&(w+="ÿÿ",y+="ÿÿ",x+="\0",C+="\0\0");var I="\0\0"+f(2*v)+f(b.range)+f(b.entry)+f(b.rangeShift)+w+"\0\0"+y+x+C+k,T="",R="";if(c>1){for(l+="\0\0\n"+(0,r.string32)(4+8*c+4+I.length),T="",n=0,a=s.length;n<a;n++){d=(h=s[n])[0];var F=(g=h[2])[0];for(i=1,o=g.length;i<o;++i)g[i]!==g[i-1]+1&&(p=h[0]+i-1,T+=(0,r.string32)(d)+(0,r.string32)(p)+(0,r.string32)(F),d=p+1,F=g[i]);T+=(0,r.string32)(d)+(0,r.string32)(h[1])+(0,r.string32)(F)}R="\0\f\0\0"+(0,r.string32)(T.length+16)+"\0\0\0\0"+(0,r.string32)(T.length/12)}return l+"\0"+f(I.length+4)+I+R+T}function N(e,t,n){n=n||{unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};var a=0,i=0,o=0,s=0,l=null,u=0;if(t){for(var h in t){(l>(h|=0)||!l)&&(l=h),u<h&&(u=h);var d=(0,c.getUnicodeRangeFor)(h);if(d<32)a|=1<<d;else if(d<64)i|=1<<d-32;else if(d<96)o|=1<<d-64;else{if(!(d<123))throw new r.FormatError("Unicode ranges Bits > 123 are reserved for internal usage");s|=1<<d-96}}u>65535&&(u=65535)}else l=0,u=255;var p=e.bbox||[0,0,0,0],m=n.unitsPerEm||1/(e.fontMatrix||r.FONT_IDENTITY_MATRIX)[0],v=e.ascentScaled?1:m/g,b=n.ascent||Math.round(v*(e.ascent||p[3])),y=n.descent||Math.round(v*(e.descent||p[1]));y>0&&e.descent>0&&p[1]<0&&(y=-y);var w=n.yMax||b,x=-n.yMin||-y;return"\0$ô\0\0\0»\0\0\0»\0\0ß\x001\0\0\0\0"+String.fromCharCode(e.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,r.string32)(a)+(0,r.string32)(i)+(0,r.string32)(o)+(0,r.string32)(s)+"*21*"+f(e.italicAngle?1:0)+f(l||e.firstChar)+f(u||e.lastChar)+f(b)+f(y)+"\0d"+f(w)+f(x)+"\0\0\0\0\0\0\0\0"+f(e.xHeight)+f(e.capHeight)+f(0)+f(l||e.firstChar)+"\0"}function M(e){var t=Math.floor(65536*e.italicAngle);return"\0\0\0"+(0,r.string32)(t)+"\0\0\0\0"+(0,r.string32)(e.fixedPitch)+"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}function L(e,t){t||(t=[[],[]]);var n,r,a,i,o,s=[t[0][0]||"Original licence",t[0][1]||e,t[0][2]||"Unknown",t[0][3]||"uniqueID",t[0][4]||e,t[0][5]||"Version 0.11",t[0][6]||"",t[0][7]||"Unknown",t[0][8]||"Unknown",t[0][9]||"Unknown"],c=[];for(n=0,r=s.length;n<r;n++){var l=[];for(a=0,i=(o=t[1][n]||s[n]).length;a<i;a++)l.push(f(o.charCodeAt(a)));c.push(l.join(""))}var u=[s,c],h=["\0","\0"],d=["\0\0","\0"],p=["\0\0","\t"],g=s.length*h.length,m="\0\0"+f(g)+f(12*g+6),v=0;for(n=0,r=h.length;n<r;n++){var b=u[n];for(a=0,i=b.length;a<i;a++)o=b[a],m+=h[n]+d[n]+p[n]+f(a)+f(o.length)+f(v),v+=o.length}return m+(s.join("")+c.join(""))}return e.prototype={name:null,font:null,mimetype:null,disableFontFace:!1,get renderer(){var e=u.FontRendererFactory.create(this,m);return(0,r.shadow)(this,"renderer",e)},exportData(e=!1){const t=e?[...v,...b]:v,n=Object.create(null);let r,a;for(r of t)a=this[r],void 0!==a&&(n[r]=a);return n},fallbackToSystemFont(e){this.missingFile=!0;var t=this.name,n=this.type,a=this.subtype;let l=t.replace(/[,_]/g,"-").replace(/\s/g,"");var u=(0,s.getStdFontMap)(),h=(0,s.getNonStdFontMap)();const d=!!u[l],f=!(!h[l]||!u[h[l]]);l=u[l]||h[l]||l,this.bold=-1!==l.search(/bold/gi),this.italic=-1!==l.search(/oblique/gi)||-1!==l.search(/italic/gi),this.black=-1!==t.search(/Black/g);const p=-1!==t.search(/Narrow/g);if(this.remeasure=(!d||p)&&Object.keys(this.widths).length>0,(d||f)&&"CIDFontType2"===n&&this.cidEncoding.startsWith("Identity-")){const n=(0,s.getGlyphMapForStandardFonts)(),r=e.cidToGidMap,a=[];for(const e in n)a[+e]=n[e];if(/Arial-?Black/i.test(t)){var g=(0,s.getSupplementalGlyphMapForArialBlack)();for(const e in g)a[+e]=g[e]}else if(/Calibri/i.test(t)){const e=(0,s.getSupplementalGlyphMapForCalibri)();for(const t in e)a[+t]=e[t]}if(r)for(const e in a){const t=a[e];void 0!==r[t]&&(a[+e]=r[t])}this.toUnicode instanceof _||this.toUnicode.forEach((function(e,t){a[+e]=t})),this.toFontChar=a,this.toUnicode=new A(a)}else if(/Symbol/i.test(l))this.toFontChar=R(o.SymbolSetEncoding,(0,i.getGlyphsUnicode)(),this.differences);else if(/Dingbats/i.test(l))/Wingdings/i.test(t)&&(0,r.warn)("Non-embedded Wingdings font, falling back to ZapfDingbats."),this.toFontChar=R(o.ZapfDingbatsEncoding,(0,i.getDingbatsGlyphsUnicode)(),this.differences);else if(d)this.toFontChar=R(this.defaultEncoding,(0,i.getGlyphsUnicode)(),this.differences);else{const e=(0,i.getGlyphsUnicode)(),n=[];if(this.toUnicode.forEach(((t,r)=>{if(!this.composite){var a=this.differences[t]||this.defaultEncoding[t];const n=(0,c.getUnicodeForGlyph)(a,e);-1!==n&&(r=n)}n[+t]=r})),this.composite&&this.toUnicode instanceof _&&/Verdana/i.test(t)){const e=(0,s.getGlyphMapForStandardFonts)();for(const t in e)n[+t]=e[t]}this.toFontChar=n}this.loadedName=l.split("-")[0],this.fontType=C(n,a)},checkAndRepair:function(e,s,c){const l=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function u(e,t){const n=Object.create(null);n["OS/2"]=null,n.cmap=null,n.head=null,n.hhea=null,n.hmtx=null,n.maxp=null,n.name=null,n.post=null;for(let r=0;r<t;r++){const t=f(e);l.includes(t.tag)&&0!==t.length&&(n[t.tag]=t)}return n}function f(e){var t=(0,r.bytesToString)(e.getBytes(4)),n=e.getInt32()>>>0,a=e.getInt32()>>>0,i=e.getInt32()>>>0,o=e.pos;e.pos=e.start?e.start:0,e.skip(a);var s=e.getBytes(i);return e.pos=o,"head"===t&&(s[8]=s[9]=s[10]=s[11]=0,s[17]|=32),{tag:t,checksum:n,length:i,offset:a,data:s}}function p(e){return{version:(0,r.bytesToString)(e.getBytes(4)),numTables:e.getUint16(),searchRange:e.getUint16(),entrySelector:e.getUint16(),rangeShift:e.getUint16()}}function g(e,t,r,a,i,o){var s={length:0,sizeOfInstructions:0};if(r-t<=12)return s;var c,l,u=e.subarray(t,r),h=n(u[0],u[1]);if(h<0)return l=h=-1,(c=u)[1+0]=l,c[0]=l>>>8,a.set(u,i),s.length=u.length,s;var d,f=10,p=0;for(d=0;d<h;d++)p=1+(u[f]<<8|u[f+1]),f+=2;var g=f,m=u[f]<<8|u[f+1];s.sizeOfInstructions=m;var v=f+=2+m,b=0;for(d=0;d<p;d++){var y=u[f++];192&y&&(u[f-1]=63&y);let e=2;2&y?e=1:16&y&&(e=0);let t=2;4&y?t=1:32&y&&(t=0);const n=e+t;if(b+=n,8&y){var w=u[f++];d+=w,b+=w*n}}if(0===b)return s;var x=f+b;return x>u.length?s:!o&&m>0?(a.set(u.subarray(0,g),i),a.set([0,0],i+g),a.set(u.subarray(v,x),i+g+2),x-=m,u.length-x>3&&(x=x+3&-4),s.length=x,s):u.length-x>3?(x=x+3&-4,a.set(u.subarray(0,x),i),s.length=x,s):(a.set(u,i),s.length=u.length,s)}function v(e){var t=(s.start?s.start:0)+e.offset;s.pos=t;var n=[[],[]],a=e.length,i=t+a;if(0!==s.getUint16()||a<6)return n;var o,c,l=s.getUint16(),u=s.getUint16(),h=[];for(o=0;o<l&&s.pos+12<=i;o++){var d={platform:s.getUint16(),encoding:s.getUint16(),language:s.getUint16(),name:s.getUint16(),length:s.getUint16(),offset:s.getUint16()};(1===d.platform&&0===d.encoding&&0===d.language||3===d.platform&&1===d.encoding&&1033===d.language)&&h.push(d)}for(o=0,c=h.length;o<c;o++){var f=h[o];if(!(f.length<=0)){var p=t+u+f.offset;if(!(p+f.length>i)){s.pos=p;var g=f.name;if(f.encoding){for(var m="",v=0,b=f.length;v<b;v+=2)m+=String.fromCharCode(s.getUint16());n[1][g]=m}else n[0][g]=(0,r.bytesToString)(s.getBytes(f.length))}}}return n}var b=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function y(e,t){for(var n,a,i,o,s,c=e.data,l=0,u=0,h=0,d=[],f=[],p=[],g=t.tooComplexToFollowFunctions,m=!1,v=0,y=0,w=c.length;l<w;){var x=c[l++];if(64===x)if(a=c[l++],m||y)l+=a;else for(n=0;n<a;n++)d.push(c[l++]);else if(65===x)if(a=c[l++],m||y)l+=2*a;else for(n=0;n<a;n++)i=c[l++],d.push(i<<8|c[l++]);else if(176==(248&x))if(a=x-176+1,m||y)l+=a;else for(n=0;n<a;n++)d.push(c[l++]);else if(184==(248&x))if(a=x-184+1,m||y)l+=2*a;else for(n=0;n<a;n++)i=c[l++],d.push(i<<8|c[l++]);else if(43!==x||g)if(44!==x||g){if(45===x)if(m)m=!1,u=l;else{if(!(s=f.pop()))return(0,r.warn)("TT: ENDF bad stack"),void(t.hintsValid=!1);o=p.pop(),c=s.data,l=s.i,t.functionsStackDeltas[o]=d.length-s.stackTop}else if(137===x)(m||y)&&((0,r.warn)("TT: nested IDEFs not allowed"),g=!0),m=!0,h=l;else if(88===x)++v;else if(27===x)y=v;else if(89===x)y===v&&(y=0),--v;else if(28===x&&!m&&!y){var C=d[d.length-1];C>0&&(l+=C-1)}}else(m||y)&&((0,r.warn)("TT: nested FDEFs not allowed"),g=!0),m=!0,h=l,o=d.pop(),t.functionsDefined[o]={data:c,i:l};else if(!m&&!y)if(o=d[d.length-1],isNaN(o))(0,r.info)("TT: CALL empty stack (or invalid entry).");else if(t.functionsUsed[o]=!0,o in t.functionsStackDeltas){const e=d.length+t.functionsStackDeltas[o];if(e<0)return(0,r.warn)("TT: CALL invalid functions stack delta."),void(t.hintsValid=!1);d.length=e}else if(o in t.functionsDefined&&!p.includes(o)){if(f.push({data:c,i:l,stackTop:d.length-1}),p.push(o),!(s=t.functionsDefined[o]))return(0,r.warn)("TT: CALL non-existent function"),void(t.hintsValid=!1);c=s.data,l=s.i}if(!m&&!y){let e=0;for(x<=142?e=b[x]:x>=192&&x<=223?e=-1:x>=224&&(e=-2),x>=113&&x<=117&&(a=d.pop(),isNaN(a)||(e=2*-a));e<0&&d.length>0;)d.pop(),e++;for(;e>0;)d.push(NaN),e--}}t.tooComplexToFollowFunctions=g;var k=[c];l>c.length&&k.push(new Uint8Array(l-c.length)),h>u&&((0,r.warn)("TT: complementing a missing function tail"),k.push(new Uint8Array([34,45]))),function(e,t){if(t.length>1){var n,r,a=0;for(n=0,r=t.length;n<r;n++)a+=t[n].length;a=a+3&-4;var i=new Uint8Array(a),o=0;for(n=0,r=t.length;n<r;n++)i.set(t[n],o),o+=t[n].length;e.data=i,e.length=a}}(e,k)}let C,S,A,_;if(T(s=new d.Stream(new Uint8Array(s.getBytes())))){const e=function(e,t){const{numFonts:n,offsetTable:a}=function(e){const t=(0,r.bytesToString)(e.getBytes(4));(0,r.assert)("ttcf"===t,"Must be a TrueType Collection font.");const n=e.getUint16(),a=e.getUint16(),i=e.getInt32()>>>0,o=[];for(let t=0;t<i;t++)o.push(e.getInt32()>>>0);const s={ttcTag:t,majorVersion:n,minorVersion:a,numFonts:i,offsetTable:o};switch(n){case 1:return s;case 2:return s.dsigTag=e.getInt32()>>>0,s.dsigLength=e.getInt32()>>>0,s.dsigOffset=e.getInt32()>>>0,s}throw new r.FormatError(`Invalid TrueType Collection majorVersion: ${n}.`)}(e);for(let i=0;i<n;i++){e.pos=(e.start||0)+a[i];const n=p(e),o=u(e,n.numTables);if(!o.name)throw new r.FormatError('TrueType Collection font must contain a "name" table.');const s=v(o.name);for(let e=0,r=s.length;e<r;e++)for(let r=0,a=s[e].length;r<a;r++){const a=s[e][r];if(a&&a.replace(/\s/g,"")===t)return{header:n,tables:o}}}throw new r.FormatError(`TrueType Collection does not contain "${t}" font.`)}(s,this.name);C=e.header,S=e.tables}else C=p(s),S=u(s,C.numTables);var I=!S["CFF "];if(I){if(!S.loca)throw new r.FormatError('Required "loca" table is not found');S.glyf||((0,r.warn)('Required "glyf" table is not found -- trying to recover.'),S.glyf={tag:"glyf",data:new Uint8Array(0)}),this.isOpenType=!1}else{const t=c.composite&&((c.cidToGidMap||[]).length>0||!(c.cMap instanceof h.IdentityCMap));if("OTTO"===C.version&&!t||!S.head||!S.hhea||!S.maxp||!S.post)return _=new d.Stream(S["CFF "].data),A=new P(_,c),x(c),this.convert(e,A,c);delete S.glyf,delete S.loca,delete S.fpgm,delete S.prep,delete S["cvt "],this.isOpenType=!0}if(!S.maxp)throw new r.FormatError('Required "maxp" table is not found');s.pos=(s.start||0)+S.maxp.offset;var R=s.getInt32();const F=s.getUint16();let B=F+1,U=!0;B>65535&&(U=!1,B=F,(0,r.warn)("Not enough space in glyfs to duplicate first glyph."));var j=0,q=0;R>=65536&&S.maxp.length>=22&&(s.pos+=8,s.getUint16()>2&&(S.maxp.data[14]=0,S.maxp.data[15]=2),s.pos+=4,j=s.getUint16(),s.pos+=4,q=s.getUint16()),S.maxp.data[4]=B>>8,S.maxp.data[5]=255&B;var z=function(e,t,n,a){var i={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};if(e&&y(e,i),t&&y(t,i),e&&function(e,t){if(!e.tooComplexToFollowFunctions){if(e.functionsDefined.length>t)return(0,r.warn)("TT: more functions defined than expected"),void(e.hintsValid=!1);for(var n=0,a=e.functionsUsed.length;n<a;n++){if(n>t)return(0,r.warn)("TT: invalid function id: "+n),void(e.hintsValid=!1);if(e.functionsUsed[n]&&!e.functionsDefined[n])return(0,r.warn)("TT: undefined function: "+n),void(e.hintsValid=!1)}}}(i,a),n&&1&n.length){var o=new Uint8Array(n.length+1);o.set(n.data),n.data=o}return i.hintsValid}(S.fpgm,S.prep,S["cvt "],j);if(z||(delete S.fpgm,delete S.prep,delete S["cvt "]),function(e,t,n,a,i){if(t){e.pos=(e.start?e.start:0)+t.offset,e.pos+=4,e.pos+=2,e.pos+=2,e.pos+=2,e.pos+=2,e.pos+=2,e.pos+=2,e.pos+=2,e.pos+=2,e.pos+=2,e.pos+=2,e.pos+=8,e.pos+=2;var o=e.getUint16();o>a&&((0,r.info)("The numOfMetrics ("+o+") should not be greater than the numGlyphs ("+a+")"),o=a,t.data[34]=(65280&o)>>8,t.data[35]=255&o);var s=a-o-(n.length-4*o>>1);if(s>0){var c=new Uint8Array(n.length+2*s);c.set(n.data),i&&(c[n.length]=n.data[2],c[n.length+1]=n.data[3]),n.data=c}}else n&&(n.data=null)}(s,S.hhea,S.hmtx,B,U),!S.head)throw new r.FormatError('Required "head" table is not found');!function(e,n,a){var i=e.data,o=(i[0]<<24)+(i[1]<<16)+(i[2]<<8)+i[3];o>>16!=1&&((0,r.info)("Attempting to fix invalid version in head table: "+o),i[0]=0,i[1]=1,i[2]=0,i[3]=0);var s=t(i[50],i[51]);if(s<0||s>1){(0,r.info)("Attempting to fix invalid indexToLocFormat in head table: "+s);var c=n+1;if(a===c<<1)i[50]=0,i[51]=0;else{if(a!==c<<2)throw new r.FormatError("Could not fix indexToLocFormat: "+s);i[50]=0,i[51]=1}}}(S.head,F,I?S.loca.length:0);var W=Object.create(null);if(I){var G=t(S.head.data[50],S.head.data[51]),H=function(e,t,n,r,a,i,o){var s,c,l;r?(s=4,c=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]},l=function(e,t,n){e[t]=n>>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}):(s=2,c=function(e,t){return e[t]<<9|e[t+1]<<1},l=function(e,t,n){e[t]=n>>9&255,e[t+1]=n>>1&255});var u=i?n+1:n,h=s*(1+u),d=new Uint8Array(h);d.set(e.data.subarray(0,h)),e.data=d;var f,p,m=t.data,v=m.length,b=new Uint8Array(v);const y=[];for(f=0,p=0;f<n+1;f++,p+=s){let e=c(d,p);e>v&&(e=v),y.push({index:f,offset:e,endOffset:0})}for(y.sort(((e,t)=>e.offset-t.offset)),f=0;f<n;f++)y[f].endOffset=y[f+1].offset;y.sort(((e,t)=>e.index-t.index));var w=Object.create(null),x=0;for(l(d,0,x),f=0,p=s;f<n;f++,p+=s){var C=g(m,y[f].offset,y[f].endOffset,b,x,a),k=C.length;0===k&&(w[f]=!0),C.sizeOfInstructions>o&&(o=C.sizeOfInstructions),l(d,p,x+=k)}if(0===x){var S=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(f=0,p=s;f<u;f++,p+=s)l(d,p,S.length);t.data=S}else if(i){var A=c(d,s);b.length>A+x?t.data=b.subarray(0,A+x):(t.data=new Uint8Array(A+x),t.data.set(b.subarray(0,x))),t.data.set(b.subarray(0,A),x),l(e.data,d.length-s,x+A)}else t.data=b.subarray(0,x);return{missingGlyphs:w,maxSizeOfInstructions:o}}(S.loca,S.glyf,F,G,z,U,q);W=H.missingGlyphs,R>=65536&&S.maxp.length>=22&&(S.maxp.data[26]=H.maxSizeOfInstructions>>8,S.maxp.data[27]=255&H.maxSizeOfInstructions)}if(!S.hhea)throw new r.FormatError('Required "hhea" table is not found');0===S.hhea.data[10]&&0===S.hhea.data[11]&&(S.hhea.data[10]=255,S.hhea.data[11]=255);var V={unitsPerEm:t(S.head.data[18],S.head.data[19]),yMax:t(S.head.data[42],S.head.data[43]),yMin:n(S.head.data[38],S.head.data[39]),ascent:t(S.hhea.data[4],S.hhea.data[5]),descent:n(S.hhea.data[6],S.hhea.data[7])};this.ascent=V.ascent/V.unitsPerEm,this.descent=V.descent/V.unitsPerEm,S.post&&function(e,t,n){var a=(s.start?s.start:0)+e.offset;s.pos=a;var i,o=a+e.length,c=s.getInt32();s.skip(28);var l,u=!0;switch(c){case 65536:i=w;break;case 131072:var h=s.getUint16();if(h!==n){u=!1;break}var d=[];for(l=0;l<h;++l){var f=s.getUint16();if(f>=32768){u=!1;break}d.push(f)}if(!u)break;for(var p=[],g=[];s.pos<o;){var m=s.getByte();for(g.length=m,l=0;l<m;++l)g[l]=String.fromCharCode(s.getByte());p.push(g.join(""))}for(i=[],l=0;l<h;++l){var v=d[l];v<258?i.push(w[v]):i.push(p[v-258])}break;case 196608:break;default:(0,r.warn)("Unknown/unsupported post table version "+c),u=!1,t.defaultEncoding&&(i=t.defaultEncoding)}t.glyphNames=i}(S.post,c,F),S.post={tag:"post",data:M(c)};const $=[];function X(e){return!W[e]}if(c.composite){var K=c.cidToGidMap||[],Y=0===K.length;c.cMap.forEach((function(e,t){if(t>65535)throw new r.FormatError("Max size of CID is 65,535");var n=-1;Y?n=t:void 0!==K[t]&&(n=K[t]),n>=0&&n<F&&X(n)&&($[e]=n)}))}else{var J=function(e,t,n,a){if(!e)return(0,r.warn)("No cmap table available."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var i,o=(t.start?t.start:0)+e.offset;t.pos=o,t.skip(2);for(var s,c=t.getUint16(),l=!1,u=0;u<c;u++){var h=t.getUint16(),d=t.getUint16(),f=t.getInt32()>>>0,p=!1;if((!s||s.platformId!==h||s.encodingId!==d)&&(0!==h||0!==d&&1!==d&&3!==d?1===h&&0===d?p=!0:3!==h||1!==d||!a&&s?n&&3===h&&0===d&&(p=!0,l=!0):(p=!0,n||(l=!0)):p=!0,p&&(s={platformId:h,encodingId:d,offset:f}),l))break}if(s&&(t.pos=o+s.offset),!s||-1===t.peekByte())return(0,r.warn)("Could not find a preferred cmap table."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var g=t.getUint16();t.skip(4);var m,v,b=!1,y=[];if(0===g){for(m=0;m<256;m++){var w=t.getByte();w&&y.push({charCode:m,glyphId:w})}b=!0}else if(4===g){var x=t.getUint16()>>1;t.skip(6);var C,k=[];for(C=0;C<x;C++)k.push({end:t.getUint16()});for(t.skip(2),C=0;C<x;C++)k[C].start=t.getUint16();for(C=0;C<x;C++)k[C].delta=t.getUint16();var S=0;for(C=0;C<x;C++){i=k[C];var A=t.getUint16();if(A){var _=(A>>1)-(x-C);i.offsetIndex=_,S=Math.max(S,_+i.end-i.start+1)}else i.offsetIndex=-1}var E=[];for(m=0;m<S;m++)E.push(t.getUint16());for(C=0;C<x;C++){o=(i=k[C]).start;var I=i.end,T=i.delta;for(_=i.offsetIndex,m=o;m<=I;m++)65535!==m&&(v=(v=_<0?m:E[_+m-o])+T&65535,y.push({charCode:m,glyphId:v}))}}else{if(6!==g)return(0,r.warn)("cmap table has unsupported format: "+g),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var R=t.getUint16(),F=t.getUint16();for(m=0;m<F;m++){v=t.getUint16();var P=R+m;y.push({charCode:P,glyphId:v})}}for(y.sort((function(e,t){return e.charCode-t.charCode})),u=1;u<y.length;u++)y[u-1].charCode===y[u].charCode&&(y.splice(u,1),u--);return{platformId:s.platformId,encodingId:s.encodingId,mappings:y,hasShortCmap:b}}(S.cmap,s,this.isSymbolicFont,c.hasEncoding),Z=J.platformId,Q=J.encodingId,ee=J.mappings,te=ee.length;let e=[];if(!c.hasEncoding||"MacRomanEncoding"!==c.baseEncodingName&&"WinAnsiEncoding"!==c.baseEncodingName||(e=(0,o.getEncoding)(c.baseEncodingName)),c.hasEncoding&&!this.isSymbolicFont&&(3===Z&&1===Q||1===Z&&0===Q)){var ne=(0,i.getGlyphsUnicode)();for(let t=0;t<256;t++){var re,ae;if(re=this.differences&&t in this.differences?this.differences[t]:t in e&&""!==e[t]?e[t]:o.StandardEncoding[t]){var ie;ae=k(re,ne),3===Z&&1===Q?ie=ne[ae]:1===Z&&0===Q&&(ie=o.MacRomanEncoding.indexOf(ae));for(let e=0;e<te;++e)if(ee[e].charCode===ie){$[t]=ee[e].glyphId;break}}}}else if(0===Z)for(let e=0;e<te;++e)$[ee[e].charCode]=ee[e].glyphId;else for(let e=0;e<te;++e){let t=ee[e].charCode;3===Z&&t>=61440&&t<=61695&&(t&=255),$[t]=ee[e].glyphId}if(c.glyphNames&&e.length)for(let t=0;t<256;++t)if(void 0===$[t]&&e[t]){re=e[t];const n=c.glyphNames.indexOf(re);n>0&&X(n)&&($[t]=n)}}0===$.length&&($[0]=0);let oe=B-1;U||(oe=0);var se=D($,X,oe);if(this.toFontChar=se.toFontChar,S.cmap={tag:"cmap",data:O(se.charCodeToGlyphId,B)},S["OS/2"]&&function(e,t){t.pos=(t.start||0)+e.offset;var n=t.getUint16();t.skip(60);var r=t.getUint16();return!(n<4&&768&r||t.getUint16()>t.getUint16()||(t.skip(6),0===t.getUint16()||(e.data[8]=e.data[9]=0,0)))}(S["OS/2"],s)||(S["OS/2"]={tag:"OS/2",data:N(c,se.charCodeToGlyphId,V)}),!I)try{_=new d.Stream(S["CFF "].data),A=new a.CFFParser(_,c,m).parse(),A.duplicateFirstGlyph();var ce=new a.CFFCompiler(A);S["CFF "].data=ce.compile()}catch(e){(0,r.warn)("Failed to compile font "+c.loadedName)}if(S.name){var le=v(S.name);S.name.data=L(e,le)}else S.name={tag:"name",data:L(this.name)};var ue=new E(C.version);for(var he in S)ue.addTable(he,S[he].data);return ue.toArray()},convert:function(e,t,n){n.fixedPitch=!1,n.builtInEncoding&&function(e,t){if(!e.hasIncludedToUnicodeMap&&!(e.hasEncoding||t===e.defaultEncoding||e.toUnicode instanceof _)){var n=[],r=(0,i.getGlyphsUnicode)();for(var a in t){var o=t[a],s=(0,c.getUnicodeForGlyph)(o,r);-1!==s&&(n[a]=String.fromCharCode(s))}e.toUnicode.amend(n)}}(n,n.builtInEncoding);let a=1;t instanceof P&&(a=t.numGlyphs-1);var s=t.getGlyphMapping(n),l=D(s,t.hasGlyphId.bind(t),a);this.toFontChar=l.toFontChar;var u=t.numGlyphs;function h(e,t){var n=null;for(var r in e)t===e[r]&&(n||(n=[]),n.push(0|r));return n}function d(e,t){for(var n in e)if(t===e[n])return 0|n;return l.charCodeToGlyphId[l.nextAvailableFontCharCode]=t,l.nextAvailableFontCharCode++}var p=t.seacs;if(p&&p.length){var g=n.fontMatrix||r.FONT_IDENTITY_MATRIX,m=t.getCharset(),v=Object.create(null);for(var b in p){var y=p[b|=0],w=o.StandardEncoding[y[2]],x=o.StandardEncoding[y[3]],C=m.indexOf(w),k=m.indexOf(x);if(!(C<0||k<0)){var S={x:y[0]*g[0]+y[1]*g[2]+g[4],y:y[0]*g[1]+y[1]*g[3]+g[5]},A=h(s,b);if(A)for(let e=0,t=A.length;e<t;e++){var T=A[e],R=l.charCodeToGlyphId,F=d(R,C),B=d(R,k);v[T]={baseFontCharCode:F,accentFontCharCode:B,accentOffset:S}}}}n.seacMap=v}var U=1/(n.fontMatrix||r.FONT_IDENTITY_MATRIX)[0],j=new E("OTTO");return j.addTable("CFF ",t.data),j.addTable("OS/2",N(n,l.charCodeToGlyphId)),j.addTable("cmap",O(l.charCodeToGlyphId,u)),j.addTable("head","\0\0\0\0\0\0\0\0\0\0_<õ\0\0"+I(U)+"\0\0\0\0\v~'\0\0\0\0\v~'\0\0"+I(n.descent)+"ÿ"+I(n.ascent)+f(n.italicAngle?2:0)+"\0\0\0\0\0\0\0"),j.addTable("hhea","\0\0\0"+I(n.ascent)+I(n.descent)+"\0\0ÿÿ\0\0\0\0\0\0"+I(n.capHeight)+I(Math.tan(n.italicAngle)*n.xHeight)+"\0\0\0\0\0\0\0\0\0\0\0\0"+f(u)),j.addTable("hmtx",function(){var e=t.charstrings,n=t.cff?t.cff.widths:null,r="\0\0\0\0";for(let t=1,o=u;t<o;t++){var a=0;if(e){var i=e[t-1];a="width"in i?i.width:0}else n&&(a=Math.ceil(n[t]||0));r+=f(a)+f(0)}return r}()),j.addTable("maxp","\0\0P\0"+f(u)),j.addTable("name",L(e)),j.addTable("post",M(n)),j.toArray()},get spaceWidth(){for(var e,t=["space","minus","one","i","I"],n=0,a=t.length;n<a;n++){var o=t[n];if(o in this.widths){e=this.widths[o];break}var s=(0,i.getGlyphsUnicode)()[o],c=0;if(this.composite&&this.cMap.contains(s)&&(c=this.cMap.lookup(s)),!c&&this.toUnicode&&(c=this.toUnicode.charCodeOf(s)),c<=0&&(c=s),e=this.widths[c])break}return e=e||this.defaultWidth,(0,r.shadow)(this,"spaceWidth",e)},_charToGlyph(e,t=!1){var n,a,i,o=e;this.cMap&&this.cMap.contains(e)&&(o=this.cMap.lookup(e)),a=this.widths[o],a=(0,r.isNum)(a)?a:this.defaultWidth;var s=this.vmetrics&&this.vmetrics[o];let l=this.toUnicode.get(e)||this.fallbackToUnicode.get(e)||e;"number"==typeof l&&(l=String.fromCharCode(l));var u=e in this.toFontChar;if(n=this.toFontChar[e]||e,this.missingFile){const t=this.differences[e]||this.defaultEncoding[e];".notdef"!==t&&""!==t||"Type1"!==this.type||(n=32),n=(0,c.mapSpecialUnicodeValues)(n)}this.isType3Font&&(i=n);var h=null;if(this.seacMap&&this.seacMap[e]){u=!0;var d=this.seacMap[e];n=d.baseFontCharCode,h={fontChar:String.fromCodePoint(d.accentFontCharCode),offset:d.accentOffset}}let f="";"number"==typeof n&&(n<=1114111?f=String.fromCodePoint(n):(0,r.warn)(`charToGlyph - invalid fontCharCode: ${n}`));var p=this.glyphCache[e];return p&&p.matchesForCache(f,l,h,a,s,i,t,u)||(p=new S(f,l,h,a,s,i,t,u),this.glyphCache[e]=p),p},charsToGlyphs:function(e){var t,n,r,a=this.charsCache;if(a&&(t=a[e]))return t;a||(a=this.charsCache=Object.create(null)),t=[];var i,o=e,s=0;if(this.cMap)for(var c=Object.create(null);s<e.length;){this.cMap.readCharCode(e,s,c),r=c.charcode;var l=c.length;s+=l;var u=1===l&&32===e.charCodeAt(s-1);n=this._charToGlyph(r,u),t.push(n)}else for(s=0,i=e.length;s<i;++s)r=e.charCodeAt(s),n=this._charToGlyph(r,32===r),t.push(n);return a[o]=t},getCharPositions(e){const t=[];if(this.cMap){const n=Object.create(null);let r=0;for(;r<e.length;){this.cMap.readCharCode(e,r,n);const a=n.length;t.push([r,r+a]),r+=a}}else for(let n=0,r=e.length;n<r;++n)t.push([n,n+1]);return t},get glyphCacheValues(){return Object.values(this.glyphCache)},encodeString(e){const t=[],n=[],r=()=>t.length%2==1;for(let a=0,i=e.length;a<i;a++){const i=e.codePointAt(a);if(i>55295&&(i<57344||i>65533)&&a++,this.toUnicode){const e=String.fromCodePoint(i),a=this.toUnicode.charCodeOf(e);if(-1!==a){r()&&(t.push(n.join("")),n.length=0);for(let e=(this.cMap?this.cMap.getCharCodeLength(a):1)-1;e>=0;e--)n.push(String.fromCharCode(a>>8*e&255));continue}}r()||(t.push(n.join("")),n.length=0),n.push(String.fromCodePoint(i))}return t.push(n.join("")),t}},e}();t.Font=I;var T=function(){function e(e){this.error=e,this.loadedName="g_font_error",this.missingFile=!0}return e.prototype={charsToGlyphs:function(){return[]},encodeString:function(e){return[e]},exportData(e=!1){return{error:this.error}}},e}();function R(e,t,n){var r,a,s,c=Object.create(null),l=!!(e.flags&y.Symbolic);if(e.baseEncodingName)for(s=(0,o.getEncoding)(e.baseEncodingName),a=0;a<s.length;a++)r=n.indexOf(s[a]),c[a]=r>=0?r:0;else if(l)for(a in t)c[a]=t[a];else for(s=o.StandardEncoding,a=0;a<s.length;a++)r=n.indexOf(s[a]),c[a]=r>=0?r:0;var u,h=e.differences;if(h)for(a in h){var d=h[a];if(-1===(r=n.indexOf(d))){u||(u=(0,i.getGlyphsUnicode)());var f=k(d,u);f!==d&&(r=n.indexOf(f))}c[a]=r>=0?r:0}return c}t.ErrorFont=T;var F=function(){function e(e,t,n){for(var r,a=e.length,i=t.length,o=a-i,s=n,c=!1;s<o;){for(r=0;r<i&&e[s+r]===t[r];)r++;if(r>=i){for(s+=r;s<a&&(0,l.isWhiteSpace)(e[s]);)s++;c=!0;break}s++}return{found:c,length:s}}function t(t,n,a){var i=a.length1,o=(a.length2,n.peekBytes(6)),s=128===o[0]&&1===o[1];s&&(n.skip(6),i=o[5]<<24|o[4]<<16|o[3]<<8|o[2]);var c=function(t,n){var a,i,o,s,c=[101,101,120,101,99],u=t.pos;try{i=(a=t.getBytes(n)).length}catch(e){if(e instanceof l.MissingDataException)throw e}if(i===n&&(o=e(a,c,n-2*c.length)).found&&o.length===n)return{stream:new d.Stream(a),length:n};for((0,r.warn)('Invalid "Length1" property in Type1 font -- trying to recover.'),t.pos=u;0!==(o=e(t.peekBytes(2048),c,0)).length;)if(t.pos+=o.length,o.found){s=t.pos-u;break}return t.pos=u,s?{stream:new d.Stream(t.getBytes(s)),length:s}:((0,r.warn)('Unable to recover "Length1" property in Type1 font -- using as is.'),{stream:new d.Stream(t.getBytes(n)),length:n})}(n,i);new f.Type1Parser(c.stream,!1,m).extractFontHeader(a),s&&((o=n.getBytes(6))[5],o[4],o[3],o[2]);var u,h=(u=n.getBytes(),{stream:new d.Stream(u),length:u.length}),p=new f.Type1Parser(h.stream,!0,m).extractFontProgram(a);for(const e in p.properties)a[e]=p.properties[e];var g=p.charstrings,v=this.getType2Charstrings(g),b=this.getType2Subrs(p.subrs);this.charstrings=g,this.data=this.wrap(t,v,this.charstrings,b,a),this.seacs=this.getSeacs(p.charstrings)}return t.prototype={get numGlyphs(){return this.charstrings.length+1},getCharset:function(){for(var e=[".notdef"],t=this.charstrings,n=0;n<t.length;n++)e.push(t[n].glyphName);return e},getGlyphMapping:function(e){var t=this.charstrings;if(e.composite){const n=Object.create(null);for(let r=0,a=t.length;r<a;r++)n[e.cMap.charCodeOf(r)]=r+1;return n}var n,r=[".notdef"];for(n=0;n<t.length;n++)r.push(t[n].glyphName);var a=e.builtInEncoding;if(a){var i=Object.create(null);for(var o in a)(n=r.indexOf(a[o]))>=0&&(i[o]=n)}return R(e,i,r)},hasGlyphId:function(e){return!(e<0||e>=this.numGlyphs)&&(0===e||this.charstrings[e-1].charstring.length>0)},getSeacs:function(e){var t,n,r=[];for(t=0,n=e.length;t<n;t++){var a=e[t];a.seac&&(r[t+1]=a.seac)}return r},getType2Charstrings:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n].charstring);return t},getType2Subrs:function(e){var t,n=e.length;t=n<1133?107:n<33769?1131:32768;var r,a=[];for(r=0;r<t;r++)a.push([11]);for(r=0;r<n;r++)a.push(e[r]);return a},wrap:function(e,t,n,r,i){var o=new a.CFF;o.header=new a.CFFHeader(1,0,4,4),o.names=[e];var s=new a.CFFTopDict;s.setByName("version",391),s.setByName("Notice",392),s.setByName("FullName",393),s.setByName("FamilyName",394),s.setByName("Weight",395),s.setByName("Encoding",null),s.setByName("FontMatrix",i.fontMatrix),s.setByName("FontBBox",i.bbox),s.setByName("charset",null),s.setByName("CharStrings",null),s.setByName("Private",null),o.topDict=s;var c=new a.CFFStrings;c.add("Version 0.11"),c.add("See original notice"),c.add(e),c.add(e),c.add("Medium"),o.strings=c,o.globalSubrIndex=new a.CFFIndex;var l,u,h=t.length,d=[".notdef"];for(l=0;l<h;l++){const e=n[l].glyphName;-1===a.CFFStandardStrings.indexOf(e)&&c.add(e),d.push(e)}o.charset=new a.CFFCharset(!1,0,d);var f=new a.CFFIndex;for(f.add([139,14]),l=0;l<h;l++)f.add(t[l]);o.charStrings=f;var p=new a.CFFPrivateDict;p.setByName("Subrs",null);var g=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(l=0,u=g.length;l<u;l++){var m=g[l];if(m in i.privateData){var v=i.privateData[m];if(Array.isArray(v))for(var b=v.length-1;b>0;b--)v[b]-=v[b-1];p.setByName(m,v)}}o.topDict.privateDict=p;var y=new a.CFFIndex;for(l=0,u=r.length;l<u;l++)y.add(r[l]);return p.subrsIndex=y,new a.CFFCompiler(o).compile()}},t}(),P=function(){function e(e,t){this.properties=t;var n=new a.CFFParser(e,t,m);this.cff=n.parse(),this.cff.duplicateFirstGlyph();var i=new a.CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=i.compile()}catch(n){(0,r.warn)("Failed to compile font "+t.loadedName),this.data=e}}return e.prototype={get numGlyphs(){return this.cff.charStrings.count},getCharset:function(){return this.cff.charset.charset},getGlyphMapping:function(){var e,t,n=this.cff,r=this.properties,a=n.charset.charset;if(r.composite){let o;if(e=Object.create(null),n.isCIDFont)for(t=0;t<a.length;t++){var i=a[t];o=r.cMap.charCodeOf(i),e[o]=t}else for(t=0;t<n.charStrings.count;t++)o=r.cMap.charCodeOf(t),e[o]=t;return e}return R(r,n.encoding?n.encoding.encoding:null,a)},hasGlyphId:function(e){return this.cff.hasGlyphId(e)}},e}()},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CFFTopDict=t.CFFStrings=t.CFFStandardStrings=t.CFFPrivateDict=t.CFFParser=t.CFFIndex=t.CFFHeader=t.CFFFDSelect=t.CFFCompiler=t.CFFCharset=t.CFF=void 0;var r=n(2),a=n(31),i=n(32),o=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];t.CFFStandardStrings=o;var s,c,l=(s=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],c=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn:function(e,t){e[t-2]=e[t-2]+e[t-1]}},{id:"sub",min:2,stackDelta:-1,stackFn:function(e,t){e[t-2]=e[t-2]-e[t-1]}},{id:"div",min:2,stackDelta:-1,stackFn:function(e,t){e[t-2]=e[t-2]/e[t-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn:function(e,t){e[t-1]=-e[t-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn:function(e,t){e[t-2]=e[t-2]*e[t-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}],class{constructor(e,t,n){this.bytes=e.getBytes(),this.properties=t,this.seacAnalysisEnabled=!!n}parse(){var e=this.properties,t=new u;this.cff=t;var n=this.parseHeader(),r=this.parseIndex(n.endPos),a=this.parseIndex(r.endPos),i=this.parseIndex(a.endPos),o=this.parseIndex(i.endPos),s=this.parseDict(a.obj.get(0)),c=this.createDict(v,s,t.strings);t.header=n.obj,t.names=this.parseNameIndex(r.obj),t.strings=this.parseStringIndex(i.obj),t.topDict=c,t.globalSubrIndex=o.obj,this.parsePrivateDict(t.topDict),t.isCIDFont=c.hasName("ROS");var l=c.getByName("CharStrings"),h=this.parseIndex(l).obj,d=c.getByName("FontMatrix");d&&(e.fontMatrix=d);var f,p,g=c.getByName("FontBBox");if(g&&(e.ascent=Math.max(g[3],g[1]),e.descent=Math.min(g[1],g[3]),e.ascentScaled=!0),t.isCIDFont){for(var m=this.parseIndex(c.getByName("FDArray")).obj,b=0,y=m.count;b<y;++b){var w=m.get(b),x=this.createDict(v,this.parseDict(w),t.strings);this.parsePrivateDict(x),t.fdArray.push(x)}p=null,f=this.parseCharsets(c.getByName("charset"),h.count,t.strings,!0),t.fdSelect=this.parseFDSelect(c.getByName("FDSelect"),h.count)}else f=this.parseCharsets(c.getByName("charset"),h.count,t.strings,!1),p=this.parseEncoding(c.getByName("Encoding"),e,t.strings,f.charset);t.charset=f,t.encoding=p;var C=this.parseCharStrings({charStrings:h,localSubrIndex:c.privateDict.subrsIndex,globalSubrIndex:o.obj,fdSelect:t.fdSelect,fdArray:t.fdArray,privateDict:c.privateDict});return t.charStrings=C.charStrings,t.seacs=C.seacs,t.widths=C.widths,t}parseHeader(){for(var e=this.bytes,t=e.length,n=0;n<t&&1!==e[n];)++n;if(n>=t)throw new r.FormatError("Invalid CFF header");0!==n&&((0,r.info)("cff data is shifted"),e=e.subarray(n),this.bytes=e);var a=e[0],i=e[1],o=e[2],s=e[3];return{obj:new h(a,i,o,s),endPos:o}}parseDict(e){var t=0;var n,a=[],i=[];t=0;for(var o=e.length;t<o;){var s=e[t];s<=21?(12===s&&(s=s<<8|e[++t]),i.push([s,a]),a=[],++t):a.push((n=void 0,30===(n=e[t++])?function(){var n="";const r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(var a=e.length;t<a;){var i=e[t++],o=i>>4,s=15&i;if(15===o)break;if(n+=r[o],15===s)break;n+=r[s]}return parseFloat(n)}():28===n?n=((n=e[t++])<<24|e[t++]<<16)>>16:29===n?n=(n=(n=(n=e[t++])<<8|e[t++])<<8|e[t++])<<8|e[t++]:n>=32&&n<=246?n-139:n>=247&&n<=250?256*(n-247)+e[t++]+108:n>=251&&n<=254?-256*(n-251)-e[t++]-108:((0,r.warn)('CFFParser_parseDict: "'+n+'" is a reserved command.'),NaN)))}return i}parseIndex(e){var t,n,r=new f,a=this.bytes,i=a[e++]<<8|a[e++],o=[],s=e;if(0!==i){var c=a[e++],l=e+(i+1)*c-1;for(t=0,n=i+1;t<n;++t){for(var u=0,h=0;h<c;++h)u<<=8,u+=a[e++];o.push(l+u)}s=o[i]}for(t=0,n=o.length-1;t<n;++t){var d=o[t],p=o[t+1];r.add(a.subarray(d,p))}return{obj:r,endPos:s}}parseNameIndex(e){for(var t=[],n=0,a=e.count;n<a;++n){var i=e.get(n);t.push((0,r.bytesToString)(i))}return t}parseStringIndex(e){for(var t=new d,n=0,a=e.count;n<a;++n){var i=e.get(n);t.add((0,r.bytesToString)(i))}return t}createDict(e,t,n){for(var r=new e(n),a=0,i=t.length;a<i;++a){var o=t[a],s=o[0],c=o[1];r.setByKey(s,c)}return r}parseCharString(e,t,n,a){if(!t||e.callDepth>10)return!1;for(var i=e.stackSize,o=e.stack,l=t.length,u=0;u<l;){var h=t[u++],d=null;if(12===h){var f=t[u++];0===f?(t[u-2]=139,t[u-1]=22,i=0):d=c[f]}else if(28===h)o[i]=(t[u]<<24|t[u+1]<<16)>>16,u+=2,i++;else if(14===h){if(i>=4&&(i-=4,this.seacAnalysisEnabled))return e.seac=o.slice(i,i+4),!1;d=s[h]}else if(h>=32&&h<=246)o[i]=h-139,i++;else if(h>=247&&h<=254)o[i]=h<251?(h-247<<8)+t[u]+108:-(h-251<<8)-t[u]-108,u++,i++;else if(255===h)o[i]=(t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3])/65536,u+=4,i++;else if(19===h||20===h)e.hints+=i>>1,u+=e.hints+7>>3,i%=2,d=s[h];else{if(10===h||29===h){var p;if(!(p=10===h?n:a))return d=s[h],(0,r.warn)("Missing subrsIndex for "+d.id),!1;var g=32768;p.count<1240?g=107:p.count<33900&&(g=1131);var m=o[--i]+g;if(m<0||m>=p.count||isNaN(m))return d=s[h],(0,r.warn)("Out of bounds subrIndex for "+d.id),!1;if(e.stackSize=i,e.callDepth++,!this.parseCharString(e,p.get(m),n,a))return!1;e.callDepth--,i=e.stackSize;continue}if(11===h)return e.stackSize=i,!0;d=s[h]}if(d){if(d.stem&&(e.hints+=i>>1,3===h||23===h?e.hasVStems=!0:!e.hasVStems||1!==h&&18!==h||((0,r.warn)("CFF stem hints are in wrong order"),t[u-1]=1===h?3:23)),"min"in d&&!e.undefStack&&i<d.min)return(0,r.warn)("Not enough parameters for "+d.id+"; actual: "+i+", expected: "+d.min),!1;e.firstStackClearing&&d.stackClearing&&(e.firstStackClearing=!1,(i-=d.min)>=2&&d.stem?i%=2:i>1&&(0,r.warn)("Found too many parameters for stack-clearing command"),i>0&&o[i-1]>=0&&(e.width=o[i-1])),"stackDelta"in d?("stackFn"in d&&d.stackFn(o,i),i+=d.stackDelta):d.stackClearing?i=0:d.resetStack?(i=0,e.undefStack=!1):d.undefStack&&(i=0,e.undefStack=!0,e.firstStackClearing=!1)}}return e.stackSize=i,!0}parseCharStrings({charStrings:e,localSubrIndex:t,globalSubrIndex:n,fdSelect:a,fdArray:i,privateDict:o}){for(var s=[],c=[],l=e.count,u=0;u<l;u++){var h=e.get(u),d={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null,hasVStems:!1},f=!0,p=null,g=o;if(a&&i.length){var m=a.getFDIndex(u);-1===m&&((0,r.warn)("Glyph index is not in fd select."),f=!1),m>=i.length&&((0,r.warn)("Invalid fd index for glyph index."),f=!1),f&&(p=(g=i[m].privateDict).subrsIndex)}else t&&(p=t);if(f&&(f=this.parseCharString(d,h,p,n)),null!==d.width){const e=g.getByName("nominalWidthX");c[u]=e+d.width}else{const e=g.getByName("defaultWidthX");c[u]=e}null!==d.seac&&(s[u]=d.seac),f||e.set(u,new Uint8Array([14]))}return{charStrings:e,seacs:s,widths:c}}emptyPrivateDictionary(e){var t=this.createDict(b,[],e.strings);e.setByKey(18,[0,0]),e.privateDict=t}parsePrivateDict(e){if(e.hasName("Private")){var t=e.getByName("Private");if(Array.isArray(t)&&2===t.length){var n=t[0],r=t[1];if(0===n||r>=this.bytes.length)this.emptyPrivateDictionary(e);else{var a=r+n,i=this.bytes.subarray(r,a),o=this.parseDict(i),s=this.createDict(b,o,e.strings);if(e.privateDict=s,s.getByName("Subrs")){var c=s.getByName("Subrs"),l=r+c;if(0===c||l>=this.bytes.length)this.emptyPrivateDictionary(e);else{var u=this.parseIndex(l);s.subrsIndex=u.obj}}}}else e.removeByName("Private")}else this.emptyPrivateDictionary(e)}parseCharsets(e,t,n,i){if(0===e)return new w(!0,y.ISO_ADOBE,a.ISOAdobeCharset);if(1===e)return new w(!0,y.EXPERT,a.ExpertCharset);if(2===e)return new w(!0,y.EXPERT_SUBSET,a.ExpertSubsetCharset);var o=this.bytes,s=e,c=o[e++];const l=[i?0:".notdef"];var u,h,d;switch(t-=1,c){case 0:for(d=0;d<t;d++)u=o[e++]<<8|o[e++],l.push(i?u:n.get(u));break;case 1:for(;l.length<=t;)for(u=o[e++]<<8|o[e++],h=o[e++],d=0;d<=h;d++)l.push(i?u++:n.get(u++));break;case 2:for(;l.length<=t;)for(u=o[e++]<<8|o[e++],h=o[e++]<<8|o[e++],d=0;d<=h;d++)l.push(i?u++:n.get(u++));break;default:throw new r.FormatError("Unknown charset format")}var f=e,p=o.subarray(s,f);return new w(!1,c,l,p)}parseEncoding(e,t,n,a){var o,s,c,l=Object.create(null),u=this.bytes,h=!1,d=null;if(0===e||1===e){h=!0,o=e;var f=e?i.ExpertEncoding:i.StandardEncoding;for(s=0,c=a.length;s<c;s++){var p=f.indexOf(a[s]);-1!==p&&(l[p]=s)}}else{var g=e;switch(127&(o=u[e++])){case 0:var m=u[e++];for(s=1;s<=m;s++)l[u[e++]]=s;break;case 1:var v=u[e++],b=1;for(s=0;s<v;s++)for(var y=u[e++],w=u[e++],C=y;C<=y+w;C++)l[C]=b++;break;default:throw new r.FormatError(`Unknown encoding format: ${o} in CFF`)}var k=e;128&o&&(u[g]&=127,function(){var t=u[e++];for(s=0;s<t;s++){var r=u[e++],i=(u[e++]<<8)+(255&u[e++]);l[r]=a.indexOf(n.get(i))}}()),d=u.subarray(g,k)}return new x(h,o&=127,l,d)}parseFDSelect(e,t){var n,a=this.bytes,i=a[e++],o=[];switch(i){case 0:for(n=0;n<t;++n){var s=a[e++];o.push(s)}break;case 3:var c=a[e++]<<8|a[e++];for(n=0;n<c;++n){var l=a[e++]<<8|a[e++];0===n&&0!==l&&((0,r.warn)("parseFDSelect: The first range must have a first GID of 0 -- trying to recover."),l=0);for(var u=a[e++],h=a[e]<<8|a[e+1],d=l;d<h;++d)o.push(u)}e+=2;break;default:throw new r.FormatError(`parseFDSelect: Unknown format "${i}".`)}if(o.length!==t)throw new r.FormatError("parseFDSelect: Invalid font data.");return new C(i,o)}});t.CFFParser=l;class u{constructor(){this.header=null,this.names=[],this.topDict=null,this.strings=new d,this.globalSubrIndex=null,this.encoding=null,this.charset=null,this.charStrings=null,this.fdArray=[],this.fdSelect=null,this.isCIDFont=!1}duplicateFirstGlyph(){if(this.charStrings.count>=65535)(0,r.warn)("Not enough space in charstrings to duplicate first glyph.");else{var e=this.charStrings.get(0);this.charStrings.add(e),this.isCIDFont&&this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0])}}hasGlyphId(e){return!(e<0||e>=this.charStrings.count)&&this.charStrings.get(e).length>0}}t.CFF=u;class h{constructor(e,t,n,r){this.major=e,this.minor=t,this.hdrSize=n,this.offSize=r}}t.CFFHeader=h;class d{constructor(){this.strings=[]}get(e){return e>=0&&e<=390?o[e]:e-391<=this.strings.length?this.strings[e-391]:o[0]}getSID(e){let t=o.indexOf(e);return-1!==t?t:(t=this.strings.indexOf(e),-1!==t?t+391:-1)}add(e){this.strings.push(e)}get count(){return this.strings.length}}t.CFFStrings=d;class f{constructor(){this.objects=[],this.length=0}add(e){this.length+=e.length,this.objects.push(e)}set(e,t){this.length+=t.length-this.objects[e].length,this.objects[e]=t}get(e){return this.objects[e]}get count(){return this.objects.length}}t.CFFIndex=f;class p{constructor(e,t){this.keyToNameMap=e.keyToNameMap,this.nameToKeyMap=e.nameToKeyMap,this.defaults=e.defaults,this.types=e.types,this.opcodes=e.opcodes,this.order=e.order,this.strings=t,this.values=Object.create(null)}setByKey(e,t){if(!(e in this.keyToNameMap))return!1;var n=t.length;if(0===n)return!0;for(var a=0;a<n;a++)if(isNaN(t[a]))return(0,r.warn)('Invalid CFFDict value: "'+t+'" for key "'+e+'".'),!0;var i=this.types[e];return"num"!==i&&"sid"!==i&&"offset"!==i||(t=t[0]),this.values[e]=t,!0}setByName(e,t){if(!(e in this.nameToKeyMap))throw new r.FormatError(`Invalid dictionary name "${e}"`);this.values[this.nameToKeyMap[e]]=t}hasName(e){return this.nameToKeyMap[e]in this.values}getByName(e){if(!(e in this.nameToKeyMap))throw new r.FormatError(`Invalid dictionary name ${e}"`);var t=this.nameToKeyMap[e];return t in this.values?this.values[t]:this.defaults[t]}removeByName(e){delete this.values[this.nameToKeyMap[e]]}static createTables(e){for(var t={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]},n=0,r=e.length;n<r;++n){var a=e[n],i=Array.isArray(a[0])?(a[0][0]<<8)+a[0][1]:a[0];t.keyToNameMap[i]=a[1],t.nameToKeyMap[a[1]]=i,t.types[i]=a[2],t.defaults[i]=a[3],t.opcodes[i]=Array.isArray(a[0])?a[0]:[a[0]],t.order.push(i)}return t}}var g,m,v=(g=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]],m=null,class extends p{constructor(e){null===m&&(m=p.createTables(g)),super(m,e),this.privateDict=null}});t.CFFTopDict=v;var b=function(){var e=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]],t=null;return class extends p{constructor(n){null===t&&(t=p.createTables(e)),super(t,n),this.subrsIndex=null}}}();t.CFFPrivateDict=b;var y={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2};class w{constructor(e,t,n,r){this.predefined=e,this.format=t,this.charset=n,this.raw=r}}t.CFFCharset=w;class x{constructor(e,t,n,r){this.predefined=e,this.format=t,this.encoding=n,this.raw=r}}class C{constructor(e,t){this.format=e,this.fdSelect=t}getFDIndex(e){return e<0||e>=this.fdSelect.length?-1:this.fdSelect[e]}}t.CFFFDSelect=C;class k{constructor(){this.offsets=Object.create(null)}isTracking(e){return e in this.offsets}track(e,t){if(e in this.offsets)throw new r.FormatError(`Already tracking location of ${e}`);this.offsets[e]=t}offset(e){for(var t in this.offsets)this.offsets[t]+=e}setEntryLocation(e,t,n){if(!(e in this.offsets))throw new r.FormatError(`Not tracking location of ${e}`);for(var a=n.data,i=this.offsets[e],o=0,s=t.length;o<s;++o){var c=5*o+i,l=c+1,u=c+2,h=c+3,d=c+4;if(29!==a[c]||0!==a[l]||0!==a[u]||0!==a[h]||0!==a[d])throw new r.FormatError("writing to an offset that is not empty");var f=t[o];a[c]=29,a[l]=f>>24&255,a[u]=f>>16&255,a[h]=f>>8&255,a[d]=255&f}}}class S{constructor(e){this.cff=e}compile(){var e=this.cff,t={data:[],length:0,add:function(e){this.data=this.data.concat(e),this.length=this.data.length}},n=this.compileHeader(e.header);t.add(n);var a=this.compileNameIndex(e.names);if(t.add(a),e.isCIDFont&&e.topDict.hasName("FontMatrix")){var i=e.topDict.getByName("FontMatrix");e.topDict.removeByName("FontMatrix");for(var o=0,s=e.fdArray.length;o<s;o++){var c=e.fdArray[o],l=i.slice(0);c.hasName("FontMatrix")&&(l=r.Util.transform(l,c.getByName("FontMatrix"))),c.setByName("FontMatrix",l)}}const u=e.topDict.getByName("XUID");u&&u.length>16&&e.topDict.removeByName("XUID"),e.topDict.setByName("charset",0);var h=this.compileTopDicts([e.topDict],t.length,e.isCIDFont);t.add(h.output);var d=h.trackers[0],f=this.compileStringIndex(e.strings.strings);t.add(f);var p=this.compileIndex(e.globalSubrIndex);if(t.add(p),e.encoding&&e.topDict.hasName("Encoding"))if(e.encoding.predefined)d.setEntryLocation("Encoding",[e.encoding.format],t);else{var g=this.compileEncoding(e.encoding);d.setEntryLocation("Encoding",[t.length],t),t.add(g)}var m=this.compileCharset(e.charset,e.charStrings.count,e.strings,e.isCIDFont);d.setEntryLocation("charset",[t.length],t),t.add(m);var v=this.compileCharStrings(e.charStrings);if(d.setEntryLocation("CharStrings",[t.length],t),t.add(v),e.isCIDFont){d.setEntryLocation("FDSelect",[t.length],t);var b=this.compileFDSelect(e.fdSelect);t.add(b),h=this.compileTopDicts(e.fdArray,t.length,!0),d.setEntryLocation("FDArray",[t.length],t),t.add(h.output);var y=h.trackers;this.compilePrivateDicts(e.fdArray,y,t)}return this.compilePrivateDicts([e.topDict],[d],t),t.add([0]),t.data}encodeNumber(e){return Number.isInteger(e)?this.encodeInteger(e):this.encodeFloat(e)}static get EncodeFloatRegExp(){return(0,r.shadow)(this,"EncodeFloatRegExp",/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/)}encodeFloat(e){var t=e.toString(),n=S.EncodeFloatRegExp.exec(t);if(n){var r=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*r)/r).toString()}var a,i,o="";for(a=0,i=t.length;a<i;++a){var s=t[a];o+="e"===s?"-"===t[++a]?"c":"b":"."===s?"a":"-"===s?"e":s}var c=[30];for(a=0,i=(o+=1&o.length?"f":"ff").length;a<i;a+=2)c.push(parseInt(o.substring(a,a+2),16));return c}encodeInteger(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?[28,e>>8&255,255&e]:[29,e>>24&255,e>>16&255,e>>8&255,255&e]}compileHeader(e){return[e.major,e.minor,e.hdrSize,e.offSize]}compileNameIndex(e){for(var t=new f,n=0,a=e.length;n<a;++n){for(var i=e[n],o=Math.min(i.length,127),s=new Array(o),c=0;c<o;c++){var l=i[c];(l<"!"||l>"~"||"["===l||"]"===l||"("===l||")"===l||"{"===l||"}"===l||"<"===l||">"===l||"/"===l||"%"===l)&&(l="_"),s[c]=l}""===(s=s.join(""))&&(s="Bad_Font_Name"),t.add((0,r.stringToBytes)(s))}return this.compileIndex(t)}compileTopDicts(e,t,n){for(var r=[],a=new f,i=0,o=e.length;i<o;++i){var s=e[i];n&&(s.removeByName("CIDFontVersion"),s.removeByName("CIDFontRevision"),s.removeByName("CIDFontType"),s.removeByName("CIDCount"),s.removeByName("UIDBase"));var c=new k,l=this.compileDict(s,c);r.push(c),a.add(l),c.offset(t)}return{trackers:r,output:a=this.compileIndex(a,r)}}compilePrivateDicts(e,t,n){for(var a=0,i=e.length;a<i;++a){var o=e[a],s=o.privateDict;if(!s||!o.hasName("Private"))throw new r.FormatError("There must be a private dictionary.");var c=new k,l=this.compileDict(s,c),u=n.length;if(c.offset(u),l.length||(u=0),t[a].setEntryLocation("Private",[l.length,u],n),n.add(l),s.subrsIndex&&s.hasName("Subrs")){var h=this.compileIndex(s.subrsIndex);c.setEntryLocation("Subrs",[l.length],n),n.add(h)}}}compileDict(e,t){for(var n=[],a=e.order,i=0;i<a.length;++i){var o=a[i];if(o in e.values){var s=e.values[o],c=e.types[o];if(Array.isArray(c)||(c=[c]),Array.isArray(s)||(s=[s]),0!==s.length){for(var l=0,u=c.length;l<u;++l){var h=c[l],d=s[l];switch(h){case"num":case"sid":n=n.concat(this.encodeNumber(d));break;case"offset":var f=e.keyToNameMap[o];t.isTracking(f)||t.track(f,n.length),n=n.concat([29,0,0,0,0]);break;case"array":case"delta":n=n.concat(this.encodeNumber(d));for(var p=1,g=s.length;p<g;++p)n=n.concat(this.encodeNumber(s[p]));break;default:throw new r.FormatError(`Unknown data type of ${h}`)}}n=n.concat(e.opcodes[o])}}}return n}compileStringIndex(e){for(var t=new f,n=0,a=e.length;n<a;++n)t.add((0,r.stringToBytes)(e[n]));return this.compileIndex(t)}compileGlobalSubrIndex(){var e=this.cff.globalSubrIndex;this.out.writeByteArray(this.compileIndex(e))}compileCharStrings(e){for(var t=new f,n=0;n<e.count;n++){var r=e.get(n);0!==r.length?t.add(r):t.add(new Uint8Array([139,14]))}return this.compileIndex(t)}compileCharset(e,t,n,a){let i;const o=t-1;if(a)i=new Uint8Array([2,0,0,o>>8&255,255&o]);else{i=new Uint8Array(1+2*o),i[0]=0;let t=0;const a=e.charset.length;let s=!1;for(let o=1;o<i.length;o+=2){let c=0;if(t<a){const a=e.charset[t++];c=n.getSID(a),-1===c&&(c=0,s||(s=!0,(0,r.warn)(`Couldn't find ${a} in CFF strings`)))}i[o]=c>>8&255,i[o+1]=255&c}}return this.compileTypedArray(i)}compileEncoding(e){return this.compileTypedArray(e.raw)}compileFDSelect(e){const t=e.format;let n,r;switch(t){case 0:for(n=new Uint8Array(1+e.fdSelect.length),n[0]=t,r=0;r<e.fdSelect.length;r++)n[r+1]=e.fdSelect[r];break;case 3:const a=0;let i=e.fdSelect[0];const o=[t,0,0,a>>8&255,255&a,i];for(r=1;r<e.fdSelect.length;r++){const t=e.fdSelect[r];t!==i&&(o.push(r>>8&255,255&r,t),i=t)}const s=(o.length-3)/3;o[1]=s>>8&255,o[2]=255&s,o.push(r>>8&255,255&r),n=new Uint8Array(o)}return this.compileTypedArray(n)}compileTypedArray(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e[n];return t}compileIndex(e,t=[]){var n=e.objects,r=n.length;if(0===r)return[0,0,0];var a,i,o=[r>>8&255,255&r],s=1;for(a=0;a<r;++a)s+=n[a].length;i=s<256?1:s<65536?2:s<16777216?3:4,o.push(i);var c=1;for(a=0;a<r+1;a++)1===i?o.push(255&c):2===i?o.push(c>>8&255,255&c):3===i?o.push(c>>16&255,c>>8&255,255&c):o.push(c>>>24&255,c>>16&255,c>>8&255,255&c),n[a]&&(c+=n[a].length);for(a=0;a<r;a++){t[a]&&t[a].offset(o.length);for(var l=0,u=n[a].length;l<u;l++)o.push(n[a][l])}return o}}t.CFFCompiler=S},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ISOAdobeCharset=t.ExpertSubsetCharset=t.ExpertCharset=void 0,t.ISOAdobeCharset=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"],t.ExpertCharset=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],t.ExpertSubsetCharset=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"]},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEncoding=function(e){switch(e){case"WinAnsiEncoding":return o;case"StandardEncoding":return i;case"MacRomanEncoding":return a;case"SymbolSetEncoding":return s;case"ZapfDingbatsEncoding":return c;case"ExpertEncoding":return n;case"MacExpertEncoding":return r;default:return null}},t.ZapfDingbatsEncoding=t.WinAnsiEncoding=t.SymbolSetEncoding=t.StandardEncoding=t.MacRomanEncoding=t.ExpertEncoding=void 0;const n=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];t.ExpertEncoding=n;const r=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""],a=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];t.MacRomanEncoding=a;const i=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];t.StandardEncoding=i;const o=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];t.WinAnsiEncoding=o;const s=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];t.SymbolSetEncoding=s;const c=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];t.ZapfDingbatsEncoding=c},(e,t,n)=>{n.r(t),n.d(t,{getDingbatsGlyphsUnicode:()=>i,getGlyphsUnicode:()=>a});var r=n(8),a=(0,r.getArrayLookupTableFactory)((function(){return["A",65,"AE",198,"AEacute",508,"AEmacron",482,"AEsmall",63462,"Aacute",193,"Aacutesmall",63457,"Abreve",258,"Abreveacute",7854,"Abrevecyrillic",1232,"Abrevedotbelow",7862,"Abrevegrave",7856,"Abrevehookabove",7858,"Abrevetilde",7860,"Acaron",461,"Acircle",9398,"Acircumflex",194,"Acircumflexacute",7844,"Acircumflexdotbelow",7852,"Acircumflexgrave",7846,"Acircumflexhookabove",7848,"Acircumflexsmall",63458,"Acircumflextilde",7850,"Acute",63177,"Acutesmall",63412,"Acyrillic",1040,"Adblgrave",512,"Adieresis",196,"Adieresiscyrillic",1234,"Adieresismacron",478,"Adieresissmall",63460,"Adotbelow",7840,"Adotmacron",480,"Agrave",192,"Agravesmall",63456,"Ahookabove",7842,"Aiecyrillic",1236,"Ainvertedbreve",514,"Alpha",913,"Alphatonos",902,"Amacron",256,"Amonospace",65313,"Aogonek",260,"Aring",197,"Aringacute",506,"Aringbelow",7680,"Aringsmall",63461,"Asmall",63329,"Atilde",195,"Atildesmall",63459,"Aybarmenian",1329,"B",66,"Bcircle",9399,"Bdotaccent",7682,"Bdotbelow",7684,"Becyrillic",1041,"Benarmenian",1330,"Beta",914,"Bhook",385,"Blinebelow",7686,"Bmonospace",65314,"Brevesmall",63220,"Bsmall",63330,"Btopbar",386,"C",67,"Caarmenian",1342,"Cacute",262,"Caron",63178,"Caronsmall",63221,"Ccaron",268,"Ccedilla",199,"Ccedillaacute",7688,"Ccedillasmall",63463,"Ccircle",9400,"Ccircumflex",264,"Cdot",266,"Cdotaccent",266,"Cedillasmall",63416,"Chaarmenian",1353,"Cheabkhasiancyrillic",1212,"Checyrillic",1063,"Chedescenderabkhasiancyrillic",1214,"Chedescendercyrillic",1206,"Chedieresiscyrillic",1268,"Cheharmenian",1347,"Chekhakassiancyrillic",1227,"Cheverticalstrokecyrillic",1208,"Chi",935,"Chook",391,"Circumflexsmall",63222,"Cmonospace",65315,"Coarmenian",1361,"Csmall",63331,"D",68,"DZ",497,"DZcaron",452,"Daarmenian",1332,"Dafrican",393,"Dcaron",270,"Dcedilla",7696,"Dcircle",9401,"Dcircumflexbelow",7698,"Dcroat",272,"Ddotaccent",7690,"Ddotbelow",7692,"Decyrillic",1044,"Deicoptic",1006,"Delta",8710,"Deltagreek",916,"Dhook",394,"Dieresis",63179,"DieresisAcute",63180,"DieresisGrave",63181,"Dieresissmall",63400,"Digammagreek",988,"Djecyrillic",1026,"Dlinebelow",7694,"Dmonospace",65316,"Dotaccentsmall",63223,"Dslash",272,"Dsmall",63332,"Dtopbar",395,"Dz",498,"Dzcaron",453,"Dzeabkhasiancyrillic",1248,"Dzecyrillic",1029,"Dzhecyrillic",1039,"E",69,"Eacute",201,"Eacutesmall",63465,"Ebreve",276,"Ecaron",282,"Ecedillabreve",7708,"Echarmenian",1333,"Ecircle",9402,"Ecircumflex",202,"Ecircumflexacute",7870,"Ecircumflexbelow",7704,"Ecircumflexdotbelow",7878,"Ecircumflexgrave",7872,"Ecircumflexhookabove",7874,"Ecircumflexsmall",63466,"Ecircumflextilde",7876,"Ecyrillic",1028,"Edblgrave",516,"Edieresis",203,"Edieresissmall",63467,"Edot",278,"Edotaccent",278,"Edotbelow",7864,"Efcyrillic",1060,"Egrave",200,"Egravesmall",63464,"Eharmenian",1335,"Ehookabove",7866,"Eightroman",8551,"Einvertedbreve",518,"Eiotifiedcyrillic",1124,"Elcyrillic",1051,"Elevenroman",8554,"Emacron",274,"Emacronacute",7702,"Emacrongrave",7700,"Emcyrillic",1052,"Emonospace",65317,"Encyrillic",1053,"Endescendercyrillic",1186,"Eng",330,"Enghecyrillic",1188,"Enhookcyrillic",1223,"Eogonek",280,"Eopen",400,"Epsilon",917,"Epsilontonos",904,"Ercyrillic",1056,"Ereversed",398,"Ereversedcyrillic",1069,"Escyrillic",1057,"Esdescendercyrillic",1194,"Esh",425,"Esmall",63333,"Eta",919,"Etarmenian",1336,"Etatonos",905,"Eth",208,"Ethsmall",63472,"Etilde",7868,"Etildebelow",7706,"Euro",8364,"Ezh",439,"Ezhcaron",494,"Ezhreversed",440,"F",70,"Fcircle",9403,"Fdotaccent",7710,"Feharmenian",1366,"Feicoptic",996,"Fhook",401,"Fitacyrillic",1138,"Fiveroman",8548,"Fmonospace",65318,"Fourroman",8547,"Fsmall",63334,"G",71,"GBsquare",13191,"Gacute",500,"Gamma",915,"Gammaafrican",404,"Gangiacoptic",1002,"Gbreve",286,"Gcaron",486,"Gcedilla",290,"Gcircle",9404,"Gcircumflex",284,"Gcommaaccent",290,"Gdot",288,"Gdotaccent",288,"Gecyrillic",1043,"Ghadarmenian",1346,"Ghemiddlehookcyrillic",1172,"Ghestrokecyrillic",1170,"Gheupturncyrillic",1168,"Ghook",403,"Gimarmenian",1331,"Gjecyrillic",1027,"Gmacron",7712,"Gmonospace",65319,"Grave",63182,"Gravesmall",63328,"Gsmall",63335,"Gsmallhook",667,"Gstroke",484,"H",72,"H18533",9679,"H18543",9642,"H18551",9643,"H22073",9633,"HPsquare",13259,"Haabkhasiancyrillic",1192,"Hadescendercyrillic",1202,"Hardsigncyrillic",1066,"Hbar",294,"Hbrevebelow",7722,"Hcedilla",7720,"Hcircle",9405,"Hcircumflex",292,"Hdieresis",7718,"Hdotaccent",7714,"Hdotbelow",7716,"Hmonospace",65320,"Hoarmenian",1344,"Horicoptic",1e3,"Hsmall",63336,"Hungarumlaut",63183,"Hungarumlautsmall",63224,"Hzsquare",13200,"I",73,"IAcyrillic",1071,"IJ",306,"IUcyrillic",1070,"Iacute",205,"Iacutesmall",63469,"Ibreve",300,"Icaron",463,"Icircle",9406,"Icircumflex",206,"Icircumflexsmall",63470,"Icyrillic",1030,"Idblgrave",520,"Idieresis",207,"Idieresisacute",7726,"Idieresiscyrillic",1252,"Idieresissmall",63471,"Idot",304,"Idotaccent",304,"Idotbelow",7882,"Iebrevecyrillic",1238,"Iecyrillic",1045,"Ifraktur",8465,"Igrave",204,"Igravesmall",63468,"Ihookabove",7880,"Iicyrillic",1048,"Iinvertedbreve",522,"Iishortcyrillic",1049,"Imacron",298,"Imacroncyrillic",1250,"Imonospace",65321,"Iniarmenian",1339,"Iocyrillic",1025,"Iogonek",302,"Iota",921,"Iotaafrican",406,"Iotadieresis",938,"Iotatonos",906,"Ismall",63337,"Istroke",407,"Itilde",296,"Itildebelow",7724,"Izhitsacyrillic",1140,"Izhitsadblgravecyrillic",1142,"J",74,"Jaarmenian",1345,"Jcircle",9407,"Jcircumflex",308,"Jecyrillic",1032,"Jheharmenian",1355,"Jmonospace",65322,"Jsmall",63338,"K",75,"KBsquare",13189,"KKsquare",13261,"Kabashkircyrillic",1184,"Kacute",7728,"Kacyrillic",1050,"Kadescendercyrillic",1178,"Kahookcyrillic",1219,"Kappa",922,"Kastrokecyrillic",1182,"Kaverticalstrokecyrillic",1180,"Kcaron",488,"Kcedilla",310,"Kcircle",9408,"Kcommaaccent",310,"Kdotbelow",7730,"Keharmenian",1364,"Kenarmenian",1343,"Khacyrillic",1061,"Kheicoptic",998,"Khook",408,"Kjecyrillic",1036,"Klinebelow",7732,"Kmonospace",65323,"Koppacyrillic",1152,"Koppagreek",990,"Ksicyrillic",1134,"Ksmall",63339,"L",76,"LJ",455,"LL",63167,"Lacute",313,"Lambda",923,"Lcaron",317,"Lcedilla",315,"Lcircle",9409,"Lcircumflexbelow",7740,"Lcommaaccent",315,"Ldot",319,"Ldotaccent",319,"Ldotbelow",7734,"Ldotbelowmacron",7736,"Liwnarmenian",1340,"Lj",456,"Ljecyrillic",1033,"Llinebelow",7738,"Lmonospace",65324,"Lslash",321,"Lslashsmall",63225,"Lsmall",63340,"M",77,"MBsquare",13190,"Macron",63184,"Macronsmall",63407,"Macute",7742,"Mcircle",9410,"Mdotaccent",7744,"Mdotbelow",7746,"Menarmenian",1348,"Mmonospace",65325,"Msmall",63341,"Mturned",412,"Mu",924,"N",78,"NJ",458,"Nacute",323,"Ncaron",327,"Ncedilla",325,"Ncircle",9411,"Ncircumflexbelow",7754,"Ncommaaccent",325,"Ndotaccent",7748,"Ndotbelow",7750,"Nhookleft",413,"Nineroman",8552,"Nj",459,"Njecyrillic",1034,"Nlinebelow",7752,"Nmonospace",65326,"Nowarmenian",1350,"Nsmall",63342,"Ntilde",209,"Ntildesmall",63473,"Nu",925,"O",79,"OE",338,"OEsmall",63226,"Oacute",211,"Oacutesmall",63475,"Obarredcyrillic",1256,"Obarreddieresiscyrillic",1258,"Obreve",334,"Ocaron",465,"Ocenteredtilde",415,"Ocircle",9412,"Ocircumflex",212,"Ocircumflexacute",7888,"Ocircumflexdotbelow",7896,"Ocircumflexgrave",7890,"Ocircumflexhookabove",7892,"Ocircumflexsmall",63476,"Ocircumflextilde",7894,"Ocyrillic",1054,"Odblacute",336,"Odblgrave",524,"Odieresis",214,"Odieresiscyrillic",1254,"Odieresissmall",63478,"Odotbelow",7884,"Ogoneksmall",63227,"Ograve",210,"Ogravesmall",63474,"Oharmenian",1365,"Ohm",8486,"Ohookabove",7886,"Ohorn",416,"Ohornacute",7898,"Ohorndotbelow",7906,"Ohorngrave",7900,"Ohornhookabove",7902,"Ohorntilde",7904,"Ohungarumlaut",336,"Oi",418,"Oinvertedbreve",526,"Omacron",332,"Omacronacute",7762,"Omacrongrave",7760,"Omega",8486,"Omegacyrillic",1120,"Omegagreek",937,"Omegaroundcyrillic",1146,"Omegatitlocyrillic",1148,"Omegatonos",911,"Omicron",927,"Omicrontonos",908,"Omonospace",65327,"Oneroman",8544,"Oogonek",490,"Oogonekmacron",492,"Oopen",390,"Oslash",216,"Oslashacute",510,"Oslashsmall",63480,"Osmall",63343,"Ostrokeacute",510,"Otcyrillic",1150,"Otilde",213,"Otildeacute",7756,"Otildedieresis",7758,"Otildesmall",63477,"P",80,"Pacute",7764,"Pcircle",9413,"Pdotaccent",7766,"Pecyrillic",1055,"Peharmenian",1354,"Pemiddlehookcyrillic",1190,"Phi",934,"Phook",420,"Pi",928,"Piwrarmenian",1363,"Pmonospace",65328,"Psi",936,"Psicyrillic",1136,"Psmall",63344,"Q",81,"Qcircle",9414,"Qmonospace",65329,"Qsmall",63345,"R",82,"Raarmenian",1356,"Racute",340,"Rcaron",344,"Rcedilla",342,"Rcircle",9415,"Rcommaaccent",342,"Rdblgrave",528,"Rdotaccent",7768,"Rdotbelow",7770,"Rdotbelowmacron",7772,"Reharmenian",1360,"Rfraktur",8476,"Rho",929,"Ringsmall",63228,"Rinvertedbreve",530,"Rlinebelow",7774,"Rmonospace",65330,"Rsmall",63346,"Rsmallinverted",641,"Rsmallinvertedsuperior",694,"S",83,"SF010000",9484,"SF020000",9492,"SF030000",9488,"SF040000",9496,"SF050000",9532,"SF060000",9516,"SF070000",9524,"SF080000",9500,"SF090000",9508,"SF100000",9472,"SF110000",9474,"SF190000",9569,"SF200000",9570,"SF210000",9558,"SF220000",9557,"SF230000",9571,"SF240000",9553,"SF250000",9559,"SF260000",9565,"SF270000",9564,"SF280000",9563,"SF360000",9566,"SF370000",9567,"SF380000",9562,"SF390000",9556,"SF400000",9577,"SF410000",9574,"SF420000",9568,"SF430000",9552,"SF440000",9580,"SF450000",9575,"SF460000",9576,"SF470000",9572,"SF480000",9573,"SF490000",9561,"SF500000",9560,"SF510000",9554,"SF520000",9555,"SF530000",9579,"SF540000",9578,"Sacute",346,"Sacutedotaccent",7780,"Sampigreek",992,"Scaron",352,"Scarondotaccent",7782,"Scaronsmall",63229,"Scedilla",350,"Schwa",399,"Schwacyrillic",1240,"Schwadieresiscyrillic",1242,"Scircle",9416,"Scircumflex",348,"Scommaaccent",536,"Sdotaccent",7776,"Sdotbelow",7778,"Sdotbelowdotaccent",7784,"Seharmenian",1357,"Sevenroman",8550,"Shaarmenian",1351,"Shacyrillic",1064,"Shchacyrillic",1065,"Sheicoptic",994,"Shhacyrillic",1210,"Shimacoptic",1004,"Sigma",931,"Sixroman",8549,"Smonospace",65331,"Softsigncyrillic",1068,"Ssmall",63347,"Stigmagreek",986,"T",84,"Tau",932,"Tbar",358,"Tcaron",356,"Tcedilla",354,"Tcircle",9417,"Tcircumflexbelow",7792,"Tcommaaccent",354,"Tdotaccent",7786,"Tdotbelow",7788,"Tecyrillic",1058,"Tedescendercyrillic",1196,"Tenroman",8553,"Tetsecyrillic",1204,"Theta",920,"Thook",428,"Thorn",222,"Thornsmall",63486,"Threeroman",8546,"Tildesmall",63230,"Tiwnarmenian",1359,"Tlinebelow",7790,"Tmonospace",65332,"Toarmenian",1337,"Tonefive",444,"Tonesix",388,"Tonetwo",423,"Tretroflexhook",430,"Tsecyrillic",1062,"Tshecyrillic",1035,"Tsmall",63348,"Twelveroman",8555,"Tworoman",8545,"U",85,"Uacute",218,"Uacutesmall",63482,"Ubreve",364,"Ucaron",467,"Ucircle",9418,"Ucircumflex",219,"Ucircumflexbelow",7798,"Ucircumflexsmall",63483,"Ucyrillic",1059,"Udblacute",368,"Udblgrave",532,"Udieresis",220,"Udieresisacute",471,"Udieresisbelow",7794,"Udieresiscaron",473,"Udieresiscyrillic",1264,"Udieresisgrave",475,"Udieresismacron",469,"Udieresissmall",63484,"Udotbelow",7908,"Ugrave",217,"Ugravesmall",63481,"Uhookabove",7910,"Uhorn",431,"Uhornacute",7912,"Uhorndotbelow",7920,"Uhorngrave",7914,"Uhornhookabove",7916,"Uhorntilde",7918,"Uhungarumlaut",368,"Uhungarumlautcyrillic",1266,"Uinvertedbreve",534,"Ukcyrillic",1144,"Umacron",362,"Umacroncyrillic",1262,"Umacrondieresis",7802,"Umonospace",65333,"Uogonek",370,"Upsilon",933,"Upsilon1",978,"Upsilonacutehooksymbolgreek",979,"Upsilonafrican",433,"Upsilondieresis",939,"Upsilondieresishooksymbolgreek",980,"Upsilonhooksymbol",978,"Upsilontonos",910,"Uring",366,"Ushortcyrillic",1038,"Usmall",63349,"Ustraightcyrillic",1198,"Ustraightstrokecyrillic",1200,"Utilde",360,"Utildeacute",7800,"Utildebelow",7796,"V",86,"Vcircle",9419,"Vdotbelow",7806,"Vecyrillic",1042,"Vewarmenian",1358,"Vhook",434,"Vmonospace",65334,"Voarmenian",1352,"Vsmall",63350,"Vtilde",7804,"W",87,"Wacute",7810,"Wcircle",9420,"Wcircumflex",372,"Wdieresis",7812,"Wdotaccent",7814,"Wdotbelow",7816,"Wgrave",7808,"Wmonospace",65335,"Wsmall",63351,"X",88,"Xcircle",9421,"Xdieresis",7820,"Xdotaccent",7818,"Xeharmenian",1341,"Xi",926,"Xmonospace",65336,"Xsmall",63352,"Y",89,"Yacute",221,"Yacutesmall",63485,"Yatcyrillic",1122,"Ycircle",9422,"Ycircumflex",374,"Ydieresis",376,"Ydieresissmall",63487,"Ydotaccent",7822,"Ydotbelow",7924,"Yericyrillic",1067,"Yerudieresiscyrillic",1272,"Ygrave",7922,"Yhook",435,"Yhookabove",7926,"Yiarmenian",1349,"Yicyrillic",1031,"Yiwnarmenian",1362,"Ymonospace",65337,"Ysmall",63353,"Ytilde",7928,"Yusbigcyrillic",1130,"Yusbigiotifiedcyrillic",1132,"Yuslittlecyrillic",1126,"Yuslittleiotifiedcyrillic",1128,"Z",90,"Zaarmenian",1334,"Zacute",377,"Zcaron",381,"Zcaronsmall",63231,"Zcircle",9423,"Zcircumflex",7824,"Zdot",379,"Zdotaccent",379,"Zdotbelow",7826,"Zecyrillic",1047,"Zedescendercyrillic",1176,"Zedieresiscyrillic",1246,"Zeta",918,"Zhearmenian",1338,"Zhebrevecyrillic",1217,"Zhecyrillic",1046,"Zhedescendercyrillic",1174,"Zhedieresiscyrillic",1244,"Zlinebelow",7828,"Zmonospace",65338,"Zsmall",63354,"Zstroke",437,"a",97,"aabengali",2438,"aacute",225,"aadeva",2310,"aagujarati",2694,"aagurmukhi",2566,"aamatragurmukhi",2622,"aarusquare",13059,"aavowelsignbengali",2494,"aavowelsigndeva",2366,"aavowelsigngujarati",2750,"abbreviationmarkarmenian",1375,"abbreviationsigndeva",2416,"abengali",2437,"abopomofo",12570,"abreve",259,"abreveacute",7855,"abrevecyrillic",1233,"abrevedotbelow",7863,"abrevegrave",7857,"abrevehookabove",7859,"abrevetilde",7861,"acaron",462,"acircle",9424,"acircumflex",226,"acircumflexacute",7845,"acircumflexdotbelow",7853,"acircumflexgrave",7847,"acircumflexhookabove",7849,"acircumflextilde",7851,"acute",180,"acutebelowcmb",791,"acutecmb",769,"acutecomb",769,"acutedeva",2388,"acutelowmod",719,"acutetonecmb",833,"acyrillic",1072,"adblgrave",513,"addakgurmukhi",2673,"adeva",2309,"adieresis",228,"adieresiscyrillic",1235,"adieresismacron",479,"adotbelow",7841,"adotmacron",481,"ae",230,"aeacute",509,"aekorean",12624,"aemacron",483,"afii00208",8213,"afii08941",8356,"afii10017",1040,"afii10018",1041,"afii10019",1042,"afii10020",1043,"afii10021",1044,"afii10022",1045,"afii10023",1025,"afii10024",1046,"afii10025",1047,"afii10026",1048,"afii10027",1049,"afii10028",1050,"afii10029",1051,"afii10030",1052,"afii10031",1053,"afii10032",1054,"afii10033",1055,"afii10034",1056,"afii10035",1057,"afii10036",1058,"afii10037",1059,"afii10038",1060,"afii10039",1061,"afii10040",1062,"afii10041",1063,"afii10042",1064,"afii10043",1065,"afii10044",1066,"afii10045",1067,"afii10046",1068,"afii10047",1069,"afii10048",1070,"afii10049",1071,"afii10050",1168,"afii10051",1026,"afii10052",1027,"afii10053",1028,"afii10054",1029,"afii10055",1030,"afii10056",1031,"afii10057",1032,"afii10058",1033,"afii10059",1034,"afii10060",1035,"afii10061",1036,"afii10062",1038,"afii10063",63172,"afii10064",63173,"afii10065",1072,"afii10066",1073,"afii10067",1074,"afii10068",1075,"afii10069",1076,"afii10070",1077,"afii10071",1105,"afii10072",1078,"afii10073",1079,"afii10074",1080,"afii10075",1081,"afii10076",1082,"afii10077",1083,"afii10078",1084,"afii10079",1085,"afii10080",1086,"afii10081",1087,"afii10082",1088,"afii10083",1089,"afii10084",1090,"afii10085",1091,"afii10086",1092,"afii10087",1093,"afii10088",1094,"afii10089",1095,"afii10090",1096,"afii10091",1097,"afii10092",1098,"afii10093",1099,"afii10094",1100,"afii10095",1101,"afii10096",1102,"afii10097",1103,"afii10098",1169,"afii10099",1106,"afii10100",1107,"afii10101",1108,"afii10102",1109,"afii10103",1110,"afii10104",1111,"afii10105",1112,"afii10106",1113,"afii10107",1114,"afii10108",1115,"afii10109",1116,"afii10110",1118,"afii10145",1039,"afii10146",1122,"afii10147",1138,"afii10148",1140,"afii10192",63174,"afii10193",1119,"afii10194",1123,"afii10195",1139,"afii10196",1141,"afii10831",63175,"afii10832",63176,"afii10846",1241,"afii299",8206,"afii300",8207,"afii301",8205,"afii57381",1642,"afii57388",1548,"afii57392",1632,"afii57393",1633,"afii57394",1634,"afii57395",1635,"afii57396",1636,"afii57397",1637,"afii57398",1638,"afii57399",1639,"afii57400",1640,"afii57401",1641,"afii57403",1563,"afii57407",1567,"afii57409",1569,"afii57410",1570,"afii57411",1571,"afii57412",1572,"afii57413",1573,"afii57414",1574,"afii57415",1575,"afii57416",1576,"afii57417",1577,"afii57418",1578,"afii57419",1579,"afii57420",1580,"afii57421",1581,"afii57422",1582,"afii57423",1583,"afii57424",1584,"afii57425",1585,"afii57426",1586,"afii57427",1587,"afii57428",1588,"afii57429",1589,"afii57430",1590,"afii57431",1591,"afii57432",1592,"afii57433",1593,"afii57434",1594,"afii57440",1600,"afii57441",1601,"afii57442",1602,"afii57443",1603,"afii57444",1604,"afii57445",1605,"afii57446",1606,"afii57448",1608,"afii57449",1609,"afii57450",1610,"afii57451",1611,"afii57452",1612,"afii57453",1613,"afii57454",1614,"afii57455",1615,"afii57456",1616,"afii57457",1617,"afii57458",1618,"afii57470",1607,"afii57505",1700,"afii57506",1662,"afii57507",1670,"afii57508",1688,"afii57509",1711,"afii57511",1657,"afii57512",1672,"afii57513",1681,"afii57514",1722,"afii57519",1746,"afii57534",1749,"afii57636",8362,"afii57645",1470,"afii57658",1475,"afii57664",1488,"afii57665",1489,"afii57666",1490,"afii57667",1491,"afii57668",1492,"afii57669",1493,"afii57670",1494,"afii57671",1495,"afii57672",1496,"afii57673",1497,"afii57674",1498,"afii57675",1499,"afii57676",1500,"afii57677",1501,"afii57678",1502,"afii57679",1503,"afii57680",1504,"afii57681",1505,"afii57682",1506,"afii57683",1507,"afii57684",1508,"afii57685",1509,"afii57686",1510,"afii57687",1511,"afii57688",1512,"afii57689",1513,"afii57690",1514,"afii57694",64298,"afii57695",64299,"afii57700",64331,"afii57705",64287,"afii57716",1520,"afii57717",1521,"afii57718",1522,"afii57723",64309,"afii57793",1460,"afii57794",1461,"afii57795",1462,"afii57796",1467,"afii57797",1464,"afii57798",1463,"afii57799",1456,"afii57800",1458,"afii57801",1457,"afii57802",1459,"afii57803",1474,"afii57804",1473,"afii57806",1465,"afii57807",1468,"afii57839",1469,"afii57841",1471,"afii57842",1472,"afii57929",700,"afii61248",8453,"afii61289",8467,"afii61352",8470,"afii61573",8236,"afii61574",8237,"afii61575",8238,"afii61664",8204,"afii63167",1645,"afii64937",701,"agrave",224,"agujarati",2693,"agurmukhi",2565,"ahiragana",12354,"ahookabove",7843,"aibengali",2448,"aibopomofo",12574,"aideva",2320,"aiecyrillic",1237,"aigujarati",2704,"aigurmukhi",2576,"aimatragurmukhi",2632,"ainarabic",1593,"ainfinalarabic",65226,"aininitialarabic",65227,"ainmedialarabic",65228,"ainvertedbreve",515,"aivowelsignbengali",2504,"aivowelsigndeva",2376,"aivowelsigngujarati",2760,"akatakana",12450,"akatakanahalfwidth",65393,"akorean",12623,"alef",1488,"alefarabic",1575,"alefdageshhebrew",64304,"aleffinalarabic",65166,"alefhamzaabovearabic",1571,"alefhamzaabovefinalarabic",65156,"alefhamzabelowarabic",1573,"alefhamzabelowfinalarabic",65160,"alefhebrew",1488,"aleflamedhebrew",64335,"alefmaddaabovearabic",1570,"alefmaddaabovefinalarabic",65154,"alefmaksuraarabic",1609,"alefmaksurafinalarabic",65264,"alefmaksurainitialarabic",65267,"alefmaksuramedialarabic",65268,"alefpatahhebrew",64302,"alefqamatshebrew",64303,"aleph",8501,"allequal",8780,"alpha",945,"alphatonos",940,"amacron",257,"amonospace",65345,"ampersand",38,"ampersandmonospace",65286,"ampersandsmall",63270,"amsquare",13250,"anbopomofo",12578,"angbopomofo",12580,"angbracketleft",12296,"angbracketright",12297,"angkhankhuthai",3674,"angle",8736,"anglebracketleft",12296,"anglebracketleftvertical",65087,"anglebracketright",12297,"anglebracketrightvertical",65088,"angleleft",9001,"angleright",9002,"angstrom",8491,"anoteleia",903,"anudattadeva",2386,"anusvarabengali",2434,"anusvaradeva",2306,"anusvaragujarati",2690,"aogonek",261,"apaatosquare",13056,"aparen",9372,"apostrophearmenian",1370,"apostrophemod",700,"apple",63743,"approaches",8784,"approxequal",8776,"approxequalorimage",8786,"approximatelyequal",8773,"araeaekorean",12686,"araeakorean",12685,"arc",8978,"arighthalfring",7834,"aring",229,"aringacute",507,"aringbelow",7681,"arrowboth",8596,"arrowdashdown",8675,"arrowdashleft",8672,"arrowdashright",8674,"arrowdashup",8673,"arrowdblboth",8660,"arrowdbldown",8659,"arrowdblleft",8656,"arrowdblright",8658,"arrowdblup",8657,"arrowdown",8595,"arrowdownleft",8601,"arrowdownright",8600,"arrowdownwhite",8681,"arrowheaddownmod",709,"arrowheadleftmod",706,"arrowheadrightmod",707,"arrowheadupmod",708,"arrowhorizex",63719,"arrowleft",8592,"arrowleftdbl",8656,"arrowleftdblstroke",8653,"arrowleftoverright",8646,"arrowleftwhite",8678,"arrowright",8594,"arrowrightdblstroke",8655,"arrowrightheavy",10142,"arrowrightoverleft",8644,"arrowrightwhite",8680,"arrowtableft",8676,"arrowtabright",8677,"arrowup",8593,"arrowupdn",8597,"arrowupdnbse",8616,"arrowupdownbase",8616,"arrowupleft",8598,"arrowupleftofdown",8645,"arrowupright",8599,"arrowupwhite",8679,"arrowvertex",63718,"asciicircum",94,"asciicircummonospace",65342,"asciitilde",126,"asciitildemonospace",65374,"ascript",593,"ascriptturned",594,"asmallhiragana",12353,"asmallkatakana",12449,"asmallkatakanahalfwidth",65383,"asterisk",42,"asteriskaltonearabic",1645,"asteriskarabic",1645,"asteriskmath",8727,"asteriskmonospace",65290,"asterisksmall",65121,"asterism",8258,"asuperior",63209,"asymptoticallyequal",8771,"at",64,"atilde",227,"atmonospace",65312,"atsmall",65131,"aturned",592,"aubengali",2452,"aubopomofo",12576,"audeva",2324,"augujarati",2708,"augurmukhi",2580,"aulengthmarkbengali",2519,"aumatragurmukhi",2636,"auvowelsignbengali",2508,"auvowelsigndeva",2380,"auvowelsigngujarati",2764,"avagrahadeva",2365,"aybarmenian",1377,"ayin",1506,"ayinaltonehebrew",64288,"ayinhebrew",1506,"b",98,"babengali",2476,"backslash",92,"backslashmonospace",65340,"badeva",2348,"bagujarati",2732,"bagurmukhi",2604,"bahiragana",12400,"bahtthai",3647,"bakatakana",12496,"bar",124,"barmonospace",65372,"bbopomofo",12549,"bcircle",9425,"bdotaccent",7683,"bdotbelow",7685,"beamedsixteenthnotes",9836,"because",8757,"becyrillic",1073,"beharabic",1576,"behfinalarabic",65168,"behinitialarabic",65169,"behiragana",12409,"behmedialarabic",65170,"behmeeminitialarabic",64671,"behmeemisolatedarabic",64520,"behnoonfinalarabic",64621,"bekatakana",12505,"benarmenian",1378,"bet",1489,"beta",946,"betasymbolgreek",976,"betdagesh",64305,"betdageshhebrew",64305,"bethebrew",1489,"betrafehebrew",64332,"bhabengali",2477,"bhadeva",2349,"bhagujarati",2733,"bhagurmukhi",2605,"bhook",595,"bihiragana",12403,"bikatakana",12499,"bilabialclick",664,"bindigurmukhi",2562,"birusquare",13105,"blackcircle",9679,"blackdiamond",9670,"blackdownpointingtriangle",9660,"blackleftpointingpointer",9668,"blackleftpointingtriangle",9664,"blacklenticularbracketleft",12304,"blacklenticularbracketleftvertical",65083,"blacklenticularbracketright",12305,"blacklenticularbracketrightvertical",65084,"blacklowerlefttriangle",9699,"blacklowerrighttriangle",9698,"blackrectangle",9644,"blackrightpointingpointer",9658,"blackrightpointingtriangle",9654,"blacksmallsquare",9642,"blacksmilingface",9787,"blacksquare",9632,"blackstar",9733,"blackupperlefttriangle",9700,"blackupperrighttriangle",9701,"blackuppointingsmalltriangle",9652,"blackuppointingtriangle",9650,"blank",9251,"blinebelow",7687,"block",9608,"bmonospace",65346,"bobaimaithai",3610,"bohiragana",12412,"bokatakana",12508,"bparen",9373,"bqsquare",13251,"braceex",63732,"braceleft",123,"braceleftbt",63731,"braceleftmid",63730,"braceleftmonospace",65371,"braceleftsmall",65115,"bracelefttp",63729,"braceleftvertical",65079,"braceright",125,"bracerightbt",63742,"bracerightmid",63741,"bracerightmonospace",65373,"bracerightsmall",65116,"bracerighttp",63740,"bracerightvertical",65080,"bracketleft",91,"bracketleftbt",63728,"bracketleftex",63727,"bracketleftmonospace",65339,"bracketlefttp",63726,"bracketright",93,"bracketrightbt",63739,"bracketrightex",63738,"bracketrightmonospace",65341,"bracketrighttp",63737,"breve",728,"brevebelowcmb",814,"brevecmb",774,"breveinvertedbelowcmb",815,"breveinvertedcmb",785,"breveinverteddoublecmb",865,"bridgebelowcmb",810,"bridgeinvertedbelowcmb",826,"brokenbar",166,"bstroke",384,"bsuperior",63210,"btopbar",387,"buhiragana",12406,"bukatakana",12502,"bullet",8226,"bulletinverse",9688,"bulletoperator",8729,"bullseye",9678,"c",99,"caarmenian",1390,"cabengali",2458,"cacute",263,"cadeva",2330,"cagujarati",2714,"cagurmukhi",2586,"calsquare",13192,"candrabindubengali",2433,"candrabinducmb",784,"candrabindudeva",2305,"candrabindugujarati",2689,"capslock",8682,"careof",8453,"caron",711,"caronbelowcmb",812,"caroncmb",780,"carriagereturn",8629,"cbopomofo",12568,"ccaron",269,"ccedilla",231,"ccedillaacute",7689,"ccircle",9426,"ccircumflex",265,"ccurl",597,"cdot",267,"cdotaccent",267,"cdsquare",13253,"cedilla",184,"cedillacmb",807,"cent",162,"centigrade",8451,"centinferior",63199,"centmonospace",65504,"centoldstyle",63394,"centsuperior",63200,"chaarmenian",1401,"chabengali",2459,"chadeva",2331,"chagujarati",2715,"chagurmukhi",2587,"chbopomofo",12564,"cheabkhasiancyrillic",1213,"checkmark",10003,"checyrillic",1095,"chedescenderabkhasiancyrillic",1215,"chedescendercyrillic",1207,"chedieresiscyrillic",1269,"cheharmenian",1395,"chekhakassiancyrillic",1228,"cheverticalstrokecyrillic",1209,"chi",967,"chieuchacirclekorean",12919,"chieuchaparenkorean",12823,"chieuchcirclekorean",12905,"chieuchkorean",12618,"chieuchparenkorean",12809,"chochangthai",3594,"chochanthai",3592,"chochingthai",3593,"chochoethai",3596,"chook",392,"cieucacirclekorean",12918,"cieucaparenkorean",12822,"cieuccirclekorean",12904,"cieuckorean",12616,"cieucparenkorean",12808,"cieucuparenkorean",12828,"circle",9675,"circlecopyrt",169,"circlemultiply",8855,"circleot",8857,"circleplus",8853,"circlepostalmark",12342,"circlewithlefthalfblack",9680,"circlewithrighthalfblack",9681,"circumflex",710,"circumflexbelowcmb",813,"circumflexcmb",770,"clear",8999,"clickalveolar",450,"clickdental",448,"clicklateral",449,"clickretroflex",451,"club",9827,"clubsuitblack",9827,"clubsuitwhite",9831,"cmcubedsquare",13220,"cmonospace",65347,"cmsquaredsquare",13216,"coarmenian",1409,"colon",58,"colonmonetary",8353,"colonmonospace",65306,"colonsign",8353,"colonsmall",65109,"colontriangularhalfmod",721,"colontriangularmod",720,"comma",44,"commaabovecmb",787,"commaaboverightcmb",789,"commaaccent",63171,"commaarabic",1548,"commaarmenian",1373,"commainferior",63201,"commamonospace",65292,"commareversedabovecmb",788,"commareversedmod",701,"commasmall",65104,"commasuperior",63202,"commaturnedabovecmb",786,"commaturnedmod",699,"compass",9788,"congruent",8773,"contourintegral",8750,"control",8963,"controlACK",6,"controlBEL",7,"controlBS",8,"controlCAN",24,"controlCR",13,"controlDC1",17,"controlDC2",18,"controlDC3",19,"controlDC4",20,"controlDEL",127,"controlDLE",16,"controlEM",25,"controlENQ",5,"controlEOT",4,"controlESC",27,"controlETB",23,"controlETX",3,"controlFF",12,"controlFS",28,"controlGS",29,"controlHT",9,"controlLF",10,"controlNAK",21,"controlNULL",0,"controlRS",30,"controlSI",15,"controlSO",14,"controlSOT",2,"controlSTX",1,"controlSUB",26,"controlSYN",22,"controlUS",31,"controlVT",11,"copyright",169,"copyrightsans",63721,"copyrightserif",63193,"cornerbracketleft",12300,"cornerbracketlefthalfwidth",65378,"cornerbracketleftvertical",65089,"cornerbracketright",12301,"cornerbracketrighthalfwidth",65379,"cornerbracketrightvertical",65090,"corporationsquare",13183,"cosquare",13255,"coverkgsquare",13254,"cparen",9374,"cruzeiro",8354,"cstretched",663,"curlyand",8911,"curlyor",8910,"currency",164,"cyrBreve",63185,"cyrFlex",63186,"cyrbreve",63188,"cyrflex",63189,"d",100,"daarmenian",1380,"dabengali",2470,"dadarabic",1590,"dadeva",2342,"dadfinalarabic",65214,"dadinitialarabic",65215,"dadmedialarabic",65216,"dagesh",1468,"dageshhebrew",1468,"dagger",8224,"daggerdbl",8225,"dagujarati",2726,"dagurmukhi",2598,"dahiragana",12384,"dakatakana",12480,"dalarabic",1583,"dalet",1491,"daletdagesh",64307,"daletdageshhebrew",64307,"dalethebrew",1491,"dalfinalarabic",65194,"dammaarabic",1615,"dammalowarabic",1615,"dammatanaltonearabic",1612,"dammatanarabic",1612,"danda",2404,"dargahebrew",1447,"dargalefthebrew",1447,"dasiapneumatacyrilliccmb",1157,"dblGrave",63187,"dblanglebracketleft",12298,"dblanglebracketleftvertical",65085,"dblanglebracketright",12299,"dblanglebracketrightvertical",65086,"dblarchinvertedbelowcmb",811,"dblarrowleft",8660,"dblarrowright",8658,"dbldanda",2405,"dblgrave",63190,"dblgravecmb",783,"dblintegral",8748,"dbllowline",8215,"dbllowlinecmb",819,"dbloverlinecmb",831,"dblprimemod",698,"dblverticalbar",8214,"dblverticallineabovecmb",782,"dbopomofo",12553,"dbsquare",13256,"dcaron",271,"dcedilla",7697,"dcircle",9427,"dcircumflexbelow",7699,"dcroat",273,"ddabengali",2465,"ddadeva",2337,"ddagujarati",2721,"ddagurmukhi",2593,"ddalarabic",1672,"ddalfinalarabic",64393,"dddhadeva",2396,"ddhabengali",2466,"ddhadeva",2338,"ddhagujarati",2722,"ddhagurmukhi",2594,"ddotaccent",7691,"ddotbelow",7693,"decimalseparatorarabic",1643,"decimalseparatorpersian",1643,"decyrillic",1076,"degree",176,"dehihebrew",1453,"dehiragana",12391,"deicoptic",1007,"dekatakana",12487,"deleteleft",9003,"deleteright",8998,"delta",948,"deltaturned",397,"denominatorminusonenumeratorbengali",2552,"dezh",676,"dhabengali",2471,"dhadeva",2343,"dhagujarati",2727,"dhagurmukhi",2599,"dhook",599,"dialytikatonos",901,"dialytikatonoscmb",836,"diamond",9830,"diamondsuitwhite",9826,"dieresis",168,"dieresisacute",63191,"dieresisbelowcmb",804,"dieresiscmb",776,"dieresisgrave",63192,"dieresistonos",901,"dihiragana",12386,"dikatakana",12482,"dittomark",12291,"divide",247,"divides",8739,"divisionslash",8725,"djecyrillic",1106,"dkshade",9619,"dlinebelow",7695,"dlsquare",13207,"dmacron",273,"dmonospace",65348,"dnblock",9604,"dochadathai",3598,"dodekthai",3604,"dohiragana",12393,"dokatakana",12489,"dollar",36,"dollarinferior",63203,"dollarmonospace",65284,"dollaroldstyle",63268,"dollarsmall",65129,"dollarsuperior",63204,"dong",8363,"dorusquare",13094,"dotaccent",729,"dotaccentcmb",775,"dotbelowcmb",803,"dotbelowcomb",803,"dotkatakana",12539,"dotlessi",305,"dotlessj",63166,"dotlessjstrokehook",644,"dotmath",8901,"dottedcircle",9676,"doubleyodpatah",64287,"doubleyodpatahhebrew",64287,"downtackbelowcmb",798,"downtackmod",725,"dparen",9375,"dsuperior",63211,"dtail",598,"dtopbar",396,"duhiragana",12389,"dukatakana",12485,"dz",499,"dzaltone",675,"dzcaron",454,"dzcurl",677,"dzeabkhasiancyrillic",1249,"dzecyrillic",1109,"dzhecyrillic",1119,"e",101,"eacute",233,"earth",9793,"ebengali",2447,"ebopomofo",12572,"ebreve",277,"ecandradeva",2317,"ecandragujarati",2701,"ecandravowelsigndeva",2373,"ecandravowelsigngujarati",2757,"ecaron",283,"ecedillabreve",7709,"echarmenian",1381,"echyiwnarmenian",1415,"ecircle",9428,"ecircumflex",234,"ecircumflexacute",7871,"ecircumflexbelow",7705,"ecircumflexdotbelow",7879,"ecircumflexgrave",7873,"ecircumflexhookabove",7875,"ecircumflextilde",7877,"ecyrillic",1108,"edblgrave",517,"edeva",2319,"edieresis",235,"edot",279,"edotaccent",279,"edotbelow",7865,"eegurmukhi",2575,"eematragurmukhi",2631,"efcyrillic",1092,"egrave",232,"egujarati",2703,"eharmenian",1383,"ehbopomofo",12573,"ehiragana",12360,"ehookabove",7867,"eibopomofo",12575,"eight",56,"eightarabic",1640,"eightbengali",2542,"eightcircle",9319,"eightcircleinversesansserif",10129,"eightdeva",2414,"eighteencircle",9329,"eighteenparen",9349,"eighteenperiod",9369,"eightgujarati",2798,"eightgurmukhi",2670,"eighthackarabic",1640,"eighthangzhou",12328,"eighthnotebeamed",9835,"eightideographicparen",12839,"eightinferior",8328,"eightmonospace",65304,"eightoldstyle",63288,"eightparen",9339,"eightperiod",9359,"eightpersian",1784,"eightroman",8567,"eightsuperior",8312,"eightthai",3672,"einvertedbreve",519,"eiotifiedcyrillic",1125,"ekatakana",12456,"ekatakanahalfwidth",65396,"ekonkargurmukhi",2676,"ekorean",12628,"elcyrillic",1083,"element",8712,"elevencircle",9322,"elevenparen",9342,"elevenperiod",9362,"elevenroman",8570,"ellipsis",8230,"ellipsisvertical",8942,"emacron",275,"emacronacute",7703,"emacrongrave",7701,"emcyrillic",1084,"emdash",8212,"emdashvertical",65073,"emonospace",65349,"emphasismarkarmenian",1371,"emptyset",8709,"enbopomofo",12579,"encyrillic",1085,"endash",8211,"endashvertical",65074,"endescendercyrillic",1187,"eng",331,"engbopomofo",12581,"enghecyrillic",1189,"enhookcyrillic",1224,"enspace",8194,"eogonek",281,"eokorean",12627,"eopen",603,"eopenclosed",666,"eopenreversed",604,"eopenreversedclosed",606,"eopenreversedhook",605,"eparen",9376,"epsilon",949,"epsilontonos",941,"equal",61,"equalmonospace",65309,"equalsmall",65126,"equalsuperior",8316,"equivalence",8801,"erbopomofo",12582,"ercyrillic",1088,"ereversed",600,"ereversedcyrillic",1101,"escyrillic",1089,"esdescendercyrillic",1195,"esh",643,"eshcurl",646,"eshortdeva",2318,"eshortvowelsigndeva",2374,"eshreversedloop",426,"eshsquatreversed",645,"esmallhiragana",12359,"esmallkatakana",12455,"esmallkatakanahalfwidth",65386,"estimated",8494,"esuperior",63212,"eta",951,"etarmenian",1384,"etatonos",942,"eth",240,"etilde",7869,"etildebelow",7707,"etnahtafoukhhebrew",1425,"etnahtafoukhlefthebrew",1425,"etnahtahebrew",1425,"etnahtalefthebrew",1425,"eturned",477,"eukorean",12641,"euro",8364,"evowelsignbengali",2503,"evowelsigndeva",2375,"evowelsigngujarati",2759,"exclam",33,"exclamarmenian",1372,"exclamdbl",8252,"exclamdown",161,"exclamdownsmall",63393,"exclammonospace",65281,"exclamsmall",63265,"existential",8707,"ezh",658,"ezhcaron",495,"ezhcurl",659,"ezhreversed",441,"ezhtail",442,"f",102,"fadeva",2398,"fagurmukhi",2654,"fahrenheit",8457,"fathaarabic",1614,"fathalowarabic",1614,"fathatanarabic",1611,"fbopomofo",12552,"fcircle",9429,"fdotaccent",7711,"feharabic",1601,"feharmenian",1414,"fehfinalarabic",65234,"fehinitialarabic",65235,"fehmedialarabic",65236,"feicoptic",997,"female",9792,"ff",64256,"f_f",64256,"ffi",64259,"ffl",64260,"fi",64257,"fifteencircle",9326,"fifteenparen",9346,"fifteenperiod",9366,"figuredash",8210,"filledbox",9632,"filledrect",9644,"finalkaf",1498,"finalkafdagesh",64314,"finalkafdageshhebrew",64314,"finalkafhebrew",1498,"finalmem",1501,"finalmemhebrew",1501,"finalnun",1503,"finalnunhebrew",1503,"finalpe",1507,"finalpehebrew",1507,"finaltsadi",1509,"finaltsadihebrew",1509,"firsttonechinese",713,"fisheye",9673,"fitacyrillic",1139,"five",53,"fivearabic",1637,"fivebengali",2539,"fivecircle",9316,"fivecircleinversesansserif",10126,"fivedeva",2411,"fiveeighths",8541,"fivegujarati",2795,"fivegurmukhi",2667,"fivehackarabic",1637,"fivehangzhou",12325,"fiveideographicparen",12836,"fiveinferior",8325,"fivemonospace",65301,"fiveoldstyle",63285,"fiveparen",9336,"fiveperiod",9356,"fivepersian",1781,"fiveroman",8564,"fivesuperior",8309,"fivethai",3669,"fl",64258,"florin",402,"fmonospace",65350,"fmsquare",13209,"fofanthai",3615,"fofathai",3613,"fongmanthai",3663,"forall",8704,"four",52,"fourarabic",1636,"fourbengali",2538,"fourcircle",9315,"fourcircleinversesansserif",10125,"fourdeva",2410,"fourgujarati",2794,"fourgurmukhi",2666,"fourhackarabic",1636,"fourhangzhou",12324,"fourideographicparen",12835,"fourinferior",8324,"fourmonospace",65300,"fournumeratorbengali",2551,"fouroldstyle",63284,"fourparen",9335,"fourperiod",9355,"fourpersian",1780,"fourroman",8563,"foursuperior",8308,"fourteencircle",9325,"fourteenparen",9345,"fourteenperiod",9365,"fourthai",3668,"fourthtonechinese",715,"fparen",9377,"fraction",8260,"franc",8355,"g",103,"gabengali",2455,"gacute",501,"gadeva",2327,"gafarabic",1711,"gaffinalarabic",64403,"gafinitialarabic",64404,"gafmedialarabic",64405,"gagujarati",2711,"gagurmukhi",2583,"gahiragana",12364,"gakatakana",12460,"gamma",947,"gammalatinsmall",611,"gammasuperior",736,"gangiacoptic",1003,"gbopomofo",12557,"gbreve",287,"gcaron",487,"gcedilla",291,"gcircle",9430,"gcircumflex",285,"gcommaaccent",291,"gdot",289,"gdotaccent",289,"gecyrillic",1075,"gehiragana",12370,"gekatakana",12466,"geometricallyequal",8785,"gereshaccenthebrew",1436,"gereshhebrew",1523,"gereshmuqdamhebrew",1437,"germandbls",223,"gershayimaccenthebrew",1438,"gershayimhebrew",1524,"getamark",12307,"ghabengali",2456,"ghadarmenian",1394,"ghadeva",2328,"ghagujarati",2712,"ghagurmukhi",2584,"ghainarabic",1594,"ghainfinalarabic",65230,"ghaininitialarabic",65231,"ghainmedialarabic",65232,"ghemiddlehookcyrillic",1173,"ghestrokecyrillic",1171,"gheupturncyrillic",1169,"ghhadeva",2394,"ghhagurmukhi",2650,"ghook",608,"ghzsquare",13203,"gihiragana",12366,"gikatakana",12462,"gimarmenian",1379,"gimel",1490,"gimeldagesh",64306,"gimeldageshhebrew",64306,"gimelhebrew",1490,"gjecyrillic",1107,"glottalinvertedstroke",446,"glottalstop",660,"glottalstopinverted",662,"glottalstopmod",704,"glottalstopreversed",661,"glottalstopreversedmod",705,"glottalstopreversedsuperior",740,"glottalstopstroke",673,"glottalstopstrokereversed",674,"gmacron",7713,"gmonospace",65351,"gohiragana",12372,"gokatakana",12468,"gparen",9378,"gpasquare",13228,"gradient",8711,"grave",96,"gravebelowcmb",790,"gravecmb",768,"gravecomb",768,"gravedeva",2387,"gravelowmod",718,"gravemonospace",65344,"gravetonecmb",832,"greater",62,"greaterequal",8805,"greaterequalorless",8923,"greatermonospace",65310,"greaterorequivalent",8819,"greaterorless",8823,"greateroverequal",8807,"greatersmall",65125,"gscript",609,"gstroke",485,"guhiragana",12368,"guillemotleft",171,"guillemotright",187,"guilsinglleft",8249,"guilsinglright",8250,"gukatakana",12464,"guramusquare",13080,"gysquare",13257,"h",104,"haabkhasiancyrillic",1193,"haaltonearabic",1729,"habengali",2489,"hadescendercyrillic",1203,"hadeva",2361,"hagujarati",2745,"hagurmukhi",2617,"haharabic",1581,"hahfinalarabic",65186,"hahinitialarabic",65187,"hahiragana",12399,"hahmedialarabic",65188,"haitusquare",13098,"hakatakana",12495,"hakatakanahalfwidth",65418,"halantgurmukhi",2637,"hamzaarabic",1569,"hamzalowarabic",1569,"hangulfiller",12644,"hardsigncyrillic",1098,"harpoonleftbarbup",8636,"harpoonrightbarbup",8640,"hasquare",13258,"hatafpatah",1458,"hatafpatah16",1458,"hatafpatah23",1458,"hatafpatah2f",1458,"hatafpatahhebrew",1458,"hatafpatahnarrowhebrew",1458,"hatafpatahquarterhebrew",1458,"hatafpatahwidehebrew",1458,"hatafqamats",1459,"hatafqamats1b",1459,"hatafqamats28",1459,"hatafqamats34",1459,"hatafqamatshebrew",1459,"hatafqamatsnarrowhebrew",1459,"hatafqamatsquarterhebrew",1459,"hatafqamatswidehebrew",1459,"hatafsegol",1457,"hatafsegol17",1457,"hatafsegol24",1457,"hatafsegol30",1457,"hatafsegolhebrew",1457,"hatafsegolnarrowhebrew",1457,"hatafsegolquarterhebrew",1457,"hatafsegolwidehebrew",1457,"hbar",295,"hbopomofo",12559,"hbrevebelow",7723,"hcedilla",7721,"hcircle",9431,"hcircumflex",293,"hdieresis",7719,"hdotaccent",7715,"hdotbelow",7717,"he",1492,"heart",9829,"heartsuitblack",9829,"heartsuitwhite",9825,"hedagesh",64308,"hedageshhebrew",64308,"hehaltonearabic",1729,"heharabic",1607,"hehebrew",1492,"hehfinalaltonearabic",64423,"hehfinalalttwoarabic",65258,"hehfinalarabic",65258,"hehhamzaabovefinalarabic",64421,"hehhamzaaboveisolatedarabic",64420,"hehinitialaltonearabic",64424,"hehinitialarabic",65259,"hehiragana",12408,"hehmedialaltonearabic",64425,"hehmedialarabic",65260,"heiseierasquare",13179,"hekatakana",12504,"hekatakanahalfwidth",65421,"hekutaarusquare",13110,"henghook",615,"herutusquare",13113,"het",1495,"hethebrew",1495,"hhook",614,"hhooksuperior",689,"hieuhacirclekorean",12923,"hieuhaparenkorean",12827,"hieuhcirclekorean",12909,"hieuhkorean",12622,"hieuhparenkorean",12813,"hihiragana",12402,"hikatakana",12498,"hikatakanahalfwidth",65419,"hiriq",1460,"hiriq14",1460,"hiriq21",1460,"hiriq2d",1460,"hiriqhebrew",1460,"hiriqnarrowhebrew",1460,"hiriqquarterhebrew",1460,"hiriqwidehebrew",1460,"hlinebelow",7830,"hmonospace",65352,"hoarmenian",1392,"hohipthai",3627,"hohiragana",12411,"hokatakana",12507,"hokatakanahalfwidth",65422,"holam",1465,"holam19",1465,"holam26",1465,"holam32",1465,"holamhebrew",1465,"holamnarrowhebrew",1465,"holamquarterhebrew",1465,"holamwidehebrew",1465,"honokhukthai",3630,"hookabovecomb",777,"hookcmb",777,"hookpalatalizedbelowcmb",801,"hookretroflexbelowcmb",802,"hoonsquare",13122,"horicoptic",1001,"horizontalbar",8213,"horncmb",795,"hotsprings",9832,"house",8962,"hparen",9379,"hsuperior",688,"hturned",613,"huhiragana",12405,"huiitosquare",13107,"hukatakana",12501,"hukatakanahalfwidth",65420,"hungarumlaut",733,"hungarumlautcmb",779,"hv",405,"hyphen",45,"hypheninferior",63205,"hyphenmonospace",65293,"hyphensmall",65123,"hyphensuperior",63206,"hyphentwo",8208,"i",105,"iacute",237,"iacyrillic",1103,"ibengali",2439,"ibopomofo",12583,"ibreve",301,"icaron",464,"icircle",9432,"icircumflex",238,"icyrillic",1110,"idblgrave",521,"ideographearthcircle",12943,"ideographfirecircle",12939,"ideographicallianceparen",12863,"ideographiccallparen",12858,"ideographiccentrecircle",12965,"ideographicclose",12294,"ideographiccomma",12289,"ideographiccommaleft",65380,"ideographiccongratulationparen",12855,"ideographiccorrectcircle",12963,"ideographicearthparen",12847,"ideographicenterpriseparen",12861,"ideographicexcellentcircle",12957,"ideographicfestivalparen",12864,"ideographicfinancialcircle",12950,"ideographicfinancialparen",12854,"ideographicfireparen",12843,"ideographichaveparen",12850,"ideographichighcircle",12964,"ideographiciterationmark",12293,"ideographiclaborcircle",12952,"ideographiclaborparen",12856,"ideographicleftcircle",12967,"ideographiclowcircle",12966,"ideographicmedicinecircle",12969,"ideographicmetalparen",12846,"ideographicmoonparen",12842,"ideographicnameparen",12852,"ideographicperiod",12290,"ideographicprintcircle",12958,"ideographicreachparen",12867,"ideographicrepresentparen",12857,"ideographicresourceparen",12862,"ideographicrightcircle",12968,"ideographicsecretcircle",12953,"ideographicselfparen",12866,"ideographicsocietyparen",12851,"ideographicspace",12288,"ideographicspecialparen",12853,"ideographicstockparen",12849,"ideographicstudyparen",12859,"ideographicsunparen",12848,"ideographicsuperviseparen",12860,"ideographicwaterparen",12844,"ideographicwoodparen",12845,"ideographiczero",12295,"ideographmetalcircle",12942,"ideographmooncircle",12938,"ideographnamecircle",12948,"ideographsuncircle",12944,"ideographwatercircle",12940,"ideographwoodcircle",12941,"ideva",2311,"idieresis",239,"idieresisacute",7727,"idieresiscyrillic",1253,"idotbelow",7883,"iebrevecyrillic",1239,"iecyrillic",1077,"ieungacirclekorean",12917,"ieungaparenkorean",12821,"ieungcirclekorean",12903,"ieungkorean",12615,"ieungparenkorean",12807,"igrave",236,"igujarati",2695,"igurmukhi",2567,"ihiragana",12356,"ihookabove",7881,"iibengali",2440,"iicyrillic",1080,"iideva",2312,"iigujarati",2696,"iigurmukhi",2568,"iimatragurmukhi",2624,"iinvertedbreve",523,"iishortcyrillic",1081,"iivowelsignbengali",2496,"iivowelsigndeva",2368,"iivowelsigngujarati",2752,"ij",307,"ikatakana",12452,"ikatakanahalfwidth",65394,"ikorean",12643,"ilde",732,"iluyhebrew",1452,"imacron",299,"imacroncyrillic",1251,"imageorapproximatelyequal",8787,"imatragurmukhi",2623,"imonospace",65353,"increment",8710,"infinity",8734,"iniarmenian",1387,"integral",8747,"integralbottom",8993,"integralbt",8993,"integralex",63733,"integraltop",8992,"integraltp",8992,"intersection",8745,"intisquare",13061,"invbullet",9688,"invcircle",9689,"invsmileface",9787,"iocyrillic",1105,"iogonek",303,"iota",953,"iotadieresis",970,"iotadieresistonos",912,"iotalatin",617,"iotatonos",943,"iparen",9380,"irigurmukhi",2674,"ismallhiragana",12355,"ismallkatakana",12451,"ismallkatakanahalfwidth",65384,"issharbengali",2554,"istroke",616,"isuperior",63213,"iterationhiragana",12445,"iterationkatakana",12541,"itilde",297,"itildebelow",7725,"iubopomofo",12585,"iucyrillic",1102,"ivowelsignbengali",2495,"ivowelsigndeva",2367,"ivowelsigngujarati",2751,"izhitsacyrillic",1141,"izhitsadblgravecyrillic",1143,"j",106,"jaarmenian",1393,"jabengali",2460,"jadeva",2332,"jagujarati",2716,"jagurmukhi",2588,"jbopomofo",12560,"jcaron",496,"jcircle",9433,"jcircumflex",309,"jcrossedtail",669,"jdotlessstroke",607,"jecyrillic",1112,"jeemarabic",1580,"jeemfinalarabic",65182,"jeeminitialarabic",65183,"jeemmedialarabic",65184,"jeharabic",1688,"jehfinalarabic",64395,"jhabengali",2461,"jhadeva",2333,"jhagujarati",2717,"jhagurmukhi",2589,"jheharmenian",1403,"jis",12292,"jmonospace",65354,"jparen",9381,"jsuperior",690,"k",107,"kabashkircyrillic",1185,"kabengali",2453,"kacute",7729,"kacyrillic",1082,"kadescendercyrillic",1179,"kadeva",2325,"kaf",1499,"kafarabic",1603,"kafdagesh",64315,"kafdageshhebrew",64315,"kaffinalarabic",65242,"kafhebrew",1499,"kafinitialarabic",65243,"kafmedialarabic",65244,"kafrafehebrew",64333,"kagujarati",2709,"kagurmukhi",2581,"kahiragana",12363,"kahookcyrillic",1220,"kakatakana",12459,"kakatakanahalfwidth",65398,"kappa",954,"kappasymbolgreek",1008,"kapyeounmieumkorean",12657,"kapyeounphieuphkorean",12676,"kapyeounpieupkorean",12664,"kapyeounssangpieupkorean",12665,"karoriisquare",13069,"kashidaautoarabic",1600,"kashidaautonosidebearingarabic",1600,"kasmallkatakana",12533,"kasquare",13188,"kasraarabic",1616,"kasratanarabic",1613,"kastrokecyrillic",1183,"katahiraprolongmarkhalfwidth",65392,"kaverticalstrokecyrillic",1181,"kbopomofo",12558,"kcalsquare",13193,"kcaron",489,"kcedilla",311,"kcircle",9434,"kcommaaccent",311,"kdotbelow",7731,"keharmenian",1412,"kehiragana",12369,"kekatakana",12465,"kekatakanahalfwidth",65401,"kenarmenian",1391,"kesmallkatakana",12534,"kgreenlandic",312,"khabengali",2454,"khacyrillic",1093,"khadeva",2326,"khagujarati",2710,"khagurmukhi",2582,"khaharabic",1582,"khahfinalarabic",65190,"khahinitialarabic",65191,"khahmedialarabic",65192,"kheicoptic",999,"khhadeva",2393,"khhagurmukhi",2649,"khieukhacirclekorean",12920,"khieukhaparenkorean",12824,"khieukhcirclekorean",12906,"khieukhkorean",12619,"khieukhparenkorean",12810,"khokhaithai",3586,"khokhonthai",3589,"khokhuatthai",3587,"khokhwaithai",3588,"khomutthai",3675,"khook",409,"khorakhangthai",3590,"khzsquare",13201,"kihiragana",12365,"kikatakana",12461,"kikatakanahalfwidth",65399,"kiroguramusquare",13077,"kiromeetorusquare",13078,"kirosquare",13076,"kiyeokacirclekorean",12910,"kiyeokaparenkorean",12814,"kiyeokcirclekorean",12896,"kiyeokkorean",12593,"kiyeokparenkorean",12800,"kiyeoksioskorean",12595,"kjecyrillic",1116,"klinebelow",7733,"klsquare",13208,"kmcubedsquare",13222,"kmonospace",65355,"kmsquaredsquare",13218,"kohiragana",12371,"kohmsquare",13248,"kokaithai",3585,"kokatakana",12467,"kokatakanahalfwidth",65402,"kooposquare",13086,"koppacyrillic",1153,"koreanstandardsymbol",12927,"koroniscmb",835,"kparen",9382,"kpasquare",13226,"ksicyrillic",1135,"ktsquare",13263,"kturned",670,"kuhiragana",12367,"kukatakana",12463,"kukatakanahalfwidth",65400,"kvsquare",13240,"kwsquare",13246,"l",108,"labengali",2482,"lacute",314,"ladeva",2354,"lagujarati",2738,"lagurmukhi",2610,"lakkhangyaothai",3653,"lamaleffinalarabic",65276,"lamalefhamzaabovefinalarabic",65272,"lamalefhamzaaboveisolatedarabic",65271,"lamalefhamzabelowfinalarabic",65274,"lamalefhamzabelowisolatedarabic",65273,"lamalefisolatedarabic",65275,"lamalefmaddaabovefinalarabic",65270,"lamalefmaddaaboveisolatedarabic",65269,"lamarabic",1604,"lambda",955,"lambdastroke",411,"lamed",1500,"lameddagesh",64316,"lameddageshhebrew",64316,"lamedhebrew",1500,"lamfinalarabic",65246,"lamhahinitialarabic",64714,"laminitialarabic",65247,"lamjeeminitialarabic",64713,"lamkhahinitialarabic",64715,"lamlamhehisolatedarabic",65010,"lammedialarabic",65248,"lammeemhahinitialarabic",64904,"lammeeminitialarabic",64716,"largecircle",9711,"lbar",410,"lbelt",620,"lbopomofo",12556,"lcaron",318,"lcedilla",316,"lcircle",9435,"lcircumflexbelow",7741,"lcommaaccent",316,"ldot",320,"ldotaccent",320,"ldotbelow",7735,"ldotbelowmacron",7737,"leftangleabovecmb",794,"lefttackbelowcmb",792,"less",60,"lessequal",8804,"lessequalorgreater",8922,"lessmonospace",65308,"lessorequivalent",8818,"lessorgreater",8822,"lessoverequal",8806,"lesssmall",65124,"lezh",622,"lfblock",9612,"lhookretroflex",621,"lira",8356,"liwnarmenian",1388,"lj",457,"ljecyrillic",1113,"ll",63168,"lladeva",2355,"llagujarati",2739,"llinebelow",7739,"llladeva",2356,"llvocalicbengali",2529,"llvocalicdeva",2401,"llvocalicvowelsignbengali",2531,"llvocalicvowelsigndeva",2403,"lmiddletilde",619,"lmonospace",65356,"lmsquare",13264,"lochulathai",3628,"logicaland",8743,"logicalnot",172,"logicalnotreversed",8976,"logicalor",8744,"lolingthai",3621,"longs",383,"lowlinecenterline",65102,"lowlinecmb",818,"lowlinedashed",65101,"lozenge",9674,"lparen",9383,"lslash",322,"lsquare",8467,"lsuperior",63214,"ltshade",9617,"luthai",3622,"lvocalicbengali",2444,"lvocalicdeva",2316,"lvocalicvowelsignbengali",2530,"lvocalicvowelsigndeva",2402,"lxsquare",13267,"m",109,"mabengali",2478,"macron",175,"macronbelowcmb",817,"macroncmb",772,"macronlowmod",717,"macronmonospace",65507,"macute",7743,"madeva",2350,"magujarati",2734,"magurmukhi",2606,"mahapakhhebrew",1444,"mahapakhlefthebrew",1444,"mahiragana",12414,"maichattawalowleftthai",63637,"maichattawalowrightthai",63636,"maichattawathai",3659,"maichattawaupperleftthai",63635,"maieklowleftthai",63628,"maieklowrightthai",63627,"maiekthai",3656,"maiekupperleftthai",63626,"maihanakatleftthai",63620,"maihanakatthai",3633,"maitaikhuleftthai",63625,"maitaikhuthai",3655,"maitholowleftthai",63631,"maitholowrightthai",63630,"maithothai",3657,"maithoupperleftthai",63629,"maitrilowleftthai",63634,"maitrilowrightthai",63633,"maitrithai",3658,"maitriupperleftthai",63632,"maiyamokthai",3654,"makatakana",12510,"makatakanahalfwidth",65423,"male",9794,"mansyonsquare",13127,"maqafhebrew",1470,"mars",9794,"masoracirclehebrew",1455,"masquare",13187,"mbopomofo",12551,"mbsquare",13268,"mcircle",9436,"mcubedsquare",13221,"mdotaccent",7745,"mdotbelow",7747,"meemarabic",1605,"meemfinalarabic",65250,"meeminitialarabic",65251,"meemmedialarabic",65252,"meemmeeminitialarabic",64721,"meemmeemisolatedarabic",64584,"meetorusquare",13133,"mehiragana",12417,"meizierasquare",13182,"mekatakana",12513,"mekatakanahalfwidth",65426,"mem",1502,"memdagesh",64318,"memdageshhebrew",64318,"memhebrew",1502,"menarmenian",1396,"merkhahebrew",1445,"merkhakefulahebrew",1446,"merkhakefulalefthebrew",1446,"merkhalefthebrew",1445,"mhook",625,"mhzsquare",13202,"middledotkatakanahalfwidth",65381,"middot",183,"mieumacirclekorean",12914,"mieumaparenkorean",12818,"mieumcirclekorean",12900,"mieumkorean",12609,"mieumpansioskorean",12656,"mieumparenkorean",12804,"mieumpieupkorean",12654,"mieumsioskorean",12655,"mihiragana",12415,"mikatakana",12511,"mikatakanahalfwidth",65424,"minus",8722,"minusbelowcmb",800,"minuscircle",8854,"minusmod",727,"minusplus",8723,"minute",8242,"miribaarusquare",13130,"mirisquare",13129,"mlonglegturned",624,"mlsquare",13206,"mmcubedsquare",13219,"mmonospace",65357,"mmsquaredsquare",13215,"mohiragana",12418,"mohmsquare",13249,"mokatakana",12514,"mokatakanahalfwidth",65427,"molsquare",13270,"momathai",3617,"moverssquare",13223,"moverssquaredsquare",13224,"mparen",9384,"mpasquare",13227,"mssquare",13235,"msuperior",63215,"mturned",623,"mu",181,"mu1",181,"muasquare",13186,"muchgreater",8811,"muchless",8810,"mufsquare",13196,"mugreek",956,"mugsquare",13197,"muhiragana",12416,"mukatakana",12512,"mukatakanahalfwidth",65425,"mulsquare",13205,"multiply",215,"mumsquare",13211,"munahhebrew",1443,"munahlefthebrew",1443,"musicalnote",9834,"musicalnotedbl",9835,"musicflatsign",9837,"musicsharpsign",9839,"mussquare",13234,"muvsquare",13238,"muwsquare",13244,"mvmegasquare",13241,"mvsquare",13239,"mwmegasquare",13247,"mwsquare",13245,"n",110,"nabengali",2472,"nabla",8711,"nacute",324,"nadeva",2344,"nagujarati",2728,"nagurmukhi",2600,"nahiragana",12394,"nakatakana",12490,"nakatakanahalfwidth",65413,"napostrophe",329,"nasquare",13185,"nbopomofo",12555,"nbspace",160,"ncaron",328,"ncedilla",326,"ncircle",9437,"ncircumflexbelow",7755,"ncommaaccent",326,"ndotaccent",7749,"ndotbelow",7751,"nehiragana",12397,"nekatakana",12493,"nekatakanahalfwidth",65416,"newsheqelsign",8362,"nfsquare",13195,"ngabengali",2457,"ngadeva",2329,"ngagujarati",2713,"ngagurmukhi",2585,"ngonguthai",3591,"nhiragana",12435,"nhookleft",626,"nhookretroflex",627,"nieunacirclekorean",12911,"nieunaparenkorean",12815,"nieuncieuckorean",12597,"nieuncirclekorean",12897,"nieunhieuhkorean",12598,"nieunkorean",12596,"nieunpansioskorean",12648,"nieunparenkorean",12801,"nieunsioskorean",12647,"nieuntikeutkorean",12646,"nihiragana",12395,"nikatakana",12491,"nikatakanahalfwidth",65414,"nikhahitleftthai",63641,"nikhahitthai",3661,"nine",57,"ninearabic",1641,"ninebengali",2543,"ninecircle",9320,"ninecircleinversesansserif",10130,"ninedeva",2415,"ninegujarati",2799,"ninegurmukhi",2671,"ninehackarabic",1641,"ninehangzhou",12329,"nineideographicparen",12840,"nineinferior",8329,"ninemonospace",65305,"nineoldstyle",63289,"nineparen",9340,"nineperiod",9360,"ninepersian",1785,"nineroman",8568,"ninesuperior",8313,"nineteencircle",9330,"nineteenparen",9350,"nineteenperiod",9370,"ninethai",3673,"nj",460,"njecyrillic",1114,"nkatakana",12531,"nkatakanahalfwidth",65437,"nlegrightlong",414,"nlinebelow",7753,"nmonospace",65358,"nmsquare",13210,"nnabengali",2467,"nnadeva",2339,"nnagujarati",2723,"nnagurmukhi",2595,"nnnadeva",2345,"nohiragana",12398,"nokatakana",12494,"nokatakanahalfwidth",65417,"nonbreakingspace",160,"nonenthai",3603,"nonuthai",3609,"noonarabic",1606,"noonfinalarabic",65254,"noonghunnaarabic",1722,"noonghunnafinalarabic",64415,"nooninitialarabic",65255,"noonjeeminitialarabic",64722,"noonjeemisolatedarabic",64587,"noonmedialarabic",65256,"noonmeeminitialarabic",64725,"noonmeemisolatedarabic",64590,"noonnoonfinalarabic",64653,"notcontains",8716,"notelement",8713,"notelementof",8713,"notequal",8800,"notgreater",8815,"notgreaternorequal",8817,"notgreaternorless",8825,"notidentical",8802,"notless",8814,"notlessnorequal",8816,"notparallel",8742,"notprecedes",8832,"notsubset",8836,"notsucceeds",8833,"notsuperset",8837,"nowarmenian",1398,"nparen",9385,"nssquare",13233,"nsuperior",8319,"ntilde",241,"nu",957,"nuhiragana",12396,"nukatakana",12492,"nukatakanahalfwidth",65415,"nuktabengali",2492,"nuktadeva",2364,"nuktagujarati",2748,"nuktagurmukhi",2620,"numbersign",35,"numbersignmonospace",65283,"numbersignsmall",65119,"numeralsigngreek",884,"numeralsignlowergreek",885,"numero",8470,"nun",1504,"nundagesh",64320,"nundageshhebrew",64320,"nunhebrew",1504,"nvsquare",13237,"nwsquare",13243,"nyabengali",2462,"nyadeva",2334,"nyagujarati",2718,"nyagurmukhi",2590,"o",111,"oacute",243,"oangthai",3629,"obarred",629,"obarredcyrillic",1257,"obarreddieresiscyrillic",1259,"obengali",2451,"obopomofo",12571,"obreve",335,"ocandradeva",2321,"ocandragujarati",2705,"ocandravowelsigndeva",2377,"ocandravowelsigngujarati",2761,"ocaron",466,"ocircle",9438,"ocircumflex",244,"ocircumflexacute",7889,"ocircumflexdotbelow",7897,"ocircumflexgrave",7891,"ocircumflexhookabove",7893,"ocircumflextilde",7895,"ocyrillic",1086,"odblacute",337,"odblgrave",525,"odeva",2323,"odieresis",246,"odieresiscyrillic",1255,"odotbelow",7885,"oe",339,"oekorean",12634,"ogonek",731,"ogonekcmb",808,"ograve",242,"ogujarati",2707,"oharmenian",1413,"ohiragana",12362,"ohookabove",7887,"ohorn",417,"ohornacute",7899,"ohorndotbelow",7907,"ohorngrave",7901,"ohornhookabove",7903,"ohorntilde",7905,"ohungarumlaut",337,"oi",419,"oinvertedbreve",527,"okatakana",12458,"okatakanahalfwidth",65397,"okorean",12631,"olehebrew",1451,"omacron",333,"omacronacute",7763,"omacrongrave",7761,"omdeva",2384,"omega",969,"omega1",982,"omegacyrillic",1121,"omegalatinclosed",631,"omegaroundcyrillic",1147,"omegatitlocyrillic",1149,"omegatonos",974,"omgujarati",2768,"omicron",959,"omicrontonos",972,"omonospace",65359,"one",49,"onearabic",1633,"onebengali",2535,"onecircle",9312,"onecircleinversesansserif",10122,"onedeva",2407,"onedotenleader",8228,"oneeighth",8539,"onefitted",63196,"onegujarati",2791,"onegurmukhi",2663,"onehackarabic",1633,"onehalf",189,"onehangzhou",12321,"oneideographicparen",12832,"oneinferior",8321,"onemonospace",65297,"onenumeratorbengali",2548,"oneoldstyle",63281,"oneparen",9332,"oneperiod",9352,"onepersian",1777,"onequarter",188,"oneroman",8560,"onesuperior",185,"onethai",3665,"onethird",8531,"oogonek",491,"oogonekmacron",493,"oogurmukhi",2579,"oomatragurmukhi",2635,"oopen",596,"oparen",9386,"openbullet",9702,"option",8997,"ordfeminine",170,"ordmasculine",186,"orthogonal",8735,"oshortdeva",2322,"oshortvowelsigndeva",2378,"oslash",248,"oslashacute",511,"osmallhiragana",12361,"osmallkatakana",12457,"osmallkatakanahalfwidth",65387,"ostrokeacute",511,"osuperior",63216,"otcyrillic",1151,"otilde",245,"otildeacute",7757,"otildedieresis",7759,"oubopomofo",12577,"overline",8254,"overlinecenterline",65098,"overlinecmb",773,"overlinedashed",65097,"overlinedblwavy",65100,"overlinewavy",65099,"overscore",175,"ovowelsignbengali",2507,"ovowelsigndeva",2379,"ovowelsigngujarati",2763,"p",112,"paampssquare",13184,"paasentosquare",13099,"pabengali",2474,"pacute",7765,"padeva",2346,"pagedown",8671,"pageup",8670,"pagujarati",2730,"pagurmukhi",2602,"pahiragana",12401,"paiyannoithai",3631,"pakatakana",12497,"palatalizationcyrilliccmb",1156,"palochkacyrillic",1216,"pansioskorean",12671,"paragraph",182,"parallel",8741,"parenleft",40,"parenleftaltonearabic",64830,"parenleftbt",63725,"parenleftex",63724,"parenleftinferior",8333,"parenleftmonospace",65288,"parenleftsmall",65113,"parenleftsuperior",8317,"parenlefttp",63723,"parenleftvertical",65077,"parenright",41,"parenrightaltonearabic",64831,"parenrightbt",63736,"parenrightex",63735,"parenrightinferior",8334,"parenrightmonospace",65289,"parenrightsmall",65114,"parenrightsuperior",8318,"parenrighttp",63734,"parenrightvertical",65078,"partialdiff",8706,"paseqhebrew",1472,"pashtahebrew",1433,"pasquare",13225,"patah",1463,"patah11",1463,"patah1d",1463,"patah2a",1463,"patahhebrew",1463,"patahnarrowhebrew",1463,"patahquarterhebrew",1463,"patahwidehebrew",1463,"pazerhebrew",1441,"pbopomofo",12550,"pcircle",9439,"pdotaccent",7767,"pe",1508,"pecyrillic",1087,"pedagesh",64324,"pedageshhebrew",64324,"peezisquare",13115,"pefinaldageshhebrew",64323,"peharabic",1662,"peharmenian",1402,"pehebrew",1508,"pehfinalarabic",64343,"pehinitialarabic",64344,"pehiragana",12410,"pehmedialarabic",64345,"pekatakana",12506,"pemiddlehookcyrillic",1191,"perafehebrew",64334,"percent",37,"percentarabic",1642,"percentmonospace",65285,"percentsmall",65130,"period",46,"periodarmenian",1417,"periodcentered",183,"periodhalfwidth",65377,"periodinferior",63207,"periodmonospace",65294,"periodsmall",65106,"periodsuperior",63208,"perispomenigreekcmb",834,"perpendicular",8869,"perthousand",8240,"peseta",8359,"pfsquare",13194,"phabengali",2475,"phadeva",2347,"phagujarati",2731,"phagurmukhi",2603,"phi",966,"phi1",981,"phieuphacirclekorean",12922,"phieuphaparenkorean",12826,"phieuphcirclekorean",12908,"phieuphkorean",12621,"phieuphparenkorean",12812,"philatin",632,"phinthuthai",3642,"phisymbolgreek",981,"phook",421,"phophanthai",3614,"phophungthai",3612,"phosamphaothai",3616,"pi",960,"pieupacirclekorean",12915,"pieupaparenkorean",12819,"pieupcieuckorean",12662,"pieupcirclekorean",12901,"pieupkiyeokkorean",12658,"pieupkorean",12610,"pieupparenkorean",12805,"pieupsioskiyeokkorean",12660,"pieupsioskorean",12612,"pieupsiostikeutkorean",12661,"pieupthieuthkorean",12663,"pieuptikeutkorean",12659,"pihiragana",12404,"pikatakana",12500,"pisymbolgreek",982,"piwrarmenian",1411,"plus",43,"plusbelowcmb",799,"pluscircle",8853,"plusminus",177,"plusmod",726,"plusmonospace",65291,"plussmall",65122,"plussuperior",8314,"pmonospace",65360,"pmsquare",13272,"pohiragana",12413,"pointingindexdownwhite",9759,"pointingindexleftwhite",9756,"pointingindexrightwhite",9758,"pointingindexupwhite",9757,"pokatakana",12509,"poplathai",3611,"postalmark",12306,"postalmarkface",12320,"pparen",9387,"precedes",8826,"prescription",8478,"primemod",697,"primereversed",8245,"product",8719,"projective",8965,"prolongedkana",12540,"propellor",8984,"propersubset",8834,"propersuperset",8835,"proportion",8759,"proportional",8733,"psi",968,"psicyrillic",1137,"psilipneumatacyrilliccmb",1158,"pssquare",13232,"puhiragana",12407,"pukatakana",12503,"pvsquare",13236,"pwsquare",13242,"q",113,"qadeva",2392,"qadmahebrew",1448,"qafarabic",1602,"qaffinalarabic",65238,"qafinitialarabic",65239,"qafmedialarabic",65240,"qamats",1464,"qamats10",1464,"qamats1a",1464,"qamats1c",1464,"qamats27",1464,"qamats29",1464,"qamats33",1464,"qamatsde",1464,"qamatshebrew",1464,"qamatsnarrowhebrew",1464,"qamatsqatanhebrew",1464,"qamatsqatannarrowhebrew",1464,"qamatsqatanquarterhebrew",1464,"qamatsqatanwidehebrew",1464,"qamatsquarterhebrew",1464,"qamatswidehebrew",1464,"qarneyparahebrew",1439,"qbopomofo",12561,"qcircle",9440,"qhook",672,"qmonospace",65361,"qof",1511,"qofdagesh",64327,"qofdageshhebrew",64327,"qofhebrew",1511,"qparen",9388,"quarternote",9833,"qubuts",1467,"qubuts18",1467,"qubuts25",1467,"qubuts31",1467,"qubutshebrew",1467,"qubutsnarrowhebrew",1467,"qubutsquarterhebrew",1467,"qubutswidehebrew",1467,"question",63,"questionarabic",1567,"questionarmenian",1374,"questiondown",191,"questiondownsmall",63423,"questiongreek",894,"questionmonospace",65311,"questionsmall",63295,"quotedbl",34,"quotedblbase",8222,"quotedblleft",8220,"quotedblmonospace",65282,"quotedblprime",12318,"quotedblprimereversed",12317,"quotedblright",8221,"quoteleft",8216,"quoteleftreversed",8219,"quotereversed",8219,"quoteright",8217,"quoterightn",329,"quotesinglbase",8218,"quotesingle",39,"quotesinglemonospace",65287,"r",114,"raarmenian",1404,"rabengali",2480,"racute",341,"radeva",2352,"radical",8730,"radicalex",63717,"radoverssquare",13230,"radoverssquaredsquare",13231,"radsquare",13229,"rafe",1471,"rafehebrew",1471,"ragujarati",2736,"ragurmukhi",2608,"rahiragana",12425,"rakatakana",12521,"rakatakanahalfwidth",65431,"ralowerdiagonalbengali",2545,"ramiddlediagonalbengali",2544,"ramshorn",612,"ratio",8758,"rbopomofo",12566,"rcaron",345,"rcedilla",343,"rcircle",9441,"rcommaaccent",343,"rdblgrave",529,"rdotaccent",7769,"rdotbelow",7771,"rdotbelowmacron",7773,"referencemark",8251,"reflexsubset",8838,"reflexsuperset",8839,"registered",174,"registersans",63720,"registerserif",63194,"reharabic",1585,"reharmenian",1408,"rehfinalarabic",65198,"rehiragana",12428,"rekatakana",12524,"rekatakanahalfwidth",65434,"resh",1512,"reshdageshhebrew",64328,"reshhebrew",1512,"reversedtilde",8765,"reviahebrew",1431,"reviamugrashhebrew",1431,"revlogicalnot",8976,"rfishhook",638,"rfishhookreversed",639,"rhabengali",2525,"rhadeva",2397,"rho",961,"rhook",637,"rhookturned",635,"rhookturnedsuperior",693,"rhosymbolgreek",1009,"rhotichookmod",734,"rieulacirclekorean",12913,"rieulaparenkorean",12817,"rieulcirclekorean",12899,"rieulhieuhkorean",12608,"rieulkiyeokkorean",12602,"rieulkiyeoksioskorean",12649,"rieulkorean",12601,"rieulmieumkorean",12603,"rieulpansioskorean",12652,"rieulparenkorean",12803,"rieulphieuphkorean",12607,"rieulpieupkorean",12604,"rieulpieupsioskorean",12651,"rieulsioskorean",12605,"rieulthieuthkorean",12606,"rieultikeutkorean",12650,"rieulyeorinhieuhkorean",12653,"rightangle",8735,"righttackbelowcmb",793,"righttriangle",8895,"rihiragana",12426,"rikatakana",12522,"rikatakanahalfwidth",65432,"ring",730,"ringbelowcmb",805,"ringcmb",778,"ringhalfleft",703,"ringhalfleftarmenian",1369,"ringhalfleftbelowcmb",796,"ringhalfleftcentered",723,"ringhalfright",702,"ringhalfrightbelowcmb",825,"ringhalfrightcentered",722,"rinvertedbreve",531,"rittorusquare",13137,"rlinebelow",7775,"rlongleg",636,"rlonglegturned",634,"rmonospace",65362,"rohiragana",12429,"rokatakana",12525,"rokatakanahalfwidth",65435,"roruathai",3619,"rparen",9389,"rrabengali",2524,"rradeva",2353,"rragurmukhi",2652,"rreharabic",1681,"rrehfinalarabic",64397,"rrvocalicbengali",2528,"rrvocalicdeva",2400,"rrvocalicgujarati",2784,"rrvocalicvowelsignbengali",2500,"rrvocalicvowelsigndeva",2372,"rrvocalicvowelsigngujarati",2756,"rsuperior",63217,"rtblock",9616,"rturned",633,"rturnedsuperior",692,"ruhiragana",12427,"rukatakana",12523,"rukatakanahalfwidth",65433,"rupeemarkbengali",2546,"rupeesignbengali",2547,"rupiah",63197,"ruthai",3620,"rvocalicbengali",2443,"rvocalicdeva",2315,"rvocalicgujarati",2699,"rvocalicvowelsignbengali",2499,"rvocalicvowelsigndeva",2371,"rvocalicvowelsigngujarati",2755,"s",115,"sabengali",2488,"sacute",347,"sacutedotaccent",7781,"sadarabic",1589,"sadeva",2360,"sadfinalarabic",65210,"sadinitialarabic",65211,"sadmedialarabic",65212,"sagujarati",2744,"sagurmukhi",2616,"sahiragana",12373,"sakatakana",12469,"sakatakanahalfwidth",65403,"sallallahoualayhewasallamarabic",65018,"samekh",1505,"samekhdagesh",64321,"samekhdageshhebrew",64321,"samekhhebrew",1505,"saraaathai",3634,"saraaethai",3649,"saraaimaimalaithai",3652,"saraaimaimuanthai",3651,"saraamthai",3635,"saraathai",3632,"saraethai",3648,"saraiileftthai",63622,"saraiithai",3637,"saraileftthai",63621,"saraithai",3636,"saraothai",3650,"saraueeleftthai",63624,"saraueethai",3639,"saraueleftthai",63623,"sarauethai",3638,"sarauthai",3640,"sarauuthai",3641,"sbopomofo",12569,"scaron",353,"scarondotaccent",7783,"scedilla",351,"schwa",601,"schwacyrillic",1241,"schwadieresiscyrillic",1243,"schwahook",602,"scircle",9442,"scircumflex",349,"scommaaccent",537,"sdotaccent",7777,"sdotbelow",7779,"sdotbelowdotaccent",7785,"seagullbelowcmb",828,"second",8243,"secondtonechinese",714,"section",167,"seenarabic",1587,"seenfinalarabic",65202,"seeninitialarabic",65203,"seenmedialarabic",65204,"segol",1462,"segol13",1462,"segol1f",1462,"segol2c",1462,"segolhebrew",1462,"segolnarrowhebrew",1462,"segolquarterhebrew",1462,"segoltahebrew",1426,"segolwidehebrew",1462,"seharmenian",1405,"sehiragana",12379,"sekatakana",12475,"sekatakanahalfwidth",65406,"semicolon",59,"semicolonarabic",1563,"semicolonmonospace",65307,"semicolonsmall",65108,"semivoicedmarkkana",12444,"semivoicedmarkkanahalfwidth",65439,"sentisquare",13090,"sentosquare",13091,"seven",55,"sevenarabic",1639,"sevenbengali",2541,"sevencircle",9318,"sevencircleinversesansserif",10128,"sevendeva",2413,"seveneighths",8542,"sevengujarati",2797,"sevengurmukhi",2669,"sevenhackarabic",1639,"sevenhangzhou",12327,"sevenideographicparen",12838,"seveninferior",8327,"sevenmonospace",65303,"sevenoldstyle",63287,"sevenparen",9338,"sevenperiod",9358,"sevenpersian",1783,"sevenroman",8566,"sevensuperior",8311,"seventeencircle",9328,"seventeenparen",9348,"seventeenperiod",9368,"seventhai",3671,"sfthyphen",173,"shaarmenian",1399,"shabengali",2486,"shacyrillic",1096,"shaddaarabic",1617,"shaddadammaarabic",64609,"shaddadammatanarabic",64606,"shaddafathaarabic",64608,"shaddakasraarabic",64610,"shaddakasratanarabic",64607,"shade",9618,"shadedark",9619,"shadelight",9617,"shademedium",9618,"shadeva",2358,"shagujarati",2742,"shagurmukhi",2614,"shalshelethebrew",1427,"shbopomofo",12565,"shchacyrillic",1097,"sheenarabic",1588,"sheenfinalarabic",65206,"sheeninitialarabic",65207,"sheenmedialarabic",65208,"sheicoptic",995,"sheqel",8362,"sheqelhebrew",8362,"sheva",1456,"sheva115",1456,"sheva15",1456,"sheva22",1456,"sheva2e",1456,"shevahebrew",1456,"shevanarrowhebrew",1456,"shevaquarterhebrew",1456,"shevawidehebrew",1456,"shhacyrillic",1211,"shimacoptic",1005,"shin",1513,"shindagesh",64329,"shindageshhebrew",64329,"shindageshshindot",64300,"shindageshshindothebrew",64300,"shindageshsindot",64301,"shindageshsindothebrew",64301,"shindothebrew",1473,"shinhebrew",1513,"shinshindot",64298,"shinshindothebrew",64298,"shinsindot",64299,"shinsindothebrew",64299,"shook",642,"sigma",963,"sigma1",962,"sigmafinal",962,"sigmalunatesymbolgreek",1010,"sihiragana",12375,"sikatakana",12471,"sikatakanahalfwidth",65404,"siluqhebrew",1469,"siluqlefthebrew",1469,"similar",8764,"sindothebrew",1474,"siosacirclekorean",12916,"siosaparenkorean",12820,"sioscieuckorean",12670,"sioscirclekorean",12902,"sioskiyeokkorean",12666,"sioskorean",12613,"siosnieunkorean",12667,"siosparenkorean",12806,"siospieupkorean",12669,"siostikeutkorean",12668,"six",54,"sixarabic",1638,"sixbengali",2540,"sixcircle",9317,"sixcircleinversesansserif",10127,"sixdeva",2412,"sixgujarati",2796,"sixgurmukhi",2668,"sixhackarabic",1638,"sixhangzhou",12326,"sixideographicparen",12837,"sixinferior",8326,"sixmonospace",65302,"sixoldstyle",63286,"sixparen",9337,"sixperiod",9357,"sixpersian",1782,"sixroman",8565,"sixsuperior",8310,"sixteencircle",9327,"sixteencurrencydenominatorbengali",2553,"sixteenparen",9347,"sixteenperiod",9367,"sixthai",3670,"slash",47,"slashmonospace",65295,"slong",383,"slongdotaccent",7835,"smileface",9786,"smonospace",65363,"sofpasuqhebrew",1475,"softhyphen",173,"softsigncyrillic",1100,"sohiragana",12381,"sokatakana",12477,"sokatakanahalfwidth",65407,"soliduslongoverlaycmb",824,"solidusshortoverlaycmb",823,"sorusithai",3625,"sosalathai",3624,"sosothai",3595,"sosuathai",3626,"space",32,"spacehackarabic",32,"spade",9824,"spadesuitblack",9824,"spadesuitwhite",9828,"sparen",9390,"squarebelowcmb",827,"squarecc",13252,"squarecm",13213,"squarediagonalcrosshatchfill",9641,"squarehorizontalfill",9636,"squarekg",13199,"squarekm",13214,"squarekmcapital",13262,"squareln",13265,"squarelog",13266,"squaremg",13198,"squaremil",13269,"squaremm",13212,"squaremsquared",13217,"squareorthogonalcrosshatchfill",9638,"squareupperlefttolowerrightfill",9639,"squareupperrighttolowerleftfill",9640,"squareverticalfill",9637,"squarewhitewithsmallblack",9635,"srsquare",13275,"ssabengali",2487,"ssadeva",2359,"ssagujarati",2743,"ssangcieuckorean",12617,"ssanghieuhkorean",12677,"ssangieungkorean",12672,"ssangkiyeokkorean",12594,"ssangnieunkorean",12645,"ssangpieupkorean",12611,"ssangsioskorean",12614,"ssangtikeutkorean",12600,"ssuperior",63218,"sterling",163,"sterlingmonospace",65505,"strokelongoverlaycmb",822,"strokeshortoverlaycmb",821,"subset",8834,"subsetnotequal",8842,"subsetorequal",8838,"succeeds",8827,"suchthat",8715,"suhiragana",12377,"sukatakana",12473,"sukatakanahalfwidth",65405,"sukunarabic",1618,"summation",8721,"sun",9788,"superset",8835,"supersetnotequal",8843,"supersetorequal",8839,"svsquare",13276,"syouwaerasquare",13180,"t",116,"tabengali",2468,"tackdown",8868,"tackleft",8867,"tadeva",2340,"tagujarati",2724,"tagurmukhi",2596,"taharabic",1591,"tahfinalarabic",65218,"tahinitialarabic",65219,"tahiragana",12383,"tahmedialarabic",65220,"taisyouerasquare",13181,"takatakana",12479,"takatakanahalfwidth",65408,"tatweelarabic",1600,"tau",964,"tav",1514,"tavdages",64330,"tavdagesh",64330,"tavdageshhebrew",64330,"tavhebrew",1514,"tbar",359,"tbopomofo",12554,"tcaron",357,"tccurl",680,"tcedilla",355,"tcheharabic",1670,"tchehfinalarabic",64379,"tchehinitialarabic",64380,"tchehmedialarabic",64381,"tcircle",9443,"tcircumflexbelow",7793,"tcommaaccent",355,"tdieresis",7831,"tdotaccent",7787,"tdotbelow",7789,"tecyrillic",1090,"tedescendercyrillic",1197,"teharabic",1578,"tehfinalarabic",65174,"tehhahinitialarabic",64674,"tehhahisolatedarabic",64524,"tehinitialarabic",65175,"tehiragana",12390,"tehjeeminitialarabic",64673,"tehjeemisolatedarabic",64523,"tehmarbutaarabic",1577,"tehmarbutafinalarabic",65172,"tehmedialarabic",65176,"tehmeeminitialarabic",64676,"tehmeemisolatedarabic",64526,"tehnoonfinalarabic",64627,"tekatakana",12486,"tekatakanahalfwidth",65411,"telephone",8481,"telephoneblack",9742,"telishagedolahebrew",1440,"telishaqetanahebrew",1449,"tencircle",9321,"tenideographicparen",12841,"tenparen",9341,"tenperiod",9361,"tenroman",8569,"tesh",679,"tet",1496,"tetdagesh",64312,"tetdageshhebrew",64312,"tethebrew",1496,"tetsecyrillic",1205,"tevirhebrew",1435,"tevirlefthebrew",1435,"thabengali",2469,"thadeva",2341,"thagujarati",2725,"thagurmukhi",2597,"thalarabic",1584,"thalfinalarabic",65196,"thanthakhatlowleftthai",63640,"thanthakhatlowrightthai",63639,"thanthakhatthai",3660,"thanthakhatupperleftthai",63638,"theharabic",1579,"thehfinalarabic",65178,"thehinitialarabic",65179,"thehmedialarabic",65180,"thereexists",8707,"therefore",8756,"theta",952,"theta1",977,"thetasymbolgreek",977,"thieuthacirclekorean",12921,"thieuthaparenkorean",12825,"thieuthcirclekorean",12907,"thieuthkorean",12620,"thieuthparenkorean",12811,"thirteencircle",9324,"thirteenparen",9344,"thirteenperiod",9364,"thonangmonthothai",3601,"thook",429,"thophuthaothai",3602,"thorn",254,"thothahanthai",3607,"thothanthai",3600,"thothongthai",3608,"thothungthai",3606,"thousandcyrillic",1154,"thousandsseparatorarabic",1644,"thousandsseparatorpersian",1644,"three",51,"threearabic",1635,"threebengali",2537,"threecircle",9314,"threecircleinversesansserif",10124,"threedeva",2409,"threeeighths",8540,"threegujarati",2793,"threegurmukhi",2665,"threehackarabic",1635,"threehangzhou",12323,"threeideographicparen",12834,"threeinferior",8323,"threemonospace",65299,"threenumeratorbengali",2550,"threeoldstyle",63283,"threeparen",9334,"threeperiod",9354,"threepersian",1779,"threequarters",190,"threequartersemdash",63198,"threeroman",8562,"threesuperior",179,"threethai",3667,"thzsquare",13204,"tihiragana",12385,"tikatakana",12481,"tikatakanahalfwidth",65409,"tikeutacirclekorean",12912,"tikeutaparenkorean",12816,"tikeutcirclekorean",12898,"tikeutkorean",12599,"tikeutparenkorean",12802,"tilde",732,"tildebelowcmb",816,"tildecmb",771,"tildecomb",771,"tildedoublecmb",864,"tildeoperator",8764,"tildeoverlaycmb",820,"tildeverticalcmb",830,"timescircle",8855,"tipehahebrew",1430,"tipehalefthebrew",1430,"tippigurmukhi",2672,"titlocyrilliccmb",1155,"tiwnarmenian",1407,"tlinebelow",7791,"tmonospace",65364,"toarmenian",1385,"tohiragana",12392,"tokatakana",12488,"tokatakanahalfwidth",65412,"tonebarextrahighmod",741,"tonebarextralowmod",745,"tonebarhighmod",742,"tonebarlowmod",744,"tonebarmidmod",743,"tonefive",445,"tonesix",389,"tonetwo",424,"tonos",900,"tonsquare",13095,"topatakthai",3599,"tortoiseshellbracketleft",12308,"tortoiseshellbracketleftsmall",65117,"tortoiseshellbracketleftvertical",65081,"tortoiseshellbracketright",12309,"tortoiseshellbracketrightsmall",65118,"tortoiseshellbracketrightvertical",65082,"totaothai",3605,"tpalatalhook",427,"tparen",9391,"trademark",8482,"trademarksans",63722,"trademarkserif",63195,"tretroflexhook",648,"triagdn",9660,"triaglf",9668,"triagrt",9658,"triagup",9650,"ts",678,"tsadi",1510,"tsadidagesh",64326,"tsadidageshhebrew",64326,"tsadihebrew",1510,"tsecyrillic",1094,"tsere",1461,"tsere12",1461,"tsere1e",1461,"tsere2b",1461,"tserehebrew",1461,"tserenarrowhebrew",1461,"tserequarterhebrew",1461,"tserewidehebrew",1461,"tshecyrillic",1115,"tsuperior",63219,"ttabengali",2463,"ttadeva",2335,"ttagujarati",2719,"ttagurmukhi",2591,"tteharabic",1657,"ttehfinalarabic",64359,"ttehinitialarabic",64360,"ttehmedialarabic",64361,"tthabengali",2464,"tthadeva",2336,"tthagujarati",2720,"tthagurmukhi",2592,"tturned",647,"tuhiragana",12388,"tukatakana",12484,"tukatakanahalfwidth",65410,"tusmallhiragana",12387,"tusmallkatakana",12483,"tusmallkatakanahalfwidth",65391,"twelvecircle",9323,"twelveparen",9343,"twelveperiod",9363,"twelveroman",8571,"twentycircle",9331,"twentyhangzhou",21316,"twentyparen",9351,"twentyperiod",9371,"two",50,"twoarabic",1634,"twobengali",2536,"twocircle",9313,"twocircleinversesansserif",10123,"twodeva",2408,"twodotenleader",8229,"twodotleader",8229,"twodotleadervertical",65072,"twogujarati",2792,"twogurmukhi",2664,"twohackarabic",1634,"twohangzhou",12322,"twoideographicparen",12833,"twoinferior",8322,"twomonospace",65298,"twonumeratorbengali",2549,"twooldstyle",63282,"twoparen",9333,"twoperiod",9353,"twopersian",1778,"tworoman",8561,"twostroke",443,"twosuperior",178,"twothai",3666,"twothirds",8532,"u",117,"uacute",250,"ubar",649,"ubengali",2441,"ubopomofo",12584,"ubreve",365,"ucaron",468,"ucircle",9444,"ucircumflex",251,"ucircumflexbelow",7799,"ucyrillic",1091,"udattadeva",2385,"udblacute",369,"udblgrave",533,"udeva",2313,"udieresis",252,"udieresisacute",472,"udieresisbelow",7795,"udieresiscaron",474,"udieresiscyrillic",1265,"udieresisgrave",476,"udieresismacron",470,"udotbelow",7909,"ugrave",249,"ugujarati",2697,"ugurmukhi",2569,"uhiragana",12358,"uhookabove",7911,"uhorn",432,"uhornacute",7913,"uhorndotbelow",7921,"uhorngrave",7915,"uhornhookabove",7917,"uhorntilde",7919,"uhungarumlaut",369,"uhungarumlautcyrillic",1267,"uinvertedbreve",535,"ukatakana",12454,"ukatakanahalfwidth",65395,"ukcyrillic",1145,"ukorean",12636,"umacron",363,"umacroncyrillic",1263,"umacrondieresis",7803,"umatragurmukhi",2625,"umonospace",65365,"underscore",95,"underscoredbl",8215,"underscoremonospace",65343,"underscorevertical",65075,"underscorewavy",65103,"union",8746,"universal",8704,"uogonek",371,"uparen",9392,"upblock",9600,"upperdothebrew",1476,"upsilon",965,"upsilondieresis",971,"upsilondieresistonos",944,"upsilonlatin",650,"upsilontonos",973,"uptackbelowcmb",797,"uptackmod",724,"uragurmukhi",2675,"uring",367,"ushortcyrillic",1118,"usmallhiragana",12357,"usmallkatakana",12453,"usmallkatakanahalfwidth",65385,"ustraightcyrillic",1199,"ustraightstrokecyrillic",1201,"utilde",361,"utildeacute",7801,"utildebelow",7797,"uubengali",2442,"uudeva",2314,"uugujarati",2698,"uugurmukhi",2570,"uumatragurmukhi",2626,"uuvowelsignbengali",2498,"uuvowelsigndeva",2370,"uuvowelsigngujarati",2754,"uvowelsignbengali",2497,"uvowelsigndeva",2369,"uvowelsigngujarati",2753,"v",118,"vadeva",2357,"vagujarati",2741,"vagurmukhi",2613,"vakatakana",12535,"vav",1493,"vavdagesh",64309,"vavdagesh65",64309,"vavdageshhebrew",64309,"vavhebrew",1493,"vavholam",64331,"vavholamhebrew",64331,"vavvavhebrew",1520,"vavyodhebrew",1521,"vcircle",9445,"vdotbelow",7807,"vecyrillic",1074,"veharabic",1700,"vehfinalarabic",64363,"vehinitialarabic",64364,"vehmedialarabic",64365,"vekatakana",12537,"venus",9792,"verticalbar",124,"verticallineabovecmb",781,"verticallinebelowcmb",809,"verticallinelowmod",716,"verticallinemod",712,"vewarmenian",1406,"vhook",651,"vikatakana",12536,"viramabengali",2509,"viramadeva",2381,"viramagujarati",2765,"visargabengali",2435,"visargadeva",2307,"visargagujarati",2691,"vmonospace",65366,"voarmenian",1400,"voicediterationhiragana",12446,"voicediterationkatakana",12542,"voicedmarkkana",12443,"voicedmarkkanahalfwidth",65438,"vokatakana",12538,"vparen",9393,"vtilde",7805,"vturned",652,"vuhiragana",12436,"vukatakana",12532,"w",119,"wacute",7811,"waekorean",12633,"wahiragana",12431,"wakatakana",12527,"wakatakanahalfwidth",65436,"wakorean",12632,"wasmallhiragana",12430,"wasmallkatakana",12526,"wattosquare",13143,"wavedash",12316,"wavyunderscorevertical",65076,"wawarabic",1608,"wawfinalarabic",65262,"wawhamzaabovearabic",1572,"wawhamzaabovefinalarabic",65158,"wbsquare",13277,"wcircle",9446,"wcircumflex",373,"wdieresis",7813,"wdotaccent",7815,"wdotbelow",7817,"wehiragana",12433,"weierstrass",8472,"wekatakana",12529,"wekorean",12638,"weokorean",12637,"wgrave",7809,"whitebullet",9702,"whitecircle",9675,"whitecircleinverse",9689,"whitecornerbracketleft",12302,"whitecornerbracketleftvertical",65091,"whitecornerbracketright",12303,"whitecornerbracketrightvertical",65092,"whitediamond",9671,"whitediamondcontainingblacksmalldiamond",9672,"whitedownpointingsmalltriangle",9663,"whitedownpointingtriangle",9661,"whiteleftpointingsmalltriangle",9667,"whiteleftpointingtriangle",9665,"whitelenticularbracketleft",12310,"whitelenticularbracketright",12311,"whiterightpointingsmalltriangle",9657,"whiterightpointingtriangle",9655,"whitesmallsquare",9643,"whitesmilingface",9786,"whitesquare",9633,"whitestar",9734,"whitetelephone",9743,"whitetortoiseshellbracketleft",12312,"whitetortoiseshellbracketright",12313,"whiteuppointingsmalltriangle",9653,"whiteuppointingtriangle",9651,"wihiragana",12432,"wikatakana",12528,"wikorean",12639,"wmonospace",65367,"wohiragana",12434,"wokatakana",12530,"wokatakanahalfwidth",65382,"won",8361,"wonmonospace",65510,"wowaenthai",3623,"wparen",9394,"wring",7832,"wsuperior",695,"wturned",653,"wynn",447,"x",120,"xabovecmb",829,"xbopomofo",12562,"xcircle",9447,"xdieresis",7821,"xdotaccent",7819,"xeharmenian",1389,"xi",958,"xmonospace",65368,"xparen",9395,"xsuperior",739,"y",121,"yaadosquare",13134,"yabengali",2479,"yacute",253,"yadeva",2351,"yaekorean",12626,"yagujarati",2735,"yagurmukhi",2607,"yahiragana",12420,"yakatakana",12516,"yakatakanahalfwidth",65428,"yakorean",12625,"yamakkanthai",3662,"yasmallhiragana",12419,"yasmallkatakana",12515,"yasmallkatakanahalfwidth",65388,"yatcyrillic",1123,"ycircle",9448,"ycircumflex",375,"ydieresis",255,"ydotaccent",7823,"ydotbelow",7925,"yeharabic",1610,"yehbarreearabic",1746,"yehbarreefinalarabic",64431,"yehfinalarabic",65266,"yehhamzaabovearabic",1574,"yehhamzaabovefinalarabic",65162,"yehhamzaaboveinitialarabic",65163,"yehhamzaabovemedialarabic",65164,"yehinitialarabic",65267,"yehmedialarabic",65268,"yehmeeminitialarabic",64733,"yehmeemisolatedarabic",64600,"yehnoonfinalarabic",64660,"yehthreedotsbelowarabic",1745,"yekorean",12630,"yen",165,"yenmonospace",65509,"yeokorean",12629,"yeorinhieuhkorean",12678,"yerahbenyomohebrew",1450,"yerahbenyomolefthebrew",1450,"yericyrillic",1099,"yerudieresiscyrillic",1273,"yesieungkorean",12673,"yesieungpansioskorean",12675,"yesieungsioskorean",12674,"yetivhebrew",1434,"ygrave",7923,"yhook",436,"yhookabove",7927,"yiarmenian",1397,"yicyrillic",1111,"yikorean",12642,"yinyang",9775,"yiwnarmenian",1410,"ymonospace",65369,"yod",1497,"yoddagesh",64313,"yoddageshhebrew",64313,"yodhebrew",1497,"yodyodhebrew",1522,"yodyodpatahhebrew",64287,"yohiragana",12424,"yoikorean",12681,"yokatakana",12520,"yokatakanahalfwidth",65430,"yokorean",12635,"yosmallhiragana",12423,"yosmallkatakana",12519,"yosmallkatakanahalfwidth",65390,"yotgreek",1011,"yoyaekorean",12680,"yoyakorean",12679,"yoyakthai",3618,"yoyingthai",3597,"yparen",9396,"ypogegrammeni",890,"ypogegrammenigreekcmb",837,"yr",422,"yring",7833,"ysuperior",696,"ytilde",7929,"yturned",654,"yuhiragana",12422,"yuikorean",12684,"yukatakana",12518,"yukatakanahalfwidth",65429,"yukorean",12640,"yusbigcyrillic",1131,"yusbigiotifiedcyrillic",1133,"yuslittlecyrillic",1127,"yuslittleiotifiedcyrillic",1129,"yusmallhiragana",12421,"yusmallkatakana",12517,"yusmallkatakanahalfwidth",65389,"yuyekorean",12683,"yuyeokorean",12682,"yyabengali",2527,"yyadeva",2399,"z",122,"zaarmenian",1382,"zacute",378,"zadeva",2395,"zagurmukhi",2651,"zaharabic",1592,"zahfinalarabic",65222,"zahinitialarabic",65223,"zahiragana",12374,"zahmedialarabic",65224,"zainarabic",1586,"zainfinalarabic",65200,"zakatakana",12470,"zaqefgadolhebrew",1429,"zaqefqatanhebrew",1428,"zarqahebrew",1432,"zayin",1494,"zayindagesh",64310,"zayindageshhebrew",64310,"zayinhebrew",1494,"zbopomofo",12567,"zcaron",382,"zcircle",9449,"zcircumflex",7825,"zcurl",657,"zdot",380,"zdotaccent",380,"zdotbelow",7827,"zecyrillic",1079,"zedescendercyrillic",1177,"zedieresiscyrillic",1247,"zehiragana",12380,"zekatakana",12476,"zero",48,"zeroarabic",1632,"zerobengali",2534,"zerodeva",2406,"zerogujarati",2790,"zerogurmukhi",2662,"zerohackarabic",1632,"zeroinferior",8320,"zeromonospace",65296,"zerooldstyle",63280,"zeropersian",1776,"zerosuperior",8304,"zerothai",3664,"zerowidthjoiner",65279,"zerowidthnonjoiner",8204,"zerowidthspace",8203,"zeta",950,"zhbopomofo",12563,"zhearmenian",1386,"zhebrevecyrillic",1218,"zhecyrillic",1078,"zhedescendercyrillic",1175,"zhedieresiscyrillic",1245,"zihiragana",12376,"zikatakana",12472,"zinorhebrew",1454,"zlinebelow",7829,"zmonospace",65370,"zohiragana",12382,"zokatakana",12478,"zparen",9397,"zretroflexhook",656,"zstroke",438,"zuhiragana",12378,"zukatakana",12474,".notdef",0,"angbracketleftbig",9001,"angbracketleftBig",9001,"angbracketleftbigg",9001,"angbracketleftBigg",9001,"angbracketrightBig",9002,"angbracketrightbig",9002,"angbracketrightBigg",9002,"angbracketrightbigg",9002,"arrowhookleft",8618,"arrowhookright",8617,"arrowlefttophalf",8636,"arrowleftbothalf",8637,"arrownortheast",8599,"arrownorthwest",8598,"arrowrighttophalf",8640,"arrowrightbothalf",8641,"arrowsoutheast",8600,"arrowsouthwest",8601,"backslashbig",8726,"backslashBig",8726,"backslashBigg",8726,"backslashbigg",8726,"bardbl",8214,"bracehtipdownleft",65079,"bracehtipdownright",65079,"bracehtipupleft",65080,"bracehtipupright",65080,"braceleftBig",123,"braceleftbig",123,"braceleftbigg",123,"braceleftBigg",123,"bracerightBig",125,"bracerightbig",125,"bracerightbigg",125,"bracerightBigg",125,"bracketleftbig",91,"bracketleftBig",91,"bracketleftbigg",91,"bracketleftBigg",91,"bracketrightBig",93,"bracketrightbig",93,"bracketrightbigg",93,"bracketrightBigg",93,"ceilingleftbig",8968,"ceilingleftBig",8968,"ceilingleftBigg",8968,"ceilingleftbigg",8968,"ceilingrightbig",8969,"ceilingrightBig",8969,"ceilingrightbigg",8969,"ceilingrightBigg",8969,"circledotdisplay",8857,"circledottext",8857,"circlemultiplydisplay",8855,"circlemultiplytext",8855,"circleplusdisplay",8853,"circleplustext",8853,"contintegraldisplay",8750,"contintegraltext",8750,"coproductdisplay",8720,"coproducttext",8720,"floorleftBig",8970,"floorleftbig",8970,"floorleftbigg",8970,"floorleftBigg",8970,"floorrightbig",8971,"floorrightBig",8971,"floorrightBigg",8971,"floorrightbigg",8971,"hatwide",770,"hatwider",770,"hatwidest",770,"intercal",7488,"integraldisplay",8747,"integraltext",8747,"intersectiondisplay",8898,"intersectiontext",8898,"logicalanddisplay",8743,"logicalandtext",8743,"logicalordisplay",8744,"logicalortext",8744,"parenleftBig",40,"parenleftbig",40,"parenleftBigg",40,"parenleftbigg",40,"parenrightBig",41,"parenrightbig",41,"parenrightBigg",41,"parenrightbigg",41,"prime",8242,"productdisplay",8719,"producttext",8719,"radicalbig",8730,"radicalBig",8730,"radicalBigg",8730,"radicalbigg",8730,"radicalbt",8730,"radicaltp",8730,"radicalvertex",8730,"slashbig",47,"slashBig",47,"slashBigg",47,"slashbigg",47,"summationdisplay",8721,"summationtext",8721,"tildewide",732,"tildewider",732,"tildewidest",732,"uniondisplay",8899,"unionmultidisplay",8846,"unionmultitext",8846,"unionsqdisplay",8852,"unionsqtext",8852,"uniontext",8899,"vextenddouble",8741,"vextendsingle",8739]})),i=(0,r.getArrayLookupTableFactory)((function(){return["space",32,"a1",9985,"a2",9986,"a202",9987,"a3",9988,"a4",9742,"a5",9990,"a119",9991,"a118",9992,"a117",9993,"a11",9755,"a12",9758,"a13",9996,"a14",9997,"a15",9998,"a16",9999,"a105",1e4,"a17",10001,"a18",10002,"a19",10003,"a20",10004,"a21",10005,"a22",10006,"a23",10007,"a24",10008,"a25",10009,"a26",10010,"a27",10011,"a28",10012,"a6",10013,"a7",10014,"a8",10015,"a9",10016,"a10",10017,"a29",10018,"a30",10019,"a31",10020,"a32",10021,"a33",10022,"a34",10023,"a35",9733,"a36",10025,"a37",10026,"a38",10027,"a39",10028,"a40",10029,"a41",10030,"a42",10031,"a43",10032,"a44",10033,"a45",10034,"a46",10035,"a47",10036,"a48",10037,"a49",10038,"a50",10039,"a51",10040,"a52",10041,"a53",10042,"a54",10043,"a55",10044,"a56",10045,"a57",10046,"a58",10047,"a59",10048,"a60",10049,"a61",10050,"a62",10051,"a63",10052,"a64",10053,"a65",10054,"a66",10055,"a67",10056,"a68",10057,"a69",10058,"a70",10059,"a71",9679,"a72",10061,"a73",9632,"a74",10063,"a203",10064,"a75",10065,"a204",10066,"a76",9650,"a77",9660,"a78",9670,"a79",10070,"a81",9687,"a82",10072,"a83",10073,"a84",10074,"a97",10075,"a98",10076,"a99",10077,"a100",10078,"a101",10081,"a102",10082,"a103",10083,"a104",10084,"a106",10085,"a107",10086,"a108",10087,"a112",9827,"a111",9830,"a110",9829,"a109",9824,"a120",9312,"a121",9313,"a122",9314,"a123",9315,"a124",9316,"a125",9317,"a126",9318,"a127",9319,"a128",9320,"a129",9321,"a130",10102,"a131",10103,"a132",10104,"a133",10105,"a134",10106,"a135",10107,"a136",10108,"a137",10109,"a138",10110,"a139",10111,"a140",10112,"a141",10113,"a142",10114,"a143",10115,"a144",10116,"a145",10117,"a146",10118,"a147",10119,"a148",10120,"a149",10121,"a150",10122,"a151",10123,"a152",10124,"a153",10125,"a154",10126,"a155",10127,"a156",10128,"a157",10129,"a158",10130,"a159",10131,"a160",10132,"a161",8594,"a163",8596,"a164",8597,"a196",10136,"a165",10137,"a192",10138,"a166",10139,"a167",10140,"a168",10141,"a169",10142,"a170",10143,"a171",10144,"a172",10145,"a173",10146,"a162",10147,"a174",10148,"a175",10149,"a176",10150,"a177",10151,"a178",10152,"a179",10153,"a193",10154,"a180",10155,"a199",10156,"a181",10157,"a200",10158,"a182",10159,"a201",10161,"a183",10162,"a184",10163,"a197",10164,"a185",10165,"a194",10166,"a198",10167,"a186",10168,"a195",10169,"a187",10170,"a188",10171,"a189",10172,"a190",10173,"a191",10174,"a89",10088,"a90",10089,"a93",10090,"a94",10091,"a91",10092,"a92",10093,"a205",10094,"a85",10095,"a206",10096,"a86",10097,"a87",10098,"a88",10099,"a95",10100,"a96",10101,".notdef",0]}))},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSymbolsFonts=t.getSupplementalGlyphMapForCalibri=t.getSupplementalGlyphMapForArialBlack=t.getStdFontMap=t.getSerifFonts=t.getNonStdFontMap=t.getGlyphMapForStandardFonts=void 0;var r=n(8);const a=(0,r.getLookupTableFactory)((function(e){e.ArialNarrow="Helvetica",e["ArialNarrow-Bold"]="Helvetica-Bold",e["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique",e["ArialNarrow-Italic"]="Helvetica-Oblique",e.ArialBlack="Helvetica",e["ArialBlack-Bold"]="Helvetica-Bold",e["ArialBlack-BoldItalic"]="Helvetica-BoldOblique",e["ArialBlack-Italic"]="Helvetica-Oblique",e["Arial-Black"]="Helvetica",e["Arial-Black-Bold"]="Helvetica-Bold",e["Arial-Black-BoldItalic"]="Helvetica-BoldOblique",e["Arial-Black-Italic"]="Helvetica-Oblique",e.Arial="Helvetica",e["Arial-Bold"]="Helvetica-Bold",e["Arial-BoldItalic"]="Helvetica-BoldOblique",e["Arial-Italic"]="Helvetica-Oblique",e["Arial-BoldItalicMT"]="Helvetica-BoldOblique",e["Arial-BoldMT"]="Helvetica-Bold",e["Arial-ItalicMT"]="Helvetica-Oblique",e.ArialMT="Helvetica",e["Courier-Bold"]="Courier-Bold",e["Courier-BoldItalic"]="Courier-BoldOblique",e["Courier-Italic"]="Courier-Oblique",e.CourierNew="Courier",e["CourierNew-Bold"]="Courier-Bold",e["CourierNew-BoldItalic"]="Courier-BoldOblique",e["CourierNew-Italic"]="Courier-Oblique",e["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique",e["CourierNewPS-BoldMT"]="Courier-Bold",e["CourierNewPS-ItalicMT"]="Courier-Oblique",e.CourierNewPSMT="Courier",e.Helvetica="Helvetica",e["Helvetica-Bold"]="Helvetica-Bold",e["Helvetica-BoldItalic"]="Helvetica-BoldOblique",e["Helvetica-BoldOblique"]="Helvetica-BoldOblique",e["Helvetica-Italic"]="Helvetica-Oblique",e["Helvetica-Oblique"]="Helvetica-Oblique",e["Symbol-Bold"]="Symbol",e["Symbol-BoldItalic"]="Symbol",e["Symbol-Italic"]="Symbol",e.TimesNewRoman="Times-Roman",e["TimesNewRoman-Bold"]="Times-Bold",e["TimesNewRoman-BoldItalic"]="Times-BoldItalic",e["TimesNewRoman-Italic"]="Times-Italic",e.TimesNewRomanPS="Times-Roman",e["TimesNewRomanPS-Bold"]="Times-Bold",e["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic",e["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic",e["TimesNewRomanPS-BoldMT"]="Times-Bold",e["TimesNewRomanPS-Italic"]="Times-Italic",e["TimesNewRomanPS-ItalicMT"]="Times-Italic",e.TimesNewRomanPSMT="Times-Roman",e["TimesNewRomanPSMT-Bold"]="Times-Bold",e["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic",e["TimesNewRomanPSMT-Italic"]="Times-Italic"}));t.getStdFontMap=a;const i=(0,r.getLookupTableFactory)((function(e){e.Calibri="Helvetica",e["Calibri-Bold"]="Helvetica-Bold",e["Calibri-BoldItalic"]="Helvetica-BoldOblique",e["Calibri-Italic"]="Helvetica-Oblique",e.CenturyGothic="Helvetica",e["CenturyGothic-Bold"]="Helvetica-Bold",e["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique",e["CenturyGothic-Italic"]="Helvetica-Oblique",e.ComicSansMS="Comic Sans MS",e["ComicSansMS-Bold"]="Comic Sans MS-Bold",e["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic",e["ComicSansMS-Italic"]="Comic Sans MS-Italic",e.LucidaConsole="Courier",e["LucidaConsole-Bold"]="Courier-Bold",e["LucidaConsole-BoldItalic"]="Courier-BoldOblique",e["LucidaConsole-Italic"]="Courier-Oblique",e["LucidaSans-Demi"]="Helvetica-Bold",e["MS-Gothic"]="MS Gothic",e["MS-Gothic-Bold"]="MS Gothic-Bold",e["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic",e["MS-Gothic-Italic"]="MS Gothic-Italic",e["MS-Mincho"]="MS Mincho",e["MS-Mincho-Bold"]="MS Mincho-Bold",e["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic",e["MS-Mincho-Italic"]="MS Mincho-Italic",e["MS-PGothic"]="MS PGothic",e["MS-PGothic-Bold"]="MS PGothic-Bold",e["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic",e["MS-PGothic-Italic"]="MS PGothic-Italic",e["MS-PMincho"]="MS PMincho",e["MS-PMincho-Bold"]="MS PMincho-Bold",e["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic",e["MS-PMincho-Italic"]="MS PMincho-Italic",e.NuptialScript="Times-Italic",e.SegoeUISymbol="Helvetica",e.Wingdings="ZapfDingbats",e["Wingdings-Regular"]="ZapfDingbats"}));t.getNonStdFontMap=i;const o=(0,r.getLookupTableFactory)((function(e){e["Adobe Jenson"]=!0,e["Adobe Text"]=!0,e.Albertus=!0,e.Aldus=!0,e.Alexandria=!0,e.Algerian=!0,e["American Typewriter"]=!0,e.Antiqua=!0,e.Apex=!0,e.Arno=!0,e.Aster=!0,e.Aurora=!0,e.Baskerville=!0,e.Bell=!0,e.Bembo=!0,e["Bembo Schoolbook"]=!0,e.Benguiat=!0,e["Berkeley Old Style"]=!0,e["Bernhard Modern"]=!0,e["Berthold City"]=!0,e.Bodoni=!0,e["Bauer Bodoni"]=!0,e["Book Antiqua"]=!0,e.Bookman=!0,e["Bordeaux Roman"]=!0,e["Californian FB"]=!0,e.Calisto=!0,e.Calvert=!0,e.Capitals=!0,e.Cambria=!0,e.Cartier=!0,e.Caslon=!0,e.Catull=!0,e.Centaur=!0,e["Century Old Style"]=!0,e["Century Schoolbook"]=!0,e.Chaparral=!0,e["Charis SIL"]=!0,e.Cheltenham=!0,e["Cholla Slab"]=!0,e.Clarendon=!0,e.Clearface=!0,e.Cochin=!0,e.Colonna=!0,e["Computer Modern"]=!0,e["Concrete Roman"]=!0,e.Constantia=!0,e["Cooper Black"]=!0,e.Corona=!0,e.Ecotype=!0,e.Egyptienne=!0,e.Elephant=!0,e.Excelsior=!0,e.Fairfield=!0,e["FF Scala"]=!0,e.Folkard=!0,e.Footlight=!0,e.FreeSerif=!0,e["Friz Quadrata"]=!0,e.Garamond=!0,e.Gentium=!0,e.Georgia=!0,e.Gloucester=!0,e["Goudy Old Style"]=!0,e["Goudy Schoolbook"]=!0,e["Goudy Pro Font"]=!0,e.Granjon=!0,e["Guardian Egyptian"]=!0,e.Heather=!0,e.Hercules=!0,e["High Tower Text"]=!0,e.Hiroshige=!0,e["Hoefler Text"]=!0,e["Humana Serif"]=!0,e.Imprint=!0,e["Ionic No. 5"]=!0,e.Janson=!0,e.Joanna=!0,e.Korinna=!0,e.Lexicon=!0,e["Liberation Serif"]=!0,e["Linux Libertine"]=!0,e.Literaturnaya=!0,e.Lucida=!0,e["Lucida Bright"]=!0,e.Melior=!0,e.Memphis=!0,e.Miller=!0,e.Minion=!0,e.Modern=!0,e["Mona Lisa"]=!0,e["Mrs Eaves"]=!0,e["MS Serif"]=!0,e["Museo Slab"]=!0,e["New York"]=!0,e["Nimbus Roman"]=!0,e["NPS Rawlinson Roadway"]=!0,e.NuptialScript=!0,e.Palatino=!0,e.Perpetua=!0,e.Plantin=!0,e["Plantin Schoolbook"]=!0,e.Playbill=!0,e["Poor Richard"]=!0,e["Rawlinson Roadway"]=!0,e.Renault=!0,e.Requiem=!0,e.Rockwell=!0,e.Roman=!0,e["Rotis Serif"]=!0,e.Sabon=!0,e.Scala=!0,e.Seagull=!0,e.Sistina=!0,e.Souvenir=!0,e.STIX=!0,e["Stone Informal"]=!0,e["Stone Serif"]=!0,e.Sylfaen=!0,e.Times=!0,e.Trajan=!0,e["Trinité"]=!0,e["Trump Mediaeval"]=!0,e.Utopia=!0,e["Vale Type"]=!0,e["Bitstream Vera"]=!0,e["Vera Serif"]=!0,e.Versailles=!0,e.Wanted=!0,e.Weiss=!0,e["Wide Latin"]=!0,e.Windsor=!0,e.XITS=!0}));t.getSerifFonts=o;const s=(0,r.getLookupTableFactory)((function(e){e.Dingbats=!0,e.Symbol=!0,e.ZapfDingbats=!0}));t.getSymbolsFonts=s;const c=(0,r.getLookupTableFactory)((function(e){e[2]=10,e[3]=32,e[4]=33,e[5]=34,e[6]=35,e[7]=36,e[8]=37,e[9]=38,e[10]=39,e[11]=40,e[12]=41,e[13]=42,e[14]=43,e[15]=44,e[16]=45,e[17]=46,e[18]=47,e[19]=48,e[20]=49,e[21]=50,e[22]=51,e[23]=52,e[24]=53,e[25]=54,e[26]=55,e[27]=56,e[28]=57,e[29]=58,e[30]=894,e[31]=60,e[32]=61,e[33]=62,e[34]=63,e[35]=64,e[36]=65,e[37]=66,e[38]=67,e[39]=68,e[40]=69,e[41]=70,e[42]=71,e[43]=72,e[44]=73,e[45]=74,e[46]=75,e[47]=76,e[48]=77,e[49]=78,e[50]=79,e[51]=80,e[52]=81,e[53]=82,e[54]=83,e[55]=84,e[56]=85,e[57]=86,e[58]=87,e[59]=88,e[60]=89,e[61]=90,e[62]=91,e[63]=92,e[64]=93,e[65]=94,e[66]=95,e[67]=96,e[68]=97,e[69]=98,e[70]=99,e[71]=100,e[72]=101,e[73]=102,e[74]=103,e[75]=104,e[76]=105,e[77]=106,e[78]=107,e[79]=108,e[80]=109,e[81]=110,e[82]=111,e[83]=112,e[84]=113,e[85]=114,e[86]=115,e[87]=116,e[88]=117,e[89]=118,e[90]=119,e[91]=120,e[92]=121,e[93]=122,e[94]=123,e[95]=124,e[96]=125,e[97]=126,e[98]=196,e[99]=197,e[100]=199,e[101]=201,e[102]=209,e[103]=214,e[104]=220,e[105]=225,e[106]=224,e[107]=226,e[108]=228,e[109]=227,e[110]=229,e[111]=231,e[112]=233,e[113]=232,e[114]=234,e[115]=235,e[116]=237,e[117]=236,e[118]=238,e[119]=239,e[120]=241,e[121]=243,e[122]=242,e[123]=244,e[124]=246,e[125]=245,e[126]=250,e[127]=249,e[128]=251,e[129]=252,e[130]=8224,e[131]=176,e[132]=162,e[133]=163,e[134]=167,e[135]=8226,e[136]=182,e[137]=223,e[138]=174,e[139]=169,e[140]=8482,e[141]=180,e[142]=168,e[143]=8800,e[144]=198,e[145]=216,e[146]=8734,e[147]=177,e[148]=8804,e[149]=8805,e[150]=165,e[151]=181,e[152]=8706,e[153]=8721,e[154]=8719,e[156]=8747,e[157]=170,e[158]=186,e[159]=8486,e[160]=230,e[161]=248,e[162]=191,e[163]=161,e[164]=172,e[165]=8730,e[166]=402,e[167]=8776,e[168]=8710,e[169]=171,e[170]=187,e[171]=8230,e[210]=218,e[223]=711,e[224]=321,e[225]=322,e[227]=353,e[229]=382,e[234]=253,e[252]=263,e[253]=268,e[254]=269,e[258]=258,e[260]=260,e[261]=261,e[265]=280,e[266]=281,e[268]=283,e[269]=313,e[275]=323,e[276]=324,e[278]=328,e[284]=345,e[285]=346,e[286]=347,e[292]=367,e[295]=377,e[296]=378,e[298]=380,e[305]=963,e[306]=964,e[307]=966,e[308]=8215,e[309]=8252,e[310]=8319,e[311]=8359,e[312]=8592,e[313]=8593,e[337]=9552,e[493]=1039,e[494]=1040,e[705]=1524,e[706]=8362,e[710]=64288,e[711]=64298,e[759]=1617,e[761]=1776,e[763]=1778,e[775]=1652,e[777]=1764,e[778]=1780,e[779]=1781,e[780]=1782,e[782]=771,e[783]=64726,e[786]=8363,e[788]=8532,e[790]=768,e[791]=769,e[792]=768,e[795]=803,e[797]=64336,e[798]=64337,e[799]=64342,e[800]=64343,e[801]=64344,e[802]=64345,e[803]=64362,e[804]=64363,e[805]=64364,e[2424]=7821,e[2425]=7822,e[2426]=7823,e[2427]=7824,e[2428]=7825,e[2429]=7826,e[2430]=7827,e[2433]=7682,e[2678]=8045,e[2679]=8046,e[2830]=1552,e[2838]=686,e[2840]=751,e[2842]=753,e[2843]=754,e[2844]=755,e[2846]=757,e[2856]=767,e[2857]=848,e[2858]=849,e[2862]=853,e[2863]=854,e[2864]=855,e[2865]=861,e[2866]=862,e[2906]=7460,e[2908]=7462,e[2909]=7463,e[2910]=7464,e[2912]=7466,e[2913]=7467,e[2914]=7468,e[2916]=7470,e[2917]=7471,e[2918]=7472,e[2920]=7474,e[2921]=7475,e[2922]=7476,e[2924]=7478,e[2925]=7479,e[2926]=7480,e[2928]=7482,e[2929]=7483,e[2930]=7484,e[2932]=7486,e[2933]=7487,e[2934]=7488,e[2936]=7490,e[2937]=7491,e[2938]=7492,e[2940]=7494,e[2941]=7495,e[2942]=7496,e[2944]=7498,e[2946]=7500,e[2948]=7502,e[2950]=7504,e[2951]=7505,e[2952]=7506,e[2954]=7508,e[2955]=7509,e[2956]=7510,e[2958]=7512,e[2959]=7513,e[2960]=7514,e[2962]=7516,e[2963]=7517,e[2964]=7518,e[2966]=7520,e[2967]=7521,e[2968]=7522,e[2970]=7524,e[2971]=7525,e[2972]=7526,e[2974]=7528,e[2975]=7529,e[2976]=7530,e[2978]=1537,e[2979]=1538,e[2980]=1539,e[2982]=1549,e[2983]=1551,e[2984]=1552,e[2986]=1554,e[2987]=1555,e[2988]=1556,e[2990]=1623,e[2991]=1624,e[2995]=1775,e[2999]=1791,e[3002]=64290,e[3003]=64291,e[3004]=64292,e[3006]=64294,e[3007]=64295,e[3008]=64296,e[3011]=1900,e[3014]=8223,e[3015]=8244,e[3017]=7532,e[3018]=7533,e[3019]=7534,e[3075]=7590,e[3076]=7591,e[3079]=7594,e[3080]=7595,e[3083]=7598,e[3084]=7599,e[3087]=7602,e[3088]=7603,e[3091]=7606,e[3092]=7607,e[3095]=7610,e[3096]=7611,e[3099]=7614,e[3100]=7615,e[3103]=7618,e[3104]=7619,e[3107]=8337,e[3108]=8338,e[3116]=1884,e[3119]=1885,e[3120]=1885,e[3123]=1886,e[3124]=1886,e[3127]=1887,e[3128]=1887,e[3131]=1888,e[3132]=1888,e[3135]=1889,e[3136]=1889,e[3139]=1890,e[3140]=1890,e[3143]=1891,e[3144]=1891,e[3147]=1892,e[3148]=1892,e[3153]=580,e[3154]=581,e[3157]=584,e[3158]=585,e[3161]=588,e[3162]=589,e[3165]=891,e[3166]=892,e[3169]=1274,e[3170]=1275,e[3173]=1278,e[3174]=1279,e[3181]=7622,e[3182]=7623,e[3282]=11799,e[3316]=578,e[3379]=42785,e[3393]=1159,e[3416]=8377}));t.getGlyphMapForStandardFonts=c;const l=(0,r.getLookupTableFactory)((function(e){e[227]=322,e[264]=261,e[291]=346}));t.getSupplementalGlyphMapForArialBlack=l;const u=(0,r.getLookupTableFactory)((function(e){e[1]=32,e[4]=65,e[17]=66,e[18]=67,e[24]=68,e[28]=69,e[38]=70,e[39]=71,e[44]=72,e[47]=73,e[58]=74,e[60]=75,e[62]=76,e[68]=77,e[69]=78,e[75]=79,e[87]=80,e[89]=81,e[90]=82,e[94]=83,e[100]=84,e[104]=85,e[115]=86,e[116]=87,e[121]=88,e[122]=89,e[127]=90,e[258]=97,e[268]=261,e[271]=98,e[272]=99,e[273]=263,e[282]=100,e[286]=101,e[295]=281,e[296]=102,e[336]=103,e[346]=104,e[349]=105,e[361]=106,e[364]=107,e[367]=108,e[371]=322,e[373]=109,e[374]=110,e[381]=111,e[383]=243,e[393]=112,e[395]=113,e[396]=114,e[400]=115,e[401]=347,e[410]=116,e[437]=117,e[448]=118,e[449]=119,e[454]=120,e[455]=121,e[460]=122,e[463]=380,e[853]=44,e[855]=58,e[856]=46,e[876]=47,e[878]=45,e[882]=45,e[894]=40,e[895]=41,e[896]=91,e[897]=93,e[923]=64,e[1004]=48,e[1005]=49,e[1006]=50,e[1007]=51,e[1008]=52,e[1009]=53,e[1010]=54,e[1011]=55,e[1012]=56,e[1013]=57,e[1081]=37,e[1085]=43,e[1086]=45}));t.getSupplementalGlyphMapForCalibri=u},(e,t,n)=>{n.r(t),n.d(t,{getNormalizedUnicodes:()=>l,getUnicodeForGlyph:()=>o,getUnicodeRangeFor:()=>c,mapSpecialUnicodeValues:()=>i,reverseIfRtl:()=>u});var r=n(8),a=(0,r.getLookupTableFactory)((function(e){e[63721]=169,e[63193]=169,e[63720]=174,e[63194]=174,e[63722]=8482,e[63195]=8482,e[63729]=9127,e[63730]=9128,e[63731]=9129,e[63740]=9131,e[63741]=9132,e[63742]=9133,e[63726]=9121,e[63727]=9122,e[63728]=9123,e[63737]=9124,e[63738]=9125,e[63739]=9126,e[63723]=9115,e[63724]=9116,e[63725]=9117,e[63734]=9118,e[63735]=9119,e[63736]=9120}));function i(e){return e>=65520&&e<=65535?0:e>=62976&&e<=63743?a()[e]||e:173===e?45:e}function o(e,t){var n=t[e];if(void 0!==n)return n;if(!e)return-1;if("u"===e[0]){var r,a=e.length;if(7===a&&"n"===e[1]&&"i"===e[2])r=e.substring(3);else{if(!(a>=5&&a<=7))return-1;r=e.substring(1)}if(r===r.toUpperCase()&&(n=parseInt(r,16))>=0)return n}return-1}var s=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function c(e){for(var t=0,n=s.length;t<n;t++){var r=s[t];if(e>=r.begin&&e<r.end)return t}return-1}var l=(0,r.getArrayLookupTableFactory)((function(){return["¨"," ̈","¯"," ̄","´"," ́","µ","μ","¸"," ̧","Ĳ","IJ","ĳ","ij","Ŀ","L·","ŀ","l·","ŉ","ʼn","ſ","s","Ǆ","DŽ","ǅ","Dž","ǆ","dž","Ǉ","LJ","ǈ","Lj","ǉ","lj","Ǌ","NJ","ǋ","Nj","ǌ","nj","Ǳ","DZ","ǲ","Dz","ǳ","dz","˘"," ̆","˙"," ̇","˚"," ̊","˛"," ̨","˜"," ̃","˝"," ̋","ͺ"," ͅ","΄"," ́","ϐ","β","ϑ","θ","ϒ","Υ","ϕ","φ","ϖ","π","ϰ","κ","ϱ","ρ","ϲ","ς","ϴ","Θ","ϵ","ε","Ϲ","Σ","և","եւ","ٵ","اٴ","ٶ","وٴ","ٷ","ۇٴ","ٸ","يٴ","ำ","ํา","ຳ","ໍາ","ໜ","ຫນ","ໝ","ຫມ","ཷ","ྲཱྀ","ཹ","ླཱྀ","ẚ","aʾ","᾽"," ̓","᾿"," ̓","῀"," ͂","῾"," ̔"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","‗"," ̳","․",".","‥","..","…","...","″","′′","‴","′′′","‶","‵‵","‷","‵‵‵","‼","!!","‾"," ̅","⁇","??","⁈","?!","⁉","!?","⁗","′′′′"," "," ","₨","Rs","℀","a/c","℁","a/s","℃","°C","℅","c/o","℆","c/u","ℇ","Ɛ","℉","°F","№","No","℡","TEL","ℵ","א","ℶ","ב","ℷ","ג","ℸ","ד","℻","FAX","Ⅰ","I","Ⅱ","II","Ⅲ","III","Ⅳ","IV","Ⅴ","V","Ⅵ","VI","Ⅶ","VII","Ⅷ","VIII","Ⅸ","IX","Ⅹ","X","Ⅺ","XI","Ⅻ","XII","Ⅼ","L","Ⅽ","C","Ⅾ","D","Ⅿ","M","ⅰ","i","ⅱ","ii","ⅲ","iii","ⅳ","iv","ⅴ","v","ⅵ","vi","ⅶ","vii","ⅷ","viii","ⅸ","ix","ⅹ","x","ⅺ","xi","ⅻ","xii","ⅼ","l","ⅽ","c","ⅾ","d","ⅿ","m","∬","∫∫","∭","∫∫∫","∯","∮∮","∰","∮∮∮","⑴","(1)","⑵","(2)","⑶","(3)","⑷","(4)","⑸","(5)","⑹","(6)","⑺","(7)","⑻","(8)","⑼","(9)","⑽","(10)","⑾","(11)","⑿","(12)","⒀","(13)","⒁","(14)","⒂","(15)","⒃","(16)","⒄","(17)","⒅","(18)","⒆","(19)","⒇","(20)","⒈","1.","⒉","2.","⒊","3.","⒋","4.","⒌","5.","⒍","6.","⒎","7.","⒏","8.","⒐","9.","⒑","10.","⒒","11.","⒓","12.","⒔","13.","⒕","14.","⒖","15.","⒗","16.","⒘","17.","⒙","18.","⒚","19.","⒛","20.","⒜","(a)","⒝","(b)","⒞","(c)","⒟","(d)","⒠","(e)","⒡","(f)","⒢","(g)","⒣","(h)","⒤","(i)","⒥","(j)","⒦","(k)","⒧","(l)","⒨","(m)","⒩","(n)","⒪","(o)","⒫","(p)","⒬","(q)","⒭","(r)","⒮","(s)","⒯","(t)","⒰","(u)","⒱","(v)","⒲","(w)","⒳","(x)","⒴","(y)","⒵","(z)","⨌","∫∫∫∫","⩴","::=","⩵","==","⩶","===","⺟","母","⻳","龟","⼀","一","⼁","丨","⼂","丶","⼃","丿","⼄","乙","⼅","亅","⼆","二","⼇","亠","⼈","人","⼉","儿","⼊","入","⼋","八","⼌","冂","⼍","冖","⼎","冫","⼏","几","⼐","凵","⼑","刀","⼒","力","⼓","勹","⼔","匕","⼕","匚","⼖","匸","⼗","十","⼘","卜","⼙","卩","⼚","厂","⼛","厶","⼜","又","⼝","口","⼞","囗","⼟","土","⼠","士","⼡","夂","⼢","夊","⼣","夕","⼤","大","⼥","女","⼦","子","⼧","宀","⼨","寸","⼩","小","⼪","尢","⼫","尸","⼬","屮","⼭","山","⼮","巛","⼯","工","⼰","己","⼱","巾","⼲","干","⼳","幺","⼴","广","⼵","廴","⼶","廾","⼷","弋","⼸","弓","⼹","彐","⼺","彡","⼻","彳","⼼","心","⼽","戈","⼾","戶","⼿","手","⽀","支","⽁","攴","⽂","文","⽃","斗","⽄","斤","⽅","方","⽆","无","⽇","日","⽈","曰","⽉","月","⽊","木","⽋","欠","⽌","止","⽍","歹","⽎","殳","⽏","毋","⽐","比","⽑","毛","⽒","氏","⽓","气","⽔","水","⽕","火","⽖","爪","⽗","父","⽘","爻","⽙","爿","⽚","片","⽛","牙","⽜","牛","⽝","犬","⽞","玄","⽟","玉","⽠","瓜","⽡","瓦","⽢","甘","⽣","生","⽤","用","⽥","田","⽦","疋","⽧","疒","⽨","癶","⽩","白","⽪","皮","⽫","皿","⽬","目","⽭","矛","⽮","矢","⽯","石","⽰","示","⽱","禸","⽲","禾","⽳","穴","⽴","立","⽵","竹","⽶","米","⽷","糸","⽸","缶","⽹","网","⽺","羊","⽻","羽","⽼","老","⽽","而","⽾","耒","⽿","耳","⾀","聿","⾁","肉","⾂","臣","⾃","自","⾄","至","⾅","臼","⾆","舌","⾇","舛","⾈","舟","⾉","艮","⾊","色","⾋","艸","⾌","虍","⾍","虫","⾎","血","⾏","行","⾐","衣","⾑","襾","⾒","見","⾓","角","⾔","言","⾕","谷","⾖","豆","⾗","豕","⾘","豸","⾙","貝","⾚","赤","⾛","走","⾜","足","⾝","身","⾞","車","⾟","辛","⾠","辰","⾡","辵","⾢","邑","⾣","酉","⾤","釆","⾥","里","⾦","金","⾧","長","⾨","門","⾩","阜","⾪","隶","⾫","隹","⾬","雨","⾭","靑","⾮","非","⾯","面","⾰","革","⾱","韋","⾲","韭","⾳","音","⾴","頁","⾵","風","⾶","飛","⾷","食","⾸","首","⾹","香","⾺","馬","⾻","骨","⾼","高","⾽","髟","⾾","鬥","⾿","鬯","⿀","鬲","⿁","鬼","⿂","魚","⿃","鳥","⿄","鹵","⿅","鹿","⿆","麥","⿇","麻","⿈","黃","⿉","黍","⿊","黑","⿋","黹","⿌","黽","⿍","鼎","⿎","鼓","⿏","鼠","⿐","鼻","⿑","齊","⿒","齒","⿓","龍","⿔","龜","⿕","龠","〶","〒","〸","十","〹","卄","〺","卅","゛"," ゙","゜"," ゚","ㄱ","ᄀ","ㄲ","ᄁ","ㄳ","ᆪ","ㄴ","ᄂ","ㄵ","ᆬ","ㄶ","ᆭ","ㄷ","ᄃ","ㄸ","ᄄ","ㄹ","ᄅ","ㄺ","ᆰ","ㄻ","ᆱ","ㄼ","ᆲ","ㄽ","ᆳ","ㄾ","ᆴ","ㄿ","ᆵ","ㅀ","ᄚ","ㅁ","ᄆ","ㅂ","ᄇ","ㅃ","ᄈ","ㅄ","ᄡ","ㅅ","ᄉ","ㅆ","ᄊ","ㅇ","ᄋ","ㅈ","ᄌ","ㅉ","ᄍ","ㅊ","ᄎ","ㅋ","ᄏ","ㅌ","ᄐ","ㅍ","ᄑ","ㅎ","ᄒ","ㅏ","ᅡ","ㅐ","ᅢ","ㅑ","ᅣ","ㅒ","ᅤ","ㅓ","ᅥ","ㅔ","ᅦ","ㅕ","ᅧ","ㅖ","ᅨ","ㅗ","ᅩ","ㅘ","ᅪ","ㅙ","ᅫ","ㅚ","ᅬ","ㅛ","ᅭ","ㅜ","ᅮ","ㅝ","ᅯ","ㅞ","ᅰ","ㅟ","ᅱ","ㅠ","ᅲ","ㅡ","ᅳ","ㅢ","ᅴ","ㅣ","ᅵ","ㅤ","ᅠ","ㅥ","ᄔ","ㅦ","ᄕ","ㅧ","ᇇ","ㅨ","ᇈ","ㅩ","ᇌ","ㅪ","ᇎ","ㅫ","ᇓ","ㅬ","ᇗ","ㅭ","ᇙ","ㅮ","ᄜ","ㅯ","ᇝ","ㅰ","ᇟ","ㅱ","ᄝ","ㅲ","ᄞ","ㅳ","ᄠ","ㅴ","ᄢ","ㅵ","ᄣ","ㅶ","ᄧ","ㅷ","ᄩ","ㅸ","ᄫ","ㅹ","ᄬ","ㅺ","ᄭ","ㅻ","ᄮ","ㅼ","ᄯ","ㅽ","ᄲ","ㅾ","ᄶ","ㅿ","ᅀ","ㆀ","ᅇ","ㆁ","ᅌ","ㆂ","ᇱ","ㆃ","ᇲ","ㆄ","ᅗ","ㆅ","ᅘ","ㆆ","ᅙ","ㆇ","ᆄ","ㆈ","ᆅ","ㆉ","ᆈ","ㆊ","ᆑ","ㆋ","ᆒ","ㆌ","ᆔ","ㆍ","ᆞ","ㆎ","ᆡ","㈀","(ᄀ)","㈁","(ᄂ)","㈂","(ᄃ)","㈃","(ᄅ)","㈄","(ᄆ)","㈅","(ᄇ)","㈆","(ᄉ)","㈇","(ᄋ)","㈈","(ᄌ)","㈉","(ᄎ)","㈊","(ᄏ)","㈋","(ᄐ)","㈌","(ᄑ)","㈍","(ᄒ)","㈎","(가)","㈏","(나)","㈐","(다)","㈑","(라)","㈒","(마)","㈓","(바)","㈔","(사)","㈕","(아)","㈖","(자)","㈗","(차)","㈘","(카)","㈙","(타)","㈚","(파)","㈛","(하)","㈜","(주)","㈝","(오전)","㈞","(오후)","㈠","(一)","㈡","(二)","㈢","(三)","㈣","(四)","㈤","(五)","㈥","(六)","㈦","(七)","㈧","(八)","㈨","(九)","㈩","(十)","㈪","(月)","㈫","(火)","㈬","(水)","㈭","(木)","㈮","(金)","㈯","(土)","㈰","(日)","㈱","(株)","㈲","(有)","㈳","(社)","㈴","(名)","㈵","(特)","㈶","(財)","㈷","(祝)","㈸","(労)","㈹","(代)","㈺","(呼)","㈻","(学)","㈼","(監)","㈽","(企)","㈾","(資)","㈿","(協)","㉀","(祭)","㉁","(休)","㉂","(自)","㉃","(至)","㋀","1月","㋁","2月","㋂","3月","㋃","4月","㋄","5月","㋅","6月","㋆","7月","㋇","8月","㋈","9月","㋉","10月","㋊","11月","㋋","12月","㍘","0点","㍙","1点","㍚","2点","㍛","3点","㍜","4点","㍝","5点","㍞","6点","㍟","7点","㍠","8点","㍡","9点","㍢","10点","㍣","11点","㍤","12点","㍥","13点","㍦","14点","㍧","15点","㍨","16点","㍩","17点","㍪","18点","㍫","19点","㍬","20点","㍭","21点","㍮","22点","㍯","23点","㍰","24点","㏠","1日","㏡","2日","㏢","3日","㏣","4日","㏤","5日","㏥","6日","㏦","7日","㏧","8日","㏨","9日","㏩","10日","㏪","11日","㏫","12日","㏬","13日","㏭","14日","㏮","15日","㏯","16日","㏰","17日","㏱","18日","㏲","19日","㏳","20日","㏴","21日","㏵","22日","㏶","23日","㏷","24日","㏸","25日","㏹","26日","㏺","27日","㏻","28日","㏼","29日","㏽","30日","㏾","31日","ﬀ","ff","ﬁ","fi","ﬂ","fl","ﬃ","ffi","ﬄ","ffl","ﬅ","ſt","ﬆ","st","ﬓ","մն","ﬔ","մե","ﬕ","մի","ﬖ","վն","ﬗ","մխ","ﭏ","אל","ﭐ","ٱ","ﭑ","ٱ","ﭒ","ٻ","ﭓ","ٻ","ﭔ","ٻ","ﭕ","ٻ","ﭖ","پ","ﭗ","پ","ﭘ","پ","ﭙ","پ","ﭚ","ڀ","ﭛ","ڀ","ﭜ","ڀ","ﭝ","ڀ","ﭞ","ٺ","ﭟ","ٺ","ﭠ","ٺ","ﭡ","ٺ","ﭢ","ٿ","ﭣ","ٿ","ﭤ","ٿ","ﭥ","ٿ","ﭦ","ٹ","ﭧ","ٹ","ﭨ","ٹ","ﭩ","ٹ","ﭪ","ڤ","ﭫ","ڤ","ﭬ","ڤ","ﭭ","ڤ","ﭮ","ڦ","ﭯ","ڦ","ﭰ","ڦ","ﭱ","ڦ","ﭲ","ڄ","ﭳ","ڄ","ﭴ","ڄ","ﭵ","ڄ","ﭶ","ڃ","ﭷ","ڃ","ﭸ","ڃ","ﭹ","ڃ","ﭺ","چ","ﭻ","چ","ﭼ","چ","ﭽ","چ","ﭾ","ڇ","ﭿ","ڇ","ﮀ","ڇ","ﮁ","ڇ","ﮂ","ڍ","ﮃ","ڍ","ﮄ","ڌ","ﮅ","ڌ","ﮆ","ڎ","ﮇ","ڎ","ﮈ","ڈ","ﮉ","ڈ","ﮊ","ژ","ﮋ","ژ","ﮌ","ڑ","ﮍ","ڑ","ﮎ","ک","ﮏ","ک","ﮐ","ک","ﮑ","ک","ﮒ","گ","ﮓ","گ","ﮔ","گ","ﮕ","گ","ﮖ","ڳ","ﮗ","ڳ","ﮘ","ڳ","ﮙ","ڳ","ﮚ","ڱ","ﮛ","ڱ","ﮜ","ڱ","ﮝ","ڱ","ﮞ","ں","ﮟ","ں","ﮠ","ڻ","ﮡ","ڻ","ﮢ","ڻ","ﮣ","ڻ","ﮤ","ۀ","ﮥ","ۀ","ﮦ","ہ","ﮧ","ہ","ﮨ","ہ","ﮩ","ہ","ﮪ","ھ","ﮫ","ھ","ﮬ","ھ","ﮭ","ھ","ﮮ","ے","ﮯ","ے","ﮰ","ۓ","ﮱ","ۓ","ﯓ","ڭ","ﯔ","ڭ","ﯕ","ڭ","ﯖ","ڭ","ﯗ","ۇ","ﯘ","ۇ","ﯙ","ۆ","ﯚ","ۆ","ﯛ","ۈ","ﯜ","ۈ","ﯝ","ٷ","ﯞ","ۋ","ﯟ","ۋ","ﯠ","ۅ","ﯡ","ۅ","ﯢ","ۉ","ﯣ","ۉ","ﯤ","ې","ﯥ","ې","ﯦ","ې","ﯧ","ې","ﯨ","ى","ﯩ","ى","ﯪ","ئا","ﯫ","ئا","ﯬ","ئە","ﯭ","ئە","ﯮ","ئو","ﯯ","ئو","ﯰ","ئۇ","ﯱ","ئۇ","ﯲ","ئۆ","ﯳ","ئۆ","ﯴ","ئۈ","ﯵ","ئۈ","ﯶ","ئې","ﯷ","ئې","ﯸ","ئې","ﯹ","ئى","ﯺ","ئى","ﯻ","ئى","ﯼ","ی","ﯽ","ی","ﯾ","ی","ﯿ","ی","ﰀ","ئج","ﰁ","ئح","ﰂ","ئم","ﰃ","ئى","ﰄ","ئي","ﰅ","بج","ﰆ","بح","ﰇ","بخ","ﰈ","بم","ﰉ","بى","ﰊ","بي","ﰋ","تج","ﰌ","تح","ﰍ","تخ","ﰎ","تم","ﰏ","تى","ﰐ","تي","ﰑ","ثج","ﰒ","ثم","ﰓ","ثى","ﰔ","ثي","ﰕ","جح","ﰖ","جم","ﰗ","حج","ﰘ","حم","ﰙ","خج","ﰚ","خح","ﰛ","خم","ﰜ","سج","ﰝ","سح","ﰞ","سخ","ﰟ","سم","ﰠ","صح","ﰡ","صم","ﰢ","ضج","ﰣ","ضح","ﰤ","ضخ","ﰥ","ضم","ﰦ","طح","ﰧ","طم","ﰨ","ظم","ﰩ","عج","ﰪ","عم","ﰫ","غج","ﰬ","غم","ﰭ","فج","ﰮ","فح","ﰯ","فخ","ﰰ","فم","ﰱ","فى","ﰲ","في","ﰳ","قح","ﰴ","قم","ﰵ","قى","ﰶ","قي","ﰷ","كا","ﰸ","كج","ﰹ","كح","ﰺ","كخ","ﰻ","كل","ﰼ","كم","ﰽ","كى","ﰾ","كي","ﰿ","لج","ﱀ","لح","ﱁ","لخ","ﱂ","لم","ﱃ","لى","ﱄ","لي","ﱅ","مج","ﱆ","مح","ﱇ","مخ","ﱈ","مم","ﱉ","مى","ﱊ","مي","ﱋ","نج","ﱌ","نح","ﱍ","نخ","ﱎ","نم","ﱏ","نى","ﱐ","ني","ﱑ","هج","ﱒ","هم","ﱓ","هى","ﱔ","هي","ﱕ","يج","ﱖ","يح","ﱗ","يخ","ﱘ","يم","ﱙ","يى","ﱚ","يي","ﱛ","ذٰ","ﱜ","رٰ","ﱝ","ىٰ","ﱞ"," ٌّ","ﱟ"," ٍّ","ﱠ"," َّ","ﱡ"," ُّ","ﱢ"," ِّ","ﱣ"," ّٰ","ﱤ","ئر","ﱥ","ئز","ﱦ","ئم","ﱧ","ئن","ﱨ","ئى","ﱩ","ئي","ﱪ","بر","ﱫ","بز","ﱬ","بم","ﱭ","بن","ﱮ","بى","ﱯ","بي","ﱰ","تر","ﱱ","تز","ﱲ","تم","ﱳ","تن","ﱴ","تى","ﱵ","تي","ﱶ","ثر","ﱷ","ثز","ﱸ","ثم","ﱹ","ثن","ﱺ","ثى","ﱻ","ثي","ﱼ","فى","ﱽ","في","ﱾ","قى","ﱿ","قي","ﲀ","كا","ﲁ","كل","ﲂ","كم","ﲃ","كى","ﲄ","كي","ﲅ","لم","ﲆ","لى","ﲇ","لي","ﲈ","ما","ﲉ","مم","ﲊ","نر","ﲋ","نز","ﲌ","نم","ﲍ","نن","ﲎ","نى","ﲏ","ني","ﲐ","ىٰ","ﲑ","ير","ﲒ","يز","ﲓ","يم","ﲔ","ين","ﲕ","يى","ﲖ","يي","ﲗ","ئج","ﲘ","ئح","ﲙ","ئخ","ﲚ","ئم","ﲛ","ئه","ﲜ","بج","ﲝ","بح","ﲞ","بخ","ﲟ","بم","ﲠ","به","ﲡ","تج","ﲢ","تح","ﲣ","تخ","ﲤ","تم","ﲥ","ته","ﲦ","ثم","ﲧ","جح","ﲨ","جم","ﲩ","حج","ﲪ","حم","ﲫ","خج","ﲬ","خم","ﲭ","سج","ﲮ","سح","ﲯ","سخ","ﲰ","سم","ﲱ","صح","ﲲ","صخ","ﲳ","صم","ﲴ","ضج","ﲵ","ضح","ﲶ","ضخ","ﲷ","ضم","ﲸ","طح","ﲹ","ظم","ﲺ","عج","ﲻ","عم","ﲼ","غج","ﲽ","غم","ﲾ","فج","ﲿ","فح","ﳀ","فخ","ﳁ","فم","ﳂ","قح","ﳃ","قم","ﳄ","كج","ﳅ","كح","ﳆ","كخ","ﳇ","كل","ﳈ","كم","ﳉ","لج","ﳊ","لح","ﳋ","لخ","ﳌ","لم","ﳍ","له","ﳎ","مج","ﳏ","مح","ﳐ","مخ","ﳑ","مم","ﳒ","نج","ﳓ","نح","ﳔ","نخ","ﳕ","نم","ﳖ","نه","ﳗ","هج","ﳘ","هم","ﳙ","هٰ","ﳚ","يج","ﳛ","يح","ﳜ","يخ","ﳝ","يم","ﳞ","يه","ﳟ","ئم","ﳠ","ئه","ﳡ","بم","ﳢ","به","ﳣ","تم","ﳤ","ته","ﳥ","ثم","ﳦ","ثه","ﳧ","سم","ﳨ","سه","ﳩ","شم","ﳪ","شه","ﳫ","كل","ﳬ","كم","ﳭ","لم","ﳮ","نم","ﳯ","نه","ﳰ","يم","ﳱ","يه","ﳲ","ـَّ","ﳳ","ـُّ","ﳴ","ـِّ","ﳵ","طى","ﳶ","طي","ﳷ","عى","ﳸ","عي","ﳹ","غى","ﳺ","غي","ﳻ","سى","ﳼ","سي","ﳽ","شى","ﳾ","شي","ﳿ","حى","ﴀ","حي","ﴁ","جى","ﴂ","جي","ﴃ","خى","ﴄ","خي","ﴅ","صى","ﴆ","صي","ﴇ","ضى","ﴈ","ضي","ﴉ","شج","ﴊ","شح","ﴋ","شخ","ﴌ","شم","ﴍ","شر","ﴎ","سر","ﴏ","صر","ﴐ","ضر","ﴑ","طى","ﴒ","طي","ﴓ","عى","ﴔ","عي","ﴕ","غى","ﴖ","غي","ﴗ","سى","ﴘ","سي","ﴙ","شى","ﴚ","شي","ﴛ","حى","ﴜ","حي","ﴝ","جى","ﴞ","جي","ﴟ","خى","ﴠ","خي","ﴡ","صى","ﴢ","صي","ﴣ","ضى","ﴤ","ضي","ﴥ","شج","ﴦ","شح","ﴧ","شخ","ﴨ","شم","ﴩ","شر","ﴪ","سر","ﴫ","صر","ﴬ","ضر","ﴭ","شج","ﴮ","شح","ﴯ","شخ","ﴰ","شم","ﴱ","سه","ﴲ","شه","ﴳ","طم","ﴴ","سج","ﴵ","سح","ﴶ","سخ","ﴷ","شج","ﴸ","شح","ﴹ","شخ","ﴺ","طم","ﴻ","ظم","ﴼ","اً","ﴽ","اً","ﵐ","تجم","ﵑ","تحج","ﵒ","تحج","ﵓ","تحم","ﵔ","تخم","ﵕ","تمج","ﵖ","تمح","ﵗ","تمخ","ﵘ","جمح","ﵙ","جمح","ﵚ","حمي","ﵛ","حمى","ﵜ","سحج","ﵝ","سجح","ﵞ","سجى","ﵟ","سمح","ﵠ","سمح","ﵡ","سمج","ﵢ","سمم","ﵣ","سمم","ﵤ","صحح","ﵥ","صحح","ﵦ","صمم","ﵧ","شحم","ﵨ","شحم","ﵩ","شجي","ﵪ","شمخ","ﵫ","شمخ","ﵬ","شمم","ﵭ","شمم","ﵮ","ضحى","ﵯ","ضخم","ﵰ","ضخم","ﵱ","طمح","ﵲ","طمح","ﵳ","طمم","ﵴ","طمي","ﵵ","عجم","ﵶ","عمم","ﵷ","عمم","ﵸ","عمى","ﵹ","غمم","ﵺ","غمي","ﵻ","غمى","ﵼ","فخم","ﵽ","فخم","ﵾ","قمح","ﵿ","قمم","ﶀ","لحم","ﶁ","لحي","ﶂ","لحى","ﶃ","لجج","ﶄ","لجج","ﶅ","لخم","ﶆ","لخم","ﶇ","لمح","ﶈ","لمح","ﶉ","محج","ﶊ","محم","ﶋ","محي","ﶌ","مجح","ﶍ","مجم","ﶎ","مخج","ﶏ","مخم","ﶒ","مجخ","ﶓ","همج","ﶔ","همم","ﶕ","نحم","ﶖ","نحى","ﶗ","نجم","ﶘ","نجم","ﶙ","نجى","ﶚ","نمي","ﶛ","نمى","ﶜ","يمم","ﶝ","يمم","ﶞ","بخي","ﶟ","تجي","ﶠ","تجى","ﶡ","تخي","ﶢ","تخى","ﶣ","تمي","ﶤ","تمى","ﶥ","جمي","ﶦ","جحى","ﶧ","جمى","ﶨ","سخى","ﶩ","صحي","ﶪ","شحي","ﶫ","ضحي","ﶬ","لجي","ﶭ","لمي","ﶮ","يحي","ﶯ","يجي","ﶰ","يمي","ﶱ","ممي","ﶲ","قمي","ﶳ","نحي","ﶴ","قمح","ﶵ","لحم","ﶶ","عمي","ﶷ","كمي","ﶸ","نجح","ﶹ","مخي","ﶺ","لجم","ﶻ","كمم","ﶼ","لجم","ﶽ","نجح","ﶾ","جحي","ﶿ","حجي","ﷀ","مجي","ﷁ","فمي","ﷂ","بحي","ﷃ","كمم","ﷄ","عجم","ﷅ","صمم","ﷆ","سخي","ﷇ","نجي","﹉","‾","﹊","‾","﹋","‾","﹌","‾","﹍","_","﹎","_","﹏","_","ﺀ","ء","ﺁ","آ","ﺂ","آ","ﺃ","أ","ﺄ","أ","ﺅ","ؤ","ﺆ","ؤ","ﺇ","إ","ﺈ","إ","ﺉ","ئ","ﺊ","ئ","ﺋ","ئ","ﺌ","ئ","ﺍ","ا","ﺎ","ا","ﺏ","ب","ﺐ","ب","ﺑ","ب","ﺒ","ب","ﺓ","ة","ﺔ","ة","ﺕ","ت","ﺖ","ت","ﺗ","ت","ﺘ","ت","ﺙ","ث","ﺚ","ث","ﺛ","ث","ﺜ","ث","ﺝ","ج","ﺞ","ج","ﺟ","ج","ﺠ","ج","ﺡ","ح","ﺢ","ح","ﺣ","ح","ﺤ","ح","ﺥ","خ","ﺦ","خ","ﺧ","خ","ﺨ","خ","ﺩ","د","ﺪ","د","ﺫ","ذ","ﺬ","ذ","ﺭ","ر","ﺮ","ر","ﺯ","ز","ﺰ","ز","ﺱ","س","ﺲ","س","ﺳ","س","ﺴ","س","ﺵ","ش","ﺶ","ش","ﺷ","ش","ﺸ","ش","ﺹ","ص","ﺺ","ص","ﺻ","ص","ﺼ","ص","ﺽ","ض","ﺾ","ض","ﺿ","ض","ﻀ","ض","ﻁ","ط","ﻂ","ط","ﻃ","ط","ﻄ","ط","ﻅ","ظ","ﻆ","ظ","ﻇ","ظ","ﻈ","ظ","ﻉ","ع","ﻊ","ع","ﻋ","ع","ﻌ","ع","ﻍ","غ","ﻎ","غ","ﻏ","غ","ﻐ","غ","ﻑ","ف","ﻒ","ف","ﻓ","ف","ﻔ","ف","ﻕ","ق","ﻖ","ق","ﻗ","ق","ﻘ","ق","ﻙ","ك","ﻚ","ك","ﻛ","ك","ﻜ","ك","ﻝ","ل","ﻞ","ل","ﻟ","ل","ﻠ","ل","ﻡ","م","ﻢ","م","ﻣ","م","ﻤ","م","ﻥ","ن","ﻦ","ن","ﻧ","ن","ﻨ","ن","ﻩ","ه","ﻪ","ه","ﻫ","ه","ﻬ","ه","ﻭ","و","ﻮ","و","ﻯ","ى","ﻰ","ى","ﻱ","ي","ﻲ","ي","ﻳ","ي","ﻴ","ي","ﻵ","لآ","ﻶ","لآ","ﻷ","لأ","ﻸ","لأ","ﻹ","لإ","ﻺ","لإ","ﻻ","لا","ﻼ","لا"]}));function u(e){var t,n,r=e.length;if(r<=1||!((t=e.charCodeAt(0))>=(n=s[13]).begin&&t<n.end||t>=(n=s[11]).begin&&t<n.end))return e;for(var a="",i=r-1;i>=0;i--)a+=e[i];return a}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontRendererFactory=void 0;var r=n(2),a=n(30),i=n(33),o=n(32),s=n(12),c=function(){function e(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function t(e,t){return e[t]<<8|e[t+1]}function n(e){const t=e.length;let n=32768;return t<1240?n=107:t<33900&&(n=1131),n}function c(n,a,i){var o,s,c,l=1===t(n,a+2)?e(n,a+8):e(n,a+16),u=t(n,a+l);if(4===u){t(n,a+l+2);var h=t(n,a+l+6)>>1;for(s=a+l+14,o=[],c=0;c<h;c++,s+=2)o[c]={end:t(n,s)};for(s+=2,c=0;c<h;c++,s+=2)o[c].start=t(n,s);for(c=0;c<h;c++,s+=2)o[c].idDelta=t(n,s);for(c=0;c<h;c++,s+=2){var d=t(n,s);if(0!==d){o[c].ids=[];for(var f=0,p=o[c].end-o[c].start+1;f<p;f++)o[c].ids[f]=t(n,s+d),d+=2}}return o}if(12===u){e(n,a+l+4);var g=e(n,a+l+12);for(s=a+l+16,o=[],c=0;c<g;c++)o.push({start:e(n,s),end:e(n,s+4),idDelta:e(n,s+8)-e(n,s)}),s+=12;return o}throw new r.FormatError(`unsupported cmap: ${u}`)}function l(e,t,n,r){var i=new a.CFFParser(new s.Stream(e,t,n-t),{},r).parse();return{glyphs:i.charStrings.objects,subrs:i.topDict.privateDict&&i.topDict.privateDict.subrsIndex&&i.topDict.privateDict.subrsIndex.objects,gsubrs:i.globalSubrIndex&&i.globalSubrIndex.objects,isCFFCIDFont:i.isCIDFont,fdSelect:i.fdSelect,fdArray:i.fdArray}}function u(e,t){for(var n=t.codePointAt(0),r=0,a=0,i=e.length-1;a<i;){var o=a+i+1>>1;n<e[o].start?i=o-1:a=o}return e[a].start<=n&&n<=e[a].end&&(r=e[a].idDelta+(e[a].ids?e[a].ids[n-e[a].start]:n)&65535),{charCode:n,glyphId:r}}function h(e,t,n){function r(e,n){t.push({cmd:"moveTo",args:[e,n]})}function a(e,n){t.push({cmd:"lineTo",args:[e,n]})}function i(e,n,r,a){t.push({cmd:"quadraticCurveTo",args:[e,n,r,a]})}var o,s=0,c=(e[s]<<24|e[s+1]<<16)>>16,l=0,u=0;if(s+=10,c<0)do{o=e[s]<<8|e[s+1];var d,f,p=e[s+2]<<8|e[s+3];s+=4,1&o?(d=(e[s]<<24|e[s+1]<<16)>>16,f=(e[s+2]<<24|e[s+3]<<16)>>16,s+=4):(d=e[s++],f=e[s++]),2&o?(l=d,u=f):(l=0,u=0);var g=1,m=1,v=0,b=0;8&o?(g=m=(e[s]<<24|e[s+1]<<16)/1073741824,s+=2):64&o?(g=(e[s]<<24|e[s+1]<<16)/1073741824,m=(e[s+2]<<24|e[s+3]<<16)/1073741824,s+=4):128&o&&(g=(e[s]<<24|e[s+1]<<16)/1073741824,v=(e[s+2]<<24|e[s+3]<<16)/1073741824,b=(e[s+4]<<24|e[s+5]<<16)/1073741824,m=(e[s+6]<<24|e[s+7]<<16)/1073741824,s+=8);var y=n.glyphs[p];y&&(t.push({cmd:"save"}),t.push({cmd:"transform",args:[g,v,b,m,l,u]}),h(y,t,n),t.push({cmd:"restore"}))}while(32&o);else{var w,x,C=[];for(w=0;w<c;w++)C.push(e[s]<<8|e[s+1]),s+=2;s+=2+(e[s]<<8|e[s+1]);for(var k=C[C.length-1]+1,S=[];S.length<k;){var A=1;for(8&(o=e[s++])&&(A+=e[s++]);A-- >0;)S.push({flags:o})}for(w=0;w<k;w++){switch(18&S[w].flags){case 0:l+=(e[s]<<24|e[s+1]<<16)>>16,s+=2;break;case 2:l-=e[s++];break;case 18:l+=e[s++]}S[w].x=l}for(w=0;w<k;w++){switch(36&S[w].flags){case 0:u+=(e[s]<<24|e[s+1]<<16)>>16,s+=2;break;case 4:u-=e[s++];break;case 36:u+=e[s++]}S[w].y=u}var _=0;for(s=0;s<c;s++){var E=C[s],I=S.slice(_,E+1);if(1&I[0].flags)I.push(I[0]);else if(1&I[I.length-1].flags)I.unshift(I[I.length-1]);else{var T={flags:1,x:(I[0].x+I[I.length-1].x)/2,y:(I[0].y+I[I.length-1].y)/2};I.unshift(T),I.push(T)}for(r(I[0].x,I[0].y),w=1,x=I.length;w<x;w++)1&I[w].flags?a(I[w].x,I[w].y):1&I[w+1].flags?(i(I[w].x,I[w].y,I[w+1].x,I[w+1].y),w++):i(I[w].x,I[w].y,(I[w].x+I[w+1].x)/2,(I[w].y+I[w+1].y)/2);_=E+1}}}function d(e,t,a,i){function s(e,n){t.push({cmd:"moveTo",args:[e,n]})}function c(e,n){t.push({cmd:"lineTo",args:[e,n]})}function l(e,n,r,a,i,o){t.push({cmd:"bezierCurveTo",args:[e,n,r,a,i,o]})}var h=[],f=0,p=0,g=0;!function e(m){for(var v=0;v<m.length;){var b,y,w,x,C,k,S,A,_=!1,E=m[v++];switch(E){case 1:case 3:g+=h.length>>1,_=!0;break;case 4:p+=h.pop(),s(f,p),_=!0;break;case 5:for(;h.length>0;)f+=h.shift(),p+=h.shift(),c(f,p);break;case 6:for(;h.length>0&&(c(f+=h.shift(),p),0!==h.length);)p+=h.shift(),c(f,p);break;case 7:for(;h.length>0&&(p+=h.shift(),c(f,p),0!==h.length);)c(f+=h.shift(),p);break;case 8:for(;h.length>0;)b=f+h.shift(),w=p+h.shift(),y=b+h.shift(),x=w+h.shift(),f=y+h.shift(),p=x+h.shift(),l(b,w,y,x,f,p);break;case 10:if(S=h.pop(),A=null,a.isCFFCIDFont){const e=a.fdSelect.getFDIndex(i);if(e>=0&&e<a.fdArray.length){const t=a.fdArray[e];let r;t.privateDict&&t.privateDict.subrsIndex&&(r=t.privateDict.subrsIndex.objects),r&&(A=r[S+=n(r)])}else(0,r.warn)("Invalid fd index for glyph index.")}else A=a.subrs[S+a.subrsBias];A&&e(A);break;case 11:return;case 12:switch(E=m[v++]){case 34:y=(b=f+h.shift())+h.shift(),C=p+h.shift(),f=y+h.shift(),l(b,p,y,C,f,C),y=(b=f+h.shift())+h.shift(),f=y+h.shift(),l(b,C,y,p,f,p);break;case 35:b=f+h.shift(),w=p+h.shift(),y=b+h.shift(),x=w+h.shift(),f=y+h.shift(),p=x+h.shift(),l(b,w,y,x,f,p),b=f+h.shift(),w=p+h.shift(),y=b+h.shift(),x=w+h.shift(),f=y+h.shift(),p=x+h.shift(),l(b,w,y,x,f,p),h.pop();break;case 36:l(b=f+h.shift(),C=p+h.shift(),y=b+h.shift(),k=C+h.shift(),f=y+h.shift(),k),l(b=f+h.shift(),k,y=b+h.shift(),k+h.shift(),f=y+h.shift(),p);break;case 37:var I=f,T=p;b=f+h.shift(),w=p+h.shift(),y=b+h.shift(),x=w+h.shift(),f=y+h.shift(),p=x+h.shift(),l(b,w,y,x,f,p),b=f+h.shift(),w=p+h.shift(),y=b+h.shift(),x=w+h.shift(),f=y,p=x,Math.abs(f-I)>Math.abs(p-T)?f+=h.shift():p+=h.shift(),l(b,w,y,x,f,p);break;default:throw new r.FormatError(`unknown operator: 12 ${E}`)}break;case 14:if(h.length>=4){var R=h.pop(),F=h.pop();p=h.pop(),f=h.pop(),t.push({cmd:"save"}),t.push({cmd:"translate",args:[f,p]});var P=u(a.cmap,String.fromCharCode(a.glyphNameMap[o.StandardEncoding[R]]));d(a.glyphs[P.glyphId],t,a,P.glyphId),t.push({cmd:"restore"}),P=u(a.cmap,String.fromCharCode(a.glyphNameMap[o.StandardEncoding[F]])),d(a.glyphs[P.glyphId],t,a,P.glyphId)}return;case 18:g+=h.length>>1,_=!0;break;case 19:case 20:v+=(g+=h.length>>1)+7>>3,_=!0;break;case 21:p+=h.pop(),s(f+=h.pop(),p),_=!0;break;case 22:s(f+=h.pop(),p),_=!0;break;case 23:g+=h.length>>1,_=!0;break;case 24:for(;h.length>2;)b=f+h.shift(),w=p+h.shift(),y=b+h.shift(),x=w+h.shift(),f=y+h.shift(),p=x+h.shift(),l(b,w,y,x,f,p);f+=h.shift(),p+=h.shift(),c(f,p);break;case 25:for(;h.length>6;)f+=h.shift(),p+=h.shift(),c(f,p);b=f+h.shift(),w=p+h.shift(),y=b+h.shift(),x=w+h.shift(),f=y+h.shift(),p=x+h.shift(),l(b,w,y,x,f,p);break;case 26:for(h.length%2&&(f+=h.shift());h.length>0;)b=f,w=p+h.shift(),y=b+h.shift(),x=w+h.shift(),f=y,p=x+h.shift(),l(b,w,y,x,f,p);break;case 27:for(h.length%2&&(p+=h.shift());h.length>0;)l(b=f+h.shift(),w=p,y=b+h.shift(),x=w+h.shift(),f=y+h.shift(),p=x);break;case 28:h.push((m[v]<<24|m[v+1]<<16)>>16),v+=2;break;case 29:S=h.pop()+a.gsubrsBias,(A=a.gsubrs[S])&&e(A);break;case 30:for(;h.length>0&&(b=f,w=p+h.shift(),y=b+h.shift(),x=w+h.shift(),f=y+h.shift(),p=x+(1===h.length?h.shift():0),l(b,w,y,x,f,p),0!==h.length);)b=f+h.shift(),w=p,y=b+h.shift(),x=w+h.shift(),p=x+h.shift(),l(b,w,y,x,f=y+(1===h.length?h.shift():0),p);break;case 31:for(;h.length>0&&(b=f+h.shift(),w=p,y=b+h.shift(),x=w+h.shift(),p=x+h.shift(),l(b,w,y,x,f=y+(1===h.length?h.shift():0),p),0!==h.length);)b=f,w=p+h.shift(),y=b+h.shift(),x=w+h.shift(),f=y+h.shift(),p=x+(1===h.length?h.shift():0),l(b,w,y,x,f,p);break;default:if(E<32)throw new r.FormatError(`unknown operator: ${E}`);E<247?h.push(E-139):E<251?h.push(256*(E-247)+m[v++]+108):E<255?h.push(256*-(E-251)-m[v++]-108):(h.push((m[v]<<24|m[v+1]<<16|m[v+2]<<8|m[v+3])/65536),v+=4)}_&&(h.length=0)}}(e)}const f=[];class p{constructor(e){this.constructor===p&&(0,r.unreachable)("Cannot initialize CompiledFont."),this.fontMatrix=e,this.compiledGlyphs=Object.create(null),this.compiledCharCodeToGlyphId=Object.create(null)}getPathJs(e){const t=u(this.cmap,e);let n=this.compiledGlyphs[t.glyphId];return n||(n=this.compileGlyph(this.glyphs[t.glyphId],t.glyphId),this.compiledGlyphs[t.glyphId]=n),void 0===this.compiledCharCodeToGlyphId[t.charCode]&&(this.compiledCharCodeToGlyphId[t.charCode]=t.glyphId),n}compileGlyph(e,t){if(!e||0===e.length||14===e[0])return f;let n=this.fontMatrix;if(this.isCFFCIDFont){const e=this.fdSelect.getFDIndex(t);e>=0&&e<this.fdArray.length?n=this.fdArray[e].getByName("FontMatrix")||r.FONT_IDENTITY_MATRIX:(0,r.warn)("Invalid fd index for glyph index.")}const a=[];return a.push({cmd:"save"}),a.push({cmd:"transform",args:n.slice()}),a.push({cmd:"scale",args:["size","-size"]}),this.compileGlyphImpl(e,a,t),a.push({cmd:"restore"}),a}compileGlyphImpl(){(0,r.unreachable)("Children classes should implement this.")}hasBuiltPath(e){const t=u(this.cmap,e);return void 0!==this.compiledGlyphs[t.glyphId]&&void 0!==this.compiledCharCodeToGlyphId[t.charCode]}}class g extends p{constructor(e,t,n){super(n||[488e-6,0,0,488e-6,0,0]),this.glyphs=e,this.cmap=t}compileGlyphImpl(e,t){h(e,t,this)}}class m extends p{constructor(e,t,r,a){super(r||[.001,0,0,.001,0,0]),this.glyphs=e.glyphs,this.gsubrs=e.gsubrs||[],this.subrs=e.subrs||[],this.cmap=t,this.glyphNameMap=a||(0,i.getGlyphsUnicode)(),this.gsubrsBias=n(this.gsubrs),this.subrsBias=n(this.subrs),this.isCFFCIDFont=e.isCFFCIDFont,this.fdSelect=e.fdSelect,this.fdArray=e.fdArray}compileGlyphImpl(e,t,n){d(e,t,this,n)}}return{create:function(n,a){for(var i,o,s,u,h,d,f=new Uint8Array(n.data),p=t(f,4),v=0,b=12;v<p;v++,b+=16){var y=(0,r.bytesToString)(f.subarray(b,b+4)),w=e(f,b+8),x=e(f,b+12);switch(y){case"cmap":i=c(f,w);break;case"glyf":o=f.subarray(w,w+x);break;case"loca":s=f.subarray(w,w+x);break;case"head":d=t(f,w+18),h=t(f,w+50);break;case"CFF ":u=l(f,w,w+x,a)}}if(o){var C=d?[1/d,0,0,1/d,0,0]:n.fontMatrix;return new g(function(e,t,n){var r,a;n?(r=4,a=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}):(r=2,a=function(e,t){return e[t]<<9|e[t+1]<<1});for(var i=[],o=a(t,0),s=r;s<t.length;s+=r){var c=a(t,s);i.push(e.subarray(o,c)),o=c}return i}(o,s,h),i,C)}return new m(u,i,n.fontMatrix,n.glyphNameMap)}}}();t.FontRendererFactory=c},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Type1Parser=void 0;var r=n(32),a=n(8),i=n(12),o=n(2),s=function(){var e=[4],t=[5],n=[6],r=[7],a=[8],i=[12,35],s=[14],c=[21],l=[22],u=[30],h=[31];function d(){this.width=0,this.lsb=0,this.flexing=!1,this.output=[],this.stack=[]}return d.prototype={convert:function(d,f,p){for(var g,m,v,b=d.length,y=!1,w=0;w<b;w++){var x=d[w];if(x<32){switch(12===x&&(x=(x<<8)+d[++w]),x){case 1:case 3:this.stack=[];break;case 4:if(this.flexing){if(this.stack.length<1){y=!0;break}var C=this.stack.pop();this.stack.push(0,C);break}y=this.executeCommand(1,e);break;case 5:y=this.executeCommand(2,t);break;case 6:y=this.executeCommand(1,n);break;case 7:y=this.executeCommand(1,r);break;case 8:y=this.executeCommand(6,a);break;case 9:this.stack=[];break;case 10:if(this.stack.length<1){y=!0;break}if(!f[v=this.stack.pop()]){y=!0;break}y=this.convert(f[v],f,p);break;case 11:return y;case 13:if(this.stack.length<2){y=!0;break}g=this.stack.pop(),m=this.stack.pop(),this.lsb=m,this.width=g,this.stack.push(g,m),y=this.executeCommand(2,l);break;case 14:this.output.push(s[0]);break;case 21:if(this.flexing)break;y=this.executeCommand(2,c);break;case 22:if(this.flexing){this.stack.push(0);break}y=this.executeCommand(1,l);break;case 30:y=this.executeCommand(4,u);break;case 31:y=this.executeCommand(4,h);break;case 3072:case 3073:case 3074:this.stack=[];break;case 3078:if(p){const e=this.stack[this.stack.length-5];this.seac=this.stack.splice(-4,4),this.seac[0]+=this.lsb-e,y=this.executeCommand(0,s)}else y=this.executeCommand(4,s);break;case 3079:if(this.stack.length<4){y=!0;break}this.stack.pop(),g=this.stack.pop();var k=this.stack.pop();m=this.stack.pop(),this.lsb=m,this.width=g,this.stack.push(g,m,k),y=this.executeCommand(3,c);break;case 3084:if(this.stack.length<2){y=!0;break}var S=this.stack.pop(),A=this.stack.pop();this.stack.push(A/S);break;case 3088:if(this.stack.length<2){y=!0;break}v=this.stack.pop();var _=this.stack.pop();if(0===v&&3===_){var E=this.stack.splice(this.stack.length-17,17);this.stack.push(E[2]+E[0],E[3]+E[1],E[4],E[5],E[6],E[7],E[8],E[9],E[10],E[11],E[12],E[13],E[14]),y=this.executeCommand(13,i,!0),this.flexing=!1,this.stack.push(E[15],E[16])}else 1===v&&0===_&&(this.flexing=!0);break;case 3089:break;case 3105:this.stack=[];break;default:(0,o.warn)('Unknown type 1 charstring command of "'+x+'"')}if(y)break}else x<=246?x-=139:x=x<=250?256*(x-247)+d[++w]+108:x<=254?-256*(x-251)-d[++w]-108:(255&d[++w])<<24|(255&d[++w])<<16|(255&d[++w])<<8|(255&d[++w])<<0,this.stack.push(x)}return y},executeCommand(e,t,n){var r=this.stack.length;if(e>r)return!0;for(var a=r-e,i=a;i<r;i++){var o=this.stack[i];Number.isInteger(o)?this.output.push(28,o>>8&255,255&o):(o=65536*o|0,this.output.push(255,o>>24&255,o>>16&255,o>>8&255,255&o))}return this.output.push.apply(this.output,t),n?this.stack.splice(a,e):this.stack.length=0,!1}},d}(),c=function(){function e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function t(e,t,n){if(n>=e.length)return new Uint8Array(0);var r,a,i=0|t;for(r=0;r<n;r++)i=52845*(e[r]+i)+22719&65535;var o=e.length-n,s=new Uint8Array(o);for(r=n,a=0;a<o;r++,a++){var c=e[r];s[a]=c^i>>8,i=52845*(c+i)+22719&65535}return s}function n(e){return 47===e||91===e||93===e||123===e||125===e||40===e||41===e}function o(n,r,o){if(r){var s=n.getBytes(),c=!((e(s[0])||(0,a.isWhiteSpace)(s[0]))&&e(s[1])&&e(s[2])&&e(s[3])&&e(s[4])&&e(s[5])&&e(s[6])&&e(s[7]));n=new i.Stream(c?t(s,55665,4):function(t,n,r){var a,i,o=55665,s=t.length,c=new Uint8Array(s>>>1);for(a=0,i=0;a<s;a++){var l=t[a];if(e(l)){var u;for(a++;a<s&&!e(u=t[a]);)a++;if(a<s){var h=parseInt(String.fromCharCode(l,u),16);c[i++]=h^o>>8,o=52845*(h+o)+22719&65535}}}return c.slice(4,i)}(s))}this.seacAnalysisEnabled=!!o,this.stream=n,this.nextChar()}return o.prototype={readNumberArray:function(){this.getToken();for(var e=[];;){var t=this.getToken();if(null===t||"]"===t||"}"===t)break;e.push(parseFloat(t||0))}return e},readNumber:function(){var e=this.getToken();return parseFloat(e||0)},readInt:function(){var e=this.getToken();return 0|parseInt(e||0,10)},readBoolean:function(){return"true"===this.getToken()?1:0},nextChar:function(){return this.currentChar=this.stream.getByte()},getToken:function(){for(var e=!1,t=this.currentChar;;){if(-1===t)return null;if(e)10!==t&&13!==t||(e=!1);else if(37===t)e=!0;else if(!(0,a.isWhiteSpace)(t))break;t=this.nextChar()}if(n(t))return this.nextChar(),String.fromCharCode(t);var r="";do{r+=String.fromCharCode(t),t=this.nextChar()}while(t>=0&&!(0,a.isWhiteSpace)(t)&&!n(t));return r},readCharStrings:function(e,n){return-1===n?e:t(e,4330,n)},extractFontProgram:function(e){var t=this.stream,n=[],r=[],a=Object.create(null);a.lenIV=4;for(var i,o,c,l,u,h={subrs:[],charstrings:[],properties:{privateData:a}};null!==(i=this.getToken());)if("/"===i)switch(i=this.getToken()){case"CharStrings":for(this.getToken(),this.getToken(),this.getToken(),this.getToken();null!==(i=this.getToken())&&"end"!==i;)if("/"===i){var d=this.getToken();o=this.readInt(),this.getToken(),c=o>0?t.getBytes(o):new Uint8Array(0),l=h.properties.privateData.lenIV,u=this.readCharStrings(c,l),this.nextChar(),"noaccess"===(i=this.getToken())&&this.getToken(),r.push({glyph:d,encoded:u})}break;case"Subrs":for(this.readInt(),this.getToken();"dup"===this.getToken();){const e=this.readInt();o=this.readInt(),this.getToken(),c=o>0?t.getBytes(o):new Uint8Array(0),l=h.properties.privateData.lenIV,u=this.readCharStrings(c,l),this.nextChar(),"noaccess"===(i=this.getToken())&&this.getToken(),n[e]=u}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":var f=this.readNumberArray();f.length>0&&f.length;break;case"StemSnapH":case"StemSnapV":h.properties.privateData[i]=this.readNumberArray();break;case"StdHW":case"StdVW":h.properties.privateData[i]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":case"ExpansionFactor":h.properties.privateData[i]=this.readNumber();break;case"ForceBold":h.properties.privateData[i]=this.readBoolean()}for(var p=0;p<r.length;p++){d=r[p].glyph,u=r[p].encoded;var g=new s,m=g.convert(u,n,this.seacAnalysisEnabled),v=g.output;m&&(v=[14]);const t={glyphName:d,charstring:v,width:g.width,lsb:g.lsb,seac:g.seac};if(".notdef"===d?h.charstrings.unshift(t):h.charstrings.push(t),e.builtInEncoding){const t=e.builtInEncoding.indexOf(d);t>-1&&void 0===e.widths[t]&&t>=e.firstChar&&t<=e.lastChar&&(e.widths[t]=g.width)}}return h},extractFontHeader:function(e){for(var t;null!==(t=this.getToken());)if("/"===t)switch(t=this.getToken()){case"FontMatrix":var n=this.readNumberArray();e.fontMatrix=n;break;case"Encoding":var a,i=this.getToken();if(/^\d+$/.test(i)){a=[];var o=0|parseInt(i,10);this.getToken();for(var s=0;s<o;s++){for(t=this.getToken();"dup"!==t&&"def"!==t;)if(null===(t=this.getToken()))return;if("def"===t)break;var c=this.readInt();this.getToken();var l=this.getToken();a[c]=l,this.getToken()}}else a=(0,r.getEncoding)(i);e.builtInEncoding=a;break;case"FontBBox":var u=this.readNumberArray();e.ascent=Math.max(u[3],u[1]),e.descent=Math.min(u[1],u[3]),e.ascentScaled=!0}}},o}();t.Type1Parser=c},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTilingPatternIR=function(e,t,n){const a=t.getArray("Matrix"),i=r.Util.normalizeRect(t.getArray("BBox")),o=t.get("XStep"),s=t.get("YStep"),c=t.get("PaintType"),l=t.get("TilingType");if(i[2]-i[0]==0||i[3]-i[1]==0)throw new r.FormatError(`Invalid getTilingPatternIR /BBox array: [${i}].`);return["TilingPattern",n,e,a,i,o,s,c,l]},t.Pattern=void 0;var r=n(2),a=n(23),i=n(5),o=n(8),s=function(){function e(){(0,r.unreachable)("should not call Pattern constructor")}return e.prototype={getPattern:function(e){(0,r.unreachable)(`Should not call Pattern.getStyle: ${e}`)}},e.parseShading=function(e,t,n,a,s,l,u){var h=(0,i.isStream)(e)?e.dict:e,d=h.get("ShadingType");try{switch(d){case 2:case 3:return new c.RadialAxial(h,t,n,a,l,u);case 4:case 5:case 6:case 7:return new c.Mesh(e,t,n,a,l,u);default:throw new r.FormatError("Unsupported ShadingType: "+d)}}catch(e){if(e instanceof o.MissingDataException)throw e;return s.send("UnsupportedFeature",{featureId:r.UNSUPPORTED_FEATURES.shadingPattern}),(0,r.warn)(e),new c.Dummy}},e}();t.Pattern=s;var c={SMALL_NUMBER:1e-6};c.RadialAxial=function(){function e(e,t,n,i,o,s){this.matrix=t,this.coordsArr=e.getArray("Coords"),this.shadingType=e.get("ShadingType"),this.type="Pattern";const l=a.ColorSpace.parse({cs:e.getRaw("ColorSpace")||e.getRaw("CS"),xref:n,resources:i,pdfFunctionFactory:o,localColorSpaceCache:s});this.cs=l;const u=e.getArray("BBox");Array.isArray(u)&&4===u.length?this.bbox=r.Util.normalizeRect(u):this.bbox=null;var h=0,d=1;if(e.has("Domain")){var f=e.getArray("Domain");h=f[0],d=f[1]}var p=!1,g=!1;if(e.has("Extend")){var m=e.getArray("Extend");p=m[0],g=m[1]}if(!(3!==this.shadingType||p&&g)){var v=this.coordsArr[0],b=this.coordsArr[1],y=this.coordsArr[2],w=this.coordsArr[3],x=this.coordsArr[4],C=this.coordsArr[5],k=Math.sqrt((v-w)*(v-w)+(b-x)*(b-x));y<=C+k&&C<=y+k&&(0,r.warn)("Unsupported radial gradient.")}this.extendStart=p,this.extendEnd=g;var S=e.getRaw("Function"),A=o.createFromArray(S);const _=(d-h)/10;var E=this.colorStops=[];if(h>=d||_<=0)(0,r.info)("Bad shading domain.");else{var I,T=new Float32Array(l.numComps),R=new Float32Array(1);for(let e=0;e<=10;e++){R[0]=h+e*_,A(R,0,T,0),I=l.getRgb(T,0);var F=r.Util.makeHexColor(I[0],I[1],I[2]);E.push([e/10,F])}var P="transparent";e.has("Background")&&(I=l.getRgb(e.get("Background"),0),P=r.Util.makeHexColor(I[0],I[1],I[2])),p||(E.unshift([0,P]),E[1][0]+=c.SMALL_NUMBER),g||(E[E.length-1][0]-=c.SMALL_NUMBER,E.push([1,P])),this.colorStops=E}}return e.prototype={getIR:function(){var e,t,n,a,i,o=this.coordsArr,s=this.shadingType;2===s?(t=[o[0],o[1]],n=[o[2],o[3]],a=null,i=null,e="axial"):3===s?(t=[o[0],o[1]],n=[o[3],o[4]],a=o[2],i=o[5],e="radial"):(0,r.unreachable)(`getPattern type unknown: ${s}`);var c=this.matrix;if(c&&(t=r.Util.applyTransform(t,c),n=r.Util.applyTransform(n,c),3===s)){var l=r.Util.singularValueDecompose2dScale(c);a*=l[0],i*=l[1]}return["RadialAxial",e,this.bbox,this.colorStops,t,n,a,i]}},e}(),c.Mesh=function(){function e(e,t){this.stream=e,this.context=t,this.buffer=0,this.bufferLength=0;var n=t.numComps;this.tmpCompsBuf=new Float32Array(n);var r=t.colorSpace.numComps;this.tmpCsCompsBuf=t.colorFn?new Float32Array(r):this.tmpCompsBuf}e.prototype={get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;var e=this.stream.getByte();return!(e<0||(this.buffer=e,this.bufferLength=8,0))},readBits:function(e){var t=this.buffer,n=this.bufferLength;if(32===e){if(0===n)return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;t=t<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();var r=this.stream.getByte();return this.buffer=r&(1<<n)-1,(t<<8-n|(255&r)>>n)>>>0}if(8===e&&0===n)return this.stream.getByte();for(;n<e;)t=t<<8|this.stream.getByte(),n+=8;return n-=e,this.bufferLength=n,this.buffer=t&(1<<n)-1,t>>n},align:function(){this.buffer=0,this.bufferLength=0},readFlag:function(){return this.readBits(this.context.bitsPerFlag)},readCoordinate:function(){var e=this.context.bitsPerCoordinate,t=this.readBits(e),n=this.readBits(e),r=this.context.decode,a=e<32?1/((1<<e)-1):2.3283064365386963e-10;return[t*a*(r[1]-r[0])+r[0],n*a*(r[3]-r[2])+r[2]]},readComponents:function(){for(var e=this.context.numComps,t=this.context.bitsPerComponent,n=t<32?1/((1<<t)-1):2.3283064365386963e-10,r=this.context.decode,a=this.tmpCompsBuf,i=0,o=4;i<e;i++,o+=2){var s=this.readBits(t);a[i]=s*n*(r[o+1]-r[o])+r[o]}var c=this.tmpCsCompsBuf;return this.context.colorFn&&this.context.colorFn(a,0,c,0),this.context.colorSpace.getRgb(c,0)}};var t,n=(t=[],function(e){return t[e]||(t[e]=function(e){for(var t=[],n=0;n<=e;n++){var r=n/e,a=1-r;t.push(new Float32Array([a*a*a,3*r*a*a,3*r*r*a,r*r*r]))}return t}(e)),t[e]});function o(e,t){var a=e.figures[t];(0,r.assert)("patch"===a.type,"Unexpected patch mesh figure");var i=e.coords,o=e.colors,s=a.coords,c=a.colors,l=Math.min(i[s[0]][0],i[s[3]][0],i[s[12]][0],i[s[15]][0]),u=Math.min(i[s[0]][1],i[s[3]][1],i[s[12]][1],i[s[15]][1]),h=Math.max(i[s[0]][0],i[s[3]][0],i[s[12]][0],i[s[15]][0]),d=Math.max(i[s[0]][1],i[s[3]][1],i[s[12]][1],i[s[15]][1]),f=Math.ceil(20*(h-l)/(e.bounds[2]-e.bounds[0]));f=Math.max(3,Math.min(20,f));var p=Math.ceil(20*(d-u)/(e.bounds[3]-e.bounds[1]));p=Math.max(3,Math.min(20,p));for(var g=f+1,m=new Int32Array((p+1)*g),v=new Int32Array((p+1)*g),b=0,y=new Uint8Array(3),w=new Uint8Array(3),x=o[c[0]],C=o[c[1]],k=o[c[2]],S=o[c[3]],A=n(p),_=n(f),E=0;E<=p;E++){y[0]=(x[0]*(p-E)+k[0]*E)/p|0,y[1]=(x[1]*(p-E)+k[1]*E)/p|0,y[2]=(x[2]*(p-E)+k[2]*E)/p|0,w[0]=(C[0]*(p-E)+S[0]*E)/p|0,w[1]=(C[1]*(p-E)+S[1]*E)/p|0,w[2]=(C[2]*(p-E)+S[2]*E)/p|0;for(var I=0;I<=f;I++,b++)if(0!==E&&E!==p||0!==I&&I!==f){for(var T=0,R=0,F=0,P=0;P<=3;P++)for(var D=0;D<=3;D++,F++){var O=A[E][P]*_[I][D];T+=i[s[F]][0]*O,R+=i[s[F]][1]*O}m[b]=i.length,i.push([T,R]),v[b]=o.length;var N=new Uint8Array(3);N[0]=(y[0]*(f-I)+w[0]*I)/f|0,N[1]=(y[1]*(f-I)+w[1]*I)/f|0,N[2]=(y[2]*(f-I)+w[2]*I)/f|0,o.push(N)}}m[0]=s[0],v[0]=c[0],m[f]=s[3],v[f]=c[1],m[g*p]=s[12],v[g*p]=c[2],m[g*p+f]=s[15],v[g*p+f]=c[3],e.figures[t]={type:"lattice",coords:m,colors:v,verticesPerRow:g}}function s(e){for(var t=e.coords[0][0],n=e.coords[0][1],r=t,a=n,i=1,o=e.coords.length;i<o;i++){var s=e.coords[i][0],c=e.coords[i][1];t=t>s?s:t,n=n>c?c:n,r=r<s?s:r,a=a<c?c:a}e.bounds=[t,n,r,a]}function c(t,n,c,l,u,h){if(!(0,i.isStream)(t))throw new r.FormatError("Mesh data is not a stream");var d=t.dict;this.matrix=n,this.shadingType=d.get("ShadingType"),this.type="Pattern";const f=d.getArray("BBox");Array.isArray(f)&&4===f.length?this.bbox=r.Util.normalizeRect(f):this.bbox=null;const p=a.ColorSpace.parse({cs:d.getRaw("ColorSpace")||d.getRaw("CS"),xref:c,resources:l,pdfFunctionFactory:u,localColorSpaceCache:h});this.cs=p,this.background=d.has("Background")?p.getRgb(d.get("Background"),0):null;var g=d.getRaw("Function"),m=g?u.createFromArray(g):null;this.coords=[],this.colors=[],this.figures=[];var v=new e(t,{bitsPerCoordinate:d.get("BitsPerCoordinate"),bitsPerComponent:d.get("BitsPerComponent"),bitsPerFlag:d.get("BitsPerFlag"),decode:d.getArray("Decode"),colorFn:m,colorSpace:p,numComps:m?1:p.numComps}),b=!1;switch(this.shadingType){case 4:!function(e,t){for(var n=e.coords,a=e.colors,i=[],o=[],s=0;t.hasData;){var c=t.readFlag(),l=t.readCoordinate(),u=t.readComponents();if(0===s){if(!(0<=c&&c<=2))throw new r.FormatError("Unknown type4 flag");switch(c){case 0:s=3;break;case 1:o.push(o[o.length-2],o[o.length-1]),s=1;break;case 2:o.push(o[o.length-3],o[o.length-1]),s=1}i.push(c)}o.push(n.length),n.push(l),a.push(u),s--,t.align()}e.figures.push({type:"triangles",coords:new Int32Array(o),colors:new Int32Array(o)})}(this,v);break;case 5:var y=0|d.get("VerticesPerRow");if(y<2)throw new r.FormatError("Invalid VerticesPerRow");!function(e,t,n){for(var r=e.coords,a=e.colors,i=[];t.hasData;){var o=t.readCoordinate(),s=t.readComponents();i.push(r.length),r.push(o),a.push(s)}e.figures.push({type:"lattice",coords:new Int32Array(i),colors:new Int32Array(i),verticesPerRow:n})}(this,v,y);break;case 6:!function(e,t){for(var n=e.coords,a=e.colors,i=new Int32Array(16),o=new Int32Array(4);t.hasData;){var s,c,l=t.readFlag();if(!(0<=l&&l<=3))throw new r.FormatError("Unknown type6 flag");var u=n.length;for(s=0,c=0!==l?8:12;s<c;s++)n.push(t.readCoordinate());var h,d,f,p,g=a.length;for(s=0,c=0!==l?2:4;s<c;s++)a.push(t.readComponents());switch(l){case 0:i[12]=u+3,i[13]=u+4,i[14]=u+5,i[15]=u+6,i[8]=u+2,i[11]=u+7,i[4]=u+1,i[7]=u+8,i[0]=u,i[1]=u+11,i[2]=u+10,i[3]=u+9,o[2]=g+1,o[3]=g+2,o[0]=g,o[1]=g+3;break;case 1:h=i[12],d=i[13],f=i[14],p=i[15],i[12]=p,i[13]=u+0,i[14]=u+1,i[15]=u+2,i[8]=f,i[11]=u+3,i[4]=d,i[7]=u+4,i[0]=h,i[1]=u+7,i[2]=u+6,i[3]=u+5,h=o[2],d=o[3],o[2]=d,o[3]=g,o[0]=h,o[1]=g+1;break;case 2:h=i[15],d=i[11],i[12]=i[3],i[13]=u+0,i[14]=u+1,i[15]=u+2,i[8]=i[7],i[11]=u+3,i[4]=d,i[7]=u+4,i[0]=h,i[1]=u+7,i[2]=u+6,i[3]=u+5,h=o[3],o[2]=o[1],o[3]=g,o[0]=h,o[1]=g+1;break;case 3:i[12]=i[0],i[13]=u+0,i[14]=u+1,i[15]=u+2,i[8]=i[1],i[11]=u+3,i[4]=i[2],i[7]=u+4,i[0]=i[3],i[1]=u+7,i[2]=u+6,i[3]=u+5,o[2]=o[0],o[3]=g,o[0]=o[1],o[1]=g+1}i[5]=n.length,n.push([(-4*n[i[0]][0]-n[i[15]][0]+6*(n[i[4]][0]+n[i[1]][0])-2*(n[i[12]][0]+n[i[3]][0])+3*(n[i[13]][0]+n[i[7]][0]))/9,(-4*n[i[0]][1]-n[i[15]][1]+6*(n[i[4]][1]+n[i[1]][1])-2*(n[i[12]][1]+n[i[3]][1])+3*(n[i[13]][1]+n[i[7]][1]))/9]),i[6]=n.length,n.push([(-4*n[i[3]][0]-n[i[12]][0]+6*(n[i[2]][0]+n[i[7]][0])-2*(n[i[0]][0]+n[i[15]][0])+3*(n[i[4]][0]+n[i[14]][0]))/9,(-4*n[i[3]][1]-n[i[12]][1]+6*(n[i[2]][1]+n[i[7]][1])-2*(n[i[0]][1]+n[i[15]][1])+3*(n[i[4]][1]+n[i[14]][1]))/9]),i[9]=n.length,n.push([(-4*n[i[12]][0]-n[i[3]][0]+6*(n[i[8]][0]+n[i[13]][0])-2*(n[i[0]][0]+n[i[15]][0])+3*(n[i[11]][0]+n[i[1]][0]))/9,(-4*n[i[12]][1]-n[i[3]][1]+6*(n[i[8]][1]+n[i[13]][1])-2*(n[i[0]][1]+n[i[15]][1])+3*(n[i[11]][1]+n[i[1]][1]))/9]),i[10]=n.length,n.push([(-4*n[i[15]][0]-n[i[0]][0]+6*(n[i[11]][0]+n[i[14]][0])-2*(n[i[12]][0]+n[i[3]][0])+3*(n[i[2]][0]+n[i[8]][0]))/9,(-4*n[i[15]][1]-n[i[0]][1]+6*(n[i[11]][1]+n[i[14]][1])-2*(n[i[12]][1]+n[i[3]][1])+3*(n[i[2]][1]+n[i[8]][1]))/9]),e.figures.push({type:"patch",coords:new Int32Array(i),colors:new Int32Array(o)})}}(this,v),b=!0;break;case 7:!function(e,t){for(var n=e.coords,a=e.colors,i=new Int32Array(16),o=new Int32Array(4);t.hasData;){var s,c,l=t.readFlag();if(!(0<=l&&l<=3))throw new r.FormatError("Unknown type7 flag");var u=n.length;for(s=0,c=0!==l?12:16;s<c;s++)n.push(t.readCoordinate());var h,d,f,p,g=a.length;for(s=0,c=0!==l?2:4;s<c;s++)a.push(t.readComponents());switch(l){case 0:i[12]=u+3,i[13]=u+4,i[14]=u+5,i[15]=u+6,i[8]=u+2,i[9]=u+13,i[10]=u+14,i[11]=u+7,i[4]=u+1,i[5]=u+12,i[6]=u+15,i[7]=u+8,i[0]=u,i[1]=u+11,i[2]=u+10,i[3]=u+9,o[2]=g+1,o[3]=g+2,o[0]=g,o[1]=g+3;break;case 1:h=i[12],d=i[13],f=i[14],p=i[15],i[12]=p,i[13]=u+0,i[14]=u+1,i[15]=u+2,i[8]=f,i[9]=u+9,i[10]=u+10,i[11]=u+3,i[4]=d,i[5]=u+8,i[6]=u+11,i[7]=u+4,i[0]=h,i[1]=u+7,i[2]=u+6,i[3]=u+5,h=o[2],d=o[3],o[2]=d,o[3]=g,o[0]=h,o[1]=g+1;break;case 2:h=i[15],d=i[11],i[12]=i[3],i[13]=u+0,i[14]=u+1,i[15]=u+2,i[8]=i[7],i[9]=u+9,i[10]=u+10,i[11]=u+3,i[4]=d,i[5]=u+8,i[6]=u+11,i[7]=u+4,i[0]=h,i[1]=u+7,i[2]=u+6,i[3]=u+5,h=o[3],o[2]=o[1],o[3]=g,o[0]=h,o[1]=g+1;break;case 3:i[12]=i[0],i[13]=u+0,i[14]=u+1,i[15]=u+2,i[8]=i[1],i[9]=u+9,i[10]=u+10,i[11]=u+3,i[4]=i[2],i[5]=u+8,i[6]=u+11,i[7]=u+4,i[0]=i[3],i[1]=u+7,i[2]=u+6,i[3]=u+5,o[2]=o[0],o[3]=g,o[0]=o[1],o[1]=g+1}e.figures.push({type:"patch",coords:new Int32Array(i),colors:new Int32Array(o)})}}(this,v),b=!0;break;default:(0,r.unreachable)("Unsupported mesh type.")}if(b){s(this);for(var w=0,x=this.figures.length;w<x;w++)o(this,w)}s(this),function(e){var t,n,r,a,i=e.coords,o=new Float32Array(2*i.length);for(t=0,r=0,n=i.length;t<n;t++){var s=i[t];o[r++]=s[0],o[r++]=s[1]}e.coords=o;var c=e.colors,l=new Uint8Array(3*c.length);for(t=0,r=0,n=c.length;t<n;t++){var u=c[t];l[r++]=u[0],l[r++]=u[1],l[r++]=u[2]}e.colors=l;var h=e.figures;for(t=0,n=h.length;t<n;t++){var d=h[t],f=d.coords,p=d.colors;for(r=0,a=f.length;r<a;r++)f[r]*=2,p[r]*=3}}(this)}return c.prototype={getIR:function(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.matrix,this.bbox,this.background]}},c}(),c.Dummy=function(){function e(){this.type="Pattern"}return e.prototype={getIR:function(){return["Dummy"]}},e}()},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isPDFFunction=function(e){var t;if("object"!=typeof e)return!1;if((0,r.isDict)(e))t=e;else{if(!(0,r.isStream)(e))return!1;t=e.dict}return t.has("FunctionType")},t.PostScriptEvaluator=t.PostScriptCompiler=t.PDFFunctionFactory=void 0;var r=n(5),a=n(2),i=n(40),o=n(24);function s(e){if(!Array.isArray(e))return null;const t=e.length;for(let n=0;n<t;n++)if("number"!=typeof e[n]){const n=new Array(t);for(let r=0;r<t;r++)n[r]=+e[r];return n}return e}t.PDFFunctionFactory=class{constructor({xref:e,isEvalSupported:t=!0}){this.xref=e,this.isEvalSupported=!1!==t}create(e){const t=this.getCached(e);if(t)return t;const n=c.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:e instanceof r.Ref?this.xref.fetch(e):e});return this._cache(e,n),n}createFromArray(e){const t=this.getCached(e);if(t)return t;const n=c.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:e instanceof r.Ref?this.xref.fetch(e):e});return this._cache(e,n),n}getCached(e){let t;if(e instanceof r.Ref?t=e:e instanceof r.Dict?t=e.objId:(0,r.isStream)(e)&&(t=e.dict&&e.dict.objId),t){const e=this._localFunctionCache.getByRef(t);if(e)return e}return null}_cache(e,t){if(!t)throw new Error('PDFFunctionFactory._cache - expected "parsedFunction" argument.');let n;e instanceof r.Ref?n=e:e instanceof r.Dict?n=e.objId:(0,r.isStream)(e)&&(n=e.dict&&e.dict.objId),n&&this._localFunctionCache.set(null,n,t)}get _localFunctionCache(){return(0,a.shadow)(this,"_localFunctionCache",new o.LocalFunctionCache)}};var c={getSampleArray(e,t,n,r){var a,i,o=1;for(a=0,i=e.length;a<i;a++)o*=e[a];o*=t;var s=new Array(o),c=0,l=0,u=1/(2**n-1),h=r.getBytes((o*n+7)/8),d=0;for(a=0;a<o;a++){for(;c<n;)l<<=8,l|=h[d++],c+=8;c-=n,s[a]=(l>>c)*u,l&=(1<<c)-1}return s},getIR({xref:e,isEvalSupported:t,fn:n}){var r=n.dict;r||(r=n);var i=[this.constructSampled,null,this.constructInterpolated,this.constructStiched,this.constructPostScript][r.get("FunctionType")];if(!i)throw new a.FormatError("Unknown type of function");return i.call(this,{xref:e,isEvalSupported:t,fn:n,dict:r})},fromIR({xref:e,isEvalSupported:t,IR:n}){switch(n[0]){case 0:return this.constructSampledFromIR({xref:e,isEvalSupported:t,IR:n});case 2:return this.constructInterpolatedFromIR({xref:e,isEvalSupported:t,IR:n});case 3:return this.constructStichedFromIR({xref:e,isEvalSupported:t,IR:n});default:return this.constructPostScriptFromIR({xref:e,isEvalSupported:t,IR:n})}},parse({xref:e,isEvalSupported:t,fn:n}){const r=this.getIR({xref:e,isEvalSupported:t,fn:n});return this.fromIR({xref:e,isEvalSupported:t,IR:r})},parseArray({xref:e,isEvalSupported:t,fnObj:n}){if(!Array.isArray(n))return this.parse({xref:e,isEvalSupported:t,fn:n});for(var r=[],a=0,i=n.length;a<i;a++)r.push(this.parse({xref:e,isEvalSupported:t,fn:e.fetchIfRef(n[a])}));return function(e,t,n,a){for(var i=0,o=r.length;i<o;i++)r[i](e,t,n,a+i)}},constructSampled({xref:e,isEvalSupported:t,fn:n,dict:r}){function i(e){for(var t=e.length,n=[],r=0,a=0;a<t;a+=2)n[r]=[e[a],e[a+1]],++r;return n}var o=s(r.getArray("Domain")),c=s(r.getArray("Range"));if(!o||!c)throw new a.FormatError("No domain or range");var l=o.length/2,u=c.length/2;o=i(o),c=i(c);var h=s(r.getArray("Size")),d=r.get("BitsPerSample"),f=r.get("Order")||1;1!==f&&(0,a.info)("No support for cubic spline interpolation: "+f);var p=s(r.getArray("Encode"));if(p)p=i(p);else{p=[];for(var g=0;g<l;++g)p.push([0,h[g]-1])}var m=s(r.getArray("Decode"));return[0,l,o,p,m=m?i(m):c,this.getSampleArray(h,u,d,n),h,u,2**d-1,c]},constructSampledFromIR({xref:e,isEvalSupported:t,IR:n}){function r(e,t,n,r,a){return r+(a-r)/(n-t)*(e-t)}return function(e,t,a,i){var o,s,c=n[1],l=n[2],u=n[3],h=n[4],d=n[5],f=n[6],p=n[7],g=n[9],m=1<<c,v=new Float64Array(m),b=new Uint32Array(m);for(s=0;s<m;s++)v[s]=1;var y=p,w=1;for(o=0;o<c;++o){var x=l[o][0],C=l[o][1],k=r(Math.min(Math.max(e[t+o],x),C),x,C,u[o][0],u[o][1]),S=f[o],A=(k=Math.min(Math.max(k,0),S-1))<S-1?Math.floor(k):k-1,_=A+1-k,E=k-A,I=A*y,T=I+y;for(s=0;s<m;s++)s&w?(v[s]*=E,b[s]+=T):(v[s]*=_,b[s]+=I);y*=S,w<<=1}for(s=0;s<p;++s){var R=0;for(o=0;o<m;o++)R+=d[b[o]+s]*v[o];R=r(R,0,1,h[s][0],h[s][1]),a[i+s]=Math.min(Math.max(R,g[s][0]),g[s][1])}}},constructInterpolated({xref:e,isEvalSupported:t,fn:n,dict:r}){for(var a=s(r.getArray("C0"))||[0],i=s(r.getArray("C1"))||[1],o=r.get("N"),c=a.length,l=[],u=0;u<c;++u)l.push(i[u]-a[u]);return[2,a,l,o]},constructInterpolatedFromIR({xref:e,isEvalSupported:t,IR:n}){var r=n[1],a=n[2],i=n[3],o=a.length;return function(e,t,n,s){for(var c=1===i?e[t]:e[t]**i,l=0;l<o;++l)n[s+l]=r[l]+c*a[l]}},constructStiched({xref:e,isEvalSupported:t,fn:n,dict:r}){var i=s(r.getArray("Domain"));if(!i)throw new a.FormatError("No domain");if(1!=i.length/2)throw new a.FormatError("Bad domain for stiched function");for(var o=r.get("Functions"),c=[],l=0,u=o.length;l<u;++l)c.push(this.parse({xref:e,isEvalSupported:t,fn:e.fetchIfRef(o[l])}));return[3,i,s(r.getArray("Bounds")),s(r.getArray("Encode")),c]},constructStichedFromIR({xref:e,isEvalSupported:t,IR:n}){var r=n[1],a=n[2],i=n[3],o=n[4],s=new Float32Array(1);return function(e,t,n,c){for(var l=function(e,t,n){return e>n?e=n:e<t&&(e=t),e}(e[t],r[0],r[1]),u=0,h=a.length;u<h&&!(l<a[u]);++u);var d=r[0];u>0&&(d=a[u-1]);var f=r[1];u<a.length&&(f=a[u]);var p=i[2*u],g=i[2*u+1];s[0]=d===f?p:p+(l-d)*(g-p)/(f-d),o[u](s,0,n,c)}},constructPostScript({xref:e,isEvalSupported:t,fn:n,dict:r}){var o=s(r.getArray("Domain")),c=s(r.getArray("Range"));if(!o)throw new a.FormatError("No domain.");if(!c)throw new a.FormatError("No range.");var l=new i.PostScriptLexer(n);return[4,o,c,new i.PostScriptParser(l).parse()]},constructPostScriptFromIR({xref:e,isEvalSupported:t,IR:n}){var r=n[1],i=n[2],o=n[3];if(t&&a.IsEvalSupportedCached.value){const e=(new h).compile(o,r,i);if(e)return new Function("src","srcOffset","dest","destOffset",e)}(0,a.info)("Unable to compile PS function");var s=i.length>>1,c=r.length>>1,l=new u(o),d=Object.create(null),f=8192,p=new Float32Array(c);return function(e,t,n,r){var a,o,u="",h=p;for(a=0;a<c;a++)o=e[t+a],h[a]=o,u+=o+"_";var g=d[u];if(void 0===g){var m=new Float32Array(s),v=l.execute(h),b=v.length-s;for(a=0;a<s;a++){o=v[b+a];var y=i[2*a];(o<y||o>(y=i[2*a+1]))&&(o=y),m[a]=o}f>0&&(f--,d[u]=m),n.set(m,r)}else n.set(g,r)}}},l=function(){function e(e){this.stack=e?Array.prototype.slice.call(e,0):[]}return e.prototype={push:function(e){if(this.stack.length>=100)throw new Error("PostScript function stack overflow.");this.stack.push(e)},pop:function(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()},copy:function(e){if(this.stack.length+e>=100)throw new Error("PostScript function stack overflow.");for(var t=this.stack,n=t.length-e,r=e-1;r>=0;r--,n++)t.push(t[n])},index:function(e){this.push(this.stack[this.stack.length-e-1])},roll:function(e,t){var n,r,a,i=this.stack,o=i.length-e,s=i.length-1,c=o+(t-Math.floor(t/e)*e);for(n=o,r=s;n<r;n++,r--)a=i[n],i[n]=i[r],i[r]=a;for(n=o,r=c-1;n<r;n++,r--)a=i[n],i[n]=i[r],i[r]=a;for(n=c,r=s;n<r;n++,r--)a=i[n],i[n]=i[r],i[r]=a}},e}(),u=function(){function e(e){this.operators=e}return e.prototype={execute:function(e){for(var t,n,r,i=new l(e),o=0,s=this.operators,c=s.length;o<c;)if("number"!=typeof(t=s[o++]))switch(t){case"jz":r=i.pop(),(n=i.pop())||(o=r);break;case"j":o=n=i.pop();break;case"abs":n=i.pop(),i.push(Math.abs(n));break;case"add":r=i.pop(),n=i.pop(),i.push(n+r);break;case"and":r=i.pop(),n=i.pop(),(0,a.isBool)(n)&&(0,a.isBool)(r)?i.push(n&&r):i.push(n&r);break;case"atan":n=i.pop(),i.push(Math.atan(n));break;case"bitshift":r=i.pop(),(n=i.pop())>0?i.push(n<<r):i.push(n>>r);break;case"ceiling":n=i.pop(),i.push(Math.ceil(n));break;case"copy":n=i.pop(),i.copy(n);break;case"cos":n=i.pop(),i.push(Math.cos(n));break;case"cvi":n=0|i.pop(),i.push(n);break;case"cvr":break;case"div":r=i.pop(),n=i.pop(),i.push(n/r);break;case"dup":i.copy(1);break;case"eq":r=i.pop(),n=i.pop(),i.push(n===r);break;case"exch":i.roll(2,1);break;case"exp":r=i.pop(),n=i.pop(),i.push(n**r);break;case"false":i.push(!1);break;case"floor":n=i.pop(),i.push(Math.floor(n));break;case"ge":r=i.pop(),n=i.pop(),i.push(n>=r);break;case"gt":r=i.pop(),n=i.pop(),i.push(n>r);break;case"idiv":r=i.pop(),n=i.pop(),i.push(n/r|0);break;case"index":n=i.pop(),i.index(n);break;case"le":r=i.pop(),n=i.pop(),i.push(n<=r);break;case"ln":n=i.pop(),i.push(Math.log(n));break;case"log":n=i.pop(),i.push(Math.log(n)/Math.LN10);break;case"lt":r=i.pop(),n=i.pop(),i.push(n<r);break;case"mod":r=i.pop(),n=i.pop(),i.push(n%r);break;case"mul":r=i.pop(),n=i.pop(),i.push(n*r);break;case"ne":r=i.pop(),n=i.pop(),i.push(n!==r);break;case"neg":n=i.pop(),i.push(-n);break;case"not":n=i.pop(),(0,a.isBool)(n)?i.push(!n):i.push(~n);break;case"or":r=i.pop(),n=i.pop(),(0,a.isBool)(n)&&(0,a.isBool)(r)?i.push(n||r):i.push(n|r);break;case"pop":i.pop();break;case"roll":r=i.pop(),n=i.pop(),i.roll(n,r);break;case"round":n=i.pop(),i.push(Math.round(n));break;case"sin":n=i.pop(),i.push(Math.sin(n));break;case"sqrt":n=i.pop(),i.push(Math.sqrt(n));break;case"sub":r=i.pop(),n=i.pop(),i.push(n-r);break;case"true":i.push(!0);break;case"truncate":n=(n=i.pop())<0?Math.ceil(n):Math.floor(n),i.push(n);break;case"xor":r=i.pop(),n=i.pop(),(0,a.isBool)(n)&&(0,a.isBool)(r)?i.push(n!==r):i.push(n^r);break;default:throw new a.FormatError(`Unknown operator ${t}`)}else i.push(t);return i.stack}},e}();t.PostScriptEvaluator=u;var h=function(){function e(e){this.type=e}function t(t,n,r){e.call(this,"args"),this.index=t,this.min=n,this.max=r}function n(t){e.call(this,"literal"),this.number=t,this.min=t,this.max=t}function r(t,n,r,a,i){e.call(this,"binary"),this.op=t,this.arg1=n,this.arg2=r,this.min=a,this.max=i}function i(t,n){e.call(this,"max"),this.arg=t,this.min=t.min,this.max=n}function o(t,n,r){e.call(this,"var"),this.index=t,this.min=n,this.max=r}function s(t,n){e.call(this,"definition"),this.variable=t,this.arg=n}function c(){this.parts=[]}function l(e,t){return"literal"===t.type&&0===t.number?e:"literal"===e.type&&0===e.number?t:"literal"===t.type&&"literal"===e.type?new n(e.number+t.number):new r("+",e,t,e.min+t.min,e.max+t.max)}function u(e,t){if("literal"===t.type){if(0===t.number)return new n(0);if(1===t.number)return e;if("literal"===e.type)return new n(e.number*t.number)}if("literal"===e.type){if(0===e.number)return new n(0);if(1===e.number)return t}return new r("*",e,t,Math.min(e.min*t.min,e.min*t.max,e.max*t.min,e.max*t.max),Math.max(e.min*t.min,e.min*t.max,e.max*t.min,e.max*t.max))}function h(e,t){if("literal"===t.type){if(0===t.number)return e;if("literal"===e.type)return new n(e.number-t.number)}return"binary"===t.type&&"-"===t.op&&"literal"===e.type&&1===e.number&&"literal"===t.arg1.type&&1===t.arg1.number?t.arg2:new r("-",e,t,e.min-t.max,e.max-t.min)}function d(e,t){return e.min>=t?new n(t):e.max<=t?e:new i(e,t)}function f(){}return e.prototype.visit=function(e){(0,a.unreachable)("abstract method")},t.prototype=Object.create(e.prototype),t.prototype.visit=function(e){e.visitArgument(this)},n.prototype=Object.create(e.prototype),n.prototype.visit=function(e){e.visitLiteral(this)},r.prototype=Object.create(e.prototype),r.prototype.visit=function(e){e.visitBinaryOperation(this)},i.prototype=Object.create(e.prototype),i.prototype.visit=function(e){e.visitMin(this)},o.prototype=Object.create(e.prototype),o.prototype.visit=function(e){e.visitVariable(this)},s.prototype=Object.create(e.prototype),s.prototype.visit=function(e){e.visitVariableDefinition(this)},c.prototype={visitArgument(e){this.parts.push("Math.max(",e.min,", Math.min(",e.max,", src[srcOffset + ",e.index,"]))")},visitVariable(e){this.parts.push("v",e.index)},visitLiteral(e){this.parts.push(e.number)},visitBinaryOperation(e){this.parts.push("("),e.arg1.visit(this),this.parts.push(" ",e.op," "),e.arg2.visit(this),this.parts.push(")")},visitVariableDefinition(e){this.parts.push("var "),e.variable.visit(this),this.parts.push(" = "),e.arg.visit(this),this.parts.push(";")},visitMin(e){this.parts.push("Math.min("),e.arg.visit(this),this.parts.push(", ",e.max,")")},toString(){return this.parts.join("")}},f.prototype={compile:function(e,r,a){var i,f,p,g,m,v,b,y,w=[],x=[],C=r.length>>1,k=a.length>>1,S=0;for(let e=0;e<C;e++)w.push(new t(e,r[2*e],r[2*e+1]));for(let t=0,r=e.length;t<r;t++)if("number"!=typeof(y=e[t]))switch(y){case"add":if(w.length<2)return null;g=w.pop(),p=w.pop(),w.push(l(p,g));break;case"cvr":if(w.length<1)return null;break;case"mul":if(w.length<2)return null;g=w.pop(),p=w.pop(),w.push(u(p,g));break;case"sub":if(w.length<2)return null;g=w.pop(),p=w.pop(),w.push(h(p,g));break;case"exch":if(w.length<2)return null;m=w.pop(),v=w.pop(),w.push(m,v);break;case"pop":if(w.length<1)return null;w.pop();break;case"index":if(w.length<1)return null;if("literal"!==(p=w.pop()).type)return null;if((i=p.number)<0||!Number.isInteger(i)||w.length<i)return null;if("literal"===(m=w[w.length-i-1]).type||"var"===m.type){w.push(m);break}b=new o(S++,m.min,m.max),w[w.length-i-1]=b,w.push(b),x.push(new s(b,m));break;case"dup":if(w.length<1)return null;if("number"==typeof e[t+1]&&"gt"===e[t+2]&&e[t+3]===t+7&&"jz"===e[t+4]&&"pop"===e[t+5]&&e[t+6]===e[t+1]){p=w.pop(),w.push(d(p,e[t+1])),t+=6;break}if("literal"===(m=w[w.length-1]).type||"var"===m.type){w.push(m);break}b=new o(S++,m.min,m.max),w[w.length-1]=b,w.push(b),x.push(new s(b,m));break;case"roll":if(w.length<2)return null;if(g=w.pop(),p=w.pop(),"literal"!==g.type||"literal"!==p.type)return null;if(f=g.number,(i=p.number)<=0||!Number.isInteger(i)||!Number.isInteger(f)||w.length<i)return null;if(0==(f=(f%i+i)%i))break;Array.prototype.push.apply(w,w.splice(w.length-i,i-f));break;default:return null}else w.push(new n(y));if(w.length!==k)return null;var A=[];return x.forEach((function(e){var t=new c;e.visit(t),A.push(t.toString())})),w.forEach((function(e,t){var n=new c;e.visit(n);var r=a[2*t],i=a[2*t+1],o=[n.toString()];r>e.min&&(o.unshift("Math.max(",r,", "),o.push(")")),i<e.max&&(o.unshift("Math.min(",i,", "),o.push(")")),o.unshift("dest[destOffset + ",t,"] = "),o.push(";"),A.push(o.join(""))})),A.join("\n")}},f}();t.PostScriptCompiler=h},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PostScriptParser=t.PostScriptLexer=void 0;var r=n(2),a=n(5),i=n(8);t.PostScriptParser=class{constructor(e){this.lexer=e,this.operators=[],this.token=null,this.prev=null}nextToken(){this.prev=this.token,this.token=this.lexer.getToken()}accept(e){return this.token.type===e&&(this.nextToken(),!0)}expect(e){if(this.accept(e))return!0;throw new r.FormatError(`Unexpected symbol: found ${this.token.type} expected ${e}.`)}parse(){return this.nextToken(),this.expect(o.LBRACE),this.parseBlock(),this.expect(o.RBRACE),this.operators}parseBlock(){for(;;)if(this.accept(o.NUMBER))this.operators.push(this.prev.value);else if(this.accept(o.OPERATOR))this.operators.push(this.prev.value);else{if(!this.accept(o.LBRACE))return;this.parseCondition()}}parseCondition(){const e=this.operators.length;if(this.operators.push(null,null),this.parseBlock(),this.expect(o.RBRACE),this.accept(o.IF))this.operators[e]=this.operators.length,this.operators[e+1]="jz";else{if(!this.accept(o.LBRACE))throw new r.FormatError("PS Function: error parsing conditional.");{const t=this.operators.length;this.operators.push(null,null);const n=this.operators.length;this.parseBlock(),this.expect(o.RBRACE),this.expect(o.IFELSE),this.operators[t]=this.operators.length,this.operators[t+1]="j",this.operators[e]=n,this.operators[e+1]="jz"}}}};const o={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5},s=function(){const e=Object.create(null);class t{constructor(e,t){this.type=e,this.value=t}static getOperator(n){return e[n]||(e[n]=new t(o.OPERATOR,n))}static get LBRACE(){return(0,r.shadow)(this,"LBRACE",new t(o.LBRACE,"{"))}static get RBRACE(){return(0,r.shadow)(this,"RBRACE",new t(o.RBRACE,"}"))}static get IF(){return(0,r.shadow)(this,"IF",new t(o.IF,"IF"))}static get IFELSE(){return(0,r.shadow)(this,"IFELSE",new t(o.IFELSE,"IFELSE"))}}return t}();t.PostScriptLexer=class{constructor(e){this.stream=e,this.nextChar(),this.strBuf=[]}nextChar(){return this.currentChar=this.stream.getByte()}getToken(){let e=!1,t=this.currentChar;for(;;){if(t<0)return a.EOF;if(e)10!==t&&13!==t||(e=!1);else if(37===t)e=!0;else if(!(0,i.isWhiteSpace)(t))break;t=this.nextChar()}switch(0|t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new s(o.NUMBER,this.getNumber());case 123:return this.nextChar(),s.LBRACE;case 125:return this.nextChar(),s.RBRACE}const n=this.strBuf;for(n.length=0,n[0]=String.fromCharCode(t);(t=this.nextChar())>=0&&(t>=65&&t<=90||t>=97&&t<=122);)n.push(String.fromCharCode(t));const r=n.join("");switch(r.toLowerCase()){case"if":return s.IF;case"ifelse":return s.IFELSE;default:return s.getOperator(r)}}getNumber(){let e=this.currentChar;const t=this.strBuf;for(t.length=0,t[0]=String.fromCharCode(e);(e=this.nextChar())>=0&&(e>=48&&e<=57||45===e||46===e);)t.push(String.fromCharCode(e));const n=parseFloat(t.join(""));if(isNaN(n))throw new r.FormatError(`Invalid floating point number: ${n}`);return n}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bidi=function(e,t,n){var p=!0,g=e.length;if(0===g||n)return h(e,p,n);d.length=g,f.length=g;var m,v,b=0;for(m=0;m<g;++m){d[m]=e.charAt(m);var y=e.charCodeAt(m),w="L";y<=255?w=a[y]:1424<=y&&y<=1524?w="R":1536<=y&&y<=1791?(w=i[255&y])||(0,r.warn)("Bidi: invalid Unicode character "+y.toString(16)):1792<=y&&y<=2220&&(w="AL"),"R"!==w&&"AL"!==w&&"AN"!==w||b++,f[m]=w}if(0===b)return h(e,p=!0);-1===t&&(b/g<.3?(p=!0,t=0):(p=!1,t=1));var x=[];for(m=0;m<g;++m)x[m]=t;var C,k=o(t)?"R":"L",S=k,A=S,_=S;for(m=0;m<g;++m)"NSM"===f[m]?f[m]=_:_=f[m];for(_=S,m=0;m<g;++m)"EN"===(C=f[m])?f[m]="AL"===_?"AN":"EN":"R"!==C&&"L"!==C&&"AL"!==C||(_=C);for(m=0;m<g;++m)"AL"===(C=f[m])&&(f[m]="R");for(m=1;m<g-1;++m)"ES"===f[m]&&"EN"===f[m-1]&&"EN"===f[m+1]&&(f[m]="EN"),"CS"!==f[m]||"EN"!==f[m-1]&&"AN"!==f[m-1]||f[m+1]!==f[m-1]||(f[m]=f[m-1]);for(m=0;m<g;++m)if("EN"===f[m]){var E;for(E=m-1;E>=0&&"ET"===f[E];--E)f[E]="EN";for(E=m+1;E<g&&"ET"===f[E];++E)f[E]="EN"}for(m=0;m<g;++m)"WS"!==(C=f[m])&&"ES"!==C&&"ET"!==C&&"CS"!==C||(f[m]="ON");for(_=S,m=0;m<g;++m)"EN"===(C=f[m])?f[m]="L"===_?"L":"EN":"R"!==C&&"L"!==C||(_=C);for(m=0;m<g;++m)if("ON"===f[m]){var I=c(f,m+1,"ON"),T=S;m>0&&(T=f[m-1]);var R=A;I+1<g&&(R=f[I+1]),"L"!==T&&(T="R"),"L"!==R&&(R="R"),T===R&&l(f,m,I,T),m=I-1}for(m=0;m<g;++m)"ON"===f[m]&&(f[m]=k);for(m=0;m<g;++m)C=f[m],s(x[m])?"R"===C?x[m]+=1:"AN"!==C&&"EN"!==C||(x[m]+=2):"L"!==C&&"AN"!==C&&"EN"!==C||(x[m]+=1);var F,P=-1,D=99;for(m=0,v=x.length;m<v;++m)P<(F=x[m])&&(P=F),D>F&&o(F)&&(D=F);for(F=P;F>=D;--F){var O=-1;for(m=0,v=x.length;m<v;++m)x[m]<F?O>=0&&(u(d,O,m),O=-1):O<0&&(O=m);O>=0&&u(d,O,x.length)}for(m=0,v=d.length;m<v;++m){var N=d[m];"<"!==N&&">"!==N||(d[m]="")}return h(d.join(""),p)};var r=n(2),a=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],i=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function o(e){return 0!=(1&e)}function s(e){return 0==(1&e)}function c(e,t,n){for(var r=t,a=e.length;r<a;++r)if(e[r]!==n)return r;return r}function l(e,t,n,r){for(var a=t;a<n;++a)e[a]=r}function u(e,t,n){for(var r=t,a=n-1;r<a;++r,--a){var i=e[r];e[r]=e[a],e[a]=i}}function h(e,t,n=!1){let r="ltr";return n?r="ttb":t||(r="rtl"),{str:e,dir:r}}var d=[],f=[]},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMetrics=void 0;var r=n(8),a=(0,r.getLookupTableFactory)((function(e){e.Courier=600,e["Courier-Bold"]=600,e["Courier-BoldOblique"]=600,e["Courier-Oblique"]=600,e.Helvetica=(0,r.getLookupTableFactory)((function(e){e.space=278,e.exclam=278,e.quotedbl=355,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=667,e.quoteright=222,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=278,e.semicolon=278,e.less=584,e.equal=584,e.greater=584,e.question=556,e.at=1015,e.A=667,e.B=667,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=500,e.K=667,e.L=556,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=278,e.backslash=278,e.bracketright=278,e.asciicircum=469,e.underscore=556,e.quoteleft=222,e.a=556,e.b=556,e.c=500,e.d=556,e.e=556,e.f=278,e.g=556,e.h=556,e.i=222,e.j=222,e.k=500,e.l=222,e.m=833,e.n=556,e.o=556,e.p=556,e.q=556,e.r=333,e.s=500,e.t=278,e.u=556,e.v=500,e.w=722,e.x=500,e.y=500,e.z=500,e.braceleft=334,e.bar=260,e.braceright=334,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=191,e.quotedblleft=333,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=500,e.fl=500,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=537,e.bullet=350,e.quotesinglbase=222,e.quotedblbase=333,e.quotedblright=333,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=556,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=222,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=556,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=667,e.aacute=556,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=500,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=500,e.aring=556,e.Ncommaaccent=722,e.lacute=222,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=500,e.scedilla=500,e.iacute=278,e.lozenge=471,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=556,e.acircumflex=556,e.Amacron=667,e.rcaron=333,e.ccedilla=500,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=643,e.Umacron=722,e.uring=556,e.threesuperior=333,e.Ograve=778,e.Agrave=667,e.Abreve=667,e.multiply=584,e.uacute=556,e.Tcaron=611,e.partialdiff=476,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=500,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=260,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=333,e.omacron=556,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=222,e.tcaron=317,e.eogonek=556,e.Uogonek=722,e.Aacute=667,e.Adieresis=667,e.egrave=556,e.zacute=500,e.iogonek=222,e.Oacute=778,e.oacute=556,e.amacron=556,e.sacute=500,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=556,e.twosuperior=333,e.Odieresis=778,e.mu=556,e.igrave=278,e.ohungarumlaut=556,e.Eogonek=667,e.dcroat=556,e.threequarters=834,e.Scedilla=667,e.lcaron=299,e.Kcommaaccent=667,e.Lacute=556,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=556,e.onehalf=834,e.lessequal=549,e.ocircumflex=556,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=556,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=556,e.Ccaron=722,e.ugrave=556,e.radical=453,e.Dcaron=722,e.rcommaaccent=333,e.Ntilde=722,e.otilde=556,e.Rcommaaccent=722,e.Lcommaaccent=556,e.Atilde=667,e.Aogonek=667,e.Aring=667,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=500,e.minus=584,e.Icircumflex=278,e.ncaron=556,e.tcommaaccent=278,e.logicalnot=584,e.odieresis=556,e.udieresis=556,e.notequal=549,e.gcommaaccent=556,e.eth=556,e.zcaron=500,e.ncommaaccent=556,e.onesuperior=333,e.imacron=278,e.Euro=556})),e["Helvetica-Bold"]=(0,r.getLookupTableFactory)((function(e){e.space=278,e.exclam=333,e.quotedbl=474,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=722,e.quoteright=278,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=333,e.semicolon=333,e.less=584,e.equal=584,e.greater=584,e.question=611,e.at=975,e.A=722,e.B=722,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=556,e.K=722,e.L=611,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=584,e.underscore=556,e.quoteleft=278,e.a=556,e.b=611,e.c=556,e.d=611,e.e=556,e.f=333,e.g=611,e.h=611,e.i=278,e.j=278,e.k=556,e.l=278,e.m=889,e.n=611,e.o=611,e.p=611,e.q=611,e.r=389,e.s=556,e.t=333,e.u=611,e.v=556,e.w=778,e.x=556,e.y=556,e.z=500,e.braceleft=389,e.bar=280,e.braceright=389,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=238,e.quotedblleft=500,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=611,e.fl=611,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=556,e.bullet=350,e.quotesinglbase=278,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=611,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=278,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=611,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=722,e.aacute=556,e.Ucircumflex=722,e.yacute=556,e.scommaaccent=556,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=611,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=556,e.aring=556,e.Ncommaaccent=722,e.lacute=278,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=556,e.scedilla=556,e.iacute=278,e.lozenge=494,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=611,e.acircumflex=556,e.Amacron=722,e.rcaron=389,e.ccedilla=556,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=743,e.Umacron=722,e.uring=611,e.threesuperior=333,e.Ograve=778,e.Agrave=722,e.Abreve=722,e.multiply=584,e.uacute=611,e.Tcaron=611,e.partialdiff=494,e.ydieresis=556,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=556,e.nacute=611,e.umacron=611,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=280,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=389,e.omacron=611,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=278,e.tcaron=389,e.eogonek=556,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=556,e.zacute=500,e.iogonek=278,e.Oacute=778,e.oacute=611,e.amacron=556,e.sacute=556,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=611,e.twosuperior=333,e.Odieresis=778,e.mu=611,e.igrave=278,e.ohungarumlaut=611,e.Eogonek=667,e.dcroat=611,e.threequarters=834,e.Scedilla=667,e.lcaron=400,e.Kcommaaccent=722,e.Lacute=611,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=611,e.onehalf=834,e.lessequal=549,e.ocircumflex=611,e.ntilde=611,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=611,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=611,e.Ccaron=722,e.ugrave=611,e.radical=549,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=722,e.otilde=611,e.Rcommaaccent=722,e.Lcommaaccent=611,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=556,e.minus=584,e.Icircumflex=278,e.ncaron=611,e.tcommaaccent=333,e.logicalnot=584,e.odieresis=611,e.udieresis=611,e.notequal=549,e.gcommaaccent=611,e.eth=611,e.zcaron=500,e.ncommaaccent=611,e.onesuperior=333,e.imacron=278,e.Euro=556})),e["Helvetica-BoldOblique"]=(0,r.getLookupTableFactory)((function(e){e.space=278,e.exclam=333,e.quotedbl=474,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=722,e.quoteright=278,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=333,e.semicolon=333,e.less=584,e.equal=584,e.greater=584,e.question=611,e.at=975,e.A=722,e.B=722,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=556,e.K=722,e.L=611,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=584,e.underscore=556,e.quoteleft=278,e.a=556,e.b=611,e.c=556,e.d=611,e.e=556,e.f=333,e.g=611,e.h=611,e.i=278,e.j=278,e.k=556,e.l=278,e.m=889,e.n=611,e.o=611,e.p=611,e.q=611,e.r=389,e.s=556,e.t=333,e.u=611,e.v=556,e.w=778,e.x=556,e.y=556,e.z=500,e.braceleft=389,e.bar=280,e.braceright=389,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=238,e.quotedblleft=500,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=611,e.fl=611,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=556,e.bullet=350,e.quotesinglbase=278,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=611,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=278,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=611,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=722,e.aacute=556,e.Ucircumflex=722,e.yacute=556,e.scommaaccent=556,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=611,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=556,e.aring=556,e.Ncommaaccent=722,e.lacute=278,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=556,e.scedilla=556,e.iacute=278,e.lozenge=494,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=611,e.acircumflex=556,e.Amacron=722,e.rcaron=389,e.ccedilla=556,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=743,e.Umacron=722,e.uring=611,e.threesuperior=333,e.Ograve=778,e.Agrave=722,e.Abreve=722,e.multiply=584,e.uacute=611,e.Tcaron=611,e.partialdiff=494,e.ydieresis=556,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=556,e.nacute=611,e.umacron=611,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=280,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=389,e.omacron=611,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=278,e.tcaron=389,e.eogonek=556,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=556,e.zacute=500,e.iogonek=278,e.Oacute=778,e.oacute=611,e.amacron=556,e.sacute=556,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=611,e.twosuperior=333,e.Odieresis=778,e.mu=611,e.igrave=278,e.ohungarumlaut=611,e.Eogonek=667,e.dcroat=611,e.threequarters=834,e.Scedilla=667,e.lcaron=400,e.Kcommaaccent=722,e.Lacute=611,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=611,e.onehalf=834,e.lessequal=549,e.ocircumflex=611,e.ntilde=611,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=611,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=611,e.Ccaron=722,e.ugrave=611,e.radical=549,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=722,e.otilde=611,e.Rcommaaccent=722,e.Lcommaaccent=611,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=556,e.minus=584,e.Icircumflex=278,e.ncaron=611,e.tcommaaccent=333,e.logicalnot=584,e.odieresis=611,e.udieresis=611,e.notequal=549,e.gcommaaccent=611,e.eth=611,e.zcaron=500,e.ncommaaccent=611,e.onesuperior=333,e.imacron=278,e.Euro=556})),e["Helvetica-Oblique"]=(0,r.getLookupTableFactory)((function(e){e.space=278,e.exclam=278,e.quotedbl=355,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=667,e.quoteright=222,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=278,e.semicolon=278,e.less=584,e.equal=584,e.greater=584,e.question=556,e.at=1015,e.A=667,e.B=667,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=500,e.K=667,e.L=556,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=278,e.backslash=278,e.bracketright=278,e.asciicircum=469,e.underscore=556,e.quoteleft=222,e.a=556,e.b=556,e.c=500,e.d=556,e.e=556,e.f=278,e.g=556,e.h=556,e.i=222,e.j=222,e.k=500,e.l=222,e.m=833,e.n=556,e.o=556,e.p=556,e.q=556,e.r=333,e.s=500,e.t=278,e.u=556,e.v=500,e.w=722,e.x=500,e.y=500,e.z=500,e.braceleft=334,e.bar=260,e.braceright=334,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=191,e.quotedblleft=333,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=500,e.fl=500,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=537,e.bullet=350,e.quotesinglbase=222,e.quotedblbase=333,e.quotedblright=333,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=556,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=222,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=556,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=667,e.aacute=556,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=500,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=500,e.aring=556,e.Ncommaaccent=722,e.lacute=222,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=500,e.scedilla=500,e.iacute=278,e.lozenge=471,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=556,e.acircumflex=556,e.Amacron=667,e.rcaron=333,e.ccedilla=500,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=643,e.Umacron=722,e.uring=556,e.threesuperior=333,e.Ograve=778,e.Agrave=667,e.Abreve=667,e.multiply=584,e.uacute=556,e.Tcaron=611,e.partialdiff=476,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=500,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=260,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=333,e.omacron=556,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=222,e.tcaron=317,e.eogonek=556,e.Uogonek=722,e.Aacute=667,e.Adieresis=667,e.egrave=556,e.zacute=500,e.iogonek=222,e.Oacute=778,e.oacute=556,e.amacron=556,e.sacute=500,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=556,e.twosuperior=333,e.Odieresis=778,e.mu=556,e.igrave=278,e.ohungarumlaut=556,e.Eogonek=667,e.dcroat=556,e.threequarters=834,e.Scedilla=667,e.lcaron=299,e.Kcommaaccent=667,e.Lacute=556,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=556,e.onehalf=834,e.lessequal=549,e.ocircumflex=556,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=556,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=556,e.Ccaron=722,e.ugrave=556,e.radical=453,e.Dcaron=722,e.rcommaaccent=333,e.Ntilde=722,e.otilde=556,e.Rcommaaccent=722,e.Lcommaaccent=556,e.Atilde=667,e.Aogonek=667,e.Aring=667,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=500,e.minus=584,e.Icircumflex=278,e.ncaron=556,e.tcommaaccent=278,e.logicalnot=584,e.odieresis=556,e.udieresis=556,e.notequal=549,e.gcommaaccent=556,e.eth=556,e.zcaron=500,e.ncommaaccent=556,e.onesuperior=333,e.imacron=278,e.Euro=556})),e.Symbol=(0,r.getLookupTableFactory)((function(e){e.space=250,e.exclam=333,e.universal=713,e.numbersign=500,e.existential=549,e.percent=833,e.ampersand=778,e.suchthat=439,e.parenleft=333,e.parenright=333,e.asteriskmath=500,e.plus=549,e.comma=250,e.minus=549,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=278,e.semicolon=278,e.less=549,e.equal=549,e.greater=549,e.question=444,e.congruent=549,e.Alpha=722,e.Beta=667,e.Chi=722,e.Delta=612,e.Epsilon=611,e.Phi=763,e.Gamma=603,e.Eta=722,e.Iota=333,e.theta1=631,e.Kappa=722,e.Lambda=686,e.Mu=889,e.Nu=722,e.Omicron=722,e.Pi=768,e.Theta=741,e.Rho=556,e.Sigma=592,e.Tau=611,e.Upsilon=690,e.sigma1=439,e.Omega=768,e.Xi=645,e.Psi=795,e.Zeta=611,e.bracketleft=333,e.therefore=863,e.bracketright=333,e.perpendicular=658,e.underscore=500,e.radicalex=500,e.alpha=631,e.beta=549,e.chi=549,e.delta=494,e.epsilon=439,e.phi=521,e.gamma=411,e.eta=603,e.iota=329,e.phi1=603,e.kappa=549,e.lambda=549,e.mu=576,e.nu=521,e.omicron=549,e.pi=549,e.theta=521,e.rho=549,e.sigma=603,e.tau=439,e.upsilon=576,e.omega1=713,e.omega=686,e.xi=493,e.psi=686,e.zeta=494,e.braceleft=480,e.bar=200,e.braceright=480,e.similar=549,e.Euro=750,e.Upsilon1=620,e.minute=247,e.lessequal=549,e.fraction=167,e.infinity=713,e.florin=500,e.club=753,e.diamond=753,e.heart=753,e.spade=753,e.arrowboth=1042,e.arrowleft=987,e.arrowup=603,e.arrowright=987,e.arrowdown=603,e.degree=400,e.plusminus=549,e.second=411,e.greaterequal=549,e.multiply=549,e.proportional=713,e.partialdiff=494,e.bullet=460,e.divide=549,e.notequal=549,e.equivalence=549,e.approxequal=549,e.ellipsis=1e3,e.arrowvertex=603,e.arrowhorizex=1e3,e.carriagereturn=658,e.aleph=823,e.Ifraktur=686,e.Rfraktur=795,e.weierstrass=987,e.circlemultiply=768,e.circleplus=768,e.emptyset=823,e.intersection=768,e.union=768,e.propersuperset=713,e.reflexsuperset=713,e.notsubset=713,e.propersubset=713,e.reflexsubset=713,e.element=713,e.notelement=713,e.angle=768,e.gradient=713,e.registerserif=790,e.copyrightserif=790,e.trademarkserif=890,e.product=823,e.radical=549,e.dotmath=250,e.logicalnot=713,e.logicaland=603,e.logicalor=603,e.arrowdblboth=1042,e.arrowdblleft=987,e.arrowdblup=603,e.arrowdblright=987,e.arrowdbldown=603,e.lozenge=494,e.angleleft=329,e.registersans=790,e.copyrightsans=790,e.trademarksans=786,e.summation=713,e.parenlefttp=384,e.parenleftex=384,e.parenleftbt=384,e.bracketlefttp=384,e.bracketleftex=384,e.bracketleftbt=384,e.bracelefttp=494,e.braceleftmid=494,e.braceleftbt=494,e.braceex=494,e.angleright=329,e.integral=274,e.integraltp=686,e.integralex=686,e.integralbt=686,e.parenrighttp=384,e.parenrightex=384,e.parenrightbt=384,e.bracketrighttp=384,e.bracketrightex=384,e.bracketrightbt=384,e.bracerighttp=494,e.bracerightmid=494,e.bracerightbt=494,e.apple=790})),e["Times-Roman"]=(0,r.getLookupTableFactory)((function(e){e.space=250,e.exclam=333,e.quotedbl=408,e.numbersign=500,e.dollar=500,e.percent=833,e.ampersand=778,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=564,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=278,e.semicolon=278,e.less=564,e.equal=564,e.greater=564,e.question=444,e.at=921,e.A=722,e.B=667,e.C=667,e.D=722,e.E=611,e.F=556,e.G=722,e.H=722,e.I=333,e.J=389,e.K=722,e.L=611,e.M=889,e.N=722,e.O=722,e.P=556,e.Q=722,e.R=667,e.S=556,e.T=611,e.U=722,e.V=722,e.W=944,e.X=722,e.Y=722,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=469,e.underscore=500,e.quoteleft=333,e.a=444,e.b=500,e.c=444,e.d=500,e.e=444,e.f=333,e.g=500,e.h=500,e.i=278,e.j=278,e.k=500,e.l=278,e.m=778,e.n=500,e.o=500,e.p=500,e.q=500,e.r=333,e.s=389,e.t=278,e.u=500,e.v=500,e.w=722,e.x=500,e.y=500,e.z=444,e.braceleft=480,e.bar=200,e.braceright=480,e.asciitilde=541,e.exclamdown=333,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=180,e.quotedblleft=444,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=556,e.fl=556,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=453,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=444,e.quotedblright=444,e.guillemotright=500,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=444,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=889,e.ordfeminine=276,e.Lslash=611,e.Oslash=722,e.OE=889,e.ordmasculine=310,e.ae=667,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=722,e.germandbls=500,e.Idieresis=333,e.eacute=444,e.abreve=444,e.uhungarumlaut=500,e.ecaron=444,e.Ydieresis=722,e.divide=564,e.Yacute=722,e.Acircumflex=722,e.aacute=444,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=444,e.Uacute=722,e.uogonek=500,e.Edieresis=611,e.Dcroat=722,e.commaaccent=250,e.copyright=760,e.Emacron=611,e.ccaron=444,e.aring=444,e.Ncommaaccent=722,e.lacute=278,e.agrave=444,e.Tcommaaccent=611,e.Cacute=667,e.atilde=444,e.Edotaccent=611,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=471,e.Rcaron=667,e.Gcommaaccent=722,e.ucircumflex=500,e.acircumflex=444,e.Amacron=722,e.rcaron=333,e.ccedilla=444,e.Zdotaccent=611,e.Thorn=556,e.Omacron=722,e.Racute=667,e.Sacute=556,e.dcaron=588,e.Umacron=722,e.uring=500,e.threesuperior=300,e.Ograve=722,e.Agrave=722,e.Abreve=722,e.multiply=564,e.uacute=500,e.Tcaron=611,e.partialdiff=476,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=611,e.adieresis=444,e.edieresis=444,e.cacute=444,e.nacute=500,e.umacron=500,e.Ncaron=722,e.Iacute=333,e.plusminus=564,e.brokenbar=200,e.registered=760,e.Gbreve=722,e.Idotaccent=333,e.summation=600,e.Egrave=611,e.racute=333,e.omacron=500,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=667,e.lcommaaccent=278,e.tcaron=326,e.eogonek=444,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=444,e.zacute=444,e.iogonek=278,e.Oacute=722,e.oacute=500,e.amacron=444,e.sacute=389,e.idieresis=278,e.Ocircumflex=722,e.Ugrave=722,e.Delta=612,e.thorn=500,e.twosuperior=300,e.Odieresis=722,e.mu=500,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=611,e.dcroat=500,e.threequarters=750,e.Scedilla=556,e.lcaron=344,e.Kcommaaccent=722,e.Lacute=611,e.trademark=980,e.edotaccent=444,e.Igrave=333,e.Imacron=333,e.Lcaron=611,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=500,e.Uhungarumlaut=722,e.Eacute=611,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=556,e.Scommaaccent=556,e.Ohungarumlaut=722,e.degree=400,e.ograve=500,e.Ccaron=667,e.ugrave=500,e.radical=453,e.Dcaron=722,e.rcommaaccent=333,e.Ntilde=722,e.otilde=500,e.Rcommaaccent=667,e.Lcommaaccent=611,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=722,e.zdotaccent=444,e.Ecaron=611,e.Iogonek=333,e.kcommaaccent=500,e.minus=564,e.Icircumflex=333,e.ncaron=500,e.tcommaaccent=278,e.logicalnot=564,e.odieresis=500,e.udieresis=500,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=444,e.ncommaaccent=500,e.onesuperior=300,e.imacron=278,e.Euro=500})),e["Times-Bold"]=(0,r.getLookupTableFactory)((function(e){e.space=250,e.exclam=333,e.quotedbl=555,e.numbersign=500,e.dollar=500,e.percent=1e3,e.ampersand=833,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=570,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=333,e.semicolon=333,e.less=570,e.equal=570,e.greater=570,e.question=500,e.at=930,e.A=722,e.B=667,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=778,e.I=389,e.J=500,e.K=778,e.L=667,e.M=944,e.N=722,e.O=778,e.P=611,e.Q=778,e.R=722,e.S=556,e.T=667,e.U=722,e.V=722,e.W=1e3,e.X=722,e.Y=722,e.Z=667,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=581,e.underscore=500,e.quoteleft=333,e.a=500,e.b=556,e.c=444,e.d=556,e.e=444,e.f=333,e.g=500,e.h=556,e.i=278,e.j=333,e.k=556,e.l=278,e.m=833,e.n=556,e.o=500,e.p=556,e.q=556,e.r=444,e.s=389,e.t=333,e.u=556,e.v=500,e.w=722,e.x=500,e.y=500,e.z=444,e.braceleft=394,e.bar=220,e.braceright=394,e.asciitilde=520,e.exclamdown=333,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=278,e.quotedblleft=500,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=556,e.fl=556,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=540,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=500,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=500,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=300,e.Lslash=667,e.Oslash=778,e.OE=1e3,e.ordmasculine=330,e.ae=722,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=722,e.germandbls=556,e.Idieresis=389,e.eacute=444,e.abreve=500,e.uhungarumlaut=556,e.ecaron=444,e.Ydieresis=722,e.divide=570,e.Yacute=722,e.Acircumflex=722,e.aacute=500,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=500,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=747,e.Emacron=667,e.ccaron=444,e.aring=500,e.Ncommaaccent=722,e.lacute=278,e.agrave=500,e.Tcommaaccent=667,e.Cacute=722,e.atilde=500,e.Edotaccent=667,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=494,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=556,e.acircumflex=500,e.Amacron=722,e.rcaron=444,e.ccedilla=444,e.Zdotaccent=667,e.Thorn=611,e.Omacron=778,e.Racute=722,e.Sacute=556,e.dcaron=672,e.Umacron=722,e.uring=556,e.threesuperior=300,e.Ograve=778,e.Agrave=722,e.Abreve=722,e.multiply=570,e.uacute=556,e.Tcaron=667,e.partialdiff=494,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=500,e.edieresis=444,e.cacute=444,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=389,e.plusminus=570,e.brokenbar=220,e.registered=747,e.Gbreve=778,e.Idotaccent=389,e.summation=600,e.Egrave=667,e.racute=444,e.omacron=500,e.Zacute=667,e.Zcaron=667,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=278,e.tcaron=416,e.eogonek=444,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=444,e.zacute=444,e.iogonek=278,e.Oacute=778,e.oacute=500,e.amacron=500,e.sacute=389,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=556,e.twosuperior=300,e.Odieresis=778,e.mu=556,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=667,e.dcroat=556,e.threequarters=750,e.Scedilla=556,e.lcaron=394,e.Kcommaaccent=778,e.Lacute=667,e.trademark=1e3,e.edotaccent=444,e.Igrave=389,e.Imacron=389,e.Lcaron=667,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=556,e.Scommaaccent=556,e.Ohungarumlaut=778,e.degree=400,e.ograve=500,e.Ccaron=722,e.ugrave=556,e.radical=549,e.Dcaron=722,e.rcommaaccent=444,e.Ntilde=722,e.otilde=500,e.Rcommaaccent=722,e.Lcommaaccent=667,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=778,e.zdotaccent=444,e.Ecaron=667,e.Iogonek=389,e.kcommaaccent=556,e.minus=570,e.Icircumflex=389,e.ncaron=556,e.tcommaaccent=333,e.logicalnot=570,e.odieresis=500,e.udieresis=556,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=444,e.ncommaaccent=556,e.onesuperior=300,e.imacron=278,e.Euro=500})),e["Times-BoldItalic"]=(0,r.getLookupTableFactory)((function(e){e.space=250,e.exclam=389,e.quotedbl=555,e.numbersign=500,e.dollar=500,e.percent=833,e.ampersand=778,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=570,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=333,e.semicolon=333,e.less=570,e.equal=570,e.greater=570,e.question=500,e.at=832,e.A=667,e.B=667,e.C=667,e.D=722,e.E=667,e.F=667,e.G=722,e.H=778,e.I=389,e.J=500,e.K=667,e.L=611,e.M=889,e.N=722,e.O=722,e.P=611,e.Q=722,e.R=667,e.S=556,e.T=611,e.U=722,e.V=667,e.W=889,e.X=667,e.Y=611,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=570,e.underscore=500,e.quoteleft=333,e.a=500,e.b=500,e.c=444,e.d=500,e.e=444,e.f=333,e.g=500,e.h=556,e.i=278,e.j=278,e.k=500,e.l=278,e.m=778,e.n=556,e.o=500,e.p=500,e.q=500,e.r=389,e.s=389,e.t=278,e.u=556,e.v=444,e.w=667,e.x=500,e.y=444,e.z=389,e.braceleft=348,e.bar=220,e.braceright=348,e.asciitilde=570,e.exclamdown=389,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=278,e.quotedblleft=500,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=556,e.fl=556,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=500,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=500,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=500,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=944,e.ordfeminine=266,e.Lslash=611,e.Oslash=722,e.OE=944,e.ordmasculine=300,e.ae=722,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=722,e.germandbls=500,e.Idieresis=389,e.eacute=444,e.abreve=500,e.uhungarumlaut=556,e.ecaron=444,e.Ydieresis=611,e.divide=570,e.Yacute=611,e.Acircumflex=667,e.aacute=500,e.Ucircumflex=722,e.yacute=444,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=500,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=747,e.Emacron=667,e.ccaron=444,e.aring=500,e.Ncommaaccent=722,e.lacute=278,e.agrave=500,e.Tcommaaccent=611,e.Cacute=667,e.atilde=500,e.Edotaccent=667,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=494,e.Rcaron=667,e.Gcommaaccent=722,e.ucircumflex=556,e.acircumflex=500,e.Amacron=667,e.rcaron=389,e.ccedilla=444,e.Zdotaccent=611,e.Thorn=611,e.Omacron=722,e.Racute=667,e.Sacute=556,e.dcaron=608,e.Umacron=722,e.uring=556,e.threesuperior=300,e.Ograve=722,e.Agrave=667,e.Abreve=667,e.multiply=570,e.uacute=556,e.Tcaron=611,e.partialdiff=494,e.ydieresis=444,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=500,e.edieresis=444,e.cacute=444,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=389,e.plusminus=570,e.brokenbar=220,e.registered=747,e.Gbreve=722,e.Idotaccent=389,e.summation=600,e.Egrave=667,e.racute=389,e.omacron=500,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=667,e.lcommaaccent=278,e.tcaron=366,e.eogonek=444,e.Uogonek=722,e.Aacute=667,e.Adieresis=667,e.egrave=444,e.zacute=389,e.iogonek=278,e.Oacute=722,e.oacute=500,e.amacron=500,e.sacute=389,e.idieresis=278,e.Ocircumflex=722,e.Ugrave=722,e.Delta=612,e.thorn=500,e.twosuperior=300,e.Odieresis=722,e.mu=576,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=667,e.dcroat=500,e.threequarters=750,e.Scedilla=556,e.lcaron=382,e.Kcommaaccent=667,e.Lacute=611,e.trademark=1e3,e.edotaccent=444,e.Igrave=389,e.Imacron=389,e.Lcaron=611,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=556,e.Scommaaccent=556,e.Ohungarumlaut=722,e.degree=400,e.ograve=500,e.Ccaron=667,e.ugrave=556,e.radical=549,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=722,e.otilde=500,e.Rcommaaccent=667,e.Lcommaaccent=611,e.Atilde=667,e.Aogonek=667,e.Aring=667,e.Otilde=722,e.zdotaccent=389,e.Ecaron=667,e.Iogonek=389,e.kcommaaccent=500,e.minus=606,e.Icircumflex=389,e.ncaron=556,e.tcommaaccent=278,e.logicalnot=606,e.odieresis=500,e.udieresis=556,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=389,e.ncommaaccent=556,e.onesuperior=300,e.imacron=278,e.Euro=500})),e["Times-Italic"]=(0,r.getLookupTableFactory)((function(e){e.space=250,e.exclam=333,e.quotedbl=420,e.numbersign=500,e.dollar=500,e.percent=833,e.ampersand=778,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=675,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=333,e.semicolon=333,e.less=675,e.equal=675,e.greater=675,e.question=500,e.at=920,e.A=611,e.B=611,e.C=667,e.D=722,e.E=611,e.F=611,e.G=722,e.H=722,e.I=333,e.J=444,e.K=667,e.L=556,e.M=833,e.N=667,e.O=722,e.P=611,e.Q=722,e.R=611,e.S=500,e.T=556,e.U=722,e.V=611,e.W=833,e.X=611,e.Y=556,e.Z=556,e.bracketleft=389,e.backslash=278,e.bracketright=389,e.asciicircum=422,e.underscore=500,e.quoteleft=333,e.a=500,e.b=500,e.c=444,e.d=500,e.e=444,e.f=278,e.g=500,e.h=500,e.i=278,e.j=278,e.k=444,e.l=278,e.m=722,e.n=500,e.o=500,e.p=500,e.q=500,e.r=389,e.s=389,e.t=278,e.u=500,e.v=444,e.w=667,e.x=444,e.y=444,e.z=389,e.braceleft=400,e.bar=275,e.braceright=400,e.asciitilde=541,e.exclamdown=389,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=214,e.quotedblleft=556,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=500,e.fl=500,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=523,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=556,e.quotedblright=556,e.guillemotright=500,e.ellipsis=889,e.perthousand=1e3,e.questiondown=500,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=889,e.AE=889,e.ordfeminine=276,e.Lslash=556,e.Oslash=722,e.OE=944,e.ordmasculine=310,e.ae=667,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=667,e.germandbls=500,e.Idieresis=333,e.eacute=444,e.abreve=500,e.uhungarumlaut=500,e.ecaron=444,e.Ydieresis=556,e.divide=675,e.Yacute=556,e.Acircumflex=611,e.aacute=500,e.Ucircumflex=722,e.yacute=444,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=500,e.Uacute=722,e.uogonek=500,e.Edieresis=611,e.Dcroat=722,e.commaaccent=250,e.copyright=760,e.Emacron=611,e.ccaron=444,e.aring=500,e.Ncommaaccent=667,e.lacute=278,e.agrave=500,e.Tcommaaccent=556,e.Cacute=667,e.atilde=500,e.Edotaccent=611,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=471,e.Rcaron=611,e.Gcommaaccent=722,e.ucircumflex=500,e.acircumflex=500,e.Amacron=611,e.rcaron=389,e.ccedilla=444,e.Zdotaccent=556,e.Thorn=611,e.Omacron=722,e.Racute=611,e.Sacute=500,e.dcaron=544,e.Umacron=722,e.uring=500,e.threesuperior=300,e.Ograve=722,e.Agrave=611,e.Abreve=611,e.multiply=675,e.uacute=500,e.Tcaron=556,e.partialdiff=476,e.ydieresis=444,e.Nacute=667,e.icircumflex=278,e.Ecircumflex=611,e.adieresis=500,e.edieresis=444,e.cacute=444,e.nacute=500,e.umacron=500,e.Ncaron=667,e.Iacute=333,e.plusminus=675,e.brokenbar=275,e.registered=760,e.Gbreve=722,e.Idotaccent=333,e.summation=600,e.Egrave=611,e.racute=389,e.omacron=500,e.Zacute=556,e.Zcaron=556,e.greaterequal=549,e.Eth=722,e.Ccedilla=667,e.lcommaaccent=278,e.tcaron=300,e.eogonek=444,e.Uogonek=722,e.Aacute=611,e.Adieresis=611,e.egrave=444,e.zacute=389,e.iogonek=278,e.Oacute=722,e.oacute=500,e.amacron=500,e.sacute=389,e.idieresis=278,e.Ocircumflex=722,e.Ugrave=722,e.Delta=612,e.thorn=500,e.twosuperior=300,e.Odieresis=722,e.mu=500,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=611,e.dcroat=500,e.threequarters=750,e.Scedilla=500,e.lcaron=300,e.Kcommaaccent=667,e.Lacute=556,e.trademark=980,e.edotaccent=444,e.Igrave=333,e.Imacron=333,e.Lcaron=611,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=500,e.Uhungarumlaut=722,e.Eacute=611,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=500,e.Scommaaccent=500,e.Ohungarumlaut=722,e.degree=400,e.ograve=500,e.Ccaron=667,e.ugrave=500,e.radical=453,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=667,e.otilde=500,e.Rcommaaccent=611,e.Lcommaaccent=556,e.Atilde=611,e.Aogonek=611,e.Aring=611,e.Otilde=722,e.zdotaccent=389,e.Ecaron=611,e.Iogonek=333,e.kcommaaccent=444,e.minus=675,e.Icircumflex=333,e.ncaron=500,e.tcommaaccent=278,e.logicalnot=675,e.odieresis=500,e.udieresis=500,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=389,e.ncommaaccent=500,e.onesuperior=300,e.imacron=278,e.Euro=500})),e.ZapfDingbats=(0,r.getLookupTableFactory)((function(e){e.space=278,e.a1=974,e.a2=961,e.a202=974,e.a3=980,e.a4=719,e.a5=789,e.a119=790,e.a118=791,e.a117=690,e.a11=960,e.a12=939,e.a13=549,e.a14=855,e.a15=911,e.a16=933,e.a105=911,e.a17=945,e.a18=974,e.a19=755,e.a20=846,e.a21=762,e.a22=761,e.a23=571,e.a24=677,e.a25=763,e.a26=760,e.a27=759,e.a28=754,e.a6=494,e.a7=552,e.a8=537,e.a9=577,e.a10=692,e.a29=786,e.a30=788,e.a31=788,e.a32=790,e.a33=793,e.a34=794,e.a35=816,e.a36=823,e.a37=789,e.a38=841,e.a39=823,e.a40=833,e.a41=816,e.a42=831,e.a43=923,e.a44=744,e.a45=723,e.a46=749,e.a47=790,e.a48=792,e.a49=695,e.a50=776,e.a51=768,e.a52=792,e.a53=759,e.a54=707,e.a55=708,e.a56=682,e.a57=701,e.a58=826,e.a59=815,e.a60=789,e.a61=789,e.a62=707,e.a63=687,e.a64=696,e.a65=689,e.a66=786,e.a67=787,e.a68=713,e.a69=791,e.a70=785,e.a71=791,e.a72=873,e.a73=761,e.a74=762,e.a203=762,e.a75=759,e.a204=759,e.a76=892,e.a77=892,e.a78=788,e.a79=784,e.a81=438,e.a82=138,e.a83=277,e.a84=415,e.a97=392,e.a98=392,e.a99=668,e.a100=668,e.a89=390,e.a90=390,e.a93=317,e.a94=317,e.a91=276,e.a92=276,e.a205=509,e.a85=509,e.a206=410,e.a86=410,e.a87=234,e.a88=234,e.a95=334,e.a96=334,e.a101=732,e.a102=544,e.a103=544,e.a104=910,e.a106=667,e.a107=760,e.a108=760,e.a112=776,e.a111=595,e.a110=694,e.a109=626,e.a120=788,e.a121=788,e.a122=788,e.a123=788,e.a124=788,e.a125=788,e.a126=788,e.a127=788,e.a128=788,e.a129=788,e.a130=788,e.a131=788,e.a132=788,e.a133=788,e.a134=788,e.a135=788,e.a136=788,e.a137=788,e.a138=788,e.a139=788,e.a140=788,e.a141=788,e.a142=788,e.a143=788,e.a144=788,e.a145=788,e.a146=788,e.a147=788,e.a148=788,e.a149=788,e.a150=788,e.a151=788,e.a152=788,e.a153=788,e.a154=788,e.a155=788,e.a156=788,e.a157=788,e.a158=788,e.a159=788,e.a160=894,e.a161=838,e.a163=1016,e.a164=458,e.a196=748,e.a165=924,e.a192=748,e.a166=918,e.a167=927,e.a168=928,e.a169=928,e.a170=834,e.a171=873,e.a172=828,e.a173=924,e.a162=924,e.a174=917,e.a175=930,e.a176=931,e.a177=463,e.a178=883,e.a179=836,e.a193=836,e.a180=867,e.a199=867,e.a181=696,e.a200=696,e.a182=874,e.a201=874,e.a183=760,e.a184=946,e.a197=771,e.a185=865,e.a194=771,e.a198=888,e.a186=967,e.a195=888,e.a187=831,e.a188=873,e.a189=927,e.a190=970,e.a191=918}))}));t.getMetrics=a},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var r=n(2);const a=3285377520,i=4294901760,o=65535;t.MurmurHash3_64=class{constructor(e){this.h1=e?4294967295&e:a,this.h2=e?4294967295&e:a}update(e){let t,n;if((0,r.isString)(e)){t=new Uint8Array(2*e.length),n=0;for(let r=0,a=e.length;r<a;r++){const a=e.charCodeAt(r);a<=255?t[n++]=a:(t[n++]=a>>>8,t[n++]=255&a)}}else{if(!(0,r.isArrayBuffer)(e))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");t=e.slice(),n=t.byteLength}const a=n>>2,s=n-4*a,c=new Uint32Array(t.buffer,0,a);let l=0,u=0,h=this.h1,d=this.h2;const f=3432918353,p=461845907,g=11601,m=13715;for(let e=0;e<a;e++)1&e?(l=c[e],l=l*f&i|l*g&o,l=l<<15|l>>>17,l=l*p&i|l*m&o,h^=l,h=h<<13|h>>>19,h=5*h+3864292196):(u=c[e],u=u*f&i|u*g&o,u=u<<15|u>>>17,u=u*p&i|u*m&o,d^=u,d=d<<13|d>>>19,d=5*d+3864292196);switch(l=0,s){case 3:l^=t[4*a+2]<<16;case 2:l^=t[4*a+1]<<8;case 1:l^=t[4*a],l=l*f&i|l*g&o,l=l<<15|l>>>17,l=l*p&i|l*m&o,1&a?h^=l:d^=l}this.h1=h,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;e^=t>>>1,e=3981806797*e&i|36045*e&o,t=4283543511*t&i|(2950163797*(t<<16|e>>>16)&i)>>>16,e^=t>>>1,e=444984403*e&i|60499*e&o,t=3301882366*t&i|(3120437893*(t<<16|e>>>16)&i)>>>16,e^=t>>>1;const n=(e>>>0).toString(16),r=(t>>>0).toString(16);return n.padStart(8,"0")+r.padStart(8,"0")}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OperatorList=void 0;var r=n(2),a=function(){function e(e,t,n,r,a){for(var i=e,o=0,s=t.length-1;o<s;o++){var c=t[o];i=i[c]||(i[c]=[])}i[t[t.length-1]]={checkFn:n,iterateFn:r,processFn:a}}var t=[];function n(e){this.queue=e,this.state=null,this.context={iCurr:0,fnArray:e.fnArray,argsArray:e.argsArray},this.match=null,this.lastProcessed=0}return e(t,[r.OPS.save,r.OPS.transform,r.OPS.paintInlineImageXObject,r.OPS.restore],null,(function(e,t){var n=e.fnArray,a=(t-(e.iCurr-3))%4;switch(a){case 0:return n[t]===r.OPS.save;case 1:return n[t]===r.OPS.transform;case 2:return n[t]===r.OPS.paintInlineImageXObject;case 3:return n[t]===r.OPS.restore}throw new Error(`iterateInlineImageGroup - invalid pos: ${a}`)}),(function(e,t){var n=e.fnArray,a=e.argsArray,i=e.iCurr,o=i-3,s=i-2,c=i-1,l=Math.min(Math.floor((t-o)/4),200);if(l<10)return t-(t-o)%4;var u,h=0,d=[],f=0,p=1,g=1;for(u=0;u<l;u++){var m=a[s+(u<<2)],v=a[c+(u<<2)][0];p+v.width>1e3&&(h=Math.max(h,p),g+=f+2,p=0,f=0),d.push({transform:m,x:p,y:g,w:v.width,h:v.height}),p+=v.width+2,f=Math.max(f,v.height)}var b=Math.max(h,p)+1,y=g+f+1,w=new Uint8ClampedArray(b*y*4),x=b<<2;for(u=0;u<l;u++){var C=a[c+(u<<2)][0].data,k=d[u].w<<2,S=0,A=d[u].x+d[u].y*b<<2;w.set(C.subarray(0,k),A-x);for(var _=0,E=d[u].h;_<E;_++)w.set(C.subarray(S,S+k),A),S+=k,A+=x;for(w.set(C.subarray(S-k,S),A);A>=0;)C[A-4]=C[A],C[A-3]=C[A+1],C[A-2]=C[A+2],C[A-1]=C[A+3],C[A+k]=C[A+k-4],C[A+k+1]=C[A+k-3],C[A+k+2]=C[A+k-2],C[A+k+3]=C[A+k-1],A-=x}return n.splice(o,4*l,r.OPS.paintInlineImageXObjectGroup),a.splice(o,4*l,[{width:b,height:y,kind:r.ImageKind.RGBA_32BPP,data:w},d]),o+1})),e(t,[r.OPS.save,r.OPS.transform,r.OPS.paintImageMaskXObject,r.OPS.restore],null,(function(e,t){var n=e.fnArray,a=(t-(e.iCurr-3))%4;switch(a){case 0:return n[t]===r.OPS.save;case 1:return n[t]===r.OPS.transform;case 2:return n[t]===r.OPS.paintImageMaskXObject;case 3:return n[t]===r.OPS.restore}throw new Error(`iterateImageMaskGroup - invalid pos: ${a}`)}),(function(e,t){var n,a=e.fnArray,i=e.argsArray,o=e.iCurr,s=o-3,c=o-2,l=o-1,u=Math.floor((t-s)/4);if((u=function(e,t,n,a){for(var i=e+2,o=0;o<t;o++){var s=a[i+4*o],c=1===s.length&&s[0];if(!c||1!==c.width||1!==c.height||c.data.length&&(1!==c.data.length||0!==c.data[0]))break;n[i+4*o]=r.OPS.paintSolidColorImageMask}return t-o}(s,u,a,i))<10)return t-(t-s)%4;var h,d,f=!1,p=i[l][0];const g=i[c][0],m=i[c][1],v=i[c][2],b=i[c][3];if(m===v){f=!0,h=c+4;var y=l+4;for(n=1;n<u;n++,h+=4,y+=4)if(d=i[h],i[y][0]!==p||d[0]!==g||d[1]!==m||d[2]!==v||d[3]!==b){n<10?f=!1:u=n;break}}if(f){u=Math.min(u,1e3);var w=new Float32Array(2*u);for(h=c,n=0;n<u;n++,h+=4)d=i[h],w[n<<1]=d[4],w[1+(n<<1)]=d[5];a.splice(s,4*u,r.OPS.paintImageMaskXObjectRepeat),i.splice(s,4*u,[p,g,m,v,b,w])}else{u=Math.min(u,100);var x=[];for(n=0;n<u;n++){d=i[c+(n<<2)];var C=i[l+(n<<2)][0];x.push({data:C.data,width:C.width,height:C.height,transform:d})}a.splice(s,4*u,r.OPS.paintImageMaskXObjectGroup),i.splice(s,4*u,[x])}return s+1})),e(t,[r.OPS.save,r.OPS.transform,r.OPS.paintImageXObject,r.OPS.restore],(function(e){var t=e.argsArray,n=e.iCurr-2;return 0===t[n][1]&&0===t[n][2]}),(function(e,t){var n=e.fnArray,a=e.argsArray,i=(t-(e.iCurr-3))%4;switch(i){case 0:return n[t]===r.OPS.save;case 1:if(n[t]!==r.OPS.transform)return!1;var o=e.iCurr-2,s=a[o][0],c=a[o][3];return a[t][0]===s&&0===a[t][1]&&0===a[t][2]&&a[t][3]===c;case 2:if(n[t]!==r.OPS.paintImageXObject)return!1;var l=a[e.iCurr-1][0];return a[t][0]===l;case 3:return n[t]===r.OPS.restore}throw new Error(`iterateImageGroup - invalid pos: ${i}`)}),(function(e,t){var n=e.fnArray,a=e.argsArray,i=e.iCurr,o=i-3,s=i-2,c=a[i-1][0],l=a[s][0],u=a[s][3],h=Math.min(Math.floor((t-o)/4),1e3);if(h<3)return t-(t-o)%4;for(var d=new Float32Array(2*h),f=s,p=0;p<h;p++,f+=4){var g=a[f];d[p<<1]=g[4],d[1+(p<<1)]=g[5]}var m=[c,l,u,d];return n.splice(o,4*h,r.OPS.paintImageXObjectRepeat),a.splice(o,4*h,m),o+1})),e(t,[r.OPS.beginText,r.OPS.setFont,r.OPS.setTextMatrix,r.OPS.showText,r.OPS.endText],null,(function(e,t){var n=e.fnArray,a=e.argsArray,i=(t-(e.iCurr-4))%5;switch(i){case 0:return n[t]===r.OPS.beginText;case 1:return n[t]===r.OPS.setFont;case 2:return n[t]===r.OPS.setTextMatrix;case 3:if(n[t]!==r.OPS.showText)return!1;var o=e.iCurr-3,s=a[o][0],c=a[o][1];return a[t][0]===s&&a[t][1]===c;case 4:return n[t]===r.OPS.endText}throw new Error(`iterateShowTextGroup - invalid pos: ${i}`)}),(function(e,t){var n=e.fnArray,r=e.argsArray,a=e.iCurr,i=a-4,o=a-3,s=a-2,c=a-1,l=a,u=r[o][0],h=r[o][1],d=Math.min(Math.floor((t-i)/5),1e3);if(d<3)return t-(t-i)%5;var f=i;i>=4&&n[i-4]===n[o]&&n[i-3]===n[s]&&n[i-2]===n[c]&&n[i-1]===n[l]&&r[i-4][0]===u&&r[i-4][1]===h&&(d++,f-=5);for(var p=f+4,g=1;g<d;g++)n.splice(p,3),r.splice(p,3),p+=2;return p+1})),n.prototype={_optimize(){const e=this.queue.fnArray;let n=this.lastProcessed,r=e.length,a=this.state,i=this.match;if(!a&&!i&&n+1===r&&!t[e[n]])return void(this.lastProcessed=r);const o=this.context;for(;n<r;){if(i){if((0,i.iterateFn)(o,n)){n++;continue}if(n=(0,i.processFn)(o,n+1),r=e.length,i=null,a=null,n>=r)break}a=(a||t)[e[n]],a&&!Array.isArray(a)?(o.iCurr=n,n++,!a.checkFn||(0,a.checkFn)(o)?(i=a,a=null):a=null):n++}this.state=a,this.match=i,this.lastProcessed=n},push(e,t){this.queue.fnArray.push(e),this.queue.argsArray.push(t),this._optimize()},flush(){for(;this.match;){const e=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,e),this.match=null,this.state=null,this._optimize()}},reset(){this.state=null,this.match=null,this.lastProcessed=0}},n}(),i=function(){function e(e){this.queue=e}return e.prototype={push(e,t){this.queue.fnArray.push(e),this.queue.argsArray.push(t)},flush(){},reset(){}},e}(),o=function(){function e(e,t){this._streamSink=t,this.fnArray=[],this.argsArray=[],this.optimizer=t&&"oplist"!==e?new a(this):new i(this),this.dependencies=new Set,this._totalLength=0,this.weight=0,this._resolved=t?null:Promise.resolve()}return e.prototype={get length(){return this.argsArray.length},get ready(){return this._resolved||this._streamSink.ready},get totalLength(){return this._totalLength+this.length},addOp(e,t){this.optimizer.push(e,t),this.weight++,this._streamSink&&(this.weight>=1e3||this.weight>=995&&(e===r.OPS.restore||e===r.OPS.endText))&&this.flush()},addDependency(e){this.dependencies.has(e)||(this.dependencies.add(e),this.addOp(r.OPS.dependency,[e]))},addDependencies(e){for(const t of e)this.addDependency(t)},addOpList(t){if(t instanceof e){for(const e of t.dependencies)this.dependencies.add(e);for(var n=0,a=t.length;n<a;n++)this.addOp(t.fnArray[n],t.argsArray[n])}else(0,r.warn)('addOpList - ignoring invalid "opList" parameter.')},getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}},get _transfers(){const e=[],{fnArray:t,argsArray:n,length:a}=this;for(let i=0;i<a;i++)switch(t[i]){case r.OPS.paintInlineImageXObject:case r.OPS.paintInlineImageXObjectGroup:case r.OPS.paintImageMaskXObject:const t=n[i][0];t.cached||e.push(t.data.buffer)}return e},flush(e=!1){this.optimizer.flush();const t=this.length;this._totalLength+=t,this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:e,length:t},1,this._transfers),this.dependencies.clear(),this.fnArray.length=0,this.argsArray.length=0,this.weight=0,this.optimizer.reset()}},e}();t.OperatorList=o},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFImage=void 0;var r=n(2),a=n(5),i=n(23),o=n(12),s=n(18),c=n(21);function l(e,t,n,r){return(e=t+e*n)<0?e=0:e>r&&(e=r),e}function u(e,t,n,r,a,i){var o=a*i;let s;s=t<=8?new Uint8Array(o):t<=16?new Uint16Array(o):new Uint32Array(o);var c,l,u,h,d=n/a,f=r/i,p=0,g=new Uint16Array(a),m=n;for(c=0;c<a;c++)g[c]=Math.floor(c*d);for(c=0;c<i;c++)for(u=Math.floor(c*f)*m,l=0;l<a;l++)h=u+g[l],s[p++]=e[h];return s}class h{constructor({xref:e,res:t,image:n,isInline:o=!1,smask:s=null,mask:l=null,isMask:u=!1,pdfFunctionFactory:d,localColorSpaceCache:f}){this.image=n;var p=n.dict;const g=p.get("Filter");if((0,a.isName)(g))switch(g.name){case"JPXDecode":var m=new c.JpxImage;m.parseImageProperties(n.stream),n.stream.reset(),n.width=m.width,n.height=m.height,n.bitsPerComponent=m.bitsPerComponent,n.numComps=m.componentsCount;break;case"JBIG2Decode":n.bitsPerComponent=1,n.numComps=1}let v=p.get("Width","W"),b=p.get("Height","H");if(Number.isInteger(n.width)&&n.width>0&&Number.isInteger(n.height)&&n.height>0&&(n.width!==v||n.height!==b)&&((0,r.warn)("PDFImage - using the Width/Height of the image data, rather than the image dictionary."),v=n.width,b=n.height),v<1||b<1)throw new r.FormatError(`Invalid image width: ${v} or height: ${b}`);this.width=v,this.height=b,this.interpolate=p.get("Interpolate","I")||!1,this.imageMask=p.get("ImageMask","IM")||!1,this.matte=p.get("Matte")||!1;var y=n.bitsPerComponent;if(!y&&!(y=p.get("BitsPerComponent","BPC"))){if(!this.imageMask)throw new r.FormatError(`Bits per component missing in image: ${this.imageMask}`);y=1}if(this.bpc=y,!this.imageMask){let s=p.getRaw("ColorSpace")||p.getRaw("CS");if(!s)switch((0,r.info)("JPX images (which do not require color spaces)"),n.numComps){case 1:s=a.Name.get("DeviceGray");break;case 3:s=a.Name.get("DeviceRGB");break;case 4:s=a.Name.get("DeviceCMYK");break;default:throw new Error(`JPX images with ${n.numComps} color components not supported.`)}this.colorSpace=i.ColorSpace.parse({cs:s,xref:e,resources:o?t:null,pdfFunctionFactory:d,localColorSpaceCache:f}),this.numComps=this.colorSpace.numComps}if(this.decode=p.getArray("Decode","D"),this.needsDecode=!1,this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,y)||u&&!i.ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;var w=(1<<y)-1;this.decodeCoefficients=[],this.decodeAddends=[];const e=this.colorSpace&&"Indexed"===this.colorSpace.name;for(var x=0,C=0;x<this.decode.length;x+=2,++C){var k=this.decode[x],S=this.decode[x+1];this.decodeCoefficients[C]=e?(S-k)/w:S-k,this.decodeAddends[C]=e?k:w*k}}s?this.smask=new h({xref:e,res:t,image:s,isInline:o,pdfFunctionFactory:d,localColorSpaceCache:f}):l&&((0,a.isStream)(l)?l.dict.get("ImageMask","IM")?this.mask=new h({xref:e,res:t,image:l,isInline:o,isMask:!0,pdfFunctionFactory:d,localColorSpaceCache:f}):(0,r.warn)("Ignoring /Mask in image without /ImageMask."):this.mask=l)}static async buildImage({xref:e,res:t,image:n,isInline:i=!1,pdfFunctionFactory:o,localColorSpaceCache:s}){const c=n;let l=null,u=null;const d=n.dict.get("SMask"),f=n.dict.get("Mask");return d?l=d:f&&((0,a.isStream)(f)||Array.isArray(f)?u=f:(0,r.warn)("Unsupported mask format.")),new h({xref:e,res:t,image:c,isInline:i,smask:l,mask:u,pdfFunctionFactory:o,localColorSpaceCache:s})}static createMask({imgArray:e,width:t,height:n,imageIsFromDecodeStream:r,inverseDecode:a}){var i,o,s=(t+7>>3)*n,c=e.byteLength;if(!r||a&&s!==c)if(a)for((i=new Uint8ClampedArray(s)).set(e),o=c;o<s;o++)i[o]=255;else(i=new Uint8ClampedArray(c)).set(e);else i=e;if(a)for(o=0;o<c;o++)i[o]^=255;return{data:i,width:t,height:n}}get drawWidth(){return Math.max(this.width,this.smask&&this.smask.width||0,this.mask&&this.mask.width||0)}get drawHeight(){return Math.max(this.height,this.smask&&this.smask.height||0,this.mask&&this.mask.height||0)}decodeBuffer(e){var t,n,r=this.bpc,a=this.numComps,i=this.decodeAddends,o=this.decodeCoefficients,s=(1<<r)-1;if(1!==r){var c=0;for(t=0,n=this.width*this.height;t<n;t++)for(var u=0;u<a;u++)e[c]=l(e[c],i[u],o[u],s),c++}else for(t=0,n=e.length;t<n;t++)e[t]=+!e[t]}getComponents(e){var t=this.bpc;if(8===t)return e;var n=this.width,r=this.height,a=this.numComps,i=n*r*a,o=0;let s;s=t<=8?new Uint8Array(i):t<=16?new Uint16Array(i):new Uint32Array(i);var c,l,u=n*a,h=(1<<t)-1,d=0;if(1===t)for(var f,p,g,m=0;m<r;m++){for(p=d+(-8&u),g=d+u;d<p;)l=e[o++],s[d]=l>>7&1,s[d+1]=l>>6&1,s[d+2]=l>>5&1,s[d+3]=l>>4&1,s[d+4]=l>>3&1,s[d+5]=l>>2&1,s[d+6]=l>>1&1,s[d+7]=1&l,d+=8;if(d<g)for(l=e[o++],f=128;d<g;)s[d++]=+!!(l&f),f>>=1}else{var v=0;for(l=0,d=0,c=i;d<c;++d){for(d%u==0&&(l=0,v=0);v<t;)l=l<<8|e[o++],v+=8;var b=v-t;let n=l>>b;n<0?n=0:n>h&&(n=h),s[d]=n,l&=(1<<b)-1,v=b}}return s}fillOpacity(e,t,n,a,i){var o,s,c,l,d,f,p=this.smask,g=this.mask;if(p)s=p.width,c=p.height,o=new Uint8ClampedArray(s*c),p.fillGrayBuffer(o),s===t&&c===n||(o=u(o,p.bpc,s,c,t,n));else if(g)if(g instanceof h){for(s=g.width,c=g.height,o=new Uint8ClampedArray(s*c),g.numComps=1,g.fillGrayBuffer(o),l=0,d=s*c;l<d;++l)o[l]=255-o[l];s===t&&c===n||(o=u(o,g.bpc,s,c,t,n))}else{if(!Array.isArray(g))throw new r.FormatError("Unknown mask format.");o=new Uint8ClampedArray(t*n);var m=this.numComps;for(l=0,d=t*n;l<d;++l){var v=0,b=l*m;for(f=0;f<m;++f){var y=i[b+f],w=2*f;if(y<g[w]||y>g[w+1]){v=255;break}}o[l]=v}}if(o)for(l=0,f=3,d=t*a;l<d;++l,f+=4)e[f]=o[l];else for(l=0,f=3,d=t*a;l<d;++l,f+=4)e[f]=255}undoPreblend(e,t,n){var r=this.smask&&this.smask.matte;if(r)for(var a=this.colorSpace.getRgb(r,0),i=a[0],o=a[1],s=a[2],c=t*n*4,l=0;l<c;l+=4){var u=e[l+3];if(0!==u){var h=255/u;e[l]=(e[l]-i)*h+i,e[l+1]=(e[l+1]-o)*h+o,e[l+2]=(e[l+2]-s)*h+s}else e[l]=255,e[l+1]=255,e[l+2]=255}}createImageData(e=!1){var t,n=this.drawWidth,a=this.drawHeight,i={width:n,height:a,kind:0,data:null},c=this.numComps,l=this.width,u=this.height,h=this.bpc,d=l*c*h+7>>3;if(!e){var f;if("DeviceGray"===this.colorSpace.name&&1===h?f=r.ImageKind.GRAYSCALE_1BPP:"DeviceRGB"!==this.colorSpace.name||8!==h||this.needsDecode||(f=r.ImageKind.RGB_24BPP),f&&!this.smask&&!this.mask&&n===l&&a===u){if(i.kind=f,t=this.getImageBytes(u*d),this.image instanceof o.DecodeStream)i.data=t;else{var p=new Uint8ClampedArray(t.length);p.set(t),i.data=p}if(this.needsDecode){(0,r.assert)(f===r.ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");for(var g=i.data,m=0,v=g.length;m<v;m++)g[m]^=255}return i}if(this.image instanceof s.JpegStream&&!this.smask&&!this.mask){let e=u*d;switch(this.colorSpace.name){case"DeviceGray":e*=3;case"DeviceRGB":case"DeviceCMYK":return i.kind=r.ImageKind.RGB_24BPP,i.data=this.getImageBytes(e,n,a,!0),i}}}var b,y,w=0|(t=this.getImageBytes(u*d)).length/d*a/u,x=this.getComponents(t);return e||this.smask||this.mask?(i.kind=r.ImageKind.RGBA_32BPP,i.data=new Uint8ClampedArray(n*a*4),b=1,y=!0,this.fillOpacity(i.data,n,a,w,x)):(i.kind=r.ImageKind.RGB_24BPP,i.data=new Uint8ClampedArray(n*a*3),b=0,y=!1),this.needsDecode&&this.decodeBuffer(x),this.colorSpace.fillRgb(i.data,l,u,n,a,w,h,x,b),y&&this.undoPreblend(i.data,n,w),i}fillGrayBuffer(e){var t=this.numComps;if(1!==t)throw new r.FormatError(`Reading gray scale from a color image: ${t}`);var n,a,i=this.width,o=this.height,s=this.bpc,c=i*t*s+7>>3,l=this.getImageBytes(o*c),u=this.getComponents(l);if(1!==s){this.needsDecode&&this.decodeBuffer(u),a=i*o;var h=255/((1<<s)-1);for(n=0;n<a;++n)e[n]=h*u[n]}else if(a=i*o,this.needsDecode)for(n=0;n<a;++n)e[n]=u[n]-1&255;else for(n=0;n<a;++n)e[n]=255&-u[n]}getImageBytes(e,t,n,r=!1){return this.image.reset(),this.image.drawWidth=t||this.width,this.image.drawHeight=n||this.height,this.image.forceRGB=!!r,this.image.getBytes(e,!0)}}t.PDFImage=h},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.incrementalUpdate=function({originalData:e,xrefInfo:t,newRefs:n,xref:l=null,datasetsRef:d=null}){!function(e,t,n){if(null===e||null===n)return;const a=n.fetchIfRef(e),s=(0,r.bytesToString)(a.getBytes()),c=new o.SimpleXMLParser({hasAttributes:!0}).parseFromString(s);for(const{xfa:e}of t){if(!e)continue;const{path:t,value:n}=e;if(!t)continue;const a=c.documentElement.searchNode((0,i.parseXFAPath)(t),0);a?a.childNodes=[new o.SimpleDOMNode("#text",n)]:(0,r.warn)(`Node not found for path: ${t}`)}const l=[];c.documentElement.dump(l);let u=l.join("");const h=n.encrypt;h&&(u=h.createCipherTransform(e.num,e.gen).encryptString(u));const d=`${e.num} ${e.gen} obj\n<< /Type /EmbeddedFile /Length ${u.length}>>\nstream\n`+u+"\nendstream\nendobj\n";t.push({ref:e,data:d})}(d,n,l);const f=new a.Dict(null),p=t.newRef;let g,m;const v=e[e.length-1];10===v||13===v?(g=[],m=e.length):(g=["\n"],m=e.length+1),f.set("Size",p.num+1),f.set("Prev",t.startXRef),f.set("Type",a.Name.get("XRef")),null!==t.rootRef&&f.set("Root",t.rootRef),null!==t.infoRef&&f.set("Info",t.infoRef),null!==t.encrypt&&f.set("Encrypt",t.encrypt),n.push({ref:p,data:""}),n=n.sort(((e,t)=>e.ref.num-t.ref.num));const b=[[0,1,65535]],y=[0,1];let w=0;for(const{ref:e,data:t}of n)w=Math.max(w,m),b.push([1,m,Math.min(e.gen,65535)]),m+=t.length,y.push(e.num),y.push(1),g.push(t);if(f.set("Index",y),0!==t.fileIds.length){const e=function(e,t){const n=Math.floor(Date.now()/1e3),a=t.filename||"",i=[n.toString(),a,e.toString()];let o=i.reduce(((e,t)=>e+t.length),0);for(const e of Object.values(t.info))i.push(e),o+=e.length;const c=new Uint8Array(o);let l=0;for(const e of i)h(e,l,c),l+=e.length;return(0,r.bytesToString)((0,s.calculateMD5)(c))}(m,t);f.set("ID",[t.fileIds[0],e])}const x=[1,Math.ceil(Math.log2(w)/8),2],C=(x[0]+x[1]+x[2])*b.length;f.set("W",x),f.set("Length",C),g.push(`${p.num} ${p.gen} obj\n`),c(f,g,null),g.push(" stream\n");const k=g.reduce(((e,t)=>e+t.length),0),S=`\nendstream\nendobj\nstartxref\n${m}\n%%EOF\n`,A=new Uint8Array(e.length+k+C+S.length);A.set(e);let _=e.length;for(const e of g)h(e,_,A),_+=e.length;for(const[e,t,n]of b)_=u(e,x[0],_,A),_=u(t,x[1],_,A),_=u(n,x[2],_,A);return h(S,_,A),A},t.writeDict=c;var r=n(2),a=n(5),i=n(8),o=n(47),s=n(22);function c(e,t,n){t.push("<<");for(const r of e.getKeys())t.push(` /${(0,i.escapePDFName)(r)} `),l(e.getRaw(r),t,n);t.push(">>")}function l(e,t,n){(0,a.isName)(e)?t.push(`/${(0,i.escapePDFName)(e.name)}`):(0,a.isRef)(e)?t.push(`${e.num} ${e.gen} R`):Array.isArray(e)?function(e,t,n){t.push("[");let r=!0;for(const a of e)r?r=!1:t.push(" "),l(a,t,n);t.push("]")}(e,t,n):"string"==typeof e?(null!==n&&(e=n.encryptString(e)),t.push(`(${(0,r.escapeString)(e)})`)):"number"==typeof e?t.push(function(e){if(Number.isInteger(e))return e.toString();const t=Math.round(100*e);return t%100==0?(t/100).toString():t%10==0?e.toFixed(1):e.toFixed(2)}(e)):(0,a.isDict)(e)?c(e,t,n):(0,a.isStream)(e)&&function(e,t,n){c(e.dict,t,n),t.push(" stream\n");let a=(0,r.bytesToString)(e.getBytes());null!==n&&(a=n.encryptString(a)),t.push(a),t.push("\nendstream\n")}(e,t,n)}function u(e,t,n,r){for(let a=t+n-1;a>n-1;a--)r[a]=255&e,e>>=8;return n+t}function h(e,t,n){for(let r=0,a=e.length;r<a;r++)n[t+r]=255&e.charCodeAt(r)}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleXMLParser=t.SimpleDOMNode=void 0;var r=n(2);function a(e,t){const n=e[t];return" "===n||"\n"===n||"\r"===n||"\t"===n}class i{constructor(e,t){this.nodeName=e,this.nodeValue=t,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const e=this.parentNode.childNodes;if(!e)return;const t=e.indexOf(this);return-1!==t?e[t+1]:void 0}get textContent(){return this.childNodes?this.childNodes.map((function(e){return e.textContent})).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}searchNode(e,t){if(t>=e.length)return this;const n=e[t],r=[];let a=this;for(;;){if(n.name===a.nodeName){if(0!==n.pos){if(0===r.length)return null;{const[i]=r.pop();let o=0;for(const r of i.childNodes)if(n.name===r.nodeName){if(o===n.pos)return r.searchNode(e,t+1);o++}return a.searchNode(e,t+1)}}{const n=a.searchNode(e,t+1);if(null!==n)return n}}if(a.childNodes&&0!==a.childNodes.length)r.push([a,0]),a=a.childNodes[0];else{if(0===r.length)return null;for(;0!==r.length;){const[e,t]=r.pop(),n=t+1;if(n<e.childNodes.length){r.push([e,n]),a=e.childNodes[n];break}}if(0===r.length)return null}}}dump(e){if("#text"!==this.nodeName){if(e.push(`<${this.nodeName}`),this.attributes)for(const t of this.attributes)e.push(` ${t.name}="${(0,r.encodeToXmlString)(t.value)}"`);if(this.hasChildNodes()){e.push(">");for(const t of this.childNodes)t.dump(e);e.push(`</${this.nodeName}>`)}else this.nodeValue?e.push(`>${(0,r.encodeToXmlString)(this.nodeValue)}</${this.nodeName}>`):e.push("/>")}else e.push((0,r.encodeToXmlString)(this.nodeValue))}}t.SimpleDOMNode=i,t.SimpleXMLParser=class extends class{_resolveEntities(e){return e.replace(/&([^;]+);/g,((e,t)=>{if("#x"===t.substring(0,2))return String.fromCodePoint(parseInt(t.substring(2),16));if("#"===t.substring(0,1))return String.fromCodePoint(parseInt(t.substring(1),10));switch(t){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(t)}))}_parseContent(e,t){const n=[];let r=t;function i(){for(;r<e.length&&a(e,r);)++r}for(;r<e.length&&!a(e,r)&&">"!==e[r]&&"/"!==e[r];)++r;const o=e.substring(t,r);for(i();r<e.length&&">"!==e[r]&&"/"!==e[r]&&"?"!==e[r];){i();let t="",o="";for(;r<e.length&&!a(e,r)&&"="!==e[r];)t+=e[r],++r;if(i(),"="!==e[r])return null;++r,i();const s=e[r];if('"'!==s&&"'"!==s)return null;const c=e.indexOf(s,++r);if(c<0)return null;o=e.substring(r,c),n.push({name:t,value:this._resolveEntities(o)}),r=c+1,i()}return{name:o,attributes:n,parsed:r-t}}_parseProcessingInstruction(e,t){let n=t;for(;n<e.length&&!a(e,n)&&">"!==e[n]&&"/"!==e[n];)++n;const r=e.substring(t,n);!function(){for(;n<e.length&&a(e,n);)++n}();const i=n;for(;n<e.length&&("?"!==e[n]||">"!==e[n+1]);)++n;return{name:r,value:e.substring(i,n),parsed:n-t}}parseXml(e){let t=0;for(;t<e.length;){let n=t;if("<"===e[t]){let t;switch(++n,e[n]){case"/":if(++n,t=e.indexOf(">",n),t<0)return void this.onError(-9);this.onEndElement(e.substring(n,t)),n=t+1;break;case"?":++n;const r=this._parseProcessingInstruction(e,n);if("?>"!==e.substring(n+r.parsed,n+r.parsed+2))return void this.onError(-3);this.onPi(r.name,r.value),n+=r.parsed+2;break;case"!":if("--"===e.substring(n+1,n+3)){if(t=e.indexOf("--\x3e",n+3),t<0)return void this.onError(-5);this.onComment(e.substring(n+3,t)),n=t+3}else if("[CDATA["===e.substring(n+1,n+8)){if(t=e.indexOf("]]>",n+8),t<0)return void this.onError(-2);this.onCdata(e.substring(n+8,t)),n=t+3}else{if("DOCTYPE"!==e.substring(n+1,n+8))return void this.onError(-6);{const r=e.indexOf("[",n+8);let a=!1;if(t=e.indexOf(">",n+8),t<0)return void this.onError(-4);if(r>0&&t>r){if(t=e.indexOf("]>",n+8),t<0)return void this.onError(-4);a=!0}const i=e.substring(n+8,t+(a?1:0));this.onDoctype(i),n=t+(a?2:1)}}break;default:const a=this._parseContent(e,n);if(null===a)return void this.onError(-6);let i=!1;if("/>"===e.substring(n+a.parsed,n+a.parsed+2))i=!0;else if(">"!==e.substring(n+a.parsed,n+a.parsed+1))return void this.onError(-9);this.onBeginElement(a.name,a.attributes,i),n+=a.parsed+(i?2:1)}}else{for(;n<e.length&&"<"!==e[n];)n++;const r=e.substring(t,n);this.onText(this._resolveEntities(r))}t=n}}onResolveEntity(e){return`&${e};`}onPi(e,t){}onComment(e){}onCdata(e){}onDoctype(e){}onText(e){}onBeginElement(e,t,n){}onEndElement(e){}onError(e){}}{constructor({hasAttributes:e=!1,lowerCaseName:t=!1}){super(),this._currentFragment=null,this._stack=null,this._errorCode=0,this._hasAttributes=e,this._lowerCaseName=t}parseFromString(e){if(this._currentFragment=[],this._stack=[],this._errorCode=0,this.parseXml(e),0!==this._errorCode)return;const[t]=this._currentFragment;return t?{documentElement:t}:void 0}onResolveEntity(e){switch(e){case"apos":return"'"}return super.onResolveEntity(e)}onText(e){if(function(e){for(let t=0,n=e.length;t<n;t++)if(!a(e,t))return!1;return!0}(e))return;const t=new i("#text",e);this._currentFragment.push(t)}onCdata(e){const t=new i("#text",e);this._currentFragment.push(t)}onBeginElement(e,t,n){this._lowerCaseName&&(e=e.toLowerCase());const r=new i(e);r.childNodes=[],this._hasAttributes&&(r.attributes=t),this._currentFragment.push(r),n||(this._stack.push(this._currentFragment),this._currentFragment=r.childNodes)}onEndElement(e){this._currentFragment=this._stack.pop()||[];const t=this._currentFragment[this._currentFragment.length-1];if(t)for(let e=0,n=t.childNodes.length;e<n;e++)t.childNodes[e].parentNode=t}onError(e){this._errorCode=e}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var r=n(2);function a(e){if("object"!=typeof e||null===e)return e;switch(e.name){case"AbortException":return new r.AbortException(e.message);case"MissingPDFException":return new r.MissingPDFException(e.message);case"UnexpectedResponseException":return new r.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new r.UnknownErrorException(e.message,e.details);default:return new r.UnknownErrorException(e.message,e.toString())}}t.MessageHandler=class{constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void this._processStreamMessage(t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],1===t.callback)n.resolve(t.data);else{if(2!==t.callback)throw new Error("Unexpected callback case");n.reject(a(t.reason))}return}const r=this.actionHandler[t.action];if(!r)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const e=this.sourceName,i=t.sourceName;new Promise((function(e){e(r(t.data))})).then((function(r){n.postMessage({sourceName:e,targetName:i,callback:1,callbackId:t.callbackId,data:r})}),(function(r){n.postMessage({sourceName:e,targetName:i,callback:2,callbackId:t.callbackId,reason:a(r)})}))}else t.streamId?this._createStreamSink(t):r(t.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const a=this.callbackId++,i=(0,r.createPromiseCapability)();this.callbackCapabilities[a]=i;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:a,data:t},n)}catch(e){i.reject(e)}return i.promise}sendWithStream(e,t,n,i){const o=this.streamId++,s=this.sourceName,c=this.targetName,l=this.comObj;return new ReadableStream({start:n=>{const a=(0,r.createPromiseCapability)();return this.streamControllers[o]={controller:n,startCall:a,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:s,targetName:c,action:e,streamId:o,data:t,desiredSize:n.desiredSize},i),a.promise},pull:e=>{const t=(0,r.createPromiseCapability)();return this.streamControllers[o].pullCall=t,l.postMessage({sourceName:s,targetName:c,stream:6,streamId:o,desiredSize:e.desiredSize}),t.promise},cancel:e=>{(0,r.assert)(e instanceof Error,"cancel must have a valid reason");const t=(0,r.createPromiseCapability)();return this.streamControllers[o].cancelCall=t,this.streamControllers[o].isClosed=!0,l.postMessage({sourceName:s,targetName:c,stream:1,streamId:o,reason:a(e)}),t.promise}},n)}_createStreamSink(e){const t=this,n=this.actionHandler[e.action],i=e.streamId,o=this.sourceName,s=e.sourceName,c=this.comObj,l={enqueue(e,n=1,a){if(this.isCancelled)return;const c=this.desiredSize;this.desiredSize-=n,c>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),t._postMessage({sourceName:o,targetName:s,stream:4,streamId:i,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,c.postMessage({sourceName:o,targetName:s,stream:3,streamId:i}),delete t.streamSinks[i])},error(e){(0,r.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,c.postMessage({sourceName:o,targetName:s,stream:5,streamId:i,reason:a(e)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[i]=l,new Promise((function(t){t(n(e.data,l))})).then((function(){c.postMessage({sourceName:o,targetName:s,stream:8,streamId:i,success:!0})}),(function(e){c.postMessage({sourceName:o,targetName:s,stream:8,streamId:i,reason:a(e)})}))}_processStreamMessage(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj;switch(e.stream){case 8:e.success?this.streamControllers[t].startCall.resolve():this.streamControllers[t].startCall.reject(a(e.reason));break;case 7:e.success?this.streamControllers[t].pullCall.resolve():this.streamControllers[t].pullCall.reject(a(e.reason));break;case 6:if(!this.streamSinks[t]){o.postMessage({sourceName:n,targetName:i,stream:7,streamId:t,success:!0});break}this.streamSinks[t].desiredSize<=0&&e.desiredSize>0&&this.streamSinks[t].sinkCapability.resolve(),this.streamSinks[t].desiredSize=e.desiredSize;const{onPull:s}=this.streamSinks[e.streamId];new Promise((function(e){e(s&&s())})).then((function(){o.postMessage({sourceName:n,targetName:i,stream:7,streamId:t,success:!0})}),(function(e){o.postMessage({sourceName:n,targetName:i,stream:7,streamId:t,reason:a(e)})}));break;case 4:if((0,r.assert)(this.streamControllers[t],"enqueue should have stream controller"),this.streamControllers[t].isClosed)break;this.streamControllers[t].controller.enqueue(e.chunk);break;case 3:if((0,r.assert)(this.streamControllers[t],"close should have stream controller"),this.streamControllers[t].isClosed)break;this.streamControllers[t].isClosed=!0,this.streamControllers[t].controller.close(),this._deleteStreamController(t);break;case 5:(0,r.assert)(this.streamControllers[t],"error should have stream controller"),this.streamControllers[t].controller.error(a(e.reason)),this._deleteStreamController(t);break;case 2:e.success?this.streamControllers[t].cancelCall.resolve():this.streamControllers[t].cancelCall.reject(a(e.reason)),this._deleteStreamController(t);break;case 1:if(!this.streamSinks[t])break;const{onCancel:c}=this.streamSinks[e.streamId];new Promise((function(t){t(c&&c(a(e.reason)))})).then((function(){o.postMessage({sourceName:n,targetName:i,stream:2,streamId:t,success:!0})}),(function(e){o.postMessage({sourceName:n,targetName:i,stream:2,streamId:t,reason:a(e)})})),this.streamSinks[t].sinkCapability.reject(a(e.reason)),this.streamSinks[t].isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(e){await Promise.allSettled([this.streamControllers[e].startCall,this.streamControllers[e].pullCall,this.streamControllers[e].cancelCall].map((function(e){return e&&e.promise}))),delete this.streamControllers[e]}_postMessage(e,t){t&&this.postMessageTransfers?this.comObj.postMessage(e,t):this.comObj.postMessage(e)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFWorkerStream=void 0;var r=n(2);t.PDFWorkerStream=class{constructor(e){this._msgHandler=e,this._contentLength=null,this._fullRequestReader=null,this._rangeRequestReaders=[]}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._msgHandler),this._fullRequestReader}getRangeReader(e,t){const n=new i(e,t,this._msgHandler);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeRequestReaders.slice(0).forEach((function(t){t.cancel(e)}))}};class a{constructor(e){this._msgHandler=e,this.onProgress=null,this._contentLength=null,this._isRangeSupported=!1,this._isStreamingSupported=!1;const t=this._msgHandler.sendWithStream("GetReader");this._reader=t.getReader(),this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then((e=>{this._isStreamingSupported=e.isStreamingSupported,this._isRangeSupported=e.isRangeSupported,this._contentLength=e.contentLength}))}get headersReady(){return this._headersReady}get contentLength(){return this._contentLength}get isStreamingSupported(){return this._isStreamingSupported}get isRangeSupported(){return this._isRangeSupported}async read(){const{value:e,done:t}=await this._reader.read();return t?{value:void 0,done:!0}:{value:e.buffer,done:!1}}cancel(e){this._reader.cancel(e)}}class i{constructor(e,t,n){this._msgHandler=n,this.onProgress=null;const r=this._msgHandler.sendWithStream("GetRangeReader",{begin:e,end:t});this._reader=r.getReader()}get isStreamingSupported(){return!1}async read(){const{value:e,done:t}=await this._reader.read();return t?{value:void 0,done:!0}:{value:e.buffer,done:!1}}cancel(e){this._reader.cancel(e)}}}],t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(0)})()},e.exports=t()},902:()=>{},522:()=>{},753:()=>{},730:()=>{},414:()=>{},172:()=>{},1:()=>{},779:()=>{},558:()=>{},258:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function r(){return Object.create(null)}function a(e){e.forEach(n)}function i(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e){return 0===Object.keys(e).length}function c(e,n,r,a){return e[1]&&a?t(r.ctx.slice(),e[1](a(n))):r.ctx}function l(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function u(e,t){const n={};t=new Set(t);for(const r in e)t.has(r)||"$"===r[0]||(n[r]=e[r]);return n}function h(e,t){e.appendChild(t)}function d(e,t,n){e.insertBefore(t,n||null)}function f(e){e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function g(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function v(){return m(" ")}function b(){return m("")}function y(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function w(e){return function(t){return t.preventDefault(),e.call(this,t)}}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function C(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)null==t[r]?e.removeAttribute(r):"style"===r?e.style.cssText=t[r]:"__value"===r?e.value=e[r]=t[r]:n[r]&&n[r].set?e[r]=t[r]:x(e,r,t[r])}function k(e){return""===e?null:+e}function S(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function A(e,t){e.value=null==t?"":t}let _,E;function I(){if(void 0===_){_=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){_=!0}}return _}function T(e){E=e}function R(){if(!E)throw new Error("Function called outside component initialization");return E}function F(e){R().$$.on_mount.push(e)}function P(e){R().$$.on_destroy.push(e)}function D(e,t){R().$$.context.set(e,t)}function O(e){return R().$$.context.get(e)}new Set,new Set;const N=[],M=[],L=[],B=[],U=Promise.resolve();let j=!1;function q(e){L.push(e)}function z(e){B.push(e)}let W=!1;const G=new Set;function H(){if(!W){W=!0;do{for(let e=0;e<N.length;e+=1){const t=N[e];T(t),V(t.$$)}for(T(null),N.length=0;M.length;)M.pop()();for(let e=0;e<L.length;e+=1){const t=L[e];G.has(t)||(G.add(t),t())}L.length=0}while(N.length);for(;B.length;)B.pop()();j=!1,W=!1,G.clear()}}function V(e){if(null!==e.fragment){e.update(),a(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(q)}}const $=new Set;let X;function K(){X={r:0,c:[],p:X}}function Y(){X.r||a(X.c),X=X.p}function J(e,t){e&&e.i&&($.delete(e),e.i(t))}function Z(e,t,n,r){if(e&&e.o){if($.has(e))return;$.add(e),X.c.push((()=>{$.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const Q="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;let ee;function te(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function ne(e){e&&e.c()}function re(e,t,r,o){const{fragment:s,on_mount:c,on_destroy:l,after_update:u}=e.$$;s&&s.m(t,r),o||q((()=>{const t=c.map(n).filter(i);l?l.push(...t):a(t),e.$$.on_mount=[]})),u.forEach(q)}function ae(e,t){const n=e.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ie(t,n,i,o,s,c,l=[-1]){const u=E;T(t);const h=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:s,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:r(),dirty:l,skip_bound:!1};let d=!1;if(h.ctx=i?i(t,n.props||{},((e,n,...r)=>{const a=r.length?r[0]:n;return h.ctx&&s(h.ctx[e],h.ctx[e]=a)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](a),d&&function(e,t){-1===e.$$.dirty[0]&&(N.push(e),j||(j=!0,U.then(H)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],h.update(),d=!0,a(h.before_update),h.fragment=!!o&&o(h.ctx),n.target){if(n.hydrate){const e=(p=n.target,Array.from(p.childNodes));h.fragment&&h.fragment.l(e),e.forEach(f)}else h.fragment&&h.fragment.c();n.intro&&J(t.$$.fragment),re(t,n.target,n.anchor,n.customElement),H()}var p;T(u)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(ee=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(n).filter(i);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){a(this.$$.on_disconnect)}$destroy(){ae(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!s(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class oe{$destroy(){ae(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!s(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const se=()=>Math.random().toString(36).substr(2,9);class ce{constructor(e){this.value=e,this._subscribersQueue={}}get getValue(){return this.value}subscribe(e){const t=se();return this._subscribersQueue[t]=e,e(this.getValue),()=>{delete this._subscribersQueue[t]}}setValue(e){this.value=e;for(const e in this._subscribersQueue)(0,this._subscribersQueue[e])(this.value)}}function le(e){try{return decodeURIComponent(e)}catch(t){console.warn(`[Easyroute] Could not decode query string: ${e}`)}return e}const ue=(e,t="nestingDepth")=>Math.max(...e.map((e=>e[t])));class he{static getQueryParams(e){return function(e){const t={};return"string"!=typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((e=>{const n=e.replace(/\+/g," ").split("="),r=le(n.shift()),a=n.length>0?le(n.join("=")):null;void 0===t[r]?t[r]=a:Array.isArray(t[r])?null!==a&&t[r].push(a):null!==a&&(t[r]=[t[r],a])})),t):t}(e)}static getPathParams(e,t){let n=e.regexpPath.exec(t);if(!n)return{};n=n.slice(1,n.length);const r={};for(let t=0;t<n.length;t++){const a=n[t],i=e.pathKeys[t];r[String(i)]=a}return r}static createRouteObject(e,t){var n;const r=(e=e.filter(Boolean)).find((t=>t.nestingDepth===ue(e))),[a,i]=t.split("?");return r?{params:he.getPathParams(r,a),query:he.getQueryParams(i),name:r.name,fullPath:t,meta:null!==(n=r.meta)&&void 0!==n?n:{}}:{params:{},query:{},fullPath:""}}}class de{constructor(e){this.history=[],this.currentHistoryPosition=0,this.appendHistory(e)}appendHistory(e){Array.isArray(e)?(this.history.push(...e),this.currentHistoryPosition+=e.length):(this.history.push(e),this.currentHistoryPosition++)}back(){return this.go(-1)}go(e){var t,n;const r=this.currentHistoryPosition+e,a=this.history[r];return a?(this.currentHistoryPosition=r,null!==(t=null==a?void 0:a.fullPath)&&void 0!==t?t:""):null!==(n=this.history[0].fullPath)&&void 0!==n?n:""}}const fe=(e,t)=>Boolean(t)?e.replace(t,""):e,pe=e=>e.replace(/\/$/,"");function ge(){this.parseRoute(fe(`${pe(window.location.pathname)}/${window.location.search}`,this.base),!0),window.addEventListener("popstate",(e=>{e.state?this.parseRoute(fe(e.state.url,this.base),!1):this.parseRoute("/",!1)}))}function me(){this.parseRoute(fe(window.location.hash,this.base)||"/"),window.addEventListener("hashchange",(()=>{this.ignoreEvents?this.ignoreEvents=!1:this.parseRoute(fe(window.location.hash,this.base))}))}async function ve(e){if(!/(\.then|import\(.+\)|vitePreload|_+import_+)/i.test(e.toString()))return e;try{return(await e()).default}catch(t){return console.warn(`[Easyroute] caught an error while trying to download async component: "${t.message}"`),e}}const be=e=>e.replace(/^\//,""),ye=e=>be(pe(e));function we(e,t=null,n=0,r="/"){return e.reduce(((e,a)=>{var i;const o=a.component&&{component:a.component}||a.components&&{components:a.components},s=ye(r)+"/"+ye(a.path),{pattern:c,keys:l}=function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,a,i,o=[],s="",c=e.split("/");for(c[0]||c.shift();a=c.shift();)"*"===(n=a[0])?(o.push("wild"),s+="/(.*)"):":"===n?(r=a.indexOf("?",1),i=a.indexOf(".",1),o.push(a.substring(1,~r?r:~i?i:a.length)),s+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(s+=(~r?"?":"")+"\\"+a.substring(i))):s+="/"+a;return{keys:o,pattern:new RegExp("^"+s+"/?$","i")}}(s),u={...a,...o,parentId:t,nestingDepth:n,path:s,id:se(),regexpPath:c,pathKeys:l};return Array.isArray(a.children)&&(e=e.concat(we(null!==(i=u.children)&&void 0!==i?i:[],u.id,n+1,u.path))),e.concat(u)}),[])}const xe=!("undefined"!=typeof window&&void 0!==window.document);function Ce(e){let t=e;if(-1!==t.indexOf("ms")){if(-1!==t.indexOf(",")){let e=t.split(",");e.sort((function(e,t){return Number(t.trim().replace("ms",""))-Number(e.trim().replace("ms",""))})),t=e[0]}t=t.replace("ms",""),t=Number(t)}else if(-1!==t.indexOf("s")){if(-1!==t.indexOf(",")){let e=t.split(",");e.sort((function(e,t){return Number(t.trim().replace("s",""))-Number(e.trim().replace("s",""))})),t=e[0]}0===t.indexOf(".")&&(t="0"+t),t=t.replace("s",""),t=1e3*Number(t)}return t}function ke(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}function Se(e){let t,n,r;var a=e[0];function i(e){return{props:{router:e[4],outlet:e[2]}}}return a&&(t=new a(i(e))),{c(){t&&ne(t.$$.fragment),n=b()},m(e,a){t&&re(t,e,a),d(e,n,a),r=!0},p(e,r){const o={};if(4&r&&(o.outlet=e[2]),a!==(a=e[0])){if(t){K();const e=t;Z(e.$$.fragment,1,0,(()=>{ae(e,1)})),Y()}a?(t=new a(i(e)),ne(t.$$.fragment),J(t.$$.fragment,1),re(t,n.parentNode,n)):t=null}else a&&t.$set(o)},i(e){r||(t&&J(t.$$.fragment,e),r=!0)},o(e){t&&Z(t.$$.fragment,e),r=!1},d(e){e&&f(n),t&&ae(t,e)}}}function Ae(e){let n,r,a,i=e[3]&&Se(e),o=[{class:r="easyroute-outlet"+(e[6]?` ${e[6]}`:"")+(e[1]?` ${e[1]}`:"")},e[5]],s={};for(let e=0;e<o.length;e+=1)s=t(s,o[e]);return{c(){n=p("div"),i&&i.c(),C(n,s)},m(t,r){d(t,n,r),i&&i.m(n,null),e[10](n),a=!0},p(e,[t]){e[3]?i?(i.p(e,t),8&t&&J(i,1)):(i=Se(e),i.c(),J(i,1),i.m(n,null)):i&&(K(),Z(i,1,1,(()=>{i=null})),Y()),C(n,s=function(e,t){const n={},r={},a={$$scope:1};let i=e.length;for(;i--;){const o=e[i],s=t[i];if(s){for(const e in o)e in s||(r[e]=1);for(const e in s)a[e]||(n[e]=s[e],a[e]=1);e[i]=s}else for(const e in o)a[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}(o,[(!a||2&t&&r!==(r="easyroute-outlet"+(e[6]?` ${e[6]}`:"")+(e[1]?` ${e[1]}`:"")))&&{class:r},e[5]]))},i(e){a||(J(i),a=!0)},o(e){Z(i),a=!1},d(t){t&&f(n),i&&i.d(),e[10](null)}}}function _e(e,n,r){const a=["transition","forceRemount","name"];let i=u(n,a),{transition:o=null}=n,{forceRemount:s=!1}=n,{name:c="default"}=n;const h=!("undefined"!=typeof window&&void 0!==window.document),d=O("easyrouteContext"),f=d&&d.depth+1||0,p=d?d.router:null,g=Object.assign({},n),m=i.class,v=h?null:o?function(e){let t=0,n=0;for(let r=0;r<document.styleSheets.length;r++){let a=document.styleSheets[r].rules;for(let r=0;r<a.length;r++)a[r].selectorText&&(-1!==a[r].selectorText.indexOf(`.${e}-enter-active`)&&(t=Ce(a[r].style.transitionDuration)),-1!==a[r].selectorText.indexOf(`.${e}-leave-active`)&&(n=Ce(a[r].style.transitionDuration)))}return{enteringDuration:t,leavingDuration:n}}(o):null;let b,y=null,w="",x=null,C=null,k=h;if(delete g.class,!p)throw new Error("[Easyroute] RouterOutlet: no router instance found. Did you forget to wrap your root component with <EasyrouteProvider>?");async function S(e,t){if(x!==t.id||s){if(v){r(1,w=`${o}-leave-active ${o}-leave-to`),await ke(v.leavingDuration+10),r(1,w+=` ${o}-leave`);const n=[...p.transitionOutHooks];t.transitionOut&&n.push(t.transitionOut),await p.runHooksArray(n,p.currentRouteData.getValue,p.currentRouteFromData.getValue,"transition"),await ke(5),r(1,w=`${o}-enter`),r(1,w=`${o}-enter-active`),r(0,y=e),r(1,w+=` ${o}-enter-to`),await ke(v.enteringDuration+10),r(1,w="")}else r(0,y=e);x=t.id}}async function A(e){const t=e.find((e=>e.nestingDepth===f));if(t){let e;e="default"===c?t.component||t.components.default:t.components?t.components[c]:null,S(e,t),await ke(v?v.leavingDuration:0),r(3,k=!0)}else S(null,`${Date.now()}-nonexistent-route`)}return D("easyrouteContext",{depth:f,router:p}),P((()=>{b&&b()})),h&&A(p.currentMatched.getValue),F((()=>{h||(b=p.currentMatched.subscribe((e=>{A(e)})))})),e.$$set=e=>{r(19,n=t(t({},n),l(e))),r(20,i=u(n,a)),"transition"in e&&r(7,o=e.transition),"forceRemount"in e&&r(8,s=e.forceRemount),"name"in e&&r(9,c=e.name)},n=l(n),[y,w,C,k,p,g,m,o,s,c,function(e){M[e?"unshift":"push"]((()=>{C=e,r(2,C)}))}]}const Ee=class extends oe{constructor(e){super(),ie(this,e,_e,Ae,o,{transition:7,forceRemount:8,name:9})}};function Ie(e){let t;const n=e[2].default,r=function(e,t,n,r){if(e){const r=c(e,t,n,null);return e[0](r)}}(n,e,e[1]);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,[t]){r&&r.p&&2&t&&function(e,t,n,r,a,i,o){const s=function(e,t,n,r){if(e[2]&&r){const a=e[2](r(n));if(void 0===t.dirty)return a;if("object"==typeof a){const e=[],n=Math.max(t.dirty.length,a.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|a[r];return e}return t.dirty|a}return t.dirty}(t,r,a,null);if(s){const a=c(t,n,r,null);e.p(a,s)}}(r,n,e,e[1],t)},i(e){t||(J(r,e),t=!0)},o(e){Z(r,e),t=!1},d(e){r&&r.d(e)}}}function Te(e,t,n){let{$$slots:r={},$$scope:a}=t,{router:i=null}=t;if(!i)throw new Error("[Easyroute] no router instance passed into EasyrouteProvider");return D("easyrouteContext",{depth:-1,router:i}),e.$$set=e=>{"router"in e&&n(0,i=e.router),"$$scope"in e&&n(1,a=e.$$scope)},[i,a,r]}const Re=class extends oe{constructor(e){super(),ie(this,e,Te,Ie,o,{router:0})}};function Fe(t){let n,r,a,i,o,s,c,l,u,g;return{c(){n=p("h1"),n.textContent="PITCH TUTOR",r=v(),a=p("h2"),a.textContent="Мы будем рады обратной связи",i=v(),o=p("p"),o.textContent="Здесть внешняя страница лендинга, где будет форма обратной связи.",s=v(),c=p("p"),l=p("button"),l.innerHTML="Продолжить<br/>тренироваться",x(n,"class","svelte-11ar4k2"),x(a,"class","svelte-11ar4k2"),x(o,"class","description svelte-11ar4k2"),x(l,"class","btn"),x(c,"class","continue svelte-11ar4k2")},m(e,f){d(e,n,f),d(e,r,f),d(e,a,f),d(e,i,f),d(e,o,f),d(e,s,f),d(e,c,f),h(c,l),u||(g=y(l,"click",t[0]),u=!0)},p:e,i:e,o:e,d(e){e&&f(n),e&&f(r),e&&f(a),e&&f(i),e&&f(o),e&&f(s),e&&f(c),u=!1,g()}}}function Pe(e){return[function(){Av.push("/train-pick")}]}function De(t){let n,r,a,i,o,s,c,l;return{c(){n=p("h1"),n.textContent="PITCH TUTOR",r=v(),a=p("p"),a.textContent="Репетируй и прокачивай свои презентационные навыки",i=v(),o=p("p"),s=p("button"),s.textContent="Начать тренировку",x(n,"class","svelte-b1qy9j"),x(a,"class","svelte-b1qy9j"),x(s,"class","btn svelte-b1qy9j"),x(o,"class","go svelte-b1qy9j")},m(e,u){d(e,n,u),d(e,r,u),d(e,a,u),d(e,i,u),d(e,o,u),h(o,s),c||(l=y(s,"click",t[0]),c=!0)},p:e,i:e,o:e,d(e){e&&f(n),e&&f(r),e&&f(a),e&&f(i),e&&f(o),c=!1,l()}}}function Oe(e){return[function(){Av.push("/train-pick")}]}const Ne=e=>{const t=O("easyrouteContext");if(!t)throw new Error("[Easyroute] No router context found");return t.router.currentRouteData.subscribe(e)};var Me=function(e,t){return(Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Le(e,t){function n(){this.constructor=e}Me(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Be(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,s)}c((r=r.apply(e,t||[])).next())}))}function Ue(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var je=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return qe(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,a)}))}},e}();function qe(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function ze(){return We}var We=null,Ge=new Map,He=new Map;function Ve(e,t){var n=Ye(e,t);return Ge.get(n)}function $e(e){for(var t=Ge.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=i[0],s=i[1];o.split("_")[0]===e&&n.push(s)}return n}function Xe(e){var t=e.kernelName,n=e.backendName,r=Ye(t,n);if(Ge.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");Ge.set(r,e)}function Ke(e){var t=e.kernelName;He.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),He.set(t,e)}function Ye(e,t){return t+"_"+e}function Je(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Ze(e,t,n){return Math.max(e,Math.min(t,n))}function Qe(e){return e%2==0?e:e+1}function et(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function tt(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function nt(e,t,n){void 0===n&&(n=""),tt(ot(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function rt(e){tt(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function at(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||wt(e)&&!n)for(var r=0;r<e.length;++r)at(e[r],t,n);else t.push(e);return t}function it(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function ot(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function st(e){return e%1==0}function ct(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function lt(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function ut(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function ht(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,a){var i=0,o=function(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}};o()}))}function dt(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function ft(e,t){var n=t.length;return tt((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),tt(e.every((function(e){return st(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function pt(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:ft(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function gt(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function mt(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function vt(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function bt(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function yt(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function wt(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function xt(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function Ct(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function kt(e){return"string"==typeof e||e instanceof String}function St(e){return"boolean"==typeof e}function At(e){return"number"==typeof e}function _t(e){return Array.isArray(e)?_t(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":At(e)?"float32":kt(e)?"string":St(e)?"bool":"float32"}function Et(e){return!!(e&&e.constructor&&e.call&&e.apply)}function It(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function Tt(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Rt(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=at(e)),n&&vt(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)0!==Math.round(e[a])&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}function Ft(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var a=new Array;if(1===n.length)for(var i=n[0],o=0;o<i;o++)a[o]=r[t+o];else{i=n[0];var s=n.slice(1),c=s.reduce((function(e,t){return e*t}));for(o=0;o<i;o++)a[o]=e(t+o*c,s,r)}return a}(0,e,t)}function Pt(e,t){for(var n=Dt(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Dt(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Ot(){return ze().platform.now()}function Nt(e){e.forEach((function(t){tt(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function Mt(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",ze().platform.encode(e,t)}function Lt(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",ze().platform.decode(e,t)}function Bt(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Ut(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}Object.freeze({shuffle:Je,clamp:Ze,nearestLargerEven:Qe,sum:et,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n},assert:tt,assertShapesMatch:nt,assertNonNull:rt,flatten:at,sizeFromShape:it,isScalarShape:function(e){return 0===e.length},arraysEqual:ot,isInt:st,tanh:ct,sizeToSquarishShape:lt,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Je(t),t},rightPad:ut,repeatedTry:ht,inferFromImplicitShape:dt,parseAxisParam:ft,squeezeShape:pt,getTypedArrayFromDType:gt,getArrayFromDType:mt,checkConversionForErrors:vt,isValidDtype:bt,hasEncodingLoss:yt,isTypedArray:wt,bytesPerElement:xt,bytesFromStringArray:Ct,isString:kt,isBoolean:St,isNumber:At,inferDtype:_t,isFunction:Et,nearestDivisor:It,computeStrides:Tt,toTypedArray:Rt,toNestedArray:Ft,makeOnesTypedArray:Pt,makeZerosTypedArray:Dt,now:Ot,assertNonNegativeIntegerDimensions:Nt,fetch:function(e,t){return ze().platform.fetch(e,t)},encodeString:Mt,decodeString:Lt,locToIndex:Bt,indexToLoc:Ut});var jt=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new qt)}return e.prototype.profileKernel=function(e,t,n){var r,a=this,i=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found "+a+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),i.then((function(i){var o="";null!=i.getExtraProfileInfo&&(o=i.getExtraProfileInfo()),a.logger.logKernelProfile(e,n,r,i.kernelMs,t,o)}))}))})),r},e}(),qt=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,a,i){var o="number"==typeof r?ut(r+"ms",9):r.error,s=ut(e,25),c=t.rank,l=t.size,u=ut(t.shape.toString(),14),h="";for(var d in a){var f=a[d].shape||t.shape,p=f.length;h+=d+": "+p+"D "+(p>0?f:"")+" "}console.log("%c"+s+"\t%c"+o+"\t%c"+c+"D "+u+"\t%c"+l+"\t%c"+h+"\t%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function zt(e,t,n){return ut(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":kt(e)?"'"+e+"'":"bool"===n?Wt(e):parseFloat(e.toFixed(7)).toString(),t)}function Wt(e){return 0===e?"false":"true"}function Gt(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Ht=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=it(e),null!=n){var a=n.length;tt(a===this.size,(function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||mt(t,this.size),this.strides=Tt(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),tt(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var a=this.locToIndex(n);this.values[a]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,a=e;r<a.length;r++){var i=a[r];if(i<0||i>=this.shape[n]){var o="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(o)}n++}for(var s=e[e.length-1],c=0;c<e.length-1;++c)s+=this.strides[c]*e[c];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Vt().makeTensor(this.values,this.shape,this.dtype)},e}(),Vt=null,$t=null,Xt=null,Kt=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=it(e),this.strides=Tt(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),tt(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),this.reshape([e,t,n,r,a])},e.prototype.asType=function(e){return this.throwIfDisposed(),$t.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Be(this,void 0,void 0,(function(){var e;return Ue(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,$t.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return $t.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Be(this,void 0,void 0,(function(){var e;return Ue(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Ft(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return Ft(this.shape,this.dataSync())},e.prototype.data=function(){return Be(this,void 0,void 0,(function(){var e,t;return Ue(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=Vt().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return Lt(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=Vt().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Lt(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return Be(this,void 0,void 0,(function(){var e;return Ue(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Vt().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(Vt().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),$t.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),$t.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),$t.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),$t.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),$t.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),$t.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),$t.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var a=Tt(t),i=function(e,t,n,r){var a=it(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,c="complex64"===n?Gt(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var u=l*i,h=0;h<i;h++)o[h]=Math.max(o[h],zt(c[u+h],0,n).length);return o}(e,t,n,a),o=t.length,s=function e(t,n,r,a,i,o){void 0===o&&(o=!0);var s="complex64"===r?2:1,c=n[0],l=n.length;if(0===l)return"complex64"===r?[zt(Gt(t)[0],0,r)]:"bool"===r?[Wt(t[0])]:[t[0].toString()];if(1===l){if(c>20){var u=3*s,h=Array.from(t.slice(0,u)),d=Array.from(t.slice((c-3)*s,c*s));return"complex64"===r&&(h=Gt(h),d=Gt(d)),["["+h.map((function(e,t){return zt(e,i[t],r)})).join(", ")+", ..., "+d.map((function(e,t){return zt(e,i[c-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?Gt(t):Array.from(t)).map((function(e,t){return zt(e,i[t],r)})).join(", ")+"]"]}var f=n.slice(1),p=a.slice(1),g=a[0]*s,m=[];if(c>20){for(var v=0;v<3;v++){var b=(y=v*g)+g;m.push.apply(m,e(t.slice(y,b),f,r,p,i,!1))}for(m.push("..."),v=c-3;v<c;v++)b=(y=v*g)+g,m.push.apply(m,e(t.slice(y,b),f,r,p,i,v===c-1))}else for(v=0;v<c;v++){var y;b=(y=v*g)+g,m.push.apply(m,e(t.slice(y,b),f,r,p,i,v===c-1))}var w=2===l?",":"";for(m[0]="["+m[0]+w,v=1;v<m.length-1;v++)m[v]=" "+m[v]+w;var x=",\n";for(v=2;v<l;v++)x+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":x),m}(e,t,n,a,i),c=["Tensor"];return r&&(c.push("  dtype: "+n),c.push("  rank: "+o),c.push("  shape: ["+t+"]"),c.push("  values:")),c.push(s.map((function(e){return"    "+e})).join("\n")),c.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),$t.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),$t.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),$t.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),$t.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),$t.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),$t.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),$t.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),$t.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),$t.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),$t.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),$t.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),$t.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,a){return void 0===n&&(n=.001),Xt("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,a,r,n)},e.prototype.batchNorm=function(e,t,n,r,a){return void 0===a&&(a=.001),this.throwIfDisposed(),$t.batchNorm(this,e,t,n,r,a)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$t.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$t.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$t.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$t.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$t.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$t.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$t.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$t.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),$t.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),$t.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),$t.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),$t.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),$t.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),$t.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),$t.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),$t.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),$t.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),$t.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),$t.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),$t.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),$t.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),$t.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),$t.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),$t.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),$t.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),$t.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),$t.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),$t.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),$t.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),$t.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),$t.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),$t.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),$t.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),$t.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),$t.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),$t.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),$t.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),$t.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),$t.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),$t.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),$t.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),$t.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),$t.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),$t.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),$t.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),$t.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),$t.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),$t.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),$t.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),$t.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),$t.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),$t.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),$t.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),$t.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),$t.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),$t.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),$t.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),$t.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),$t.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),$t.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),$t.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),$t.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),$t.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),$t.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),$t.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),$t.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),$t.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),$t.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),$t.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),$t.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),$t.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),$t.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),$t.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),$t.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),$t.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),$t.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),$t.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),$t.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),$t.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),$t.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),$t.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),$t.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),$t.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),$t.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),$t.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),$t.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),$t.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),$t.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),$t.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),$t.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),$t.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),$t.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),$t.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),$t.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),$t.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),$t.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,a,i){return void 0===r&&(r="NWC"),void 0===a&&(a=1),this.throwIfDisposed(),$t.conv1d(this,e,t,n,r,a,i)},e.prototype.conv2d=function(e,t,n,r,a,i){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),$t.conv2d(this,e,t,n,r,a,i)},e.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),$t.conv2dTranspose(this,e,t,n,r,a)},e.prototype.depthwiseConv2D=function(e,t,n,r,a,i){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),$t.depthwiseConv2d(this,e,t,n,r,a,i)},e.prototype.separableConv2d=function(e,t,n,r,a,i){return void 0===a&&(a=[1,1]),void 0===i&&(i="NHWC"),this.throwIfDisposed(),$t.separableConv2d(this,e,t,n,r,a,i)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),$t.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),$t.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),$t.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),$t.pool(this,e,t,n,r,a)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),Vt().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),$t.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),$t.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),$t.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),$t.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),this.throwIfDisposed(),$t.stridedSlice(this,e,t,n,r,a,i,o,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),$t.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),$t.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),$t.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),$t.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),$t.spectral.irfft(this)},e}();Object.defineProperty(Kt,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Yt,Jt,Zt,Qt,en,tn=function(e){function t(t,n,r,a){var i=e.call(this,t.shape,t.dtype,t.dataId,a)||this;return i.trainable=n,i.name=r,i}return Le(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!ot(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Vt().disposeTensor(this),this.dataId=e.dataId,Vt().incRef(this,null)},t.prototype.dispose=function(){Vt().disposeVariable(this),this.isDisposedInternal=!0},t}(Kt);Object.defineProperty(tn,Symbol.hasInstance,{value:function(e){return e instanceof Kt&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Yt||(Yt={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Jt||(Jt={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Zt||(Zt={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Qt||(Qt={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(en||(en={}));var nn={float32:Qt,int32:Jt,bool:Zt,complex64:en};function rn(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return nn[e][t]}function an(e){return rn(e,"int32")}function on(e,t){if(e.dtype===t.dtype)return[e,t];var n=rn(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function sn(e,t){tt(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function cn(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof Kt)n.push(t);else if(a=t,Array.isArray(a)||"object"==typeof a){var a,i=t;for(var o in i){var s=i[o];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:on,assertTypesMatch:sn,isTensorInList:function(e,t){return t.some((function(t){return t.id===e.id}))},getTensorsInContainer:cn});var ln,un=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),hn=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new un}return e.prototype.ready=function(){return Be(this,void 0,void 0,(function(){var e,t,n;return Ue(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return Be(this,void 0,void 0,(function(){var t,n,r;return Ue(this,(function(a){switch(a.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=a.sent(),[3,3];case 2:r=n,a.label=3;case 3:if(!r)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new jt(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;$e(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;$e(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId||(t.registry[e]=n,t.pendingBackendInit=null,0))})).catch((function(n){return!(a<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),1))}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,a,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){return e.toFloat()}}}),[]),t},e.prototype.runKernel=function(e,t,n,r,a){return this.runKernelFunc(null,t,null,e,n,r,a)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+o+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,a,i,o){var s,c=this;void 0===i&&(i=[]),void 0===o&&(o=[]);var l=[],u=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var h,d=function(e){u&&(l=e.map((function(e){return c.keep(c.clone(e))})))},f=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var g,m=Ve(r,this.backendName);return h=null!=m?function(){var e=c.backend.numDataIds();g=m.kernelFunc({inputs:t,attrs:a,backend:c.backend});var n=Array.isArray(g)?g:[g];c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return c.makeTensorFromDataId(t,n,r)})),l=s.filter((function(e,t){return o[t]}));return d((i||[]).slice().concat(l)),s}:function(){var t=c.backend.numDataIds();g=c.tidy((function(){return e(c.backend,d)}));var n=Array.isArray(g)?g:[g];return c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(r,t,n),n},this.scopedRun((function(){return c.state.kernelDepth++}),(function(){return c.state.kernelDepth--}),(function(){s=c.ENV.getBool("DEBUG")?c.profiler.profileKernel(r,t,(function(){return h()})):h()})),u&&this.addTapeNode(r,t,s,n,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:s.map((function(e){return e.shape}))}),Array.isArray(g)?s:s[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&kt(e[0])&&(a=e.map((function(e){return Mt(e)})));var i=r.write(a,t,n),o=new Kt(t,n,i,this.nextTensorId());if(this.incRef(o,r),"string"===n){var s=this.state.tensorInfo.get(i),c=Ct(a);this.state.numBytes+=c-s.bytes,s.bytes=c}return o},e.prototype.makeTensorFromDataId=function(e,t,n,r){var a=new Kt(t,n=n||"float32",e,this.nextTensorId());return this.incRef(a,r),a},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var a=new tn(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*xt(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof tn||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return Be(this,void 0,void 0,(function(){var t,n;return Ue(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,a){var i=this,o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},s=function(e){return He.get(e)}(e);null!=s&&(r=s.gradFunc),null!=r&&(o.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Dt(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a)}),this.state.activeTape.push(o)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=cn(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var a=this;if(void 0===r&&(r=!1),tt(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var i=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));tt(i instanceof Kt,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(i=0;i<e.length;i++){var o=(p=e[i]).inputs;for(var s in o){for(var c=o[s],l=!1,u=0;u<t.length;u++)if(r[c.id]){p.outputs.forEach((function(e){return r[e.id]=!0})),l=!0,a[p.id]=!0;break}if(l)break}}var h={};h[n.id]=!0;var d={};for(i=e.length-1;i>=0;i--)for(o=(p=e[i]).inputs,u=0;u<p.outputs.length;u++)if(h[p.outputs[u].id]){for(var s in o)h[o[s].id]=!0,d[p.id]=!0;break}var f=[];for(i=0;i<e.length;i++){var p;if(a[(p=e[i]).id]&&d[p.id]){var g={};for(var s in p.inputs){var m=p.inputs[s];r[m.id]&&(g[s]=m)}var v=Object.assign({},p);v.inputs=g,v.outputs=p.outputs,f.push(v)}}return f}(this.state.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[i.id]=null==n?(r=Pt(it(e=i.shape),"float32"),dn.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var a=t[r],i=[];if(a.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+a.kernelName+".");var o=a.gradient(i),s=function(t){if(!(t in o))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(o)+".");var r=n((function(){return o[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+a.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var i=a.inputs[t];if(!ot(r.shape,i.shape))throw new Error("Error in gradient for op "+a.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+i.shape+"'");if(null==e[i.id])e[i.id]=r;else{var s=e[i.id];e[i.id]=s.add(r),s.dispose()}};for(var c in a.inputs)s(c)},a=t.length-1;a>=0;a--)r(a)}(s,o,(function(e){return a.tidy(e)}));var c=t.map((function(e){return s[e.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()})),a.state.activeTape=null),{value:i,grads:c}}))},e.prototype.customGrad=function(e){var t=this;return tt(Et(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];tt(r.every((function(e){return e instanceof Kt})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return r.forEach((function(e,t){i[t]=e})),t.runKernelFunc((function(t,a){return tt((n=e.apply(void 0,r.concat([a]))).value instanceof Kt,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),tt(Et(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),i,(function(e,t){var a=n.gradFunc(e,t),i=Array.isArray(a)?a:[a];tt(i.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),tt(i.every((function(e){return e instanceof Kt})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return i.forEach((function(e,t){o[t]=function(){return e}})),o}))}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return Be(this,void 0,void 0,(function(){var t,n;return Ue(this,(function(r){switch(r.label){case 0:return t=Ot(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=Ot()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new un,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),dn=function(){var e=function(){if(null==ln){var e=void 0;if("undefined"!=typeof window)e=window;else if(void 0!==__webpack_require__.g)e=__webpack_require__.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}ln=e}return ln}();if(null==e._tfengine){var t=new je(e);e._tfengine=new hn(t)}return function(e){We=e}(e._tfengine.ENV),Vt=function(){return e._tfengine},e._tfengine}();function fn(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var pn=ze();pn.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),pn.registerFlag("IS_BROWSER",(function(){return fn()})),pn.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),pn.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),pn.registerFlag("PROD",(function(){return!1})),pn.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return pn.getBool("DEBUG")})),pn.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),pn.registerFlag("IS_TEST",(function(){return!1}));var gn,mn,vn,bn={},yn={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function wn(e,t){bn[e]=t}function xn(e){e in bn||(bn[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete bn[e]}),!1),1===e?t.getContext("webgl",yn)||t.getContext("experimental-webgl",yn):t.getContext("webgl2",yn)}(e));var t=bn[e];return t.isContextLost()?(delete bn[e],xn(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),bn[e])}function Cn(e,t){return[t,e]}function kn(e){var t=it(e);return lt(Math.ceil(t/4))}function Sn(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function An(e,t){var n,r,a,i,o,s,c,l,u,h=e;return 2===ze().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,o=h.RED,s=4,c=1,l=h.HALF_FLOAT,u=h.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=h.RGBA,o=e.RGBA,s=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,u=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:u}}function _n(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+In(e,t))}(e),r}function En(e){return!!(ze().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function In(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Tn(e,t,n){return Zn(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function Rn(e,t,n){var r=Zn(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(_n(e,t,(function(){return e.shaderSource(r,n)})),_n(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Fn(e,t,n){var r=Zn(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(_n(e,t,(function(){return e.shaderSource(r,n)})),_n(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=On.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return ut((t+1).toString(),i)+e})),s=0,c=0;c<o.length;c++)s=Math.max(o[c].length,s);var l=o.slice(0,r-1),u=o.slice(r-1,r),h=o.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+ut(u[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(gn||(gn={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(mn||(mn={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(vn||(vn={}));var Pn,Dn,On=/ERROR: [0-9]+:([0-9]+):/g;function Nn(e,t){return Zn(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function Mn(e,t,n){if(_n(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Ln(e,t,n){if(_n(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function Bn(e,t,n){var r=Zn(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return _n(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),_n(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function Un(e,t,n){var r=Zn(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return _n(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),_n(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function jn(e,t){return Zn(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function qn(e,t){var n=ze().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function zn(e,t){return Zn(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function Wn(e,t,n,r,a,i,o,s){var c=e.getAttribLocation(n,r);return-1!==c&&(_n(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,a)})),_n(e,t,(function(){return e.vertexAttribPointer(c,i,e.FLOAT,!1,o,s)})),_n(e,t,(function(){return e.enableVertexAttribArray(c)})),!0)}function Gn(e,t,n,r){Qn(e,r),_n(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),_n(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function Hn(e,t,n,r){return Zn(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function Vn(e,t,n){return e.getUniformLocation(t,n)}function $n(e,t,n,r,a,i){_n(e,t,(function(){return Gn(e,t,r,i)})),_n(e,t,(function(){return e.uniform1i(a,i)}))}function Xn(e,t,n,r){_n(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),_n(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function Kn(e,t,n){_n(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),_n(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Yn(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Jn(e,t))}function Jn(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Zn(e,t,n,r){var a=_n(e,t,(function(){return n()}));if(null==a)throw new Error(r);return a}function Qn(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function er(e,t){return void 0===t&&(t=2),it(e.slice(0,e.length-t))}function tr(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function nr(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[er(e)].concat(tr(e))),t}function rr(e,t){var n;void 0===t&&(t=!1);var r=ze().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Qe(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=pt(e);e=a.newShape}var i=it(e);if(e.length<=1&&i<=r)return[1,i];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var o=er(e),s=2,c=2;return e.length&&(s=(n=tr(e))[0],c=n[1]),lt(i=o*(s/2)*(c/2)).map((function(e){return 2*e}))}return lt(i)}function ar(e){return e%2==0}function ir(e,t){if(ot(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(ar(n)&&ar(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&ar(e[0])&&ar(t[0])}function or(e){if(null==Pn){var t=xn(e);Pn=t.getParameter(t.MAX_TEXTURE_SIZE)}return Pn}function sr(e){if(null==Dn){var t=xn(e);Dn=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Dn)}function cr(e){if(0===e)return 0;var t=xn(e);return lr(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:lr(t,"EXT_disjoint_timer_query")?1:0}function lr(e,t){return null!=e.getExtension(t)}function ur(e){try{if(null!=xn(e))return!0}catch(e){return!1}return!1}function hr(e){if(0===e)return!1;var t=xn(e);if(1===e){if(!lr(t,"OES_texture_float"))return!1}else if(!lr(t,"EXT_color_buffer_float"))return!1;return fr(t)}function dr(e){if(0===e)return!1;var t=xn(e);if(1!==e){if(lr(t,"EXT_color_buffer_float"))return fr(t);if(lr(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=An(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),i}(t,n)}return!1}return!!lr(t,"OES_texture_float")&&!!lr(t,"WEBGL_color_buffer_float")&&fr(t)}function fr(e){var t=An(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function pr(e){return 2===e&&null!=xn(e).fenceSync}var gr=Object.freeze({callAndCheck:_n,canBeRepresented:En,getWebGLErrorMessage:In,getExtensionOrThrow:Tn,createVertexShader:Rn,createFragmentShader:Fn,createProgram:Nn,linkProgram:Mn,validateProgram:Ln,createStaticVertexBuffer:Bn,createStaticIndexBuffer:Un,getNumChannels:function(){return 2===ze().getNumber("WEBGL_VERSION")?1:4},createTexture:jn,validateTextureSize:qn,createFramebuffer:zn,bindVertexBufferToProgramAttribute:Wn,bindTextureUnit:Gn,unbindTextureUnit:function(e,t,n){Qn(e,n),_n(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),_n(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:Hn,getProgramUniformLocation:Vn,bindTextureToProgramUniformSampler:$n,bindCanvasToFramebuffer:function(e,t){_n(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),_n(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),_n(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:Xn,unbindColorTextureFromFramebuffer:Kn,validateFramebuffer:Yn,getFramebufferErrorMessage:Jn,getBatchDim:er,getRowsCols:tr,getShapeAs3D:nr,getTextureShapeFromLogicalShape:rr,isReshapeFree:ir,getWebGLMaxTextureSize:or,resetMaxTextureSize:function(){Pn=null},resetMaxTexturesInShader:function(){Dn=null},getMaxTexturesInShader:sr,getWebGLDisjointQueryTimerVersion:cr,hasExtension:lr,isWebGLVersionEnabled:ur,isCapableOfRenderingToFloatTexture:hr,isDownloadFloatTextureEnabled:dr,isWebGLFenceEnabled:pr}),mr=ze();function vr(e){ze().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function br(e,t){return dn.tidy(e,t)}function yr(e){cn(e).forEach((function(e){return e.dispose()}))}function wr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ze().getBool("IS_TEST")||console.warn.apply(console,e)}function xr(e,t){var n=e;if(wt(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||wt(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&ze().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||wt(t)){tt(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),tt(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var a=n.slice(1),i=0;i<t.length;++i)e(t[i],a,r.concat(i))}else tt(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function Cr(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function kr(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof Kt)return Cr(r,e.dtype,t,n),e;var a=_t(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Cr(r,a,t,n),null==e||!wt(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=xr(e,a);wt(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?Rt(e,a,ze().getBool("DEBUG")):at(e,[],!0);return dn.makeTensor(s,o,a)}function Sr(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return kr(e,t+"["+r+"]",n)}),r)}function Ar(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function _r(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function Er(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function Ir(e,t){return _r(e,t.map((function(e){return 1})),t)}function Tr(e,t,n){tt(Ar(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function Rr(e,t){if(Ar(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Fr(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Pr(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Dr(e,t){var n=e[0].length;e.forEach((function(e,t){tt(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),tt(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)tt(i===t||e[i]===r[i],(function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."}))}))}function Or(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Nr(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];dn.startScope(n);try{var a=r.apply(void 0,e);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),dn.endScope(a),a}catch(e){throw dn.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}mr.registerFlag("HAS_WEBGL",(function(){return mr.getNumber("WEBGL_VERSION")>0})),mr.registerFlag("WEBGL_VERSION",(function(){return ur(2)?2:ur(1)?1:0})),mr.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===mr.get("WEBGL_VERSION")})),mr.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),mr.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),mr.registerFlag("WEBGL_PACK",(function(){return mr.getBool("HAS_WEBGL")})),mr.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return mr.getBool("WEBGL_PACK")})),mr.registerFlag("WEBGL_PACK_CLIP",(function(){return mr.getBool("WEBGL_PACK")})),mr.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),mr.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return mr.getBool("WEBGL_PACK")})),mr.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return mr.getBool("WEBGL_PACK")})),mr.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return mr.getBool("WEBGL_PACK")})),mr.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return mr.getBool("WEBGL_PACK")})),mr.registerFlag("WEBGL_PACK_REDUCE",(function(){return mr.getBool("WEBGL_PACK")})),mr.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return mr.getBool("WEBGL_PACK")})),mr.registerFlag("WEBGL_CONV_IM2COL",(function(){return mr.getBool("WEBGL_PACK")})),mr.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return or(mr.getNumber("WEBGL_VERSION"))})),mr.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return sr(mr.getNumber("WEBGL_VERSION"))})),mr.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=mr.getNumber("WEBGL_VERSION");return 0===e?0:cr(e)})),mr.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return mr.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),mr.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return hr(mr.getNumber("WEBGL_VERSION"))})),mr.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!mr.getBool("WEBGL_FORCE_F16_TEXTURES")&&mr.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),mr.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return dr(mr.getNumber("WEBGL_VERSION"))})),mr.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return pr(mr.getNumber("WEBGL_VERSION"))})),mr.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return mr.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Xt=vr;var Mr=Nr({complex_:function(e,t){var n=kr(e,"real","complex"),r=kr(t,"imag","complex");return nt(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),dn.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),Lr=Nr({real_:function(e){var t=kr(e,"input","real");return dn.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),Br=Nr({imag_:function(e){var t=kr(e,"input","imag");return dn.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function Ur(e,t,n){return jr(e,t,xr(e,n),n)}function jr(e,t,n,r){if(null==r&&(r=_t(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!wt(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Nt(t);var a=it(t),i=it(n);tt(a===i,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+a+" values but has "+i}));for(var o=0;o<n.length;++o){var s=n[o],c=o!==n.length-1||s!==it(t.slice(o));tt(n[o]===t[o]||!c,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return wt(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Rt(e,r,ze().getBool("DEBUG")):at(e,[],!0),dn.makeTensor(e,t,r)}function qr(e,t){if((wt(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&wt(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return jr(e,[],[],t)}function zr(e,t){rt(e);var n=xr(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return jr(e,null,n,t)}function Wr(e,t,n){if(rt(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=xr(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return jr(e,t,r,n)}function Gr(e,t,n){if(rt(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=xr(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return jr(e,t,r,n)}function Hr(e,t,n){if(rt(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=xr(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return jr(e,t,r,n)}function Vr(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Vr(e,"float32"),r=$r(e,"float32");return Mr(n,r)}var a=Pt(it(e),t);return dn.makeTensor(a,e,t)}function $r(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=$r(e,"float32"),r=$r(e,"float32");return Mr(n,r)}var a=Dt(it(e),t);return dn.makeTensor(a,e,t)}function Xr(e,t,n){return dn.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function Kr(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return $r([0],r);var a=Dt(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return zr(a,r)}var Yr=Nr({onesLike_:function(e){var t=kr(e,"x","onesLike");if("complex64"===t.dtype){var n=Yr(Lr(t)),r=Jr(Br(t));return Mr(n,r)}return dn.runKernelFunc((function(e){return e.onesLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Jr(e)}}}))}}),Jr=Nr({zerosLike_:function(e){var t=kr(e,"x","zerosLike");return dn.runKernelFunc((function(e){return e.zerosLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Jr(e)}}}))}}),Zr=Nr({concat_:function(e,t){void 0===t&&(t=0),tt(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Sr(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=ft(t,n[0].shape)[0];var r=Or(n.map((function(e){return e.shape})),t);if(0===it(r))return Ur([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var a=n.map((function(e){return e.shape}));Dr(a,t);var i=n,o={axis:t};return dn.runKernelFunc((function(e){return e.concat(n,t)}),i,(function(e){var n=a.map((function(e){return e[t]}));return ra(e,n,t).map((function(e){return function(){return e}}))}),"Concat",o)}}),Qr=Nr({concat1d_:function(e){return Zr(e,0)}}),ea=Nr({concat2d_:function(e,t){return Zr(e,t)}}),ta=Nr({concat3d_:function(e,t){return Zr(e,t)}}),na=Nr({concat4d_:function(e,t){return Zr(e,t)}}),ra=Nr({split_:function(e,t,n){void 0===n&&(n=0);var r,a=kr(e,"x","split");return n=ft(n,a.shape)[0],"number"==typeof t?(tt(a.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(a.shape[n]/t)):(tt(a.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),dn.runKernelFunc((function(e){return e.split(a,r,n)}),{$x:a},(function(e){return{$x:function(){return Zr(e,n)}}}))}});function aa(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self&&self;var ia=aa((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.alea=i}(0,e)})),oa=aa((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xor128=i}(0,e)})),sa=aa((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xorwow=i}(0,e)})),ca=aa((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.x&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xorshift7=i}(0,e)})),la=aa((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),a=0,i=-32;i<c;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.X&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xor4096=i}(0,e)})),ua=aa((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.tychei=i}(0,e)})),ha=aa((function(e){!function(t,n){var r,a=this,i=256,o="random",s=n.pow(i,6),c=n.pow(2,52),l=2*c,u=255;function h(e,u,h){var m=[],v=p(function e(t,n){var r,a=[],i=typeof t;if(n&&"object"==i)for(r in t)try{a.push(e(t[r],n-1))}catch(e){}return a.length?a:"string"==i?t:t+"\0"}((u=1==u?{entropy:!0}:u||{}).entropy?[e,g(t)]:null==e?function(){try{var e;return r&&(e=r.randomBytes)?e=e(i):(e=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(e)),g(e)}catch(e){var n=a.navigator,o=n&&n.plugins;return[+new Date,a,o,a.screen,g(t)]}}():e,3),m),b=new d(m),y=function(){for(var e=b.g(6),t=s,n=0;e<c;)e=(e+n)*i,t*=i,n=b.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|b.g(4)},y.quick=function(){return b.g(4)/4294967296},y.double=y,p(g(b.S),t),(u.pass||h||function(e,t,r,a){return a&&(a.S&&f(a,b),e.state=function(){return f(b,{})}),r?(n[o]=e,t):e})(y,v,"global"in u?u.global:this==n,u.state)}function d(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<i;)s[a]=a++;for(a=0;a<i;a++)s[a]=s[o=u&o+e[a%n]+(t=s[a])],s[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,s=r.S;e--;)t=s[a=u&a+1],n=n*i+s[u&(s[a]=s[o=u&o+t])+(s[o]=t)];return r.i=a,r.j=o,n})(i)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){for(var n,r=e+"",a=0;a<r.length;)t[u&a]=u&(n^=19*t[u&a])+r.charCodeAt(a++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(n["seed"+o]=h,p(n.random(),t),e.exports){e.exports=h;try{r=__webpack_require__(902)}catch(e){}}}([],Math)}));ha.alea=ia,ha.xor128=oa,ha.xorwow=sa,ha.xorshift7=ca,ha.xor4096=la,ha.tychei=ua;var da=ha.alea,fa=function(){function e(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=da(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),pa=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var a=r||Math.random();this.randu=da(a.toString()),this.randn=new fa(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),ga=function(){function e(e,t,n,r){var a=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==a.dtype||"float32"===a.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=da(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function ma(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",Nt(e),new Ht(e,t,n)}var va=Nr({batchToSpaceND_:function(e,t,n){var r=kr(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));return tt(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),tt(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),tt(r.shape[0]%a==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+a})),dn.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),ba=Nr({broadcastTo_:function(e,t){var n=kr(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=n.reshape(a)}for(var i=Array.from(t),o=t.length-1;o>=0;o--)if(n.shape[o]===t[o])i[o]=1;else if(1!==n.shape[o])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));return 0===s.length?n.clone():dn.runKernelFunc((function(e){return e.tile(n,i)}),{input:n},(function(e){return{input:function(){return e.sum(s,!0)}}}))}}),ya=Nr({cast_:function(e,t){var n=kr(e,"x","cast");if(!bt(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return dn.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",r)}}),wa=Nr({clone_:function(e){var t=kr(e,"x","clone",null);return dn.runKernelFunc((function(){return dn.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),xa=Nr({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=kr(e,"x","cumsum"),i=Rr([t|=0],a.rank),o=a;null!=i&&(o=a.transpose(i));var s=Pr(1,a.rank)[0],c=dn.runKernelFunc((function(e){return e.cumsum(o,s,n,r)}),{permutedX:o},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=i&&(c=c.transpose(i)),c}}),Ca=Nr({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=kr(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return tt(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),tt(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),tt(o%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+r.shape})),dn.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),ka=Nr({expandDims_:function(e,t){void 0===t&&(t=0);var n=kr(e,"x","expandDims",null);tt(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(tt(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),Ma(n,r)}}),Sa=Nr({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var a=ma([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=a.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return ja(ka(s,0),[n[0],1,1]);if(2===n.length)return ja(ka(ka(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return ja(ka(ka(ka(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),Aa=Nr({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var a=kr(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=1===o?a.as2D(1,-1):a,c=dn.runKernelFunc((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===o?c.as1D():c}}),_a=Nr({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var a=kr(e,"indices","oneHot","int32"),i=a.shape.concat([t]);return a=a.flatten(),dn.runKernelFunc((function(e){return e.oneHot(a,t,n,r)}),{$indices:a},(function(e){return{$indices:function(){return $r(a.shape,"float32")}}})).reshape(i)}}),Ea=Nr({pad_:function(e,t,n){void 0===n&&(n=0);var r=kr(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n};return dn.runKernelFunc((function(e){return e.pad(r,t,n)}),{x:r},(function(e){var n=t.map((function(e){return e[0]}));return{x:function(){return e.slice(n,r.shape)}}}),"PadV2",a)}}),Ia=Nr({pad1d_:function(e,t,n){return void 0===n&&(n=0),tt(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),Ea(e,[t],n)}}),Ta=Nr({pad2d_:function(e,t,n){return void 0===n&&(n=0),tt(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Ea(e,t,n)}}),Ra=Nr({pad3d_:function(e,t,n){return void 0===n&&(n=0),tt(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Ea(e,t,n)}}),Fa=Nr({pad4d_:function(e,t,n){return void 0===n&&(n=0),tt(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Ea(e,t,n)}}),Pa=Nr({rand_:function(e,t,n){var r=it(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return dn.makeTensor(a,e,n)}}),Da=Nr({randomNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new fa(t,n,r,!1,a),o=ma(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Oa=Nr({randomGamma_:function(e,t,n,r,a){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var i=new pa(t,n,r,a),o=ma(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Na=Nr({randomUniform_:function(e,t,n,r,a){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var i=ma(e,r),o=new ga(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),Ma=Nr({reshape_:function(e,t){var n=kr(e,"x","reshape",null);t=dt(t,n.size),tt(n.size===it(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return dn.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",r)}}),La=Nr({spaceToBatchND_:function(e,t,n){var r=kr(e,"x","spaceToBatchND");return tt(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),tt(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),tt(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),dn.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),Ba=Nr({squeeze_:function(e,t){var n=kr(e,"x","squeeze");return Ma(n,pt(n.shape,t).newShape)}}),Ua=Nr({stack_:function(e,t){void 0===t&&(t=0);var n=Sr(e,"tensors","stack");if(tt(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,i=n[0].dtype;tt(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){nt(a,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){tt(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=n.map((function(e){return e.expandDims(t)}));return Zr(o,t)}}),ja=Nr({tile_:function(e,t){var n=kr(e,"x","tile",null);tt(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],a={reps:t};return dn.runKernelFunc((function(e,r){var a=e.tile(n,t);return r([n]),a}),{x:n},(function(e,n){var r=n[0];return{x:function(){var n=Jr(r);if(1===r.rank)for(var a=0;a<t[0];++a)n=n.add(e.slice([a*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(a=0;a<t[0];++a)for(var i=0;i<t[1];++i)n=n.add(e.slice([a*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(a=0;a<t[0];++a)for(i=0;i<t[1];++i)for(var o=0;o<t[2];++o)n=n.add(e.slice([a*r.shape[0],i*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(a=0;a<t[0];++a)for(i=0;i<t[1];++i)for(o=0;o<t[2];++o)for(var s=0;s<t[3];++s)n=n.add(e.slice([a*r.shape[0],i*r.shape[1],o*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}),"Tile",a,r)}}),qa=Nr({truncatedNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new fa(t,n,r,!0,a),o=ma(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),za=Nr({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=kr(e,"x","unstack");tt(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return dn.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return Ua(e,t)}}}),"Unpack",r)}});function Wa(e,t,n,r){void 0===r&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function Ga(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{var i=[],o=[];for(a=1;a<e;++a)a>=2*t+1||a%2==1?o.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function Ha(e,t,n,r){void 0===r&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Va(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function $a(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function Xa(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],a=1,i=0;i<n.length-1;++i)a*=n[i];var o=e.shape,s=n.slice();s.pop();var c=1;for(i=r;i<e.rank;++i)c*=o[i],s.push(o[i]);var l=Tt(e.shape).map((function(e){return e/c})).concat([1]).slice(0,r);return[s,a,c,l]}function Ka(e){return e<=30?e:It(e,Math.floor(Math.sqrt(e)))}function Ya(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(n.rank<a)throw new Error(i+" update.rank < "+a+". ");if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != "+(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<n.rank-a;++o)if(n.shape[o+a]!==e[o+r])throw new Error(i+" updates.shape["+(o+a)+"] ("+n.shape[o+a]+") != shape["+(o+a)+"] ("+e[o+a]+")")}function Ja(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Ya(n,t,e)}function Za(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var c=a<1?1:a;return{sliceRank:a,numUpdates:it(t.shape)/c,sliceSize:o,strides:Tt(n.slice(0,a)).concat([1]),outputSize:it(n)}}function Qa(e,t,n){tt(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),tt(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){tt(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},a=0;a<e.rank;++a)r(a)}function ei(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function ti(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function ni(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||null==i)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),Ze(0,i,s-1)}function ri(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||null==i)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),o>0?Ze(0,i,s):Ze(-1,i,s-1)}function ai(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function ii(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function oi(e){return dn.customGrad(e)}Object.freeze({prepareAndValidate:Xa}),Object.freeze({validateUpdateShape:Ya,validateInput:Ja,calculateShapes:Za}),Object.freeze({assertParamsValid:Qa,maskToAxes:ei,computeOutShape:ti,startForAxis:ni,stopForAxis:ri,isSliceContinous:ai,computeFlatOffset:ii});var si=Nr({softmax_:function(e,t){void 0===t&&(t=-1);var n=kr(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return dn.runKernelFunc((function(e,r){var a=e.softmax(n,t);return r([a]),a}),{logits:n},(function(e,n){var r=n[0],a=e.mul(r);return{logits:function(){return a.sub(a.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),ci=Nr({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=kr(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return oi((function(e,n){var r=e.max(t,!0),a=e.sub(r),i=a.toFloat().sub(a.exp().sum(t,!0).log());return n([i]),{value:i,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),li=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),ui=function(){function e(){}return e.prototype.time=function(e){return hi("time")},e.prototype.read=function(e){return hi("read")},e.prototype.readSync=function(e){return hi("readSync")},e.prototype.numDataIds=function(){return hi("numDataIds")},e.prototype.disposeData=function(e){return hi("disposeData")},e.prototype.write=function(e,t,n){return hi("write")},e.prototype.move=function(e,t,n,r){return hi("move")},e.prototype.memory=function(){return hi("memory")},e.prototype.floatPrecision=function(){return hi("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return hi("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,hi("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return hi("slice")},e.prototype.stridedSlice=function(e,t,n,r){return hi("stridedSlice")},e.prototype.unstack=function(e,t){return hi("unstack")},e.prototype.reverse=function(e,t){return hi("reverse")},e.prototype.concat=function(e,t){return hi("concat")},e.prototype.neg=function(e){return hi("neg")},e.prototype.add=function(e,t){return hi("add")},e.prototype.addN=function(e){return hi("addN")},e.prototype.subtract=function(e,t){return hi("subtract")},e.prototype.multiply=function(e,t){return hi("multiply")},e.prototype.realDivide=function(e,t){return hi("realDivide")},e.prototype.floorDiv=function(e,t){return hi("floorDiv")},e.prototype.sum=function(e,t){return hi("sum")},e.prototype.prod=function(e,t){return hi("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return hi("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return hi("argMin")},e.prototype.argMax=function(e,t){return hi("argMax")},e.prototype.equal=function(e,t){return hi("equal")},e.prototype.notEqual=function(e,t){return hi("notEqual")},e.prototype.less=function(e,t){return hi("less")},e.prototype.lessEqual=function(e,t){return hi("lessEqual")},e.prototype.greater=function(e,t){return hi("greater")},e.prototype.greaterEqual=function(e,t){return hi("greaterEqual")},e.prototype.logicalNot=function(e){return hi("logicalNot")},e.prototype.logicalAnd=function(e,t){return hi("logicalAnd")},e.prototype.logicalOr=function(e,t){return hi("logicalOr")},e.prototype.where=function(e){return hi("where")},e.prototype.select=function(e,t,n){return hi("select")},e.prototype.topk=function(e,t,n){return hi("topk")},e.prototype.min=function(e,t){return hi("min")},e.prototype.minimum=function(e,t){return hi("minimum")},e.prototype.mod=function(e,t){return hi("mod")},e.prototype.max=function(e,t){return hi("max")},e.prototype.maximum=function(e,t){return hi("maximum")},e.prototype.all=function(e,t){return hi("all")},e.prototype.any=function(e,t){return hi("any")},e.prototype.squaredDifference=function(e,t){return hi("squaredDifference")},e.prototype.ceil=function(e){return hi("ceil")},e.prototype.floor=function(e){return hi("floor")},e.prototype.round=function(e){return hi("round")},e.prototype.sign=function(e){return hi("sign")},e.prototype.isNaN=function(e){return hi("isNaN")},e.prototype.isInf=function(e){return hi("isInf")},e.prototype.isFinite=function(e){return hi("isFinite")},e.prototype.pow=function(e,t){return hi("pow")},e.prototype.exp=function(e){return hi("exp")},e.prototype.expm1=function(e){return hi("expm1")},e.prototype.softmax=function(e,t){return hi("softmax")},e.prototype.log=function(e){return hi("log")},e.prototype.log1p=function(e){return hi("log1p")},e.prototype.sqrt=function(e){return hi("sqrt")},e.prototype.rsqrt=function(e){return hi("rsqrt")},e.prototype.square=function(e){return hi("square")},e.prototype.reciprocal=function(e){return hi("reciprocal")},e.prototype.relu=function(e){return hi("relu")},e.prototype.relu6=function(e){return hi("relu6")},e.prototype.prelu=function(e,t){return hi("prelu")},e.prototype.elu=function(e){return hi("elu")},e.prototype.eluDer=function(e,t){return hi("eluDer")},e.prototype.selu=function(e){return hi("selu")},e.prototype.int=function(e){return hi("int")},e.prototype.clip=function(e,t,n){return hi("clip")},e.prototype.abs=function(e){return hi("abs")},e.prototype.complexAbs=function(e){return hi("complexAbs")},e.prototype.sigmoid=function(e){return hi("sigmoid")},e.prototype.softplus=function(e){return hi("softplus")},e.prototype.sin=function(e){return hi("sin")},e.prototype.cos=function(e){return hi("cos")},e.prototype.tan=function(e){return hi("tan")},e.prototype.asin=function(e){return hi("asin")},e.prototype.acos=function(e){return hi("acos")},e.prototype.atan=function(e){return hi("atan")},e.prototype.atan2=function(e,t){return hi("atan2")},e.prototype.sinh=function(e){return hi("sinh")},e.prototype.cosh=function(e){return hi("cosh")},e.prototype.tanh=function(e){return hi("tanh")},e.prototype.asinh=function(e){return hi("asinh")},e.prototype.acosh=function(e){return hi("acosh")},e.prototype.atanh=function(e){return hi("atanh")},e.prototype.erf=function(e){return hi("erf")},e.prototype.step=function(e,t){return hi("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,hi("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return hi("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return hi("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return hi("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,hi("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return hi("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return hi("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return hi("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return hi("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return hi("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return hi("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return hi("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return hi("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return hi("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return hi("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return hi("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return hi("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return hi("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return hi("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return hi("reshape")},e.prototype.cast=function(e,t){return hi("cast")},e.prototype.tile=function(e,t){return hi("tile")},e.prototype.pad=function(e,t,n){return hi("pad")},e.prototype.transpose=function(e,t){return hi("transpose")},e.prototype.gather=function(e,t,n){return hi("gather")},e.prototype.gatherND=function(e,t){return hi("gatherND")},e.prototype.scatterND=function(e,t,n){return hi("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return hi("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return hi("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return hi("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return hi("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return hi("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return hi("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,a,i){return hi("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){return hi("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,a,i,o){return hi("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return hi("multinomial")},e.prototype.oneHot=function(e,t,n,r){return hi("oneHot")},e.prototype.cumsum=function(e,t,n,r){return hi("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,a){return hi("nonMaxSuppression")},e.prototype.fft=function(e){return hi("fft")},e.prototype.ifft=function(e){return hi("ifft")},e.prototype.complex=function(e,t){return hi("complex")},e.prototype.real=function(e){return hi("real")},e.prototype.imag=function(e){return hi("imag")},e.prototype.cropAndResize=function(e,t,n,r,a,i){return hi("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return hi("depthToSpace")},e.prototype.split=function(e,t,n){return hi("split")},e.prototype.sparseToDense=function(e,t,n,r){return hi("sparseToDense")},e.prototype.diag=function(e){return hi("diag")},e.prototype.fill=function(e,t,n){return hi("fill")},e.prototype.onesLike=function(e){return hi("onesLike")},e.prototype.zerosLike=function(e){return hi("zerosLike")},e.prototype.linspace=function(e,t,n){return hi("linspace")},e.prototype.dispose=function(){return hi("dispose")},e}();function hi(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function di(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function fi(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function pi(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function gi(e,t,n,r,a,i,o){void 0===o&&(o="channelsLast");var s,c=wi(t),l=c[0],u=c[1];if("channelsLast"===o)s=[l,u,e[3],e[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);s=[l,u,e[1],e[1]]}return vi(e,s,n,r,a,i,!1,o)}function mi(e,t,n,r,a,i,o){void 0===o&&(o="NDHWC");var s,c,l=xi(t),u=l[0],h=l[1],d=l[2];if("NDHWC"===o)c="channelsLast",s=[u,h,d,e[4],e[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat "+o);c="channelsFirst",s=[u,h,d,e[1],e[1]]}return bi(e,s,n,r,a,!1,c,i)}function vi(e,t,n,r,a,i,o,s){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var c=[-1,-1,-1,-1],l=c[0],u=c[1],h=c[2],d=c[3];if("channelsLast"===s)l=e[0],u=e[1],h=e[2],d=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=e[0],d=e[1],u=e[2],h=e[3]}var f,p=t[0],g=t[1],m=t[3],v=wi(n),b=v[0],y=v[1],w=wi(r),x=w[0],C=w[1],k=Ci(p,x),S=Ci(g,C),A=function(e,t,n,r,a,i,o,s){var c,l,u;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=yi(e,t,n));var i=e[1],o=ki((e[0]-t+2*r)/n+1,a);tt(st(o),(function(){return"The output # of rows ("+o+") must be an integer. Change the stride and/or zero pad parameters"}));var s=ki((i-t+2*r)/n+1,a);return tt(st(s),(function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"})),[o,s]}([t,n],i,r,e,s);l=h[0],u=h[1]}else if("same"===e){l=Math.ceil(t/r),u=Math.ceil(n/a);var d=Math.max(0,(l-1)*r+i-t),f=Math.max(0,(u-1)*a+o-n),p=Math.floor(d/2),g=d-p,m=Math.floor(f/2);c={top:p,bottom:g,left:m,right:f-m,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),u=Math.ceil((n-o+1)/a)}return{padInfo:c,outHeight:l,outWidth:u}}(a,u,h,b,y,k,S,i),_=A.padInfo,E=A.outHeight,I=A.outWidth,T=o?m*d:m;return"channelsFirst"===s?f=[l,T,E,I]:"channelsLast"===s&&(f=[l,E,I,T]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:h,inChannels:d,outHeight:E,outWidth:I,outChannels:T,padInfo:_,strideHeight:b,strideWidth:y,filterHeight:p,filterWidth:g,effectiveFilterHeight:k,effectiveFilterWidth:S,dilationHeight:x,dilationWidth:C,inShape:e,outShape:f,filterShape:t}}function bi(e,t,n,r,a,i,o,s){void 0===i&&(i=!1),void 0===o&&(o="channelsLast");var c=[-1,-1,-1,-1,-1],l=c[0],u=c[1],h=c[2],d=c[3],f=c[4];if("channelsLast"===o)l=e[0],u=e[1],h=e[2],d=e[3],f=e[4];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);l=e[0],f=e[1],u=e[2],h=e[3],d=e[4]}var p,g=t[0],m=t[1],v=t[2],b=t[4],y=xi(n),w=y[0],x=y[1],C=y[2],k=xi(r),S=k[0],A=k[1],_=k[2],E=Ci(g,S),I=Ci(m,A),T=Ci(v,_),R=function(e,t,n,r,a,i,o,s,c,l,u){var h,d,f,p;if("number"==typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var g=function(e,t,n,r,a,i){null==a&&(a=yi(e,t,r));var o=e[1],s=e[2],c=ki((e[0]-t+2*a)/r+1,i);tt(st(c),(function(){return"The output # of depths ("+c+") must be an integer. Change the stride and/or zero pad parameters"}));var l=ki((o-t+2*a)/r+1,i);tt(st(l),(function(){return"The output # of rows ("+l+") must be an integer. Change the stride and/or zero pad parameters"}));var u=ki((s-t+2*a)/r+1,i);return tt(st(u),(function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"})),[c,l,u,1]}([t,n,r,1],s,0,a,e,u);d=g[0],f=g[1],p=g[2]}else if("same"===e){var m=((d=Math.ceil(t/a))-1)*a+s-t,v=((f=Math.ceil(n/i))-1)*i+c-n,b=((p=Math.ceil(r/o))-1)*o+l-r,y=Math.floor(m/2),w=m-y,x=Math.floor(v/2),C=v-x,k=Math.floor(b/2);h={top:x,bottom:C,left:k,right:b-k,front:y,back:w,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/a),f=Math.ceil((n-c+1)/i),p=Math.ceil((r-l+1)/o)}return{padInfo:h,outDepth:d,outHeight:f,outWidth:p}}(a,u,h,d,w,x,C,E,I,T,s),F=R.padInfo,P=R.outDepth,D=R.outHeight,O=R.outWidth,N=i?b*f:b;return"channelsFirst"===o?p=[l,N,P,D,O]:"channelsLast"===o&&(p=[l,P,D,O,N]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:h,inWidth:d,inChannels:f,outDepth:P,outHeight:D,outWidth:O,outChannels:N,padInfo:F,strideDepth:w,strideHeight:x,strideWidth:C,filterDepth:g,filterHeight:m,filterWidth:v,effectiveFilterDepth:E,effectiveFilterHeight:I,effectiveFilterWidth:T,dilationDepth:S,dilationHeight:A,dilationWidth:_,inShape:e,outShape:p,filterShape:t}}function yi(e,t,n,r){void 0===r&&(r=1);var a=Ci(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function wi(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function xi(e){return"number"==typeof e?[e,e,e]:e}function Ci(e,t){return t<=1?e:e+(e-1)*(t-1)}function ki(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function Si(e){var t=wi(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function Ai(e,t){return Si(e)||Si(t)}function _i(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function Ei(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=$r(e.shape),a=e.toFloat(),i=n.complex(a,r);return r.dispose(),a.dispose(),i}if(!yt(e.dtype,t))return dn.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var o=n.real(e);return i=o.cast(t),o.dispose(),i}if("int32"===t)return n.int(e);if("bool"===t){var s=qr(0,e.dtype);return i=n.notEqual(e,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Ii(e,t){return dn.makeTensorFromDataId(e.dataId,t,e.dtype)}function Ti(e,t,n){var r=(t-e)/(n-1),a=Dt(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return zr(a,"float32")}function Ri(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Fi(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Pi(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Di(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Oi(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,i=0,o=!1;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||Ni)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Ni(e,t){return e>t?1:e<t?-1:0}function Mi(e,t,n,r,a){return Bi(e,t,n,r,a,0).selectedIndices}function Li(e,t,n,r,a,i){var o=Bi(e,t,n,r,a,i,!0);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function Bi(e,t,n,r,a,i,o,s){void 0===o&&(o=!1),void 0===s&&(s=!1);for(var c=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>a})).sort(qi),l=i>0?-.5/i:0,u=[],h=[];u.length<n&&c.length>0;){var d=c.pop(),f=d.score,p=d.boxIndex,g=d.suppressBeginIndex;if(f<a)break;for(var m=!1,v=u.length-1;v>=g;--v){var b=Ui(e,p,u[v]);if(b>=r){m=!0;break}if(d.score=d.score*ji(r,l,b),d.score<=a)break}d.suppressBeginIndex=u.length,m||(d.score===f?(u.push(p),h.push(d.score)):d.score>a&&Oi(c,d,qi))}var y=u.length;return s&&(u.fill(0,y),h.fill(0,y)),{selectedIndices:zr(u,"int32"),selectedScores:zr(h,"float32"),numValidOutputs:qr(y,"int32")}}function Ui(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),u=Math.min(a[1],a[3]),h=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),f=(s-i)*(c-o),p=(h-l)*(d-u);if(f<=0||p<=0)return 0;var g=Math.max(i,l),m=Math.max(o,u),v=Math.min(s,h),b=Math.min(c,d),y=Math.max(v-g,0)*Math.max(b-m,0);return y/(f+p-y)}function ji(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function qi(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function zi(e,t,n){var r=new Array(e.rank).fill(0),a=e.shape.slice();return t.map((function(t){a[n]=t;var i=e.slice(r,a);return r[n]+=t,i}))}function Wi(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var a=ma(n,e.dtype);for(r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(e.rank),s=0;s<o.length;s++)o[s]=i[s]%e.shape[s];var c=e.locToIndex(o);a.values[r]=e.values[c]}return a.toTensor()}function Gi(e,t,n,r,a){for(var i=t[t.length-1],o=[e.length/i,i],s=o[0],c=o[1],l=gt(n,s*r),u=gt("int32",s*r),h=0;h<s;h++){for(var d=h*c,f=e.subarray(d,d+c),p=[],g=0;g<f.length;g++)p.push({value:f[g],index:g});p.sort((function(e,t){return t.value-e.value}));var m=h*r,v=l.subarray(m,m+r),b=u.subarray(m,m+r);for(g=0;g<r;g++)v[g]=p[g].value,b[g]=p[g].index}var y=t.slice();return y[y.length-1]=r,[Ur(l,y,n),Ur(u,y,"int32")]}function Hi(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var a=ma(e,"int32"),i=ma([n.length,e.length],"int32");for(r=0;r<n.length;r++){var o=a.indexToLoc(n[r]),s=r*e.length;i.values.set(o,s)}return i.toTensor()}Object.freeze({castTensor:Ei,reshapeTensor:Ii,linspaceImpl:Ti,upcastType:rn,axesAreInnerMostDims:Ar,combineLocations:_r,computeOutAndReduceShapes:Er,expandShapeToKeepDim:Ir,assertAxesAreInnerMostDims:Tr,getAxesPermutation:Rr,getUndoAxesPermutation:Fr,getInnerMostAxes:Pr,getBroadcastDims:di,getReductionAxes:fi,assertAndGetBroadcastShape:pi,assertParamsConsistent:Dr,computeOutShape:Or,computePool2DInfo:gi,computePool3DInfo:mi,computeConv2DInfo:vi,computeConv3DInfo:bi,computeDefaultPad:yi,tupleValuesAreOne:Si,eitherStridesOrDilationsAreOne:Ai,convertConv2DDataFormat:_i,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:Ka});var Vi=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},$i=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Xi=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,i=e.inSize,o=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];var s="max"===t?">":"<",c=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+c+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Ki(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function Yi(e,t){return 1===t?[e]:Ki(e,t)}function Ji(){var e,t,n,r,a,i,o,s,c,l;return 2===ze().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",c="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:c,defineRound:l}}function Zi(e,t,n){void 0===n&&(n="index");var r=Tt(t);return r.map((function(t,a){return"int "+e[a]+" = "+n+" / "+t+"; "+(a===r.length-1?"int "+e[a+1]+" = "+n+" - "+e[a]+" * "+t:"index -= "+e[a]+" * "+t)+";"})).join("")}function Qi(e){var t=Tt(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var eo="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function to(e,t,n,r){var a=[];e.forEach((function(e){var t=it(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(a.push("uniform sampler2D "+e.name+";"),a.push("uniform int offset"+e.name+";"))}));var i,o,s=a.join("\n"),c=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?ro(e):no(e);var a=e.shapeInfo.logicalShape,i=t.logicalShape;return a.length<=i.length&&(r+=n?function(e,t){var n,r,a=e.name,i=a.charAt(0).toUpperCase()+a.slice(1),o="get"+i+"AtOutCoords",s=e.shapeInfo.logicalShape.length,c=t.logicalShape.length,l=di(e.shapeInfo.logicalShape,t.logicalShape),u=uo(c),h=c-s,d=["x","y","z","w","u","v"];n=0===s?"":c<2&&l.length>=1?"coords = 0;":l.map((function(e){return"coords."+d[e+h]+" = 0;"})).join("\n"),r=c<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+d[t+h]})).join(", ");var f="return outputValue;",p=1===it(e.shapeInfo.logicalShape),g=1===it(t.logicalShape);if(1!==s||p||g){if(p&&!g)f=1===c?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){var m=s-2,v=s-1;l.indexOf(m)>-1&&l.indexOf(v)>-1?f="return vec4(outputValue.x);":l.indexOf(m)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+o+"() {\n      "+u+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+i+"("+r+");\n      "+f+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===c&&null==e.shapeInfo.flatOffset&&ot(o,i))return"\n      float "+a+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var l=uo(c),u=di(e.shapeInfo.logicalShape,t.logicalShape),h=c-s,d=["x","y","z","w","u","v"];return"\n    float "+a+"() {\n      "+l+" coords = getOutputCoords();\n      "+(0===s?"":c<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+d[e+h]+" = 0;"})).join("\n"))+"\n      return get"+r+"("+(c<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+d[t+h]})).join(", "))+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),l=t.texShape,u=Ji(),h=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(u),d=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+ao+"\n    "+io+"\n    "+oo+"\n  "}(u);return t.isPacked?(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(ot(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=(i=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n      int index = resTexRC.x * "+a[1]+" + resTexRC.y;\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+i+");\n      int c = imod(index, "+i+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),i=a,o="",s="b, r, c",c=2;c<e.length-1;c++)o="\n      int b"+c+" = index / "+(i*=e[e.length-c-1])+";\n      index -= b"+c+" * "+i+";\n    "+o,s="b"+c+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+o+"\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,a,i,o}(t.logicalShape,l),o=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(u)):(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return ot(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=Zi(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=Zi(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=Zi(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=Zi(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,l),o=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(u)),r&&(d+=so),[d,h,o,s,i,c,n].join("\n")}function no(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===a&&1===i)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+o[0]+", "+o[1]+", "+co(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+lo(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===i&&1===a)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=co(t);return 1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+o+") + 0.5) / "+a+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+o+") + 0.5) / "+i+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+a+", "+i+", index + "+o+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&ot(t,a)){var i=a[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+a[1]+".0, "+i+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var o=pt(t),s=o.newShape,c=o.keptDims,l=s;if(l.length<t.length)return"\n      "+no(ho(e,l))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+fo(["row","col"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+lo(e)+"\n      }\n    ";var u=a[0],h=a[1],d=co(n);return 1===h?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+u+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===u?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+h+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+d+";\n    vec2 uv = uvFromFlat("+u+", "+h+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],i=t[2],o=pt(t),s=o.newShape,c=o.keptDims,l=s;if(l.length<t.length)return"\n        "+no(ho(e,l))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+fo(["row","col","depth"],c)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+a+", "+i+", 1)));\n        "+lo(e)+"\n      }\n    ";var u=e.shapeInfo.texShape,h=u[0],d=u[1],f=e.shapeInfo.flatOffset;return d===a&&null==f?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+i+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+d+".0, "+h+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":d===i&&null==f?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+d+".0, "+h+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+a+" + col * "+i+" + depth + "+co(n)+";\n        vec2 uv = uvFromFlat("+h+", "+d+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],i=t[2]*a,o=t[1]*i,s=pt(t),c=s.newShape,l=s.keptDims;if(c.length<t.length)return"\n      "+no(ho(e,c))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+fo(["row","col","depth","depth2"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+o+", "+i+", "+a+", 1)));\n        "+lo(e)+"\n      }\n    ";var u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],f=h[1];return f===o&&null==u?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+i+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":f===a&&null==u?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+o+" + col * "+i+" +\n          depth * "+a+" + depth2;\n      vec2 uv = uvFromFlat("+d+", "+f+", index + "+co(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,c=pt(t),l=c.newShape,u=c.keptDims;if(l.length<t.length)return"\n      "+no(ho(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+fo(["row","col","depth","depth2","depth3"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+o+", "+i+", "+a+")) +\n          depth3;\n        "+lo(e)+"\n      }\n    ";var h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],p=d[1];return p===s&&null==h?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+o+", "+i+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===a&&null==h?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+o+" + depth * "+i+" +\n          depth2 * "+a+" + depth3 + "+co(n)+";\n      vec2 uv = uvFromFlat("+f+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=pt(t),i=a.newShape,o=a.keptDims;if(i.length<t.length)return"\n      "+no(ho(e,i))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+fo(["row","col","depth","depth2","depth3","depth4"],o)+");\n      }\n    ";var s=t[5],c=t[4]*s,l=t[3]*c,u=t[2]*l,h=t[1]*u;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+h+", "+u+", "+l+", "+c+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+lo(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,p=f[0],g=f[1];return g===h&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+u+", "+l+", "+c+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+g+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":g===s&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+g+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+h+" + col * "+u+" + depth * "+l+" +\n          depth2 * "+c+" + depth3 * "+s+" + depth4 + "+co(n)+";\n      vec2 uv = uvFromFlat("+p+", "+g+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function ro(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1)+"() {\n      return "+Ji().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Ji();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+a[0]+", "+a[1]+", index);\n      return "+i.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=a[0],o=a[1],s=Ji();if(null!=a&&ot(t,a))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+o+".0, "+i+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+c[0]+", "+c[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0])return"\n        "+ro(ho(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+fo(["b","row","col"],[1,2])+");\n        }\n      ";var o=i[0],s=i[1],c=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+o+", "+s+", "+c*Math.ceil(t[1]/2)+", "+c+", b, row, col);\n      return "+Ji().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],s=o[0],c=o[1],l=Math.ceil(t[n-1]/2),u=l*Math.ceil(t[n-2]/2),h="int b, int row, int col",d="b * "+u+" + (row / 2) * "+l+" + (col / 2)",f=2;f<n-1;f++)h="int b"+f+", "+h,d="b"+f+" * "+(u*=t[n-f-1])+" + "+d;return"\n    vec4 "+a+"("+h+") {\n      int index = "+d+";\n      int texR = index / "+c+";\n      int texC = index - texR * "+c+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+c+", "+s+");\n      return "+Ji().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var ao="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",io="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",oo="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",so="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function co(e){return"offset"+e}function lo(e){var t=e.name,n=it(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function uo(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function ho(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function fo(e,t){return t.map((function(t){return e[t]})).join(", ")}var po=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,tt(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var o,s,c=this.outputShape,l=c.length,u=uo(l),h=Yi("coords",l);if(1===i){var d=uo(s=l+1);o="\n        "+d+" sourceLocR = "+d+"("+h.join()+", 0);\n        ++"+h[l-1]+";\n        "+d+" sourceLocG = "+d+"("+h.join()+", 0);\n        ++"+h[l-2]+";\n        "+d+" sourceLocA = "+d+"("+h.join()+", 0);\n        --"+h[l-1]+";\n        "+d+" sourceLocB = "+d+"("+h.join()+", 0);\n        --"+h[l-2]+";"}else s=l,o="\n        "+u+" sourceLocR = coords;\n        ++"+h[l-1]+";\n        "+u+" sourceLocG = coords;\n        ++"+h[l-2]+";\n        "+u+" sourceLocA = coords;\n        --"+h[l-1]+";\n        "+u+" sourceLocB = coords;\n        --"+h[l-2]+";";var f=["x","y","z","w","u","v"].slice(0,s),p="."+f[s-1],g=f.map((function(e){return"int "+e})),m=Yi("sourceLocR",s-1).concat("inIdx.r"),v=Yi("sourceLocG",s-1).concat("inIdx.g"),b=Yi("sourceLocB",s-1).concat("inIdx.b"),y=Yi("sourceLocA",s-1).concat("inIdx.a"),w="max"===n?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+b.join()+"),\n                             getBestIndicesAChannel("+y.join()+")));",C="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+v.join()+") : 0.,\n            hasNextRow ? getAChannel("+b.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+y.join()+") : 0.)",k=r?"":"\n      float getBestIndicesAChannel("+g.join()+") {\n        return getChannel(getBestIndicesA("+f.join()+"),\n                                          vec2("+f.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+g.join()+") {\n        return getChannel(getA("+f.join()+"),\n                               vec2("+f.slice(-2).join()+"));\n      }\n      "+k+"\n      void main() {\n        "+u+" coords = getOutputCoords();\n        bool hasNextCol = "+h[l-1]+" < "+(c[l-1]-1)+";\n        bool hasNextRow = "+h[l-2]+" < "+(c[l-2]-1)+";\n        "+o+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+C+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+x+"\n          vec4 candidate = "+C+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+w+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},go=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=s-1-e.padInfo.top,u=c-1-e.padInfo.left,h=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+l+", "+u+");\n      const float avgMultiplier = float("+h+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+i+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+c+";\n            wC+= "+o+") {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},mo=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=u-1-e.padInfo.front,p=h-1-e.padInfo.top,g=d-1-e.padInfo.left,m=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+f+", "+p+", "+g+");\n      const float avgMultiplier = float("+m+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+u+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+a+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+h+";\n              wR += "+c+") {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+d+";\n                wC += "+l+") {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},vo=function(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],pi(e,t),pi(e,n);var o="0.0";null!=r&&(pi(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";null!=a&&(pi(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+o+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},bo=function(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],pi(e,t),pi(e,n);var o="vec4(0.0)";null!=r&&(pi(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=a&&(pi(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+o+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+i+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},yo=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=pi(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},wo="return a + b;",xo="return a - b;",Co="return a * b;",ko="return (a < 0.) ? b * a : a;",So=function(e,t,n){this.variableNames=["A","B"],this.outputShape=pi(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},Ao="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",_o=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=pi(t,n);var a=this.outputShape.length,i="";if(r)if(0===a||1===it(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          "+uo(a)+" coords = getOutputCoords();\n        ",1===a)i+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var o=Yi("coords",a);i+="\n            bool nextRowOutOfBounds =\n              ("+o[a-2]+" + 1) >= "+this.outputShape[a-2]+";\n            bool nextColOutOfBounds =\n              ("+o[a-1]+" + 1) >= "+this.outputShape[a-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+i+"\n\n        setOutput(result);\n      }\n    "},Eo=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),Io=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),To=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},Ro=function(e){this.outputShape=[],this.outputShape=Or(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var a=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+a+"));")}var i=t.length,o=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},Fo=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Or(e,t);var n=this.outputShape,r=n.length,a=uo(r),i=Yi("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var c=1;c<s.length;c++)s[c]=s[c-1]+e[c][t];var l=o[t],u=o.slice(-2),h=o.join(),d="if ("+l+" < "+s[0]+") {\n        return getChannel(\n            getT0("+h+"), vec2("+u.join()+"));\n        }";for(c=1;c<s.length;c++){var f=s[c-1];d+="\n        if ("+l+" < "+s[c]+"  && "+l+" >= "+s[c-1]+") {\n          return getChannel(\n            getT"+c+"("+Po(o,l,f)+"),\n            vec2("+Po(u,l,f)+"));\n        }"}var p=s.length,g=s[s.length-1];d+="\n        return getChannel(\n          getT"+p+"("+Po(o,l,g)+"),\n          vec2("+Po(u,l,g)+"));",this.userCode="\n      float getValue("+o.map((function(e){return"int "+e}))+") {\n        "+d+"\n      }\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+i+"), 0., 0., 0.);\n\n        "+i[r-1]+" = "+i[r-1]+" + 1;\n        if ("+i[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+i+");\n        }\n\n        "+i[r-2]+" = "+i[r-2]+" + 1;\n        if ("+i[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+i+");\n        }\n\n        "+i[r-1]+" = "+i[r-1]+" - 1;\n        if ("+i[r-2]+" < "+n[r-2]+" &&\n            "+i[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+i+");\n        }\n        setOutput(result);\n      }\n    "};function Po(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var Do=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+i+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Oo=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,c=i?1:2,l=i?2:3,u=i?3:1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+u+"];\n\n        ivec2 dyCorner = ivec2(coords["+c+"], coords["+l+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+i+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},No=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+a+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+i+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+o+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Mo=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,c=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+c+", "+l+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+a+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Lo=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+i+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Bo=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Uo=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,s=e.strideWidth,c=e.dilationHeight,l=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,d=4*Math.floor(e.inChannels/4),f=e.inChannels%4,p="channelsLast"===e.dataFormat,g=p?1:2,m=p?2:3,v=p?3:1,b="",y="";n&&(b=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",y="result = activation(result);");var w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+b+"\n\n      const ivec2 strides = ivec2("+o+", "+s+");\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+v+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+g+"], coords["+m+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+u+"; wR++) {\n          int xR = xRCorner + wR * "+c+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC++) {\n            int xC = xCCorner + wC * "+l+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+p+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===f)+") {\n\n              if ("+p+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+d+") *\n                    getW(wR, wC, "+d+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+d+", xR, xC) *\n                    getW(wR, wC, "+d+", d2);\n              }\n\n            } else if ("+(2===f)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2)\n              );\n\n              if ("+p+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===f)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2),\n                getW(wR, wC, "+d+" + 2, d2)\n              );\n\n              if ("+p+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1),\n                  getX(batch, xR, xC, "+d+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC),\n                  getX(batch, "+d+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+w+"\n        "+y+"\n        setOutput(result);\n      }\n    "},jo=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,l=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,d=e.filterWidth,f=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+a+", "+i+", "+o+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+u+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+"; wR++) {\n            int xR = xRCorner + wR * "+c+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+d+"; wC++) {\n              int xC = xCCorner + wC * "+l+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+f+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+f+") *\n                  getW(wF, wR, wC, "+f+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1),\n                  getX(batch, xF, xR, xC, "+f+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2),\n                  getW(wF, wR, wC, "+f+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},qo=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,c=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,d=e.filterHeight,f=e.filterWidth,p=e.outChannels/e.inChannels,g="",m="";n&&(g=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",m="result = activation(result);");var v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+g+"\n\n      const ivec2 strides = ivec2("+c+", "+l+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+p+";\n        int q = d2 - d1 * "+p+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+d+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+a+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+h+";\n\n            if (xC < 0 || xC >= "+i+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+v+"\n        "+m+"\n        setOutput(result);\n      }\n    "},zo=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,c=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,d=e.filterHeight,f=e.filterWidth,p=f,g="int xR; int xC; int xCOffset;",m=0;m<d;m++)for(var v=0;v<f;v++)g+="\n          vec4 xTexelR"+m+"C"+2*v+" = vec4(0.);\n          vec4 wR"+m+"C"+v+" = vec4(0.);\n          vec4 xR"+m+"C"+v+" = vec4(0.);";for(m=0;m<d;m++)for(var b=0;b<p;b++){if(g+="\n          xR = xRCorner + "+m*u+";\n          xC = xCCorner + "+(v=2*b)*h+";\n        ",1===l){if(v<f&&(g+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+a+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+v+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    xTexelR"+m+"C"+v+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+m+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+a+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+m+"C"+v+" = vec4(previous.zw, xTexelR"+m+"C"+v+".xy);\n                } else {\n                  xR"+m+"C"+v+" = vec4(0, 0, xTexelR"+m+"C"+v+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+a+" && xC >= 0 && xC < "+i+") {\n                  xTexelR"+m+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+v+" = vec4(0.);\n                }\n\n                xR"+m+"C"+v+" = xTexelR"+m+"C"+v+";\n              ",v+1<f)){var y=s%2==0?Qe(h):h;h%2==0&&s%2==1||h%2!=0&&s%2!=1?(g+="\n                  xCOffset = xC + "+s%2+" + "+y+";\n\n                  if(xR >= 0 && xR < "+a+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+m+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",h>1&&(g+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+a+" &&\n                      xCOffset >= 0 && xCOffset < "+i+") {\n                      xTexelR"+m+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+m+"C"+v+" = vec4(0.);\n                    }\n                  "),g+="\n                  xR"+m+"C"+(v+1)+" = vec4(\n                    xTexelR"+m+"C"+v+".zw, xTexelR"+m+"C"+(v+2)+".xy);\n                "):g+="\n                  xCOffset = xC + "+y+";\n\n                  if(xR >= 0 && xR < "+a+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+m+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+m+"C"+(v+1)+" = xTexelR"+m+"C"+(v+2)+";\n                "}}else v<f&&(g+="\n              if(xR >= 0 && xR < "+a+") {\n            ",s%2==1?(g+="\n                xCOffset = xC + 1 - "+l+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+v+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+i+") {\n                  xTexelR"+m+"C"+(v+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+m+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+v+" = vec4(\n                  xTexelR"+m+"C"+v+".zw, xTexelR"+m+"C"+(v+2)+".zw);\n              ",v+1<f&&(g+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+l+";\n                  if(xCOffset >= 0 && xCOffset < "+i+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+m+"C"+(v+1)+" = vec4(xTexelR"+m+"C"+(v+2)+".xy, final.xy);\n                ")):(g+="\n                if(xC >= 0 && xC < "+i+") {\n                  xTexelR"+m+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+l+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+v+" = vec4(\n                  xTexelR"+m+"C"+v+".xy, xTexelR"+m+"C"+(v+2)+".xy);\n              ",v+1<f&&(g+="\n                  xR"+m+"C"+(v+1)+" = vec4(\n                    xTexelR"+m+"C"+v+".zw, xTexelR"+m+"C"+(v+2)+".zw);\n                ")),g+="}");v<f&&(g+="\n            vec4 wTexelR"+m+"C"+v+" = getW("+m+", "+v+", d1, q);\n            wR"+m+"C"+v+" = vec4(wTexelR"+m+"C"+v+".xz, wTexelR"+m+"C"+v+".xz);\n          ",v+1<f&&(g+="\n              vec4 wTexelR"+m+"C"+(v+1)+" = getW("+m+", "+(v+1)+", d1, q);\n              wR"+m+"C"+(v+1)+" =\n                vec4(wTexelR"+m+"C"+(v+1)+".xz, wTexelR"+m+"C"+(v+1)+".xz);"))}for(m=0;m<d;m++)for(v=0;v<f;v++)g+="dotProd += xR"+m+"C"+v+" * wR"+m+"C"+v+";";var w="",x="";n&&(w=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",x="result = activation(result);");var C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+w+"\n\n      const ivec2 strides = ivec2("+c+", "+l+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+g+"\n\n        vec4 result = dotProd;\n        "+C+"\n        "+x+"\n        setOutput(result);\n      }\n    "},Wo=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],s=e[2],c=e[3],l=t[0],u=n[0],h=n[1];this.outputShape=[l,u,h,c];var d="bilinear"===r?1:0,f=[o-1+".0",s-1+".0"],p=f[0],g=f[1],m=u>1?[""+(o-1)/(u-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],v=m[0],b=m[1],y=m[2],w=h>1?[""+(s-1)/(h-1),"(x2-x1) * width_ratio","x1*"+g+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+g],x=w[0],C=w[1],k=w[2];this.userCode="\n      const float height_ratio = float("+v+");\n      const float width_ratio = float("+x+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+i+") {\n          return;\n        }\n\n        float height_scale = "+b+";\n        float width_scale = "+C+";\n\n        float in_y = "+y+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n        float in_x = "+k+";\n        if( in_x < 0.0 || in_x > "+g+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+d+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Go=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],i=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+a+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+uo(r)+" coords = getOutputCoords();\n        int end = "+Ho(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+a+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+i+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+Ho(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Ho(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var Vo=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=gn.DENSE;var t=kn(e),n=Ji();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Zi(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},$o=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=gn.DENSE;var t=kn(e),n=Ji();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Zi(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Xo=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),Ko=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},Yo=function(e){this.variableNames=["A"],this.outTexUsage=mn.DOWNLOAD;var t=Ji();this.outputShape=e,this.userCode="\n      "+eo+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Jo=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=mn.DOWNLOAD;var t=Ji();this.outputShape=e,this.userCode="\n      "+eo+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Zo=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Ji(),a=t[0],i=t[1];this.outputShape=e;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode="\n      "+Qi(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+i+";\n        int c = imod(flatIndex, "+i+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+a+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+o+", 0., 0., 0.);\n      }\n    "},Qo=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Ji(),a=t[0],i=t[1];this.outputShape=e;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var l=0;l<=1;l++){var u=2*c+l;o+="\n          localCoords = coords;\n          if(localCoords[2] + "+l+" < "+e[2]+") {\n            localCoords[2] += "+l+";\n            if(localCoords[1] + "+c+" < "+e[1]+") {\n              localCoords[1] += "+c+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+i+";\n              c = imod(flatIndex, "+i+");\n              uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+a+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+u+"] = values[0];\n              } else if(offset == 1) {\n                result["+u+"] = values[1];\n              } else if(offset == 2) {\n                result["+u+"] = values[2];\n              } else {\n                result["+u+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Qi(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+o+"\n\n        "+r.output+" = "+s+";\n      }\n    "},es=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+a+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+i+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},ts=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),ns=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var a=uo(this.rank),i=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],i=0;i<e.length;i++)i===t?a.push("int(getIndices("+r[i]+"))"):a.push(""+r[i]);return a.join()}(e,n);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},rs=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=uo(t.length),a=uo(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+a+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+i+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function as(e,t){var n=Ji();return Rn(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function is(e,t){return Bn(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function os(e,t){return Un(e,t,new Uint16Array([0,1,2,2,1,3]))}function ss(e,t,n,r,a,i,o){qn(n,r);var s=jn(e,t),c=e.TEXTURE_2D;return _n(e,t,(function(){return e.bindTexture(c,s)})),_n(e,t,(function(){return e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),_n(e,t,(function(){return e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),_n(e,t,(function(){return e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST)})),_n(e,t,(function(){return e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST)})),_n(e,t,(function(){return e.texImage2D(c,0,a,n,r,0,i,o,null)})),_n(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function cs(e,t,n,r,a){var i=Cn(n,r);return ss(e,t,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}function ls(e,t,n,r,a){var i=Cn(n,r);return ss(e,t,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function us(e,t,n,r,a){var i=Cn(n,r);return ss(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function hs(e,t,n,r,a){var i=Sn(n,r);return ss(e,t,i[0],i[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function ds(e,t,n,r,a){var i=Sn(n,r);return ss(e,t,i[0],i[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}function fs(e,t,n,r){return _n(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Wn(e,t,n,"clipSpacePos",r,3,20,0)&&Wn(e,t,n,"uv",r,2,20,12)}function ps(e,t,n,r,a,i,o){var s,c,l;_n(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),i instanceof Uint8Array?(s=new Uint8Array(r*a*4),c=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*a*4),c=e.FLOAT,l=o.internalFormatPackedFloat),s.set(i),_n(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,a,0,e.RGBA,c,s)})),_n(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function gs(e,t,n,r){_n(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?_n(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):_n(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),_n(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function ms(e,t,n,r,a){var i=e.createBuffer();_n(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)}));var o=16*n*r;return _n(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),_n(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),_n(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),i}function vs(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function bs(e,t,n,r,a){var i=Cn(n,r),o=i[0],s=i[1],c=new Uint8Array(n*r*4);return _n(e,t,(function(){return e.readPixels(0,0,o,s,a.downloadTextureFormat,e.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}function ys(e,t,n,r,a,i,o,s){var c=e,l=new Float32Array(function(e,t){var n=Sn(e,t);return n[0]*n[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}function ws(e,t,n,r){var a=new Float32Array(n*r*4);return _n(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,a)})),a}var xs=Object.freeze({createVertexShader:as,createVertexBuffer:is,createIndexBuffer:os,createFloat32MatrixTexture:cs,createFloat16MatrixTexture:ls,createUnsignedBytesMatrixTexture:us,createPackedMatrixTexture:hs,createFloat16PackedMatrixTexture:ds,bindVertexProgramAttributeStreams:fs,uploadDenseMatrixToTexture:ps,uploadPixelDataToTexture:gs,createBufferFromOutputTexture:ms,downloadFloat32MatrixFromBuffer:vs,downloadByteEncodedFloatMatrixFromOutputTexture:bs,downloadPackedMatrixFromBuffer:ys,downloadMatrixFromPackedOutputTexture:ws}),Cs=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=ze().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,wn(t,e)):this.gl=xn(t);var n="WEBGL_color_buffer_float";if(1===ze().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=Tn(this.gl,this.debug,"OES_texture_float"),lr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Tn(this.gl,this.debug,"OES_texture_half_float");else if(ze().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),lr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Tn(this.gl,this.debug,"EXT_color_buffer_half_float");else if(ze().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",lr(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!lr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=is(this.gl,this.debug),this.indexBuffer=os(this.gl,this.debug),this.framebuffer=zn(this.gl,this.debug),this.textureConfig=An(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return ze().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;_n(t,this.debug,(function(){return t.finish()})),_n(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),_n(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),_n(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),_n(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),_n(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),cs(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),ls(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),us(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),gs(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),ps(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),ds(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),hs(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Kn(this.gl,this.debug,this.framebuffer),this.outputTexture=null),_n(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return bs(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,a,i){return ys(this.gl,e,0,0,0,a,i,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return vs(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=ms(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(ze().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return ws(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=Fn(t,this.debug,e),r=as(t,this.debug),a=Nn(t,this.debug);return _n(t,this.debug,(function(){return t.attachShader(a,r)})),_n(t,this.debug,(function(){return t.attachShader(a,n)})),Mn(t,this.debug,a),this.debug&&Ln(t,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=fs(t,this.debug,this.program,this.vertexBuffer)),a},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&_n(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Ln(this.gl,this.debug,this.program),_n(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Hn(this.gl,this.debug,e,t):Vn(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),_n(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),$n(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=Sn(t,n),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&Ln(this.gl,this.debug,this.program),Yn(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),_n(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),_n(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Tn(this.gl,this.debug,2===ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a},e.prototype.endQuery=function(){if(2!==ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return Be(this,void 0,void 0,(function(){var t=this;return Ue(this,(function(n){switch(n.label){case 0:return[4,ht((function(){return t.disposed||t.isQueryAvailable(e,ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||ht((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Xn(this.gl,this.debug,e,this.framebuffer),this.debug&&Yn(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Xn(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Yn(this.gl)):Kn(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;Xn(r,this.debug,e,this.framebuffer),this.debug&&Yn(r),this.outputTexture=e,_n(r,this.debug,(function(){return r.viewport(0,0,t,n)})),_n(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var a=this;this.throwIfDisposed(),_n(this.gl,this.debug,(function(){return a.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function ks(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!ot(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!ot(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+s+" must match")}}))}var Ss=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,a=n.inChannels,i=n.strideWidth,o=n.strideHeight,s=n.padInfo,c=n.outWidth,l=n.dilationWidth,u=n.dilationHeight,h=n.dataFormat,d=s.left,f=s.top,p=a*r,g=Ji(),m="channelsLast"===h,v=m?0:1,b=m?1:2,y="",w=0;w<=1;w++)for(var x=0;x<=1;x++)y+="\n          blockIndex = rc.y + "+x+";\n          pos = rc.x + "+w+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+c+")) * "+o+" - "+f+";\n            d0 = offsetY + "+u+" * (pos / "+p+");\n\n            if(d0 < "+t[v]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+c+".) * "+i+". - "+d+".);\n              d1 = offsetX + "+l+" * (int(mod(float(pos), "+p+".) / "+a+".));\n\n              if(d1 < "+t[b]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+a+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*w+x)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*w+x)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+y+"\n\n        "+g.output+" = result;\n      }\n    "},As=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=t,s=e[3]-1;this.outputShape=e;var c="float("+n+") + float("+r+") * sum";i=.5===a?"inversesqrt("+c+")":1===a?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+o+"; j <= "+o+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+i+";\n        setOutput(val);\n      }\n    "},_s=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+a+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+a+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},Es=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,s=e[3]-1;this.outputShape=e;var c="float("+n+") + float("+r+") * sum";i=.5===a?"inversesqrt("+c+")":1===a?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+o+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+o+"; j <= "+o+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+i+";\n        setOutput(result);\n      }\n    "},Is=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,s=i-1-e.padInfo.left,c=a*i-1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+i+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+c+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+i+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ts=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,c=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.front,h=c-1-e.padInfo.top,d=l-1-e.padInfo.left,f=s*c*l-1;this.userCode="\n      const ivec3 pads = ivec3("+u+", "+h+", "+d+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+a+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+c+";\n              wR += "+i+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+o+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+f+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+c+" * "+l+" +\n                  wR * "+l+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Rs=function(e,t,n,r,a,i,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===i&&(i=null),void 0===o&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],c=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",u=r?"rc.z, i * 2":"i * 2, rc.z",h=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",p="";i&&(f=o?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+i+"\n        }":"vec4 activation(vec4 x) {\n          "+i+"\n        }",p="result = activation(result);");var g=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+f+"\n\n      const float sharedDimension = "+c+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+c+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+l+");\n          vec4 b = getMatrixB(rc.x, "+u+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+h[0]+" * "+d[0]+");\n          result += ("+h[1]+" * "+d[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+g+"\n\n        "+p+"\n\n        setOutput(result);\n      }\n    "},Fs=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),Ps=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Ds=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Yi("rc",t),r=uo(t),a=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",a=e-2;a<e;a++)r+=n[a]+" >= "+t[a],a<e-1&&(r+="||");return r}(t,e,n),i=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = "+a[0]+";\n    int c = "+a[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),o=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var i=(0===r?"r":"rp1")+", "+(0===a?"c":"cp1"),o=2;o<e;o++)i=t[t.length-1-o]+","+i;n.push(i)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+a+") {\n            setOutput(vec4(0));\n          } else {\n            "+i+"\n\n            setOutput(vec4("+o+"));\n          }\n        }\n      "}},Os=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,a=uo(r),i=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+a+" start = "+a+"("+i+");\n      "+a+" end = "+a+"("+o+");\n\n      void main() {\n        "+a+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+a+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Ns=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,a=uo(r),i=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=Yi("rc",r),c=Yi("source",r),l=s[r-1]+" < "+this.outputShape[r-1],u=1===r?"source":"vec2("+c.slice(-2).join()+")",h=[a+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+l+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+l+") {"],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",p=0,g=1===r?2:4;p<g;p++)f+="\n        "+h[p]+"\n        if ("+d+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+a+" source = rc - start;\n          result["+p+"] = getChannel(getX("+c.join()+"), "+u+");\n        }\n      ";f+=1===r?"} ":"}}",this.userCode="\n      const "+a+" start = "+a+"("+i+");\n      const "+a+" end = "+a+"("+o+");\n\n      void main() {\n        "+a+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+f+"\n        setOutput(result);\n      }\n    "},Ms=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,c=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var d="avg"===t,f="0.0";if(d||(f="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+a+", "+i+");\n        const ivec2 pads = ivec2("+u+", "+h+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+c+";\n              wR += "+o+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+l+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(p="avgValue / count");var g=4*Math.floor(r/4),m=r%4,v="\n      if ("+d+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+u+", "+h+");\n      const float initializationValue = "+f+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+f+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+c+";\n            wR += "+o+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+g+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+v+"\n          }\n\n          int xC = xCCorner + "+g+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+v+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},Ls=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,p=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var m="avg"===t,v="0.0";if(m||(v="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+a+", "+i+", "+o+");\n        const ivec3 pads = ivec3("+f+", "+p+", "+g+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+u+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+h+";\n                wR += "+c+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+d+";\n                  wC += "+l+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+h+" * "+d+" +\n                      wR * "+d+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var b=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(b="avgValue / count");var y=4*Math.floor(r/4),w=r%4,x="\n      if ("+m+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+a+", "+i+", "+o+");\n      const ivec3 pads = ivec3("+f+", "+p+", "+g+");\n      const float initializationValue = "+v+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+v+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+u+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+";\n            wR += "+c+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+y+"; wC += 4) {\n              int xC = xCCorner + wC * "+l+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+l+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+l+", ch)\n              );\n\n              "+x+"\n            }\n\n            int xC = xCCorner + "+y+";\n            if ("+(1===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+x+"\n            } else if ("+(2===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+x+"\n            } else if ("+(3===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+l+", ch),\n                initializationValue\n              );\n\n              "+x+"\n            }\n          }\n          setOutput("+b+");\n        }\n      }\n    "}},Bs=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=Math.ceil(a/n);this.outputShape=[r,i];var o="0.0",s="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",s="min"):"max"===t&&(o="-1.0 / 1e-20",s="max");var c=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?c="sumValue":"prod"===t?c="prodValue":"all"===t?c="allValue":"any"===t&&(c="anyValue");var l=4*Math.floor(n/4),u=n%4,h="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",d="vec4";"all"===t?(o="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(o="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var f="";a%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+o+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+o+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+h+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===u)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(2===u)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(3===u)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+h+"\n        }\n        setOutput("+c+");\n      }\n    "},Us=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+="\n        "+a+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Zi(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Qi(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},js=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],c=o[2],l=[n&&s>1?a-1:a,n&&c>1?i-1:i],u=[n&&s>1?s-1:s,n&&c>1?c-1:c],h=l[0]/u[0],d=l[1]/u[1],f=1/h,p=1/d,g=2*Math.ceil(f)+2,m=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+g+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+c+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(a-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(i-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},qs=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var c=[r&&t>1?i-1:i,r&&n>1?o-1:o],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+c[0]/l[0]+",\n          "+c[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},zs=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var c=[r&&t>1?i-1:i,r&&n>1?o-1:o],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+c[0]/l[0]+",\n          "+c[1]/l[1]+",\n          "+c[1]/l[1]+");\n      const vec3 inputShapeRC = vec3("+i+".0, "+o+".0,\n                                     "+o+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Ws=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],c=o[2],l=[n&&s>1?a-1:a,n&&c>1?i-1:i],u=[n&&s>1?s-1:s,n&&c>1?c-1:c],h=l[0]/u[0],d=l[1]/u[1],f=1/h,p=1/d,g=2*Math.ceil(f)+2,m=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+g+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+c+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+u[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+u[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Gs=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var c=[r&&t>1?i-1:i,r&&n>1?o-1:o],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],u=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+c[0]/l[0]+",\n          "+c[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+u+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Hs=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),a=uo(n);this.userCode="\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},Vs=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Yi("rc",n),a=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],o=uo(n);function s(n){var r=e.map((function(r,a){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(a,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+a+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+o+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+a+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+i+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+a+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},$s=function(e,t,n,r,a,i,o){void 0===o&&(o=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=uo(a.length),c=uo(i.length),l="";1===n?l="i":2===n&&(l="i, j");var u="getIndices("+l+")",h="";1===r?h="i":2===r&&(h="i, coords[1]");var d="getUpdates("+h+")",f=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+a+");\n\n        void main() {\n          "+c+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+u+");\n              flattenedIndex += index * "+f+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+d+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Xs=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),c=n%4,l="\n        sumValue += dot(values, segFilter);\n    ",u="";a%n>0&&(u="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      ");var h="";a%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+u+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+h+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+i+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+i+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===c)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===c)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===c)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "},Ks=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],c=0;c<t.length;c++)s.push(""+i[c]),c<e&&o.push(""+i[c]);r=o.join(),a=s.join()}var l=uo(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+a+"));\n        } else {\n          setOutput(getB("+a+"));\n        }\n      }\n    "},Ys=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=uo(this.rank),r="uniform int start["+this.rank+"];",a=function(e){if(1===e)return"sourceLoc";if(e<=6)return Js.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+Js[t]+" = start["+t+"] + coords."+Js[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+a+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Js=["x","y","z","w","u","v"],Zs=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=uo(this.rank),n=Yi("coords",this.rank),r=Yi("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",i="getChannel(getSource("+r.join()+"), "+a+")",o="\n      result.x = "+i+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+i+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+i+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+i+";\n        }\n      }\n    ",c=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+c+"\n        vec4 result = vec4(0.);\n        "+o+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Qs=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=uo(n.length),i=uo(n.length),o="";if(1===r)o="coords * strides + begin";else{var s=0;o=n.map((function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+a+" begin = "+a+"("+e+");\n      "+a+" strides = "+a+"("+t+");\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "},ec=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,a=tc(t,n),i=nc(e,a,n);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var o=this.freeTextures[i].shift();return this.usedTextures[i].push(o),o}return this.numUsedTextures++,this.log(),a===vn.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===vn.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===vn.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===vn.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===vn.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var a=nc(t,tc(n,r),r);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[a],o=i.indexOf(e);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(o,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function tc(e,t){if(e===mn.UPLOAD)return vn.PACKED_2X2_FLOAT32;if(e===mn.RENDER||null==e)return function(e){return ze().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?vn.PACKED_2X2_FLOAT32:vn.UNPACKED_FLOAT32:e?vn.PACKED_2X2_FLOAT16:vn.UNPACKED_FLOAT16}(t);if(e===mn.DOWNLOAD||e===mn.PIXELS)return vn.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function nc(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var rc=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=uo(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod("+n[a]+", "+e[a]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},ac=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=uo(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode="\n    void main() {\n      "+a+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "},ic=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=uo(this.rank),i=Ki("rc",this.rank),o=new Array(this.rank);for(r=0;r<t.length;r++)o[t[r]]=i[r];var s="vec2("+o.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+o.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+a+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+l+";\n      if("+c+") {\n        result[1] = "+l+";\n      }\n      --"+i[this.rank-1]+";\n      if(++"+i[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+l+";\n        if("+c+") {\n          result[3] = "+l+";\n        }\n      }\n      setOutput(result);\n    }\n    "},oc=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},sc="if (isnan(x)) return x;",cc="return abs(x);",lc=sc+"\n  return (x < 0.0) ? 0.0 : x;\n",uc=sc+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",hc="return (x >= 0.0) ? x : (exp(x) - 1.0);",dc="return -x;",fc="return ceil(x);",pc="return floor(x);",gc="return exp(x);",mc="return exp(x) - 1.0;",vc="return x;",bc="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",yc="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",wc="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",xc=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Cc=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Yi("rc",t),r=uo(t),a=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+a+");\n\n        setOutput(getChannel(packedInput, "+o+"));\n      }\n    "},kc={};function Sc(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?bc:lc;if("elu"===e)return t?wc:hc;if("relu6"===e)return t?yc:uc;if("prelu"===e)return t?Ao:ko;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var Ac=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!ze().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var a=xn(ze().getNumber("WEBGL_VERSION"));r.binaryCache=((n=ze().getNumber("WEBGL_VERSION"))in kc||(kc[n]={}),kc[n]),r.gpgpu=new Cs(a),r.canvas=a.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new ec(r.gpgpu),r.numMBBeforeWarning=null==ze().global.screen?1024:ze().global.screen.height*ze().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new li(r,dn),r}return Le(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(ze().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:mn.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(ze().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:mn.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensors,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var c;c=s?new xc(o,vc):new oc(o,vc);var l=this.runWebGLProgram(c,[{dataId:e,shape:o,dtype:r}],r),u=this.readSync(l.dataId);return this.disposeData(l.dataId),u}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var h,d,f=null!=this.activeTimers;return f&&(h=Ot()),d="complex64"===r?Ri(a.real.dataSync(),a.imag.dataSync()):this.getValuesFromTexture(e),f&&(this.downloadWaitMs+=Ot()-h),this.convertAndCacheOnCPU(e,d)},t.prototype.read=function(e){return Be(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,c,l,u,h,d,f,p,g,m,v,b,y,w,x,C;return Ue(this,(function(k){switch(k.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.complexTensors,c=n.isPacked,null!=i)return l=c?new xc(a,vc):new oc(a,vc),u=this.runWebGLProgram(l,[{dataId:e,shape:a,dtype:o}],o),h=this.read(u.dataId),this.disposeData(u.dataId),[2,h];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!ze().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===ze().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return d=null,"complex64"!==o&&ze().get("WEBGL_BUFFER_SUPPORTED")&&(f=this.decode(e),p=this.texData.get(f.dataId),d=(C=this.gpgpu).createBufferFromTexture.apply(C,[p.texture].concat(kn(a)))),this.pendingRead.set(e,[]),"complex64"===o?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:k.sent(),k.label=2;case 2:return"complex64"!==o?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])];case 3:return m=k.sent(),v=m[0],b=m[1],g=Ri(v,b),[3,5];case 4:null==d?g=this.getValuesFromTexture(e):(y=it(a),g=this.gpgpu.downloadFloat32MatrixFromBuffer(d,y)),k.label=5;case 5:return null!=f&&this.disposeData(f.dataId),w=this.convertAndCacheOnCPU(e,g),x=this.pendingRead.get(e),this.pendingRead.delete(e),x.forEach((function(e){return e(w)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,w]}}))}))},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!En(n)){if(ze().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,a=n.dtype,i=n.isPacked,o=it(r);if(ze().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(e),c=this.texData.get(s.dataId),l=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[c.texture].concat(kn(r))).subarray(0,o);return this.disposeData(s.dataId),l}var u=ze().getBool("WEBGL_PACK")&&!0===i,h=u?nr(r):r,d=u?new Jo(h):new Yo(h),f=this.runWebGLProgram(d,[{shape:h,dtype:a,dataId:e}],"float32"),p=this.texData.get(f.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,o);return this.disposeData(f.dataId),g},t.prototype.time=function(e){return Be(this,void 0,void 0,(function(){var t,n,r,a,i,o,s;return Ue(this,(function(c){switch(c.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),a=at(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=at(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return s=c.sent(),o.kernelMs=et(s),o.getExtraProfileInfo=function(){return s.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},[3,3];case 2:o.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,o]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ot(),endMs:null}},t.prototype.endTimer=function(e){return ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ot(),e)},t.prototype.getQueryTime=function(e){return Be(this,void 0,void 0,(function(){var t;return Ue(this,(function(n){return ze().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,c=s&&s.origDataId||e,l=this.dataRefCount.get(c);l>1?this.dataRefCount.set(c,l-1):(this.dataRefCount.delete(c),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return ze().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=dn.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&e.size<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:dn.keep(e.clone()),imag:dn.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===it(n))return Ur([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,a=ai(e.shape,t,n);if(r||!a){var i=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Zs(n):new Ys(n),o=i.getCustomSetupFunc(t);return this.compileAndRun(i,[e],null,o)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),a=this.makeOutput(n,e.dtype),i=this.texData.get(a.dataId);Object.assign(i,r),i.shape=n,i.dtype=e.dtype;var o=ii(t,e.strides);r.slice&&(o+=r.slice.flatOffset),i.slice={flatOffset:o,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,s+1),a},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var a=ti(t,n,r);if(a.some((function(e){return 0===e})))return Ur([],a);var i=new Qs(t,r,a);return this.compileAndRun(i,[e])},t.prototype.reverse=function(e,t){var n=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Vs(e.shape,t):new Hs(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return Lr(e)})),r=e.map((function(e){return Br(e)}));return Mr(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>ze().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(e.length/2),i=this.concat(e.slice(0,a),t),o=this.concat(e.slice(a),t);return this.concat([i,o],t)}if(ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new Fo(e.map((function(e){return e.shape})),t);return this.compileAndRun(s,e)}var c=Or(e.map((function(e){return e.shape})),t),l=e.map((function(e){return e.as2D(-1,it(e.shape.slice(t)))})),u=new Ro(l.map((function(e){return e.shape})));return this.compileAndRun(u,l).reshape(c)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,dc,e.dtype);var t=new oc(e.shape,dc);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var a=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],o=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===a||1===i)&&o>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var c=1===i?e:e.as3D(s,o,1),l=1===i?2:1,u=1===i?t.as3D(s,1,o):t;return this.multiply(c,u).sum(l,!0)}var h=rn(e.dtype,t.dtype),d=new Rs(e.shape,[s,a,i],n,r);return this.compileAndRun(d,[e,t],h)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.bias,o=e.activation,s=e.preluActivationWeights,c=r?t.shape[2]:t.shape[1],l=a?n.shape[1]:n.shape[2],u=t.shape[0],h=rn(t.dtype,n.dtype),d=null!=i,f=null!=s,p=o?Sc(o,!0):null,g=new Rs(t.shape,[u,c,l],r,a,d,p,f),m=[t,n];return i&&m.push(i),s&&m.push(s),this.compileAndRun(g,m,h)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),a=new yo("return areal * breal - aimag * bimag;",e.shape,t.shape),i=new yo("return areal * bimag + aimag * breal;",e.shape,t.shape),o=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],s=this.compileAndRun(a,o),c=this.compileAndRun(i,o),l=this.complex(s,c);return s.dispose(),c.dispose(),l}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Co,e.dtype);var u=new So(Co,e.shape,t.shape);return this.compileAndRun(u,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,a,i){var o=[e,t,n],s=null;null!=i&&(s=i.shape,o.push(i));var c=null;if(null!=a&&(c=a.shape,o.push(a)),ze().getBool("WEBGL_PACK_NORMALIZATION")){var l=new bo(e.shape,t.shape,n.shape,s,c,r);return this.compileAndRun(l,o)}var u=new vo(e.shape,t.shape,n.shape,s,c,r);return this.compileAndRun(u,o)},t.prototype.localResponseNormalization4D=function(e,t,n,r,a){var i=ze().getBool("WEBGL_PACK_NORMALIZATION")?new Es(e.shape,t,n,r,a):new As(e.shape,t,n,r,a);return this.compileAndRun(i,[e])},t.prototype.LRNGrad=function(e,t,n,r,a,i,o){var s=new _s(t.shape,r,a,i,o);return this.compileAndRun(s,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return Lt(e)}));return Wi(ma(e.shape,e.dtype,n),t)}var r=new rc(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ns(e.shape,t,n):new Os(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=ze().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ic(e.shape,t):new ac(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new ns(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){tt(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),a=Wa(e.shape,t,r),i=Ga(a.length,t.length),o=Ha(e.shape,t,r),s=Va(n,t.length),c=$a(o,n,t.length);return e.reshape(a).transpose(i).reshape(o).slice(s,c)},t.prototype.spaceToBatchND=function(e,t,n){tt(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var i=1+t.length;i<e.shape.length;++i)a.push([0,0]);var o=e.pad(a),s=Wa(o.shape,t,r,!1),c=Ga(s.length,t.length,!1),l=Ha(o.shape,t,r,!1);return o.reshape(s).transpose(c).reshape(l)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],a=e.shape[1],i=Ka(a),o=new Bs({windowSize:i,inSize:a,batchSize:r},t),s=this.compileAndRun(o,[e],n);return 1===s.shape[1]?s:this.reduce(s,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],a=e.shape[1];null!=n&&(r=n.shape[0],a=n.shape[1]);var i=Ka(a),o=new Xi({windowSize:i,inSize:a,batchSize:r},t,null==n),s=[e];null!=n&&s.push(n);var c=this.compileAndRun(o,s,"int32");return 1===c.shape[1]?c:this.argReduce(e,t,c)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,a=Ka(r[r.length-1]),i=new po(r,a,t,null==n),o=null==n?[e]:[e,n],s=this.compileAndRun(i,o,"int32");return s.rank===e.rank?this.argReducePacked(e,t,s):s},t.prototype.sum=function(e,t){Tr("sum",t,e.rank);var n=Er(e.shape,t),r=n[0],a=it(n[1]),i=e.as2D(-1,a),o=an(e.dtype);return this.reduce(i,"sum",o).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=Er(e.shape,t),r=n[0],a=it(n[1]),i=e.as2D(-1,a),o=an(e.dtype);return this.reduce(i,"prod",o).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,a=Rr([r],e.rank),i=e;null!=a&&(i=e.transpose(a),r=Pr(1,e.rank)[0]);var o=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(i.shape,r,n),s=it([i.shape[r]]),c=i.as2D(-1,s),l=an(e.dtype),u=this.segOpCompute(c,"unsortedSegmentSum",t,l,n).reshape(o);return null!=a&&(u=u.transpose(Fr(a))),u},t.prototype.segOpCompute=function(e,t,n,r,a){var i=e.shape[0],o=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=It(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=It(e,n+1);return n}(o,a),c=new Xs({windowSize:s,inSize:o,batchSize:i,numSegments:a},t),l=this.compileAndRun(c,[e,n],r);return l.shape[1]===a?l:(n=Kr(0,a).tile([o/s]),this.segOpCompute(l,t,n,r,a))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(Tr("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!ze().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var a=Er(e.shape,r),i=a[0],o=it(a[1]),s=e.as2D(-1,o);return this.argReduce(s,n).reshape(i)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var a=new Go(e.shape,n,r);return this.compileAndRun(a,[e])},t.prototype.equal=function(e,t){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new So("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new So("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new So("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new So("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new So("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new So("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new oc(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new So("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new So("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new Ks(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],rn(t.dtype,n.dtype))},t.prototype.where=function(e){wr("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Hi(e.shape,t)},t.prototype.topk=function(e,t,n){return Gi(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){Tr("min",t,e.rank);var n=Er(e.shape,t),r=n[0],a=it(n[1]),i=e.as2D(-1,a);return this.reduce(i,"min",i.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _o("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new So("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _o("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new So("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);Tr("max",t,e.rank);var n=Er(e.shape,t),r=n[0],a=it(n[1]),i=e.as2D(-1,a);return this.reduce(i,"max",i.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _o("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new So("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){Tr("all",t,e.rank);var n=Er(e.shape,t),r=n[0],a=it(n[1]),i=e.as2D(-1,a);return this.reduce(i,"all",i.dtype).reshape(r)},t.prototype.any=function(e,t){Tr("any",t,e.rank);var n=Er(e.shape,t),r=n[0],a=it(n[1]),i=e.as2D(-1,a);return this.reduce(i,"any",i.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new So("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new So("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,wo);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=rn(e.dtype,t.dtype);if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,wo,n);var r=new So(wo,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new xc(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,a){void 0===a&&(a=!1);var i=new _o(n,e.shape,t.shape,a);return this.compileAndRun(i,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,a=this.texData.get(e.dataId),i=this.texData.get(t.dataId),o=[[a.complexTensors.real,i.complexTensors.real],[a.complexTensors.imag,i.complexTensors.imag]].map((function(a){var i=a[0],o=a[1],s=r.makeComplexComponentTensorInfo(e,i),c=r.makeComplexComponentTensorInfo(t,o),l=new So(n,e.shape,t.shape);return r.compileAndRun(l,[s,c],rn(i.dtype,o.dtype))})),s=o[0],c=o[1],l=this.complex(s,c);return s.dispose(),c.dispose(),l},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>ze().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var a=e.map((function(e){return e.dtype})).reduce((function(e,t){return rn(e,t)})),i=e.map((function(e){return e.shape})),o=ze().getBool("WEBGL_PACK")?new $i(e[0].shape,i):new Vi(e[0].shape,i);return this.compileAndRun(o,e,a)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,xo);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=rn(e.dtype,t.dtype);if(ze().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,xo,e.dtype);var r=new So(xo,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _o("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new So("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=rn(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,fc,e.dtype);var t=new oc(e.shape,fc);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,pc,e.dtype);var t=new oc(e.shape,pc);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new oc(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new oc(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new oc(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new oc(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new oc(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,gc,e.dtype);var t=new oc(e.shape,gc);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,mc,e.dtype);var t=new oc(e.shape,mc);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=ft([t],e.shape),r=this.max(e,n),a=Ir(r.shape,n),i=this.subtract(e,r.reshape(a)),o=this.exp(i),s=this.sum(o,n).reshape(a);return this.realDivide(o,s)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new oc(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new oc(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new oc(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new oc(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new oc(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=ze().getBool("WEBGL_PACK")?new xc(e.shape,bc):new oc(e.shape,lc),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=ze().getBool("WEBGL_PACK")?new xc(e.shape,yc):new oc(e.shape,uc),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _o(Ao,e.shape,t.shape):new So(ko,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,wc,e.dtype);var t=new oc(e.shape,hc);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _o("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new So("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new oc(e.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new oc(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,a=(r=ze().getBool("WEBGL_PACK_CLIP")?new Io(e.shape):new Eo(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,a)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(ze().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,cc,e.dtype);var t=new oc(e.shape,cc);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new To(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new oc(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new oc(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new oc(e.shape,"if (isnan(x)) return x;\n  return sin(x);\n");return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new oc(e.shape,"if (isnan(x)) return x;\n  return cos(x);\n");return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new oc(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new oc(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n");return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new oc(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n");return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new oc(e.shape,"if (isnan(x)) return x;\n  return atan(x);\n");return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _o("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new So("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new oc(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new oc(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new oc(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new oc(e.shape,"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new oc(e.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));");return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new oc(e.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;");return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new oc(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new oc(e.shape,function(e){return void 0===e&&(e=0),sc+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,a,i){var o=e.shape,s=this.texData.get(e.dataId),c=n.inChannels,l=o[0]*o[1]*o[2],u=n.outChannels,h="channelsLast"===n.dataFormat,d=(1===l||1===u)&&c>1e3,f=o[2]%2!=0&&!!s.isPacked;if(d||!ze().getBool("WEBGL_LAZILY_UNPACK")||!ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!f){var p=h?o[0]*o[1]*o[2]:o[0]*o[2]*o[3],g=this.reshape(e,[1,p,n.inChannels]),m=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:g,b:m,transposeA:!1,transposeB:!1,bias:r,activation:a,preluActivationWeights:i}),n.outShape)}var v=h?o[0]*o[1]*(o[2]+1):o[0]*o[2]*(o[3]+1),b={dataId:e.dataId,shape:[1,v,n.inChannels],dtype:e.dtype},y=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,tt(ir(s.shape,b.shape),(function(){return"packed reshape "+s.shape+" to "+b.shape+" isn't free"}));var w=this.reshape(t,[1,n.inChannels,n.outChannels]),x=this.fusedBatchMatMul({a:b,b:w,transposeA:!1,transposeB:!1,bias:r,activation:a,preluActivationWeights:i}),C=this.texData.get(x.dataId);return tt(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=y,C.shape=n.outShape,dn.makeTensorFromDataId(x.dataId,n.outShape,x.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,a,i){var o=n.filterWidth,s=n.filterHeight,c=n.inChannels,l=n.outWidth,u=n.outHeight,h="channelsLast"===n.dataFormat,d=o*s*c,f=u*l,p=[d,f],g=e.squeeze([0]),m=t.reshape([1,d,-1]),v=new Ss(p,g.shape,n),b=this.compileAndRun(v,[g]).reshape([1,p[0],p[1]]),y=null!=r,w=null!=i,x=a?Sc(a,!0):null,C=new Rs(b.shape,[1,f,n.outChannels],!0,!1,y,x,w),k=[b,m];r&&k.push(r),w&&k.push(i);var S=this.compileAndRun(C,k);return h?S.reshape([1,u,l,n.outChannels]):S.reshape([1,n.outChannels,u,l])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,a,i,o);if(ze().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,a,i,o);var s=null!=a,c=null!=o,l=i?Sc(i,!1):null,u=new Uo(r,s,l,c),h=[t,n];return a&&h.push(a),o&&h.push(o),this.compileAndRun(u,h)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(ze().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new Uo(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new Oo(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new Do(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,a=e.convInfo,i=e.bias,o=e.activation,s=e.preluActivationWeights,c=ze().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,l=o?Sc(o,c):null,u=[n,r],h=null!=i,d=null!=s;return h&&u.push(i),d&&u.push(s),c?(t=new zo(a,h,l,d),this.compileAndRun(t,u)):(t=new qo(a,h,l,d),this.compileAndRun(t,u))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return ze().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new zo(n),this.compileAndRun(r,[e,t])):(r=new qo(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new Bo(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new Lo(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new jo(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new Mo(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new No(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new Ms(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new Ms(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var a=new Ms(r,"max",!0),i=this.compileAndRun(a,[t]),o=new Is(r),s=this.compileAndRun(o,[e,i],t.dtype);return i.dispose(),s},t.prototype.avgPoolBackprop=function(e,t,n){var r=new go(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return Ei(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==t&&(r[a++]=e.shape[i]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var c=new Array(n);for(i=0;i<c.length;i++)o[t]=i,c[i]=this.slice(e,o,s).reshape(r);return c},t.prototype.avgPool3d=function(e,t){var n=new Ls(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new mo(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new Ls(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var a=new Ls(r,"max",!0),i=this.compileAndRun(a,[t]),o=new Ts(r),s=this.compileAndRun(o,[e,i],t.dtype);return i.dispose(),s},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!ir(e.shape,t)&&(null===n.texture||!ir(n.shape,t))){var r=this.packedReshape(e,t);return dn.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return Ii(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var a=ze().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new zs(e.shape,t,n,r):new qs(e.shape,t,n,r);return this.compileAndRun(a,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new js(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var a=new Gs(e.shape,t,n,r);return this.compileAndRun(a,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Ws(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var a=t?e:si(e),i=a.shape[0],o=a.shape[1],s=new Fs(i,o,n),c=s.getCustomSetupFunc(r);return this.compileAndRun(s,[a],"int32",c)},t.prototype.oneHot=function(e,t,n,r){var a=new Ps(e.size,t,n,r);return this.compileAndRun(a,[e])},t.prototype.diag=function(e){var t=new Ko(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,a){return wr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Mi(e.dataSync(),t.dataSync(),n,r,a)},t.prototype.cropAndResize=function(e,t,n,r,a,i){var o=new Wo(e.shape,t.shape,r,a,i);return this.compileAndRun(o,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){tt(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],a="NHWC"===n?e.shape[1]:e.shape[2],i="NHWC"===n?e.shape[2]:e.shape[3],o="NHWC"===n?e.shape[3]:e.shape[1],s=a*t,c=i*t,l=o/(t*t),u=new Xo("NHWC"===n?[r,s,c,l]:[r,l,s,c],t,n);return this.compileAndRun(u,[e])},t.prototype.split=function(e,t,n){return zi(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=Za(0,e,n),a=r.sliceRank,i=r.numUpdates,o=r.sliceSize,s=r.strides,c=r.outputSize,l=[c/o,o],u=e.reshape([i,a]),h=t.reshape([i,o]);if(0===c)return Ii(Ur([]),n);var d=qr(0),f=new $s(i,a,u.rank,h.rank,s,l);return this.compileAndRun(f,[h,u,d]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var a=Za(0,e,n),i=a.sliceRank,o=a.numUpdates,s=a.strides,c=a.outputSize,l=new $s(o,i,e.rank,t.rank,s,[c,1],!1);return this.compileAndRun(l,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new es("return real * expR - imag * expI;",e.shape,t),a=new es("return real * expI + imag * expR;",e.shape,t),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],o=this.compileAndRun(r,i),s=this.compileAndRun(a,i),c=this.complex(o,s).as2D(e.shape[0],e.shape[1]);return o.dispose(),s.dispose(),c},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=Xa(e,t),i=a[0],o=a[1],s=a[2],c=a[3],l=t.reshape([o,r]),u=e.reshape([e.size/s,s]),h=new rs(r,c,[o,s]);return this.compileAndRun(h,[u,l]).reshape(i)},t.prototype.fill=function(e,t,n){if("string"===(n=n||_t(t))){var r=mt(n,it(e));return r.fill(t),dn.makeTensor(r,e,n,this)}var a=new ts(e,t),i=a.getCustomSetupFunc(t);return this.compileAndRun(a,[],n,i)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return Ti(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return dn.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new Cc(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new Ds(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[er(e.shape)].concat(tr(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[er(t)].concat(tr(t)),i=new Us(a,n),o=this.runWebGLProgram(i,[r],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype,o=nr(a);return t=r?new $o(o):new Vo(o),{dtype:i,shape:a,dataId:this.runWebGLProgram(t,[{shape:o,dtype:i,dataId:e}],i,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,a){var i=this;void 0===a&&(a=!1);var o=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(o.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===gn.DENSE){var c=kn(e.outputShape);s.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===it(o.shape))return s.values=gt(o.dtype,0),o;var l=[],u=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&it(t.shape)<=ze().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?i.unpackTensor(t):i.packTensor(t),l.push(t),n=i.texData.get(t.dataId);else if(n.isPacked&&!ir(n.shape,t.shape)){var r=t,a=t.shape;t.shape=n.shape,t=i.packedReshape(t,a),l.push(t),n=i.texData.get(t.dataId),r.shape=a}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);var h,d={shape:o.shape,texData:s,isUniform:!1},f=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var a=e.userCode;return e.constructor.name+"_"+r+"_"+a}(e,u,d),p=this.getAndSaveBinary(f,(function(){return function(e,t,n,r){var a=t.userCode,i=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=i.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},c=to(i,s,a,t.packedInputs),l=e.createProgram(c),u=null,h=e.getUniformLocation(l,"NAN",!1);1===ze().getNumber("WEBGL_VERSION")&&(u=e.getUniformLocation(l,"INFINITY",!1));for(var d={},f=0;f<t.variableNames.length;f++){var p=t.variableNames[f];d[p]=e.getUniformLocation(l,p,!1),d["offset"+p]=e.getUniformLocation(l,"offset"+p,!1)}return{program:t,source:c,webGLProgram:l,uniformLocations:d,inShapeInfos:o,outShapeInfo:s,infLoc:u,nanLoc:h}}(i.gpgpu,e,u,d)})),g=null!=this.activeTimers;if(g&&(h=this.startTimer()),function(e,t,n,r,a){ks(t.inShapeInfos,n),ks([t.outShapeInfo],[r]);var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i,o[0],o[1]):e.setOutputMatrixTexture(i,o[0],o[1]),e.setProgram(t.webGLProgram),1===ze().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset"+a];if(null!=i)if(n.isUniform)if(it(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(i,s)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,i,r)})),null!=a&&a(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,p,u,d,r),l.forEach((function(e){return i.disposeData(e.dataId)})),g&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)})),!ze().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===a){var m=this.unpackTensor(o);return this.disposeData(o.dataId),m}return o},t.prototype.compileAndRun=function(e,t,n,r,a){void 0===a&&(a=!1),n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return dn.makeTensorFromDataId(i.dataId,i.shape,i.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(ze().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=br((function(){if(!ze().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=ze().getBool("DEBUG");ze().set("DEBUG",!1);var n=e.abs(qr(1e-8)).dataSync()[0];if(ze().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,a=n.dtype,i=n.values,o=n.texture,s=n.usage,c=n.isPacked;if(null==o){var l,u=null!=this.activeTimers;u&&(l=Ot());var h=n.texShape;if(null==h&&(h=rr(r,c),n.texShape=h),null!=i){var d=nr(r),f=void 0,p=h[1],g=h[0],m=i instanceof Uint8Array;c?(p=(t=Sn(h[0],h[1]))[0],g=t[1],f=new Qo(d,[g,p],m)):f=new Zo(d,[g,p],m);var v=this.makeTensorInfo([g,p],a);this.texData.get(v.dataId).usage=m?mn.PIXELS:mn.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,g,i);var b=this.runWebGLProgram(f,[v],a,null,!0),y=this.texData.get(b.dataId);n.texture=y.texture,n.texShape=y.texShape,n.isPacked=y.isPacked,n.usage=y.usage,this.disposeData(v.dataId),this.texData.delete(b.dataId),n.values=null,u&&(this.uploadWaitMs+=Ot()-l)}else{var w=this.acquireTexture(h,s,a,c);n.texture=w}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*xt(t)},t}(ui);fn()&&dn.registerBackend("webgl",(function(){return new Ac}),2);var _c=Nr({square_:function(e){var t=kr(e,"x","square"),n=[t];return dn.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},n,[])}}),Ec="SquaredDifference",Ic=Nr({squaredDifference_:function(e,t){var n,r=kr(e,"a","squaredDifference"),a=kr(t,"b","squaredDifference");n=on(r,a),r=n[0],a=n[1],pi(r.shape,a.shape);var i={a:r,b:a},o=[r,a];return dn.runKernelFunc((function(e,t){var n=e.squaredDifference(r,a);return t([r,a]),n}),i,(function(e,t){var n=t[0],r=t[1],a=qr(2);return{a:function(){return e.mul(n.sub(r).mul(a))},b:function(){return e.mul(r.sub(n).mul(a))}}}),Ec,{},o,[])}}),Tc=Nr({abs_:function(e){var t=kr(e,"x","abs");return"complex64"===t.dtype?dn.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):dn.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),Rc=Nr({acos_:function(e){var t=kr(e,"x","acos");return dn.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(qr(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),Fc=Nr({acosh_:function(e){var t=kr(e,"x","acosh");return dn.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),Pc=Nr({asin_:function(e){var t=kr(e,"x","asin");return dn.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(qr(1).sub(n.toFloat().square()).sqrt())}}}))}}),Dc=Nr({asinh_:function(e){var t=kr(e,"x","asinh");return dn.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(qr(1).add(n.toFloat().square()).sqrt())}}}))}}),Oc=Nr({atan_:function(e){var t=kr(e,"x","atan");return dn.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),Nc=Nr({atanh_:function(e){var t=kr(e,"x","atanh");return dn.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(qr(1).sub(n.toFloat().square()))}}}))}}),Mc=Nr({ceil_:function(e){var t=kr(e,"x","ceil");return dn.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return Jr(e)}}}))}}),Lc=Nr({clipByValue_:function(e,t,n){var r=kr(e,"x","clipByValue");tt(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var a=[r],i={min:t,max:n};return dn.runKernelFunc((function(e,a){var i=e.clip(r,t,n);return a([r]),i}),{x:r},(function(e,r){var a=r[0];return{x:function(){return e.where(a.greaterEqual(t).logicalAnd(a.lessEqual(n)),Jr(e))}}}),"ClipByValue",i,a)}}),Bc=Nr({cos_:function(e){var t=kr(e,"x","cos"),n=[t];return dn.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},n)}}),Uc=Nr({cosh_:function(e){var t=kr(e,"x","cosh");return dn.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),jc=Nr({erf_:function(e){var t=kr(e,"x","erf");return tt("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),dn.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),qc=Nr({exp_:function(e){var t=kr(e,"x","exp");return dn.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mulStrict(t[0])}}}),"Exp",{},[],[!0])}}),zc=Nr({expm1_:function(e){var t=kr(e,"x","expm1");return dn.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),Wc=Nr({floor_:function(e){var t=kr(e,"x","floor");return dn.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return Jr(e)}}}))}}),Gc=Nr({log_:function(e){var t=kr(e,"x","log"),n=[t];return dn.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},n)}}),Hc=Nr({log1p_:function(e){var t=kr(e,"x","log1p");return dn.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),Vc=Nr({logSigmoid_:function(e){var t=kr(e,"x","logSigmoid");return dn.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),$c=Nr({neg_:function(e){var t=kr(e,"x","neg"),n=[t];return dn.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},n)}}),Xc=Nr({reciprocal_:function(e){var t=kr(e,"x","reciprocal");return dn.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),Kc=Nr({round_:function(e){var t=kr(e,"x","round");return dn.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return Jr(e)}}}))}}),Yc=Nr({rsqrt_:function(e){var t=kr(e,"x","rsqrt"),n=[t];return dn.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),Jc=Nr({sigmoid_:function(e){var t=kr(e,"x","sigmoid");return dn.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(qr(1).sub(n)))}}}),"Sigmoid")}}),Zc=Nr({sign_:function(e){var t=kr(e,"x","sign");return dn.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return Jr(e)}}}))}}),Qc=Nr({isNaN_:function(e){var t=kr(e,"x","isNaN");return dn.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return Jr(e)}}}))}}),el=Nr({isInf_:function(e){var t=kr(e,"x","isInf");return dn.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return Jr(e)}}}))}}),tl=Nr({isFinite_:function(e){var t=kr(e,"x","isFinite");return dn.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return Jr(e)}}}))}}),nl=Nr({sin_:function(e){var t=kr(e,"x","sin"),n=[t];return dn.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},n)}}),rl=Nr({sinh_:function(e){var t=kr(e,"x","sinh");return dn.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),al=Nr({softplus_:function(e){var t=kr(e,"x","softplus");return dn.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),il=Nr({sqrt_:function(e){var t=kr(e,"x","sqrt");return dn.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),ol=Nr({step_:function(e,t){void 0===t&&(t=0);var n=kr(e,"x","step");return dn.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return Jr(e)}}}))}}),sl=Nr({tan_:function(e){var t=kr(e,"x","tan");return dn.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),cl=Nr({tanh_:function(e){var t=kr(e,"x","tanh");return dn.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return qr(1).sub(n.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}});function ll(e,t,n,r,a,i){var o,s,c=kr(e,"x","batchNorm"),l=kr(t,"mean","batchNorm"),u=kr(n,"variance","batchNorm");return null!=a&&(o=kr(a,"scale","batchNorm")),null!=r&&(s=kr(r,"offset","batchNorm")),tt(2===c.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."})),tt(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),tt(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+u.rank+"."})),null!=o&&tt(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."})),null!=s&&tt(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),dl(c,l,u,s,o,i)}function ul(e,t,n,r,a,i){var o,s,c=kr(e,"x","batchNorm"),l=kr(t,"mean","batchNorm"),u=kr(n,"variance","batchNorm");return null!=a&&(o=kr(a,"scale","batchNorm")),null!=r&&(s=kr(r,"offset","batchNorm")),tt(3===c.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."})),tt(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),tt(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+u.rank+"."})),null!=o&&tt(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."})),null!=s&&tt(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),dl(c,l,u,s,o,i)}function hl(e,t,n,r,a,i){var o,s,c=kr(e,"x","batchNorm"),l=kr(t,"mean","batchNorm"),u=kr(n,"variance","batchNorm");return null!=a&&(o=kr(a,"scale","batchNorm")),null!=r&&(s=kr(r,"offset","batchNorm")),tt(4===c.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."})),tt(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),tt(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+u.rank+"."})),null!=o&&tt(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."})),null!=s&&tt(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),dl(c,l,u,s,o,i)}function dl(e,t,n,r,a,i){null==i&&(i=.001);var o,s,c,l=kr(e,"x","batchNorm"),u=kr(t,"mean","batchNorm"),h=kr(n,"variance","batchNorm");null!=a&&(o=kr(a,"scale","batchNorm")),null!=r&&(s=kr(r,"offset","batchNorm")),tt(u.rank===h.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),tt(null==s||u.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),tt(null==o||u.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),c=0===l.rank||1===l.rank?l.as4D(1,1,1,l.size):2===l.rank?l.as4D(1,1,l.shape[0],l.shape[1]):3===l.rank?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var d=[l,u,h,o];return dn.runKernelFunc((function(e,t){var n=e.batchNormalization(c,fl(u),fl(h),i,fl(o),fl(s));return t([l,u,h,o]),n}),{x:l,mean:u,variance:h,scale:o,offset:s},(function(e,t){var n=t,r=n[0],a=n[1],o=n[2],s=n[3],l=null==s?qr(1):s,u=fi(a.shape,c.shape),h=[];if(1===a.rank){for(var d=0;d<c.shape.length-1;++d)h.push(c.shape[d]);h.push(1)}var f=r.sub(a),p=e.mul(l),g=Yc(o.add(qr(i))),m=g.mul(g).mul(g).mul(qr(-.5));return{x:function(){return 1===a.rank?e.mul(ja(g.as4D(1,1,1,a.shape[0]),h)).mul(l).reshape(r.shape):e.mul(g).mul(l).reshape(r.shape)},mean:function(){var e=g.mul(qr(-1)).mul(p);return 1===a.rank&&(e=e.sum(u)),e.reshape(a.shape)},variance:function(){var e=m.mul(f).mul(p);return 1===a.rank&&(e=e.sum(u)),e.reshape(a.shape)},scale:function(){var t=f.mul(g),n=e.mul(t);return 1===a.rank&&(n=n.sum(u)),n.reshape(a.shape)},offset:function(){var t=e;return 1===a.rank&&(t=t.sum(u)),t.reshape(a.shape)}}}),"BatchNormalization",{varianceEpsilon:i},d).reshape(l.shape)}function fl(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function pl(){vr("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var gl=Nr({batchNormalization2d_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),pl(),ll(e,t,n,i,a,r)}}),ml=Nr({batchNormalization3d_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),pl(),ul(e,t,n,i,a,r)}}),vl=Nr({batchNormalization4d_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),pl(),hl(e,t,n,i,a,r)}}),bl=Nr({batchNormalization_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),pl(),dl(e,t,n,i,a,r)}}),yl=Nr({batchNorm_:dl}),wl=Nr({batchNorm2d_:ll}),xl=Nr({batchNorm3d_:ul}),Cl=Nr({batchNorm4d_:hl}),kl=Nr({logicalAnd_:function(e,t){var n=kr(e,"a","logicalAnd","bool"),r=kr(t,"b","logicalAnd","bool");return pi(n.shape,r.shape),dn.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),Sl=Nr({logicalNot_:function(e){var t=kr(e,"x","logicalNot","bool");return dn.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),Al=Nr({logicalOr_:function(e,t){var n=kr(e,"a","logicalOr","bool"),r=kr(t,"b","logicalOr","bool");return pi(n.shape,r.shape),dn.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),_l=Nr({logicalXor_:function(e,t){var n=kr(e,"a","logicalXor","bool"),r=kr(t,"b","logicalXor","bool");return pi(n.shape,r.shape),Al(e,t).logicalAnd(kl(e,t).logicalNot())}}),El=Nr({where_:function(e,t,n){var r=kr(t,"a","where"),a=kr(n,"b","where"),i=kr(e,"condition","where","bool");return nt(r.shape,a.shape,"Error in where: "),1===i.rank?tt(i.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):nt(i.shape,a.shape,"Error in where: "),dn.runKernelFunc((function(e,t){var n=e.select(i,r,a);return t([i]),n}),{$condition:i,$a:r,$b:a},(function(e,t){var n=t[0];return{$condition:function(){return Jr(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),Il=function(e){return Be(this,void 0,void 0,(function(){var t,n,r;return Ue(this,(function(a){switch(a.label){case 0:return[4,(t=kr(e,"condition","whereAsync","bool")).data()];case 1:return n=a.sent(),r=Hi(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},Tl=Nr({add_:function(e,t){var n,r=kr(e,"a","add"),a=kr(t,"b","add");n=on(r,a),r=n[0],a=n[1];var i=pi(r.shape,a.shape);return dn.runKernelFunc((function(e){return e.add(r,a)}),{a:r,b:a},(function(e){return{a:function(){var t=e,n=fi(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=fi(a.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(a.shape)}}}),"Add")}}),Rl=Nr({addN_:function(e){tt(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),tt(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return kr(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!ot(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return dn.runKernelFunc((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}),"AddN")}}),Fl=Nr({addStrict_:function(e,t){var n=kr(e,"a","addStrict"),r=kr(t,"b","addStrict");return nt(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Pl=Nr({atan2_:function(e,t){var n,r=kr(e,"a","atan2"),a=kr(t,"b","atan2");n=on(r,a),r=n[0],a=n[1];var i=pi(r.shape,a.shape);return dn.runKernelFunc((function(e,t){var n=e.atan2(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Tl(n.square(),r.square()),a=e.mul(r.div(t)),o=fi(n.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(n.shape)},$b:function(){var t=Tl(n.square(),r.square()),a=$c(e.mul(n.div(t))),o=fi(r.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(r.shape)}}}))}}),Dl=Nr({div_:function(e,t){var n,r=kr(e,"a","div"),a=kr(t,"b","div");if(n=on(r,a),r=n[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype)return Ml(r,a);var i=pi(r.shape,a.shape);return dn.runKernelFunc((function(e,t){var n=e.realDivide(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),a=fi(n.shape,i);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=fi(r.shape,i);a.length>0&&(t=t.sum(a).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}}),"Div")}}),Ol=Nr({divNoNan_:function(e,t){var n,r=kr(e,"a","div"),a=kr(t,"b","div");r=(n=on(r,a))[0],a=n[1];var i=Dl(r,a),o=Jr(i),s=a.equal(o);return El(s,o,i)}}),Nl=Nr({divStrict_:function(e,t){var n=kr(e,"a","div"),r=kr(t,"b","div");return nt(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Ml=Nr({floorDiv_:function(e,t){var n,r=kr(e,"a","floorDiv"),a=kr(t,"b","floorDiv");n=on(r,a),r=n[0],a=n[1];var i=pi(r.shape,a.shape);return dn.runKernelFunc((function(e,t){var n=e.floorDiv(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),a=fi(n.shape,i);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=fi(r.shape,i);a.length>0&&(t=t.sum(a).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}}),"FloorDiv")}}),Ll=Nr({maximum_:function(e,t){var n,r=kr(e,"a","maximum"),a=kr(t,"b","maximum");return n=on(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),pi(r.shape,a.shape),dn.runKernelFunc((function(e,t){var n=e.maximum(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}}),"Maximum")}}),Bl=Nr({maximumStrict_:function(e,t){var n=kr(e,"a","maximumStrict"),r=kr(t,"b","maximumStrict");return nt(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Ul=Nr({minimum_:function(e,t){var n,r=kr(e,"a","minimum"),a=kr(t,"b","minimum");return n=on(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),pi(r.shape,a.shape),dn.runKernelFunc((function(e,t){var n=e.minimum(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}}),"Minimum")}}),jl=Nr({minimumStrict_:function(e,t){var n=kr(e,"a","minimumStrict"),r=kr(t,"b","minimumStrict");return nt(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),ql=Nr({mod_:function(e,t){var n,r=kr(e,"a","mod"),a=kr(t,"b","mod");n=on(r,a),r=n[0],a=n[1];var i=pi(r.shape,a.shape);return dn.runKernelFunc((function(e,t){var n=e.mod(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=fi(n.shape,i);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),a=fi(r.shape,i);return a.length>0?t.sum(a).reshape(r.shape):t}}}))}}),zl=Nr({modStrict_:function(e,t){var n=kr(e,"a","modStrict"),r=kr(t,"b","modStrict");return nt(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Wl=Nr({mul_:function(e,t){var n,r=kr(e,"a","mul"),a=kr(t,"b","mul");n=on(r,a),r=n[0],a=n[1];var i=pi(r.shape,a.shape);return dn.runKernelFunc((function(e,t){var n=e.multiply(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),a=fi(n.shape,i);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=fi(r.shape,i);return a.length>0?t.sum(a).reshape(r.shape):t}}}),"Mul")}}),Gl=Nr({mulStrict_:function(e,t){var n=kr(e,"a","mul"),r=kr(t,"b","mul");return nt(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Hl=Nr({pow_:function(e,t){var n,r=kr(e,"base","pow"),a=kr(t,"exp","pow");n=on(r,a),r=n[0],a=n[1];var i=pi(r.shape,a.shape),o=[r,a];return dn.runKernelFunc((function(e,t){var n=e.pow(r,a);return t([r,a,n]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1],a=t[2];return{a:function(){var t=r.toFloat(),a=e.mul(t.mul(n.pow(t.sub(qr(1))))),o=fi(n.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(n.shape)},b:function(){var t=n.greater(0),o=n.log().where(t,Jr(n)),s=e.mul(a.mul(o)),c=fi(r.shape,i);return c.length>0&&(s=s.sum(c)),s.reshape(r.shape)}}}),"Pow",{},o,[!0])}}),Vl=Nr({powStrict_:function(e,t){return nt(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),$l=Nr({squaredDifferenceStrict_:function(e,t){var n=kr(e,"a","squaredDifferenceStrict"),r=kr(t,"b","squaredDifferenceStrict");return nt(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Xl=Nr({sub_:function(e,t){var n,r=kr(e,"a","sub"),a=kr(t,"b","sub");n=on(r,a),r=n[0],a=n[1];var i=pi(r.shape,a.shape);return dn.runKernelFunc((function(e){return e.subtract(r,a)}),{a:r,b:a},(function(e){return{a:function(){var t=e,n=fi(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=fi(a.shape,i);return n.length>0&&(t=t.sum(n)),t.neg().reshape(a.shape)}}}),"Sub")}}),Kl=Nr({subStrict_:function(e,t){var n=kr(e,"a","subStrict"),r=kr(t,"b","subStrict");return nt(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Yl=Nr({equal_:function(e,t){var n,r=kr(e,"a","equal"),a=kr(t,"b","equal");return n=on(r,a),r=n[0],a=n[1],pi(r.shape,a.shape),dn.runKernelFunc((function(e){return e.equal(r,a)}),{$a:r,$b:a})}}),Jl=Nr({equalStrict_:function(e,t){var n=kr(e,"a","equalStrict"),r=kr(t,"b","equalStrict");return nt(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Zl=Nr({greater_:function(e,t){var n,r=kr(e,"a","greater"),a=kr(t,"b","greater");return n=on(r,a),r=n[0],a=n[1],pi(r.shape,a.shape),dn.runKernelFunc((function(e){return e.greater(r,a)}),{a:r,b:a},null,"Greater")}}),Ql=Nr({greaterEqual_:function(e,t){var n,r=kr(e,"a","greaterEqual"),a=kr(t,"b","greaterEqual");return n=on(r,a),r=n[0],a=n[1],pi(r.shape,a.shape),dn.runKernelFunc((function(e,t){var n=e.greaterEqual(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return Jr(n)},b:function(){return Jr(r)}}}),"GreaterEqual")}}),eu=Nr({greaterEqualStrict_:function(e,t){var n=kr(e,"a","greaterEqualStrict"),r=kr(t,"b","greaterEqualStrict");return nt(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),tu=Nr({greaterStrict_:function(e,t){var n=kr(e,"a","greaterStrict"),r=kr(t,"b","greaterStrict");return nt(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),nu=Nr({less_:function(e,t){var n,r=kr(e,"a","less"),a=kr(t,"b","less");return n=on(r,a),r=n[0],a=n[1],pi(r.shape,a.shape),dn.runKernelFunc((function(e){return e.less(r,a)}),{a:r,b:a},null,"Less")}}),ru=Nr({lessEqual_:function(e,t){var n,r=kr(e,"a","lessEqual"),a=kr(t,"b","lessEqual");return n=on(r,a),r=n[0],a=n[1],pi(r.shape,a.shape),dn.runKernelFunc((function(e,t){var n=e.lessEqual(r,a);return t([r,a]),n}),{a:r,b:a},null,"LessEqual")}}),au=Nr({lessEqualStrict_:function(e,t){var n=kr(e,"a","lessEqualStrict"),r=kr(t,"b","lessEqualStrict");return nt(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),iu=Nr({lessStrict_:function(e,t){var n=kr(e,"a","lessStrict"),r=kr(t,"b","lessStrict");return nt(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),ou=Nr({notEqual_:function(e,t){var n,r=kr(e,"a","notEqual"),a=kr(t,"b","notEqual");return n=on(r,a),r=n[0],a=n[1],pi(r.shape,a.shape),dn.runKernelFunc((function(e){return e.notEqual(r,a)}),{a:r,b:a},null,"NotEqual")}}),su=Nr({notEqualStrict_:function(e,t){var n=kr(e,"a","notEqualStrict"),r=kr(t,"b","notEqualStrict");return nt(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function cu(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function lu(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var uu=Nr({gather_:function(e,t,n){void 0===n&&(n=0);var r=kr(e,"x","gather"),a=kr(t,"indices","gather","int32");n=ft(n,r.shape)[0];var i=function(e,t,n){for(var r=e.shape[n],a=[],i=1,o=1,s=0;s<n;s++)a.push(e.shape[s]),i*=e.shape[s];for(s=0;s<t.rank;s++)a.push(t.shape[s]);for(s=n+1;s<e.rank;s++)a.push(e.shape[s]),o*=e.shape[s];return{batchSize:i,sliceSize:o,dimSize:r,outputShape:a}}(r,a,n);return dn.runKernelFunc((function(e,t){var i=e.gather(r,a.flatten(),n);return t([a]),i}),{x:r,indices:a},(function(e,t){var a=t[0];return{x:function(){var t=r.shape,i=a.size,o=t.slice(0,n),s=o.length,c=t.slice(n,t.length).slice(1),l=c.length,u=cu(0,s),h=cu(s+1,s+1+l),d=lu([o,[i],c]),f=e.reshape(d),p=a.reshape([i]),g=lu([[s],u,h]),m=f.transpose(g),v=hu(m,p,r.shape[n]),b=Fr(g);return v.transpose(b)},indices:function(){return a}}}),"Gather",{axis:n}).reshape(i.outputShape)}}),hu=Nr({unsortedSegmentSum_:function(e,t,n){var r=kr(e,"x","unsortedSegmentSum"),a=kr(t,"segmentIds","unsortedSegmentSum","int32");return tt(st(n),(function(){return"numSegments must be of dtype int"})),dn.runKernelFunc((function(e,t){var i=e.unsortedSegmentSum(r,a,n);return t([a]),i}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=Ll(t,Jr(t)),r=uu(e,n),a=Ql(t,qr(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=ka(a,o+1);a=kl(a,Vr(r.shape,"bool"));var s=Jr(r);return El(a,r,s)}(e,n)}}}))}});function du(e,t,n,r,a,i,o){void 0===i&&(i="NHWC"),tt(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,c=t,l=!1;3===t.rank&&(l=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),tt(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),tt(4===c.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank})),tt(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var u="NHWC"===i?s[3]:s[1],h="NHWC"===i?c.shape[3]:c.shape[1];tt(u===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[2]+"."})),tt(h===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+n.shape[3]+"."})),null!=o&&tt(st(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var d=_i(i),f=vi(s,n.shape,r,1,a,o,!1,d),p=dn.runKernelFunc((function(e,t){var r=e.conv2dDerInput(c,n,f);return t([n,c]),r}),{dy4D:c,filter:n},(function(e,t){var n=t[0],s=t[1];return{dy4D:function(){return mu(e,n,r,a,i,1,o)},filter:function(){return bu(e,s,n.shape,r,a,i,o)}}}));return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function fu(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function pu(e,t,n,r,a){tt(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var c=i[4],l=o.shape[4];tt(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."})),tt(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank})),tt(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),tt(c===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[3]+"."})),tt(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var u=bi(i,n.shape,r,1,a),h=dn.runKernelFunc((function(e){return e.conv3dDerInput(o,n,u)}),{dy5D:o});return s?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var gu=Nr({conv1d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NWC"),void 0===i&&(i=1);var s=kr(e,"x","conv1d"),c=kr(t,"filter","conv1d"),l=s,u=!1;2===s.rank&&(u=!0,l=s.as3D(1,s.shape[0],s.shape[1])),tt(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),tt(3===c.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."})),null!=o&&tt(st(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."})),tt(l.shape[2]===c.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+c.shape[1]+"."})),tt(Ai(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"})),tt("NWC"===a,(function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."}));var h=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),d=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),f=mu(d,h,[1,n],r,"NHWC",[1,i],o);return u?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),mu=Nr({conv2d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NHWC"),void 0===i&&(i=[1,1]);var s=kr(e,"x","conv2d"),c=kr(t,"filter","conv2d"),l=s,u=!1;3===s.rank&&(u=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),tt(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),tt(4===c.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."})),null!=o&&tt(st(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var h="NHWC"===a?l.shape[3]:l.shape[1];tt(h===c.shape[2],(function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+c.shape[2]+"."})),tt(Ai(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}));var d=_i(a),f=vi(l.shape,c.shape,n,i,r,o,!1,d),p=[c,l],g=dn.runKernelFunc((function(e,t){var n=e.conv2d(l,c,f);return t([c,l]),n}),{x:l,filter:c},(function(e,t){var o=t,s=o[0],c=o[1];return tt(Si(i),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"})),{x:function(){return yu(c.shape,e,s,n,r,a)},filter:function(){return bu(c,e,s.shape,n,r,a)}}}),"Conv2D",f,p);return u?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),vu=Nr({conv3d_:function(e,t,n,r,a,i){void 0===a&&(a="NDHWC"),void 0===i&&(i=[1,1,1]);var o=kr(e,"x","conv3d"),s=kr(t,"filter","conv3d"),c=o,l=!1;4===o.rank&&(l=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),tt(5===c.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."})),tt(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),tt(c.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),tt(function(e,t){return fu(e)||fu(t)}(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),tt("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."}));var u=bi(c.shape,s.shape,n,i,r),h=dn.runKernelFunc((function(e,t){var n=e.conv3d(c,s,u);return t([c,s]),n}),{x:c,$filter:s},(function(e,t){tt(fu(i),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}));var a=t[0],o=t[1];return{x:function(){return pu(a.shape,e,o,n,r)},$filter:function(){return function(e,t,n,r,a){var i=e;4===e.rank&&(i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var o=t;4===o.rank&&(o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),tt(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+i.shape+"."})),tt(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+o.shape+"."})),tt(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),tt(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+i.shape[4]+") must match input depth in filter ("+n[3]+"."})),tt(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+o.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=bi(i.shape,n,r,1,a);return dn.runKernelFunc((function(e){return e.conv3dDerFilter(i,o,s)}),{x5D:i,dy5D:o})}(a,e,o.shape,n,r)}}}));return l?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),bu=Nr({conv2dDerFilter_:function(e,t,n,r,a,i,o){void 0===i&&(i="NHWC");var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var c=t;3===c.rank&&(c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),tt(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),tt(4===c.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."})),tt(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var l="NHWC"===i?s.shape[3]:s.shape[1],u="NHWC"===i?c.shape[3]:c.shape[1];tt(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."})),tt(u===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+u+") must match output depth for filter ("+n[3]+")."})),null!=o&&tt(st(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var h=_i(i),d=vi(s.shape,n,r,1,a,o,!1,h);return dn.runKernelFunc((function(e){return e.conv2dDerFilter(s,c,d)}),{x4D:s,dy4D:c})}}),yu=Nr({conv2dDerInput_:du}),wu=Nr({depthwiseConv2d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NHWC"),void 0===i&&(i=[1,1]);var s=kr(e,"x","depthwiseConv2d"),c=kr(t,"filter","depthwiseConv2d"),l=s,u=!1;3===s.rank&&(u=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),tt(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),tt(4===c.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."})),tt(l.shape[3]===c.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."})),null==i&&(i=[1,1]),tt(Ai(n,i),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=o&&tt(st(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var h=vi(l.shape,c.shape,n,i,r,o,!0),d=[l,c],f=dn.runKernelFunc((function(e,t){var n=e.depthwiseConv2D(l,c,h);return t([l,c]),n}),{x:l,filter:c},(function(e,t){tt(Si(i),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"}));var n=t[0],r=t[1];return{x:function(){return xu(n.shape,e,r,h)},filter:function(){return Cu(n,e,r.shape,h)}}}),"DepthwiseConv2dNative",h,d);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),xu=Nr({depthwiseConv2dDerInput_:function(e,t,n,r){var a=t,i=!1;3===t.rank&&(i=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=dn.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(a,n,r)}),{dy4D:a});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),Cu=Nr({depthwiseConv2dDerFilter_:function(e,t,n,r){var a=e;3===e.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return 3===i.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),dn.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(a,i,r)}),{x4D:a,dy4D:i})}}),ku=Nr({separableConv2d_:function(e,t,n,r,a,i,o){void 0===i&&(i=[1,1]),void 0===o&&(o="NHWC");var s=kr(e,"x","separableConv2d"),c=kr(t,"depthwiseFilter","separableConv2d"),l=kr(n,"pointwiseFilter","separableConv2d"),u=s,h=!1;if(3===s.rank&&(h=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");tt(4===u.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+u.rank+"."})),tt(4===c.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."})),tt(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."})),tt(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),tt(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var d=c.shape[2],f=c.shape[3];tt(l.shape[2]===d*f,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*f+", but got "+l.shape[2]+"."}));var p=wu(u,c,r,a,o,i),g=mu(p,l,1,"valid",o);return h?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),Su=Nr({conv2dTranspose_:function(e,t,n,r,a,i){return du(n,kr(e,"x","conv2dTranspose"),kr(t,"filter","conv2dTranspose"),r,a,"NHWC",i)}}),Au=Nr({conv3dTranspose_:function(e,t,n,r,a){return pu(n,kr(e,"x","conv3dTranspose"),kr(t,"filter","conv3dTranspose"),r,a)}}),_u=Nr({matMul_:function(e,t,n,r){var a;void 0===n&&(n=!1),void 0===r&&(r=!1);var i=kr(e,"a","matMul"),o=kr(t,"b","matMul");a=on(i,o),i=a[0],o=a[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],c=r?o.shape[o.rank-1]:o.shape[o.rank-2],l=n?i.shape[i.rank-1]:i.shape[i.rank-2],u=r?o.shape[o.rank-2]:o.shape[o.rank-1],h=i.shape.slice(0,-2),d=o.shape.slice(0,-2),f=it(h),p=it(d);tt(i.rank>=2&&o.rank>=2&&i.rank===o.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."})),tt(ot(h,d),(function(){return"Error in matMul: outer dimensions ("+h+") and ("+d+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."})),tt(s===c,(function(){return"Error in matMul: inner shapes ("+s+") and ("+c+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var g=i.shape.slice(0,-2).concat([l,u]),m=n?i.as3D(f,s,l):i.as3D(f,l,s),v=r?o.as3D(p,u,c):o.as3D(p,c,u),b={transposeA:n,transposeB:r};return dn.runKernelFunc((function(e,t){var a=e.batchMatMul(m,v,n,r);return t([m,v]),a}),{a:m,b:v},(function(e,t){var a=t,i=a[0],o=a[1];return n||r?!n&&r?{a:function(){return e.matMul(o,!1,!1)},b:function(){return e.matMul(i,!0,!1)}}:n&&!r?{a:function(){return o.matMul(e,!1,!0)},b:function(){return i.matMul(e,!1,!1)}}:{a:function(){return o.matMul(e,!0,!0)},b:function(){return e.matMul(i,!0,!0)}}:{a:function(){return e.matMul(o,!1,!0)},b:function(){return i.matMul(e,!0,!1)}}}),"BatchMatMul",b).reshape(g)}}),Eu=Nr({dot_:function(e,t){var n=kr(e,"t1","dot"),r=kr(t,"t2","dot");tt(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return tt(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Iu=Nr({outerProduct_:function(e,t){var n=kr(e,"v1","outerProduct"),r=kr(t,"v2","outerProduct");return tt(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Tu=Nr({reverse_:function(e,t){var n=kr(e,"x","reverse");if(0===n.rank)return n.clone();var r=ft(t,n.shape);return dn.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),Ru=Nr({reverse1d_:function(e){var t=kr(e,"x","reverse");return tt(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),Tu(t,0)}}),Fu=Nr({reverse2d_:function(e,t){var n=kr(e,"x","reverse");return tt(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),Tu(n,t)}}),Pu=Nr({reverse3d_:function(e,t){var n=kr(e,"x","reverse");return tt(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),Tu(n,t)}}),Du=Nr({reverse4d_:function(e,t){var n=kr(e,"x","reverse");return tt(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),Tu(n,t)}});function Ou(e,t,n,r,a,i){var o=kr(e,"x","maxPool"),s=o,c=!1;3===o.rank&&(c=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),null==r&&(r=[1,1]),tt(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),tt(Ai(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=i&&tt(st(a),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var l=gi(s.shape,t,n,r,a,i);if(1===l.filterWidth&&1===l.filterHeight&&ot(l.inShape,l.outShape))return o.clone();var u=[s],h=dn.runKernelFunc((function(e,t){var n=e.maxPool(s,l);return t([s,n]),n}),{x:s},(function(e,i){var o=i[0],s=i[1];return{x:function(){return function(e,t,n,r,a,i,o,s){var c=kr(e,"dy","maxPoolBackprop"),l=kr(t,"input","maxPoolBackprop"),u=kr(n,"output","maxPoolBackprop");tt(l.rank===c.rank,(function(){return"Rank of input ("+l.rank+") does not match rank of dy ("+c.rank+")"})),null==i&&(i=[1,1]),tt(Ai(a,i),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"})),tt(4===c.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."})),tt(4===l.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+l.rank+"."}));var h=gi(l.shape,r,a,i,o,void 0);return dn.runKernelFunc((function(e){return e.maxPoolBackprop(c,l,u,h)}),{$dy:c,$input:l})}(e,o,s,t,n,r,a)}}}),"MaxPool",l,u);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function Nu(e,t,n,r,a,i){var o=kr(e,"x","avgPool","float32");null==r&&(r=[1,1]),tt(Ai(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=o,c=!1;3===o.rank&&(c=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),tt(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=i&&tt(st(a),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var l=gi(s.shape,t,n,r,a,i);if(1===l.filterWidth&&1===l.filterHeight&&ot(l.inShape,l.outShape))return o.clone();var u=dn.runKernelFunc((function(e){return e.avgPool(s,l)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,a,i){var o=kr(e,"dy","avgPoolBackprop"),s=kr(t,"input","avgPoolBackprop");tt(s.rank===o.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+o.rank+")"})),null==a&&(a=[1,1]),tt(Ai(r,a),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"}));var c=s,l=o,u=!1;3===s.rank&&(u=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),tt(4===l.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."})),tt(4===c.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+c.rank+"."}));var h=gi(c.shape,n,r,a,i),d=dn.runKernelFunc((function(e){return e.avgPoolBackprop(l,c,h)}),{dy4D:l,input4D:c});return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}(e,s,t,n,r,a)}}}),"AvgPool",l);return u=u.cast(o.dtype),c?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}var Mu=Nr({maxPool_:function(e,t,n,r,a){return Ou(e,t,n,1,r,a)}}),Lu=Nr({avgPool_:function(e,t,n,r,a){return Nu(e,t,n,1,r,a)}}),Bu=Nr({pool_:function(e,t,n,r,a,i){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var o=kr(e,"x","maxPool"),s=o,c=!1;3===o.rank&&(c=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),tt(Ai(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"}));var l,u=gi(s.shape,t,i,a,r),h=[u.dilationHeight,u.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];var d=1===h[0]&&1===h[1],f=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,o[t]]}))]}([u.inHeight,u.inWidth],h,l),p=f[0],g=f[1],m=d?r:"valid",v=d?s:La(s,h,p),b=("avg"===n?function(){return Nu(v,t,i,1,m)}:function(){return Ou(v,t,i,1,m)})(),y=d?b:va(b,h,g);return c?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),Uu=Nr({maxPool3d_:function(e,t,n,r,a,i,o){void 0===i&&(i="NDHWC");var s=kr(e,"x","maxPool3d"),c=s,l=!1;4===s.rank&&(l=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),tt(5===c.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."})),tt("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),tt(Ai(n,o),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=a&&tt(st(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var u=mi(c.shape,t,n,o,r,a,i),h=dn.runKernelFunc((function(e,t){var n=e.maxPool3d(c,u);return t([c,n]),n}),{x:c},(function(e,i){var s=i[0],c=i[1];return{x:function(){return function(e,t,n,r,a,i,o,s){var c=kr(e,"dy","maxPool3dBackprop"),l=kr(t,"input","maxPool3dBackprop"),u=kr(n,"output","maxPool3dBackprop"),h=c,d=l,f=u,p=!1;4===l.rank&&(p=!0,h=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),f=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),tt(5===h.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+h.rank+"."})),tt(5===d.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+d.rank+"."})),tt(5===f.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+f.rank+"."})),null==i&&(i=[1,1,1]),tt(Ai(a,i),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"})),null!=s&&tt(st(o),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."}));var g=mi(d.shape,r,a,i,o,s),m=dn.runKernelFunc((function(e){return e.maxPool3dBackprop(h,d,f,g)}),{dy5D:h,input5D:d});return p?m.as4D(m.shape[1],m.shape[2],m.shape[3],m.shape[4]):m}(e,s,c,t,n,o,r,a)}}}));return l?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),ju=Nr({avgPool3d_:function(e,t,n,r,a,i,o){void 0===i&&(i="NDHWC");var s=kr(e,"x","avgPool3d","float32"),c=s,l=!1;4===s.rank&&(l=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),tt(5===c.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."})),tt("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),tt(Ai(n,o),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=a&&tt(st(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var u=mi(c.shape,t,n,o,r,a,i),h=dn.runKernelFunc((function(e){return e.avgPool3d(c,u)}),{x:c},(function(e){return{x:function(){return function(e,t,n,r,a,i,o){var s=kr(e,"dy","avgPool3dBackprop"),c=kr(t,"input","avgPool3dBackprop"),l=s,u=c,h=!1;4===c.rank&&(h=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),u=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3])),tt(5===l.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+l.rank+"."})),tt(5===u.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+u.rank+"."})),null==a&&(a=[1,1,1]),tt(Ai(r,a),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"})),null!=o&&tt(st(i),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var d=mi(u.shape,n,r,a,i,o),f=dn.runKernelFunc((function(e){return e.avgPool3dBackprop(l,u,d)}),{dy5D:l,input5D:u});return h?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}(e,c,t,n,o,r,a)}}}));return h=h.cast(c.dtype),l?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),qu=Nr({slice_:function(e,t,n){var r,a,i=kr(e,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach((function(e){tt(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(tt(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),i.shape[t]-r[t])})),Qa(i,r,a);var o=i.shape,s={begin:r,size:a};return dn.runKernelFunc((function(e){return e.slice(i,r,a)}),{x:i},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],o[n]-r[n]-a[n]]);return{x:function(){return e.pad(t)}}}),"Slice",s)}}),zu=Nr({slice1d_:function(e,t,n){var r=kr(e,"x","slice1d");return tt(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),qu(r,[t],[n])}}),Wu=Nr({slice2d_:function(e,t,n){var r=kr(e,"x","slice2d");return tt(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),qu(r,t,n)}}),Gu=Nr({slice3d_:function(e,t,n){var r=kr(e,"x","slice3d");return tt(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),qu(r,t,n)}}),Hu=Nr({slice4d_:function(e,t,n){var r=kr(e,"x","slice4d");return tt(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),qu(r,t,n)}});function Vu(e,t,n,r,a){return t.rank<n.rank&&(t=t.reshape(Ir(t.shape,r))),e.rank<n.rank&&(e=e.reshape(Ir(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==a?r:r.transpose(a)}}}var $u=Nr({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=kr(e,"x","all","bool"),a=ft(t,r.shape),i=a,o=Rr(i,r.rank);null!=o&&(r=r.transpose(o),i=Pr(i.length,r.rank));var s=dn.runKernelFunc((function(e){return e.all(r,i)}),{$x:r});if(n){var c=Ir(s.shape,a);return s.reshape(c)}return s}}),Xu=Nr({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=kr(e,"x","any","bool"),a=ft(t,r.shape),i=a,o=Rr(i,r.rank);null!=o&&(r=r.transpose(o),i=Pr(i.length,r.rank));var s=dn.runKernelFunc((function(e){return e.any(r,i)}),{$x:r});if(n){var c=Ir(s.shape,a);return s.reshape(c)}return s}}),Ku=Nr({argMax_:function(e,t){void 0===t&&(t=0);var n=kr(e,"x","argMax");null==t&&(t=0);var r=ft(t,n.shape),a=Rr(r,n.rank);null!=a&&(n=n.transpose(a),r=Pr(r.length,n.rank));var i={axis:r[0]},o=[n];return dn.runKernelFunc((function(e,t){var a=e.argMax(n,r[0]);return t([n]),a}),{x:n},(function(e,t){var n=t[0];return{x:function(){return Jr(n)}}}),"ArgMax",i,o)}}),Yu=Nr({argMin_:function(e,t){void 0===t&&(t=0);var n=kr(e,"x","argMin");null==t&&(t=0);var r=ft(t,n.shape),a=Rr(r,n.rank);return null!=a&&(n=n.transpose(a),r=Pr(r.length,n.rank)),dn.runKernelFunc((function(e,t){var a=e.argMin(n,r[0]);return t([n]),a}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return Jr(n)}}}))}}),Ju=Nr({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=kr(e,"x","logSumExp"),a=ft(t,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),s=i.reshape(o.shape).add(o);if(n){var c=Ir(s.shape,a);return s.reshape(c)}return s}}),Zu=Nr({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=kr(e,"x","max"),a=r,i=ft(t,r.shape),o=i,s=Rr(o,r.rank);null!=s&&(r=r.transpose(s),o=Pr(o.length,r.rank));var c=[r],l=dn.runKernelFunc((function(e,t){var n=e.max(r,o);return t([a,n]),n}),{x:r},(function(e,t){return Vu(e,t[1],t[0],i,s)}),"Max",{axes:o},c,[!0]);if(n){var u=Ir(l.shape,i);l=l.reshape(u)}return l}}),Qu=Nr({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=kr(e,"x","mean"),a=ft(t,r.shape),i=it(Er(r.shape,a)[1]);return oi((function(e){var r=qr(i);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(Vr(e.shape,"float32")).div(i)}}}))(r)}}),eh=Nr({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=kr(e,"x","min"),a=r,i=ft(t,r.shape),o=i,s=Rr(o,r.rank);null!=s&&(r=r.transpose(s),o=Pr(o.length,r.rank));var c=[r],l=dn.runKernelFunc((function(e,t){var n=e.min(r,o);return t([a,n]),n}),{x:r},(function(e,t){return Vu(e,t[1],t[0],i,s)}),"Min",{axes:o},c,[!0]);if(n){var u=Ir(l.shape,i);l=l.reshape(u)}return l}}),th=Nr({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ft(t,(e=kr(e,"x","moments")).shape),a=e.mean(r,n),i=a.shape;n||(i=Ir(a.shape,r));var o=e.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:o.mean(r,n)}}}),nh=Nr({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=kr(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var a=ft(t,r.shape);return oi((function(e){var t=Rr(a,e.rank),r=a,i=e;null!=t&&(i=e.transpose(t),r=Pr(r.length,e.rank));var o=function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(Vr(e.shape,"float32"))},s={axes:r},c=dn.runKernelFunc((function(e){return e.sum(i,r)}),{x:i},(function(e){return{x:function(){return o(e)}}}),"Sum",s);if(n){var l=Ir(c.shape,a);c=c.reshape(l)}return{value:c,gradFunc:o}}))(r)}}),rh=Nr({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=kr(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var a=ft(t,r.shape),i=Rr(a,r.rank),o=a,s=r;null!=i&&(s=r.transpose(i),o=Pr(o.length,r.rank));var c=dn.runKernelFunc((function(e){return e.prod(s,o)}),{permutedX:s});if(n){var l=Ir(c.shape,a);c=c.reshape(l)}return c}}),ah=Nr({elu_:function(e){var t=kr(e,"x","elu");return dn.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return dn.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),ih=Nr({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=kr(e,"x","leakyRelu");return Ll(qr(t).mul(n),n)}}),oh=Nr({prelu_:function(e,t){var n=kr(e,"x","prelu"),r=kr(t,"alpha","prelu");return dn.runKernelFunc((function(e,t){var a=e.prelu(n,r);return t([n,r]),a}),{x:n,alpha:r},(function(e,t){var n=t[0],r=t[1],a=n.greater(0);return{x:function(){return El(a,e,e.mul(r))},alpha:function(){var t=El(a,Jr(e),e.mul(n)),i=fi(r.shape,e.shape);return i.length>0&&(t=t.sum(i)),t.reshape(r.shape)}}}),"Prelu")}}),sh=Nr({relu_:function(e){var t=kr(e,"x","relu");return"bool"===t.dtype?t.toInt():dn.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}}),"Relu")}}),ch=Nr({relu6_:function(e){var t=kr(e,"x","relu6");return"bool"===t.dtype?t.toInt():dn.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}}),"Relu6")}}),lh=Nr({selu_:function(e){var t=kr(e,"x","selu");return dn.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(qr(0)),r=qr(1.7580993408473768),a=qr(1.0507009873554805),i=e.mul(a),o=e.mul(r).mul(n.toFloat().exp());return El(t,i,o)}}}))}}),uh=Nr({transpose_:function(e,t){var n=kr(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),tt(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){tt(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return dn.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},(function(e){var n=Fr(t);return{x:function(){return e.transpose(n)}}}),"Transpose",r)}}),hh=Nr({localResponseNormalization_:function(e,t,n,r,a){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=.5);var i=kr(e,"x","localResponseNormalization");tt(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."})),tt(st(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var o=i,s=!1;3===i.rank&&(s=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=dn.runKernelFunc((function(e,i){var s=e.localResponseNormalization4D(o,t,n,r,a);return i([o,s]),s}),{x4D:o},(function(e,i){var o=i[0],s=i[1];return{x4D:function(){return dn.runKernelFunc((function(i){return i.LRNGrad(e,o,s,t,n,r,a)}),{})}}}));return s?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),dh=Nr({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var a=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(qr(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=kr(e,"x","norm"),t,n),i=a.shape;if(r){var o=ft(n,e.shape);i=Ir(a.shape,o)}return a.reshape(i)}}),fh=Nr({basicLSTMCell_:function(e,t,n,r,a,i){var o=kr(e,"forgetBias","basicLSTMCell"),s=kr(t,"lstmKernel","basicLSTMCell"),c=kr(n,"lstmBias","basicLSTMCell"),l=kr(r,"data","basicLSTMCell"),u=kr(a,"c","basicLSTMCell"),h=kr(i,"h","basicLSTMCell"),d=l.concat(h,1).matMul(s).add(c),f=d.shape[0],p=d.shape[1]/4,g=[f,p],m=d.slice([0,0],g),v=d.slice([0,p],g),b=d.slice([0,2*p],g),y=d.slice([0,3*p],g),w=m.sigmoid().mulStrict(v.tanh()).addStrict(u.mulStrict(o.add(b).sigmoid())),x=w.tanh().mulStrict(y.sigmoid());return[w,x]}}),ph=Nr({multiRNNCell_:function(e,t,n,r){for(var a=kr(t,"data","multiRNNCell"),i=Sr(n,"c","multiRNNCell"),o=Sr(r,"h","multiRNNCell"),s=a,c=[],l=0;l<e.length;l++){var u=e[l](s,i[l],o[l]);c.push(u[0]),c.push(u[1]),s=u[1]}var h=[],d=[];for(l=0;l<c.length;l+=2)h.push(c[l]),d.push(c[l+1]);return[h,d]}}),gh=Nr({movingAverage_:function(e,t,n,r,a){void 0===a&&(a=!0);var i=kr(e,"v","movingAverage"),o=kr(t,"x","movingAverage"),s=kr(n,"decay","movingAverage");sn(i,o),tt(ot(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var c=qr(1),l=c.sub(s),u=o.sub(i).mul(l);if(a){tt(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var h=kr(r,"step","movingAverage");u=u.div(c.sub(Hl(s,h)))}return i.add(u)}}),mh=Nr({stridedSlice_:function(e,t,n,r,a,i,o,s,c){if(void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===c&&(c=0),null==r&&(r=new Array(t.length)),0!==o)throw new Error("ellipsis mask is not yet supported");var l=kr(e,"x","stridedSlice"),u=ei(s),h=l.shape.slice();u.forEach((function(e){t[e]=0,n[e]=1,h.splice(e,0,1)})),l=l.reshape(h);for(var d=0;d<l.rank;d++)t[d]=ni(a,t,r,l.shape,d),n[d]=ri(i,n,r,l.shape,d),r[d]=r[d]||1;var f=ei(c);f.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var p=ti(t,n,r),g=p.filter((function(e,t){return-1===f.indexOf(t)}));return r.every((function(e){return 1===e}))?qu(l,t,p).reshape(g):dn.runKernelFunc((function(e){return e.stridedSlice(l,t,n,r)}),{$x:l}).reshape(g)}}),vh=Nr({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=kr(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var i=dn.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r});return{values:i[0],indices:i[1]}}}),bh=Nr({scatterND_:function(e,t,n){var r=kr(e,"indices","scatterND","int32"),a=kr(t,"updates","scatterND");return Ja(a,r,n),dn.runKernelFunc((function(e){return e.scatterND(r,a,n)}),{indices:r,updates:a},null,"ScatterNd",{shape:n})}}),yh=Nr({fft_:function(e){tt("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return dn.runKernelFunc((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),wh=Nr({ifft_:function(e){tt("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return dn.runKernelFunc((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),xh=Nr({rfft_:function(e,t){tt("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=e.slice(i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat($r(s),e.shape.length-1),r=t}else n=e;var c=n.zerosLike(),l=Mr(n,c).as2D(a,r),u=yh(l),h=Math.floor(r/2)+1,d=Lr(u),f=Br(u),p=d.split([h,r-h],d.shape.length-1),g=f.split([h,r-h],f.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=h,Mr(p[0],g[0]).reshape(m)}}),Ch=Nr({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),a=wh(r);return Lr(a)}var i=[n,2*(t-1)],o=Lr(e).as2D(n,t),s=Br(e).as2D(n,t),c=o.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(qr(-1)),u=o.concat(c,1),h=s.concat(l,1);return r=Mr(u,h).as2D(i[0],i[1]),a=wh(r),Lr(a)}}),kh=Object.freeze({fft:yh,ifft:wh,rfft:xh,irfft:Ch}),Sh=Nr({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var a=kr(e,"sparseIndices","sparseToDense","int32"),i=kr(t,"sparseValues","sparseToDense"),o=kr(r,"defaultValue","sparseToDense",i.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+i+".");var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+a+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o),dn.runKernelFunc((function(e){return e.sparseToDense(a,i,n,o)}),{$sparseIndices:a,$sparseValues:i,$defaultValue:o})}}),Ah=Nr({gatherND_:function(e,t){var n=kr(t,"indices","gatherND","int32"),r=kr(e,"x","gatherND");return dn.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),_h=Nr({diag_:function(e){var t=kr(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return dn.runKernelFunc((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),Eh=Nr({dropout_:function(e,t,n,r){var a=kr(e,"x","dropout");if(tt("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."})),tt(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof Kt?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(ot(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=Na(i,0,1,"float32",r).add(o).floor().div(o);return a.mul(s)}});function Ih(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return zr(a,"float32")}var Th,Rh=Nr({hannWindow_:function(e){return Ih(e,.5,.5)}}),Fh=Nr({hammingWindow_:function(e){return Ih(e,.54,.46)}}),Ph=Nr({frame_:function(e,t,n,r,a){void 0===r&&(r=!1),void 0===a&&(a=0);for(var i=0,o=[];i+t<=e.size;)o.push(qu(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,c=Zr([qu(e,i,t-s),Xr([s],a)]);o.push(c),i+=n}return 0===o.length?Wr([],[0,t]):Zr(o).as2D(o.length,t)}}),Dh=Nr({stft_:function(e,t,n,r,a){var i;void 0===a&&(a=Rh),null==r&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=Ph(e,t,n),s=Wl(o,a(t)),c=[],l=0;l<o.shape[0];l++)c.push(xh(s.slice([l,0],[1,t]),r));return Zr(c)}}),Oh=Object.freeze({hannWindow:Rh,hammingWindow:Fh,frame:Ph,stft:Dh});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Th||(Th={}));var Nh=Nr({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=Th.SUM_BY_NONZERO_WEIGHTS);var a=kr(e,"labels","absoluteDifference"),i=kr(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=kr(n,"weights","absoluteDifference")),nt(a.shape,i.shape,"Error in absoluteDifference: ");var s=a.sub(i).abs();return Mh(s,o,r)}}),Mh=Nr({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=Th.SUM_BY_NONZERO_WEIGHTS);var r=kr(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=kr(t,"weights","computeWeightedLoss"));var i=null==a?r:r.mul(a);if(n===Th.NONE)return i;if(n===Th.SUM)return i.sum();if(n===Th.MEAN){if(null==a)return i.mean();var o=r.size/a.size,s=i.sum().div(a.sum());return o>1?s.div(qr(o)):s}if(n===Th.SUM_BY_NONZERO_WEIGHTS){if(null==a)return i.sum().div(qr(r.size));var c=a.mul(Vr(r.shape)).notEqual(qr(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+n)}}),Lh=Nr({cosineDistance_:function(e,t,n,r,a){void 0===a&&(a=Th.SUM_BY_NONZERO_WEIGHTS);var i=kr(e,"labels","cosineDistance"),o=kr(t,"predictions","cosineDistance"),s=null;null!=r&&(s=kr(r,"weights","cosineDistance")),nt(i.shape,o.shape,"Error in cosineDistance: ");var c=qr(1).sub(i.mul(o).sum(n,!0));return Mh(c,s,a)}}),Bh=Nr({hingeLoss_:function(e,t,n,r){void 0===r&&(r=Th.SUM_BY_NONZERO_WEIGHTS);var a=kr(e,"labels","hingeLoss"),i=kr(t,"predictions","hingeLoss"),o=null;null!=n&&(o=kr(n,"weights","hingeLoss")),nt(a.shape,i.shape,"Error in hingeLoss: ");var s=qr(1);a=qr(2).mul(a).sub(s);var c=s.sub(a.mul(i)).relu();return Mh(c,o,r)}}),Uh=Nr({huberLoss_:function(e,t,n,r,a){void 0===r&&(r=1),void 0===a&&(a=Th.SUM_BY_NONZERO_WEIGHTS);var i=kr(e,"labels","huberLoss"),o=kr(t,"predictions","huberLoss"),s=null;null!=n&&(s=kr(n,"weights","huberLoss")),nt(i.shape,o.shape,"Error in huberLoss: ");var c=qr(r),l=o.sub(i).abs(),u=Ul(l,c),h=l.sub(u),d=qr(.5).mul(u.square()).add(c.mul(h));return Mh(d,s,a)}}),jh=Nr({logLoss_:function(e,t,n,r,a){void 0===r&&(r=1e-7),void 0===a&&(a=Th.SUM_BY_NONZERO_WEIGHTS);var i=kr(e,"labels","logLoss"),o=kr(t,"predictions","logLoss"),s=null;null!=n&&(s=kr(n,"weights","logLoss")),nt(i.shape,o.shape,"Error in logLoss: ");var c=qr(1),l=qr(r),u=i.mul(o.add(l).log()).neg().sub(c.sub(i).mul(c.sub(o).add(l).log()));return Mh(u,s,a)}}),qh=Nr({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=Th.SUM_BY_NONZERO_WEIGHTS);var a=kr(e,"labels","meanSquaredError"),i=kr(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=kr(n,"weights","meanSquaredError")),nt(a.shape,i.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(i);return Mh(s,o,r)}}),zh=Nr({sigmoidCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=Th.SUM_BY_NONZERO_WEIGHTS);var i=kr(e,"multiClassLabels","sigmoidCrossEntropy"),o=kr(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=kr(n,"weights","sigmoidCrossEntropy")),nt(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=qr(r),l=qr(1),u=qr(.5);i=i.mul(l.sub(c)).add(u.mul(c))}var h=function(e,t){var n=kr(e,"labels","sigmoidCrossEntropyWithLogits"),r=kr(t,"logits","sigmoidCrossEntropyWithLogits");nt(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=r.relu(),i=r.mul(n),o=r.abs().neg().exp().log1p();return a.sub(i).add(o)}(i,o);return Mh(h,s,a)}}),Wh=Nr({softmaxCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=Th.SUM_BY_NONZERO_WEIGHTS);var i=kr(e,"onehotLabels","softmaxCrossEntropy"),o=kr(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=kr(n,"weights","softmaxCrossEntropy")),nt(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var c=qr(r),l=qr(1),u=qr(i.shape[1]);i=i.mul(l.sub(c)).add(c.div(u))}var h=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return oi((function(e,t,r){var a=t.logSumExp([n],!0),i=t.toFloat().sub(a);return r([e,i]),{value:i.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],a=t[1],i=Ir(e.shape,[n]);return[e.reshape(i).mul(r.toFloat().sub(a.exp())),e.reshape(i).mul(a.exp().sub(r.toFloat()))]}}}))(e,t)}(i,o);return Mh(h,s,a)}}),Gh=Object.freeze({get Reduction(){return Th},absoluteDifference:Nh,computeWeightedLoss:Mh,cosineDistance:Lh,hingeLoss:Bh,huberLoss:Uh,logLoss:jh,meanSquaredError:qh,sigmoidCrossEntropy:zh,softmaxCrossEntropy:Wh});function Hh(e,t){return void 0===t&&(t=!1),dn.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=Sa(n),i=e.clone(),o=Wr([[1]],[1,1]),s=o.clone(),c=n>=r?r:n,l=function(e){var t,c=i,l=s,u=a;t=dn.tidy((function(){var t=i.slice([e,e],[n-e,1]),c=t.norm(),l=i.slice([e,e],[1,1]),u=Wr([[-1]]).where(l.greater(0),Wr([[1]])),h=l.sub(u.mul(c)),d=t.div(h);s=1===d.shape[0]?o.clone():o.concat(d.slice([1,0],[d.shape[0]-1,d.shape[1]]),0);var f=u.matMul(h).div(c).neg(),p=i.slice([e,0],[n-e,r]),g=f.mul(s);if(0===e)i=p.sub(g.matMul(s.transpose().matMul(p)));else{var m=p.sub(g.matMul(s.transpose().matMul(p)));i=i.slice([0,0],[e,r]).concat(m,0)}var v=a.slice([0,e],[n,a.shape[1]-e]);if(0===e)a=v.sub(v.matMul(s).matMul(g.transpose()));else{var b=v.sub(v.matMul(s).matMul(g.transpose()));a=a.slice([0,0],[n,e]).concat(b,1)}return[s,i,a]})),s=t[0],i=t[1],a=t[2],yr([c,l,u])},u=0;u<c;++u)l(u);return!t&&n>r&&(a=a.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[a,i]}))}var Vh=Nr({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=kr(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,i=r.shape.slice(-2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=o),n<0&&(n=s);var c=Kr(0,o,1,"int32").reshape([-1,1]),l=Kr(0,s,1,"int32"),u=Xl(c,l),h=kl(u.lessEqual(qr(+t,"int32")),u.greaterEqual(qr(-n,"int32"))),d=$r([o,s],r.dtype);return Ua(za(r.reshape([-1,o,s])).map((function(e){return El(h,e,d)}))).reshape(a)}}),$h=Nr({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,tt(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){tt(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},a=1;a<e.length;++a)r(a)}else t=!0,e=ra(e,e.shape[0],0).map((function(e){return Ba(e,[0])}));tt(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var i=[],o=e,s=function(e){i.push(dn.tidy((function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=nh(i[n].mulStrict(t)).mul(i[n]);t=t.sub(r)}return t.div(dh(t,"euclidean"))})))};for(a=0;a<e.length;++a)s(a);return t?Ua(i,0):i}}),Xh=Nr({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return Hh(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=za(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach((function(e){var n=Hh(e,t),r=n[0],o=n[1];a.push(r),i.push(o)})),[Ua(a,0).reshape(e.shape),Ua(i,0).reshape(e.shape)]}}),Kh=Object.freeze({bandPart:Vh,gramSchmidt:$h,qr:Xh});function Yh(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),tt(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),tt(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),tt(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),tt(1===t.rank,(function(){return"scores must be a 1D tensor"})),tt(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]})),tt(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Jh=Nr({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=kr(e,"images","resizeBilinear");tt(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),tt(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var a=r,i=!1;3===r.rank&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],c=dn.runKernelFunc((function(e,t){return t([a]),e.resizeBilinear(a,o,s,n)}),{x:a},(function(e,t){return{x:function(){return dn.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),Zh=Nr({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=kr(e,"images","resizeNearestNeighbor");tt(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),tt(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),tt("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var a=r,i=!1;3===r.rank&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],c=dn.runKernelFunc((function(e,t){return t([a]),e.resizeNearestNeighbor(a,o,s,n)}),{batchImages:a},(function(e,t){return{batchImages:function(){return dn.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),Qh=Nr({nonMaxSuppression_:function(e,t,n,r,a){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY);var i=kr(e,"boxes","nonMaxSuppression"),o=kr(t,"scores","nonMaxSuppression"),s=Yh(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;var c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return dn.runKernelFunc((function(e){return e.nonMaxSuppression(i,o,n,r,a)}),{boxes:i,scores:o},null,"NonMaxSuppressionV3",c)}}),ed=Nr({nonMaxSuppressionWithScore_:function(e,t,n,r,a,i){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===i&&(i=0);var o=kr(e,"boxes","nonMaxSuppression"),s=kr(t,"scores","nonMaxSuppression"),c=Yh(o,s,n,r,a,i),l={maxOutputSize:n=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},u=dn.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},l);return{selectedIndices:u[0],selectedScores:u[1]}}}),td=Nr({cropAndResize_:function(e,t,n,r,a,i){var o=kr(e,"image","cropAndResize"),s=kr(t,"boxes","cropAndResize","float32"),c=kr(n,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var l=s.shape[0];return tt(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."})),tt(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),tt(1===c.rank&&c.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),tt(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),tt(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),tt("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was "+a})),dn.runKernelFunc((function(e,t){return e.cropAndResize(o,s,c,r,a,i)}),{images:o,boxes:s,boxInd:c},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),nd=Object.freeze({resizeBilinear:Jh,resizeNearestNeighbor:Zh,nonMaxSuppression:Qh,nonMaxSuppressionAsync:function(e,t,n,r,a){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),Be(this,void 0,void 0,(function(){var i,o,s,c,l,u,h;return Ue(this,(function(d){switch(d.label){case 0:return i=kr(e,"boxes","nonMaxSuppressionAsync"),o=kr(t,"scores","nonMaxSuppressionAsync"),s=Yh(i,o,n,r,a),n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return c=d.sent(),l=c[0],u=c[1],h=Mi(l,u,n,r,a),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,h]}}))}))},nonMaxSuppressionWithScore:ed,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,a,i){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===i&&(i=0),Be(this,void 0,void 0,(function(){var o,s,c,l,u,h,d;return Ue(this,(function(f){switch(f.label){case 0:return o=kr(e,"boxes","nonMaxSuppressionAsync"),s=kr(t,"scores","nonMaxSuppressionAsync"),c=Yh(o,s,n,r,a,i),n=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return l=f.sent(),u=l[0],h=l[1],d=Li(u,h,n,r,a,i),o!==e&&o.dispose(),s!==t&&s.dispose(),[2,d]}}))}))},cropAndResize:td}),rd=function(e,t){return!(e>0)||"linear"===t},ad=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},id=function(e,t){var n=t,r=fi(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},od=function(e,t,n){if("linear"===t)return e;if("relu"===t)return sh(e);if("elu"===t)return ah(e);if("relu6"===t)return ch(e);if("prelu"===t)return oh(e,n);throw new Error("Unknown fused activation "+t+".")},sd=Nr({fusedMatMul_:function(e){var t,n=e.a,r=e.b,a=e.transposeA,i=void 0!==a&&a,o=e.transposeB,s=void 0!==o&&o,c=e.bias,l=e.activation,u=void 0===l?"linear":l,h=e.preluActivationWeights;if(!1===rd(dn.state.gradientDepth,u)){var d=_u(n,r,i,s);return null!=c&&(d=Tl(d,c)),od(d,u,h)}var f=kr(n,"a","fused matMul"),p=kr(r,"b","fused matMul");t=on(f,p),f=t[0],p=t[1];var g=i?f.shape[f.rank-2]:f.shape[f.rank-1],m=s?p.shape[p.rank-1]:p.shape[p.rank-2],v=i?f.shape[f.rank-1]:f.shape[f.rank-2],b=s?p.shape[p.rank-2]:p.shape[p.rank-1],y=f.shape.slice(0,-2),w=p.shape.slice(0,-2),x=it(y),C=it(w);tt(f.rank>=2&&p.rank>=2&&f.rank===p.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+p.rank+"."})),tt(ot(y,w),(function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+w+") of Tensors with shapes "+f.shape+" and "+p.shape+" must match."})),tt(g===m,(function(){return"Error in fused matMul: inner shapes ("+g+") and ("+m+") of Tensors with shapes "+f.shape+" and "+p.shape+" and transposeA="+i+" and transposeB="+s+" must match."}));var k,S,A=f.shape.slice(0,-2).concat([v,b]),_=i?f.as3D(x,g,v):f.as3D(x,v,g),E=s?p.as3D(C,b,m):p.as3D(C,m,b);null!=c&&pi(A,(k=on(k=kr(c,"bias","fused matMul"),f)[0]).shape),null!=h&&(S=kr(h,"prelu weights","fused matMul"));var I={a:_,b:E};null!=c&&(I.bias=k),null!=h&&(I.preluActivationWeights=S);var T=[_,E];return dn.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:_,b:E,transposeA:i,transposeB:s,bias:k,activation:u,preluActivationWeights:S});return t([_,E,n]),n}),I,(function(e,t){var n=t[0],r=t[1],a=t[2],o=ad(e,a,u),l={};return null!=c&&(l={bias:function(){return id(k,o)}}),i||s?!i&&s?Object.assign({a:function(){return o.matMul(r,!1,!1)},b:function(){return o.matMul(n,!0,!1)}},l):i&&!s?Object.assign({a:function(){return r.matMul(o,!1,!0)},b:function(){return n.matMul(o,!1,!1)}},l):Object.assign({a:function(){return r.matMul(o,!0,!0)},b:function(){return o.matMul(n,!0,!0)}},l):Object.assign({a:function(){return o.matMul(r,!1,!0)},b:function(){return n.matMul(o,!0,!1)}},l)}),"_FusedMatMul",{transposeA:i,transposeB:s,activation:u},T,[!0]).reshape(A)}}),cd=Nr({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,c=void 0===s?[1,1]:s,l=e.dimRoundingMode,u=e.bias,h=e.activation,d=void 0===h?"linear":h,f=e.preluActivationWeights;if(d=d||"linear",!1===rd(dn.state.gradientDepth,d)){var p=mu(t,n,r,a,o,c,l);return null!=u&&(p=Tl(p,u)),od(p,d,f)}var g=kr(t,"x","conv2d"),m=kr(n,"filter","conv2d"),v=g,b=!1;3===g.rank&&(b=!0,v=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),tt(4===v.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+v.rank+"."})),tt(4===m.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."})),null!=l&&tt(st(a),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+a+"."})),tt(v.shape[3]===m.shape[2],(function(){return"Error in conv2d: depth of input ("+v.shape[3]+") must match input depth for filter "+m.shape[2]+"."})),tt(Ai(r,c),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"})),tt("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."}));var y,w,x=vi(v.shape,m.shape,r,c,a,l);null!=u&&(y=on(y=kr(u,"bias","fused conv2d"),g)[0],pi(x.outShape,y.shape)),null!=f&&(w=kr(f,"prelu weights","fused conv2d"));var C={x:v,filter:m};null!=u&&(C.bias=y),null!=f&&(C.preluActivationWeights=w);var k=[m,v],S=dn.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:v,filter:m,convInfo:x,bias:y,activation:d,preluActivationWeights:w});return t([m,v,n]),n}),C,(function(e,t){var n=t,i=n[0],o=n[1],s=n[2],l=ad(e,s,d);tt(Si(c),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"}));var h={};return null!=u&&(h={bias:function(){return id(y,l)}}),Object.assign({x:function(){return yu(o.shape,l,i,r,a)},filter:function(){return bu(o,l,i.shape,r,a)}},h)}),"FusedConv2D",{convInfo:x,activation:d},k,[!0]);return b?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),ld=Nr({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,c=void 0===s?[1,1]:s,l=e.dimRoundingMode,u=e.bias,h=e.activation,d=void 0===h?"linear":h,f=e.preluActivationWeights;if(!1===rd(dn.state.gradientDepth,d)){var p=wu(t,n,r,a,o,c,l);return null!=u&&(p=Tl(p,u)),od(p,d,f)}var g=kr(t,"x","depthwiseConv2d"),m=kr(n,"filter","depthwiseConv2d"),v=g,b=!1;3===g.rank&&(b=!0,v=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),tt(4===v.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+v.rank+"."})),tt(4===m.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."})),tt(v.shape[3]===m.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+v.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."})),null==c&&(c=[1,1]),tt(Ai(r,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"})),null!=l&&tt(st(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+a+"."}));var y,w,x=vi(v.shape,m.shape,r,c,a,l,!0);null!=u&&(y=on(y=kr(u,"bias","fused conv2d"),g)[0],pi(x.outShape,y.shape)),null!=f&&(w=kr(f,"prelu weights","fused depthwiseConv2d"));var C={x:v,filter:m};null!=u&&(C.bias=y),null!=f&&(C.preluActivationWeights=w);var k=[m,v],S=dn.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:v,filter:m,convInfo:x,bias:y,activation:d,preluActivationWeights:w});return t([m,v,n]),n}),C,(function(e,t){tt(Si(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"}));var n=t[0],r=t[1],a=t[2],i=ad(e,a,d),o={};return null!=u&&(o={bias:function(){return id(y,i)}}),Object.assign({x:function(){return xu(r.shape,i,n,x)},filter:function(){return Cu(r,i,n.shape,x)}},o)}),"FusedDepthwiseConv2D",{convInfo:x,activation:d},k,[!0]);return b?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),ud=Object.freeze({matMul:sd,conv2d:cd,depthwiseConv2d:ld}),hd=Object.freeze({image:nd,linalg:Kh,losses:Gh,spectral:kh,fused:ud,signal:Oh,square:_c,squaredDifference:Ic,conv1d:gu,conv2d:mu,conv3d:vu,depthwiseConv2d:wu,separableConv2d:ku,conv2dTranspose:Su,conv3dTranspose:Au,op:Nr,batchNormalization2d:gl,batchNormalization3d:ml,batchNormalization4d:vl,batchNormalization:bl,batchNorm:yl,batchNorm2d:wl,batchNorm3d:xl,batchNorm4d:Cl,booleanMaskAsync:function(e,t,n){return Be(this,void 0,void 0,(function(){var r,a,i,o,s,c,l,u,h,d,f,p,g;return Ue(this,(function(m){switch(m.label){case 0:for(r=kr(e,"tensor","boolMask"),a=kr(t,"mask","boolMask","bool"),i=null==n?0:n,o=a.rank,s=r.shape,tt(o>0,(function(){return"mask cannot be scalar"})),nt(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=i;l<i+o;l++)c*=s[l];return u=s.slice(0,i).concat([c],s.slice(i+o)),h=r.reshape(u),d=a.reshape([-1]),[4,Il(d)];case 1:return f=m.sent(),p=f.squeeze([1]),g=uu(h,p,i),e!==r&&r.dispose(),t!==a&&a.dispose(),p.dispose(),h.dispose(),d.dispose(),f.dispose(),[2,g]}}))}))},complex:Mr,real:Lr,imag:Br,concat:Zr,concat1d:Qr,concat2d:ea,concat3d:ta,concat4d:na,split:ra,matMul:_u,dot:Eu,outerProduct:Iu,reverse:Tu,reverse1d:Ru,reverse2d:Fu,reverse3d:Pu,reverse4d:Du,maxPool:Mu,avgPool:Lu,pool:Bu,maxPool3d:Uu,avgPool3d:ju,slice:qu,slice1d:zu,slice2d:Wu,slice3d:Gu,slice4d:Hu,abs:Tc,acos:Rc,acosh:Fc,asin:Pc,asinh:Dc,atan:Oc,atanh:Nc,ceil:Mc,clipByValue:Lc,cos:Bc,cosh:Uc,erf:jc,exp:qc,expm1:zc,floor:Wc,log:Gc,log1p:Hc,logSigmoid:Vc,neg:$c,reciprocal:Xc,round:Kc,rsqrt:Yc,sigmoid:Jc,sign:Zc,isNaN:Qc,isInf:el,isFinite:tl,sin:nl,sinh:rl,softplus:al,sqrt:il,step:ol,tan:sl,tanh:cl,all:$u,any:Xu,argMax:Ku,argMin:Yu,logSumExp:Ju,max:Zu,mean:Qu,min:eh,moments:th,sum:nh,prod:rh,equal:Yl,equalStrict:Jl,greater:Zl,greaterEqual:Ql,greaterEqualStrict:eu,greaterStrict:tu,less:nu,lessEqual:ru,lessEqualStrict:au,lessStrict:iu,notEqual:ou,notEqualStrict:su,add:Tl,addN:Rl,addStrict:Fl,atan2:Pl,div:Dl,divNoNan:Ol,divStrict:Nl,floorDiv:Ml,maximum:Ll,maximumStrict:Bl,minimum:Ul,minimumStrict:jl,mod:ql,modStrict:zl,mul:Wl,mulStrict:Gl,pow:Hl,powStrict:Vl,squaredDifferenceStrict:$l,sub:Xl,subStrict:Kl,elu:ah,leakyRelu:ih,prelu:oh,relu:sh,relu6:ch,selu:lh,logicalAnd:kl,logicalNot:Sl,logicalOr:Al,logicalXor:_l,where:El,whereAsync:Il,buffer:ma,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:va,broadcastTo:ba,cast:ya,clone:wa,cumsum:xa,depthToSpace:Ca,expandDims:ka,eye:Sa,multinomial:Aa,oneHot:_a,pad:Ea,pad1d:Ia,pad2d:Ta,pad3d:Ra,pad4d:Fa,rand:Pa,randomNormal:Da,randomGamma:Oa,randomUniform:Na,reshape:Ma,spaceToBatchND:La,squeeze:Ba,stack:Ua,tile:ja,truncatedNormal:qa,unstack:za,setdiff1dAsync:function(e,t){return Be(this,void 0,void 0,(function(){var n,r,a,i,o,s,c,l,u,h;return Ue(this,(function(d){switch(d.label){case 0:return n=kr(e,"x","setdiff1d"),r=kr(t,"y","setdiff1d"),tt(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),tt(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),tt(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return a=d.sent(),[4,r.data()];case 2:for(i=d.sent(),o=new Set(i),s=0,u=0;u<a.length;u++)o.has(a[u])||s++;for(c=new Ht([s],n.dtype),l=new Ht([s],"int32"),u=0,h=0;u<a.length;u++)o.has(a[u])||(c.values[h]=a[u],l.values[h]=u,h++);return[2,[c.toTensor(),l.toTensor()]]}}))}))},fill:Xr,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return dn.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})},ones:Vr,range:Kr,scalar:qr,tensor:Ur,tensor1d:zr,tensor2d:Wr,tensor3d:Gr,tensor4d:Hr,tensor5d:function(e,t,n){if(rt(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=xr(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return jr(e,t,r,n)},tensor6d:function(e,t,n){if(rt(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=xr(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return jr(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),dn.makeVariable(e,t,n,r)},zeros:$r,onesLike:Yr,zerosLike:Jr,transpose:uh,softmax:si,logSoftmax:ci,localResponseNormalization:hh,norm:dh,gather:uu,unsortedSegmentSum:hu,basicLSTMCell:fh,multiRNNCell:ph,movingAverage:gh,stridedSlice:mh,topk:vh,scatterND:bh,fft:yh,ifft:wh,rfft:xh,irfft:Ch,sparseToDense:Sh,gatherND:Ah,diag:_h,dropout:Eh,hannWindow:Rh,hammingWindow:Fh,frame:Ph,stft:Dh,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),Be(this,void 0,void 0,(function(){var r,a,i,o,s,c,l,u,h,d,f,p,g,m;return Ue(this,(function(v){switch(v.label){case 0:return r=kr(e,"predictions","inTopK"),a=kr(t,"targets","inTopK"),tt(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),tt(r.rank-1===a.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank})),nt(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],tt(n>0&&n<=i,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n})),[4,r.data()];case 1:return o=v.sent(),[4,a.data()];case 2:for(s=v.sent(),c=[o.length/i,i],u=c[1],h=gt("bool",l=c[0]),d=0;d<l;d++){for(f=d*u,p=o.subarray(f,f+u),g=[],m=0;m<p.length;m++)g.push({value:p[m],index:m});for(g.sort((function(e,t){return t.value-e.value})),h[d]=0,m=0;m<n;m++)if(g[m].index===s[d]){h[d]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,Ur(h,a.shape,"bool")]}}))}))}});function dd(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&tt("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))}function fd(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var pd=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new li(t,dn),t}return Le(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,ze().get("IS_NODE")&&wr("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return Be(this,void 0,void 0,(function(){return Ue(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?Ri(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Lt(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return ma(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return dn.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return Be(this,void 0,void 0,(function(){var t;return Ue(this,(function(n){return t=Ot(),e(),[2,{kernelMs:Ot()-t}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:dn.keep(e.clone()),imag:dn.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(dd(e,"slice"),ai(e.shape,t,n)){var r=ii(t,e.strides),a=it(n);return Ur(this.readSync(e.dataId).subarray(r,r+a),n,e.dtype)}for(var i=ma(n,e.dtype),o=this.bufferSync(e),s=0;s<i.size;++s){var c=i.indexToLoc(s).map((function(e,n){return e+t[n]}));i.values[s]=o.get.apply(o,c)}return i.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){dd(e,"stridedSlice");var a=ti(t,n,r);if(a.some((function(e){return 0===e})))return Ur([],a);for(var i=ma(a,e.dtype),o=this.bufferSync(e),s=0;s<i.size;s++){for(var c=i.indexToLoc(s),l=new Array(c.length),u=0;u<l.length;u++)l[u]=c[u]*r[u]+t[u];i.set.apply(i,[o.get.apply(o,l)].concat(c))}return i.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=ma([e.size,e.size],e.dtype),r=n.values,a=0;a<t.length;a++)r[a*e.size+a]=t[a];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==t&&(r[a++]=e.shape[i]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var c=new Array(n);for(i=0;i<c.length;i++)o[t]=i,c[i]=this.slice(e,o,s).reshape(r);return c},t.prototype.reverse=function(e,t){dd(e,"reverse");for(var n=ma(e.shape,e.dtype),r=this.bufferSync(e),a=function(a){var i=n.indexToLoc(a),o=i.slice();t.forEach((function(t){return o[t]=e.shape[t]-1-o[t]})),n.set.apply(n,[r.get.apply(r,o)].concat(i))},i=0;i<n.size;i++)a(i);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return Lr(e)})),a=e.map((function(e){return Br(e)}));return Mr(this.concat(r,t),this.concat(a,t))}var i=e.map((function(e){var n=it(e.shape.slice(t));return e.as2D(-1,n)})),o=Or(i.map((function(e){return e.shape})),1),s=ma(o,e[0].dtype).values;if(1===i[0].shape[0]){var c=0;i.forEach((function(e){s.set(n.readSync(e.dataId),c),c+=e.size}))}else{var l=0;i.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,a=0;a<e.shape[0];++a)for(var i=a*o[1]+l,c=0;c<e.shape[1];++c)s[i+c]=t[r++];l+=e.shape[1]}))}var u=Or(e.map((function(e){return e.shape})),t);return Ur(s,u,e[0].dtype)},t.prototype.neg=function(e){return dd(e,"neg"),this.multiply(qr(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,rn(e.dtype,t.dtype),(function(e,t){return e+t}))},t.prototype.addN=function(e){var t=this;dd(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=ma(e[0].shape,e[0].dtype),a=r.values,i=0;i<e.length;i++)for(var o=n[i],s=0;s<a.length;s++)a[s]+=o[s];return r.toTensor()},t.prototype.softmax=function(e,t){var n=ft([t],e.shape),r=this.max(e,n),a=Ir(r.shape,n),i=this.subtract(e,r.reshape(a)),o=this.exp(i),s=this.sum(o,n).reshape(a);return this.realDivide(o,s)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,rn(e.dtype,t.dtype),(function(e,t){return e-t}))},t.prototype.pow=function(e,t){return dd([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},t.prototype.batchMatMul=function(e,t,n,r){dd([e,t],"matMul");for(var a=n?e.shape[1]:e.shape[2],i=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],s=e.shape[0],c=this.readSync(e.dataId),l=this.readSync(t.dataId),u=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],h=u[0],d=u[1],f=u[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],g=p[0],m=p[1],v=p[2],b=i*o,y=ma([s,i,o],e.dtype),w=y.values,x=this.blockSize,C=0;C<s;C++)for(var k=0;k<i;k+=x)for(var S=0;S<o;S+=x)for(var A=0;A<a;A+=x)for(var _=Math.min(k+x,i),E=Math.min(S+x,o),I=Math.min(A+x,a),T=k;T<_;T++)for(var R=S;R<E;R++){for(var F=0,P=A;P<I;P++)F+=c[C*h+T*d+P*f]*l[P*g+R*m+C*v];w[C*b+(T*o+R)]+=F}return y.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.bias,o=e.activation,s=e.preluActivationWeights,c=this.batchMatMul(t,n,r,a);return i&&(c=this.add(c,i)),o&&(c=fd(this,c,o,s)),c},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,rn(e.dtype,t.dtype),(function(e,t){return e*t}))},t.prototype.realDivide=function(e,t){return dd([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},t.prototype.floorDiv=function(e,t){return dd([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},t.prototype.sum=function(e,t){dd(e,"sum"),Tr("sum",t,e.rank);for(var n=Er(e.shape,t),r=n[0],a=n[1],i=$r(r,rn(e.dtype,"int32")),o=it(a),s=this.readSync(i.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var u=l*o,h=0,d=0;d<o;++d)h+=c[u+d];s[l]=h}return i},t.prototype.prod=function(e,t){dd(e,"sum");for(var n=Er(e.shape,t),r=n[0],a=n[1],i=$r(r,rn(e.dtype,"int32")),o=it(a),s=this.readSync(i.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var u=l*o,h=1,d=0;d<o;++d)h*=c[u+d];s[l]=h}return i},t.prototype.unsortedSegmentSum=function(e,t,n){dd(e,"unsortedSegmentSum");for(var r=[],a=e.rank-t.rank,i=0;i<a;++i)t=t.expandDims(i+1);for(i=0;i<n;++i){var o=qr(i,"int32"),s=Yl(o,t).asType("float32").mul(e).sum(0);r.push(s)}return Ua(r)},t.prototype.argMin=function(e,t){dd(e,"argMin");var n=[t];Tr("argMin",n,e.rank);for(var r=Er(e.shape,n),a=r[0],i=r[1],o=$r(a,"int32"),s=it(i),c=this.readSync(o.dataId),l=this.readSync(e.dataId),u=0;u<c.length;++u){for(var h=u*s,d=l[h],f=0,p=0;p<s;++p){var g=l[h+p];g<d&&(d=g,f=p)}c[u]=f}return o},t.prototype.argMax=function(e,t){dd(e,"argMax");var n=[t];Tr("argMax",n,e.rank);for(var r=Er(e.shape,n),a=r[0],i=r[1],o=$r(a,"int32"),s=it(i),c=this.readSync(o.dataId),l=this.readSync(e.dataId),u=0;u<c.length;++u){for(var h=u*s,d=l[h],f=0,p=0;p<s;++p){var g=l[h+p];g>d&&(d=g,f=p)}c[u]=f}return o},t.prototype.cumsum=function(e,t,n,r){if(dd(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var a=rn(e.dtype,"int32"),i=$r(e.shape,a),o=this.readSync(i.dataId),s=this.readSync(e.dataId),c=e.shape[e.rank-1],l=r?function(e,t){return e+c-t-1}:function(e,t){return e+t},u=0;u<s.length;u+=c)for(var h=0;h<c;h++){var d=l(u,h);if(0===h)o[d]=n?0:s[d];else{var f=l(u,h-1);o[d]=n?s[f]+o[f]:s[d]+o[f]}}return i},t.prototype.equal=function(e,t){return dd([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},t.prototype.notEqual=function(e,t){return dd([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},t.prototype.less=function(e,t){return dd([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},t.prototype.lessEqual=function(e,t){return dd([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},t.prototype.greater=function(e,t){return dd([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},t.prototype.greaterEqual=function(e,t){return dd([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},t.prototype.logicalNot=function(e){dd(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return dd([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},t.prototype.logicalOr=function(e,t){return dd([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},t.prototype.select=function(e,t,n){dd([e,t,n],"select");for(var r=this.readSync(e.dataId),a=this.readSync(t.dataId),i=this.readSync(n.dataId),o=$r(t.shape,rn(t.dtype,n.dtype)),s=this.readSync(o.dataId),c=0,l=0===e.rank||e.rank>1||1===t.rank?1:it(t.shape.slice(1)),u=0;u<r.length;u++)for(var h=0;h<l;h++)1===r[u]?s[c++]=a[u]:s[c++]=i[u];return o},t.prototype.where=function(e){dd([e],"where");var t=this.readSync(e.dataId);return Hi(e.shape,t)},t.prototype.topk=function(e,t,n){return dd(e,"topk"),Gi(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){dd(e,"min"),Tr("min",t,e.rank);for(var n=Er(e.shape,t),r=n[0],a=n[1],i=$r(r,e.dtype),o=it(a),s=this.readSync(i.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var u=l*o,h=c[u],d=0;d<o;++d){var f=c[u+d];f<h&&(h=f)}s[l]=h}return i},t.prototype.minimum=function(e,t){return dd([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},t.prototype.mod=function(e,t){return dd([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},t.prototype.max=function(e,t){dd(e,"max"),Tr("max",t,e.rank);for(var n=Er(e.shape,t),r=n[0],a=n[1],i=$r(r,e.dtype),o=it(a),s=this.readSync(i.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var u=l*o,h=c[u],d=0;d<o;++d){var f=c[u+d];f>h&&(h=f)}s[l]=h}return i},t.prototype.maximum=function(e,t){return dd([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},t.prototype.all=function(e,t){dd(e,"all"),Tr("all",t,e.rank);for(var n=Er(e.shape,t),r=n[0],a=n[1],i=$r(r,e.dtype),o=it(a),s=this.readSync(i.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var u=l*o,h=c[u],d=0;d<o;++d){var f=c[u+d];h=h&&f}s[l]=h}return i},t.prototype.any=function(e,t){dd(e,"any"),Tr("any",t,e.rank);for(var n=Er(e.shape,t),r=n[0],a=n[1],i=$r(r,e.dtype),o=it(a),s=this.readSync(i.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var u=l*o,h=c[u],d=0;d<o;++d){var f=c[u+d];h=h||f}s[l]=h}return i},t.prototype.squaredDifference=function(e,t){return dd([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},t.prototype.ceil=function(e){dd(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){dd(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){dd(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){dd(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){dd(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){dd(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){dd(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=Math.floor(t[r]);t[r]-a<.5?n[r]=Math.floor(t[r]):t[r]-a>.5?n[r]=Math.ceil(t[r]):n[r]=a%2==0?a:a+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){dd(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){dd(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){dd(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){dd(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log1p(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){dd(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.sqrt(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){dd(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=1/Math.sqrt(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){dd(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){dd(e,"relu");for(var t=$r(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.max(0,r[a]);return t},t.prototype.relu6=function(e){dd(e,"relu");for(var t=$r(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.min(Math.max(0,r[a]),6);return t},t.prototype.prelu=function(e,t){return dd([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},t.prototype.elu=function(e){dd(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?a:Math.exp(a)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){dd([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),a=this.readSync(e.dataId),i=0;i<r.length;++i){var o=r[i];n[i]=o>=1?a[i]:a[i]*(o+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){dd(e,"selu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?1.0507009873554805*a:1.7580993408473768*(Math.exp(a)-1)}return this.makeOutput(t,e.shape,"float32")},t.prototype.clip=function(e,t,n){dd(e,"clip");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>n?n:o<t?t:o}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var a=n[2*r],i=n[2*r+1];t[r]=Math.hypot(a,i)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){dd(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){dd(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){dd(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var i,o=r[a]>-t,s=r[a]<t,c=Math.exp(r[a]);i=s?c:o?r[a]:Math.log(1+c),n[a]=i}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){dd(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){dd(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){dd(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){dd(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){dd(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){dd(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return dd([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},t.prototype.sinh=function(e){dd(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){dd(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){dd(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=ct(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){dd(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){dd(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){dd(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){dd(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=Math.sign(n[r]),i=Math.abs(n[r]),o=1/(1+.3275911*i);t[r]=a*(1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-i*i))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),dd(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var i=r[a];isNaN(i)?n[a]=NaN:n[a]=i>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights,s=this.conv2d(t,n,r);return a&&(s=this.add(s,a)),i&&(s=fd(this,s,i,o)),s},t.prototype.conv2d=function(e,t,n){dd([e,t],"conv2d");for(var r=n.filterHeight,a=n.filterWidth,i=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,c=n.padInfo.top,l="channelsLast"===n.dataFormat,u=ma(n.outShape,e.dtype),h=e.strides[0],d=l?e.strides[1]:e.strides[2],f=l?e.strides[2]:1,p=l?1:e.strides[1],g=u.strides[0],m=l?u.strides[1]:u.strides[2],v=l?u.strides[2]:1,b=l?1:u.strides[1],y=this.readSync(e.dataId),w=this.readSync(t.dataId),x=u.values,C=0;C<n.batchSize;++C)for(var k=C*h,S=C*g,A=0;A<n.outHeight;++A)for(var _=S+A*m,E=A*n.strideHeight-c,I=0;I<r;I++){var T=E+I*i;if(!(T<0||T>=n.inHeight))for(var R=I*t.strides[0],F=k+T*d,P=0;P<n.outWidth;++P)for(var D=_+P*v,O=P*n.strideWidth-s,N=0;N<a;N++){var M=O+N*o;if(!(M<0||M>=n.inWidth))for(var L=F+M*f,B=R+N*t.strides[1],U=0;U<n.inChannels;++U){for(var j=y[L+U*p],q=0;q<n.outChannels;++q)x[D+q*b]+=j*w[B+q];B+=n.outChannels}}}return u.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,a=n.filterHeight,i=n.filterWidth,o=n.dilationDepth,s=n.dilationHeight,c=n.dilationWidth,l=n.padInfo.front,u=n.padInfo.left,h=n.padInfo.top,d=ma(n.outShape,e.dtype),f=this.readSync(e.dataId),p=this.readSync(t.dataId),g=d.values,m=0;m<n.batchSize;++m)for(var v=m*e.strides[0],b=m*d.strides[0],y=0;y<n.outDepth;++y)for(var w=b+y*d.strides[1],x=y*n.strideDepth-l,C=0;C<r;C++){var k=x+C*o;if(!(k<0||k>=n.inDepth))for(var S=C*t.strides[0],A=v+k*e.strides[1],_=0;_<n.outHeight;++_)for(var E=w+_*d.strides[2],I=_*n.strideHeight-h,T=0;T<a;T++){var R=I+T*s;if(!(R<0||R>=n.inHeight))for(var F=S+T*t.strides[1],P=A+R*e.strides[2],D=0;D<n.outWidth;++D)for(var O=E+D*n.outChannels,N=D*n.strideWidth-u,M=0;M<i;M++){var L=N+M*c;if(!(L<0||L>=n.inWidth))for(var B=F+M*t.strides[2],U=P+L*n.inChannels,j=B,q=0;q<n.inChannels;++q){for(var z=f[U+q],W=0;W<n.outChannels;++W)g[O+W]+=z*p[j+W];j+=n.outChannels}}}}return d.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){dd([e,t],"conv2dDerInput");for(var r=ma(n.inShape,"float32"),a=r.values,i=this.readSync(e.dataId),o=this.readSync(t.dataId),s=t.strides,c=s[0],l=s[1],u=s[2],h=n.batchSize,d=n.filterHeight,f=n.filterWidth,p=n.inChannels,g=n.inHeight,m=n.inWidth,v=n.outChannels,b=n.outHeight,y=n.outWidth,w=n.strideHeight,x=n.strideWidth,C=n.dataFormat,k=d-1-n.padInfo.top,S=f-1-n.padInfo.left,A="channelsLast"===C,_=r.strides[0],E=A?r.strides[1]:r.strides[2],I=A?r.strides[2]:1,T=A?1:r.strides[1],R=e.strides[0],F=A?e.strides[1]:e.strides[2],P=A?e.strides[2]:1,D=A?1:e.strides[1],O=0;O<h;++O)for(var N=0;N<p;++N)for(var M=0;M<g;++M)for(var L=M-k,B=Math.max(0,Math.ceil(L/w)),U=Math.min(b,(d+L)/w),j=0;j<m;++j){for(var q=j-S,z=Math.max(0,Math.ceil(q/x)),W=Math.min(y,(f+q)/x),G=0,H=B;H<U;++H)for(var V=H*w-L,$=z;$<W;++$)for(var X=R*O+F*H+P*$,K=c*(d-1-V)+l*(f-1-($*x-q))+u*N,Y=0;Y<v;++Y)G+=i[X+D*Y]*o[K+Y];a[_*O+E*M+I*j+T*N]=G}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=ma(n.inShape,"float32"),a=r.values,i=r.strides,o=i[0],s=i[1],c=i[2],l=i[3],u=this.readSync(e.dataId),h=e.strides,d=h[0],f=h[1],p=h[2],g=h[3],m=this.readSync(t.dataId),v=t.strides,b=v[0],y=v[1],w=v[2],x=v[3],C=n.batchSize,k=n.filterDepth,S=n.filterHeight,A=n.filterWidth,_=n.inChannels,E=n.inDepth,I=n.inHeight,T=n.inWidth,R=n.outChannels,F=n.outDepth,P=n.outHeight,D=n.outWidth,O=n.strideDepth,N=n.strideHeight,M=n.strideWidth,L=k-1-n.padInfo.front,B=S-1-n.padInfo.top,U=A-1-n.padInfo.left,j=0;j<C;++j)for(var q=0;q<_;++q)for(var z=0;z<E;++z)for(var W=z-L,G=Math.max(0,Math.ceil(W/O)),H=Math.min(F,(k+W)/O),V=0;V<I;++V)for(var $=V-B,X=Math.max(0,Math.ceil($/N)),K=Math.min(P,(S+$)/N),Y=0;Y<T;++Y){for(var J=Y-U,Z=Math.max(0,Math.ceil(J/M)),Q=Math.min(D,(A+J)/M),ee=0,te=G;te<H;++te)for(var ne=te*O-W,re=X;re<K;++re)for(var ae=re*N-$,ie=Z;ie<Q;++ie)for(var oe=d*j+f*te+p*re+g*ie,se=b*(k-1-ne)+y*(S-1-ae)+w*(A-1-(ie*M-J))+x*q,ce=0;ce<R;++ce)ee+=u[oe+ce]*m[se+ce];a[o*j+s*z+c*V+l*Y+q]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){dd([e,t],"conv2dDerFilter");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s="channelsLast"===n.dataFormat,c=ma(n.filterShape,"float32"),l=n.padInfo.left,u=n.padInfo.top,h=this.bufferSync(e),d=this.bufferSync(t),f=0;f<i;++f)for(var p=Math.max(0,Math.ceil((u-f)/r)),g=Math.min(n.outHeight,(n.inHeight+u-f)/r),m=0;m<o;++m)for(var v=Math.max(0,Math.ceil((l-m)/a)),b=Math.min(n.outWidth,(n.inWidth+l-m)/a),y=0;y<n.inChannels;++y)for(var w=0;w<n.outChannels;++w){for(var x=0,C=0;C<n.batchSize;++C)for(var k=p;k<g;++k)for(var S=f+k*r-u,A=v;A<b;++A){var _=m+A*a-l;x+=s?h.get(C,S,_,y)*d.get(C,k,A,w):h.get(C,y,S,_)*d.get(C,w,k,A)}c.set(x,f,m,y,w)}return c.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,a=n.strideHeight,i=n.strideWidth,o=n.filterDepth,s=n.filterHeight,c=n.filterWidth,l=ma(n.filterShape,"float32"),u=l.values,h=l.strides,d=h[0],f=h[1],p=h[2],g=h[3],m=this.readSync(t.dataId),v=t.strides,b=v[0],y=v[1],w=v[2],x=v[3],C=this.readSync(e.dataId),k=e.strides,S=k[0],A=k[1],_=k[2],E=k[3],I=n.padInfo.front,T=n.padInfo.left,R=n.padInfo.top,F=0;F<o;++F)for(var P=Math.max(0,Math.ceil((I-F)/r)),D=Math.min(n.outDepth,(n.inDepth+I-F)/r),O=F*d,N=0;N<s;++N)for(var M=Math.max(0,Math.ceil((R-N)/a)),L=Math.min(n.outHeight,(n.inHeight+R-N)/a),B=N*f+O,U=0;U<c;++U)for(var j=Math.max(0,Math.ceil((T-U)/i)),q=Math.min(n.outWidth,(n.inWidth+T-U)/i),z=U*p+B,W=0;W<n.inChannels;++W)for(var G=W*g+z,H=0;H<n.outChannels;++H){for(var V=0,$=0;$<n.batchSize;++$)for(var X=$*S,K=$*b,Y=P;Y<D;++Y)for(var J=(F+Y*r-I)*A+X,Z=Y*y+K,Q=M;Q<L;++Q)for(var ee=(N+Q*a-R)*_+J,te=Q*w+Z,ne=j;ne<q;++ne){var re=ne*x+te;V+=C[(U+ne*i-T)*E+ee+W]*m[re+H]}u[G+H]=V}return l.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return a&&(s=this.add(s,a)),i&&(s=fd(this,s,i,o)),s},t.prototype.depthwiseConv2D=function(e,t,n){dd([e,t],"depthwiseConv2D");for(var r=n.filterHeight,a=n.filterWidth,i=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,u=ma(n.outShape,e.dtype),h=this.readSync(e.dataId),d=this.readSync(t.dataId),f=u.values,p=0;p<n.batchSize;++p)for(var g=p*e.strides[0],m=p*u.strides[0],v=0;v<n.outHeight;++v)for(var b=m+v*u.strides[1],y=v*n.strideHeight-s,w=0;w<r;++w){var x=y+w*i;if(!(x<0||x>=n.inHeight))for(var C=w*t.strides[0],k=g+x*e.strides[1],S=0;S<n.outWidth;++S)for(var A=b+S*u.strides[2],_=S*n.strideWidth-c,E=0;E<a;++E){var I=_+E*o;if(!(I<0||I>=n.inWidth))for(var T=C+E*t.strides[1],R=k+I*n.inChannels,F=A,P=T,D=0;D<n.inChannels;++D){for(var O=h[R+D],N=0;N<l;++N)f[F+N]+=O*d[P+N];F+=l,P+=l}}}return u.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){dd([e,t],"depthwiseConv2DDerInput");for(var r=ma(n.inShape,"float32"),a=r.values,i=r.strides,o=i[0],s=i[1],c=i[2],l=this.readSync(e.dataId),u=e.strides,h=u[0],d=u[1],f=u[2],p=this.readSync(t.dataId),g=t.strides,m=g[0],v=g[1],b=g[2],y=n.batchSize,w=n.filterHeight,x=n.filterWidth,C=n.inChannels,k=n.inHeight,S=n.inWidth,A=n.outChannels,_=n.outHeight,E=n.outWidth,I=n.strideHeight,T=n.strideWidth,R=w-1-n.padInfo.top,F=x-1-n.padInfo.left,P=A/C,D=0;D<y;++D)for(var O=0;O<C;++O)for(var N=0;N<k;++N)for(var M=N-R,L=Math.max(0,Math.ceil(M/I)),B=Math.min(_,(w+M)/I),U=0;U<S;++U){for(var j=U-F,q=Math.max(0,Math.ceil(j/T)),z=Math.min(E,(x+j)/T),W=0,G=L;G<B;++G)for(var H=G*I-M,V=q;V<z;++V)for(var $=h*D+d*G+f*V,X=m*(w-1-H)+v*(x-1-(V*T-j))+b*O,K=0;K<P;++K)W+=l[$+(O*P+K)]*p[X+K];a[o*D+s*N+c*U+O]=W}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){dd([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s=ma(n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,u=n.outChannels/n.inChannels,h=this.bufferSync(e),d=this.bufferSync(t),f=0;f<i;++f)for(var p=Math.max(0,Math.ceil((l-f)/r)),g=Math.min(n.outHeight,(n.inHeight+l-f)/r),m=0;m<o;++m)for(var v=Math.max(0,Math.ceil((c-m)/a)),b=Math.min(n.outWidth,(n.inWidth+c-m)/a),y=0;y<n.outChannels;++y){for(var w=Math.trunc(y/u),x=y%u,C=0,k=0;k<n.batchSize;++k)for(var S=p;S<g;++S)for(var A=f+S*r-l,_=v;_<b;++_){var E=m+_*a-c;C+=h.get(k,A,E,w)*d.get(k,S,_,y)}s.set(C,f,m,w,x)}return s.toTensor()},t.prototype.tile=function(e,t){return dd(e,"tile"),Wi(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){dd(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),a=t.map((function(e){return e[0]})),i=this.bufferSync(e),o=ma(r,e.dtype);0!==n&&o.values.fill(n);for(var s=0;s<e.size;s++){var c=i.indexToLoc(s),l=c.map((function(e,t){return e+a[t]}));o.set.apply(o,[i.get.apply(i,c)].concat(l))}return o.toTensor()},t.prototype.transpose=function(e,t){dd(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var a=this.readSync(e.dataId),i=ma(n,e.dtype),o=this.bufferSync(e);for(r=0;r<e.size;++r){for(var s=o.indexToLoc(r),c=new Array(s.length),l=0;l<c.length;l++)c[l]=s[t[l]];var u=i.locToIndex(c);i.values[u]=a[r]}return i.toTensor()},t.prototype.gather=function(e,t,n){dd([e,t],"gather");var r=e.shape.slice(),a=this.readSync(t.dataId);r[n]=a.length;for(var i=ma(r,e.dtype),o=this.bufferSync(e),s=0;s<i.size;++s){var c=i.indexToLoc(s),l=c.slice();l[n]=a[c[n]];var u=o.locToIndex(l);i.values[s]=o.values[u]}return i.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){dd([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),a=Wa(e.shape,t,r),i=Ga(a.length,t.length),o=Ha(e.shape,t,r),s=Va(n,t.length),c=$a(o,n,t.length);return e.reshape(a).transpose(i).reshape(o).slice(s,c)},t.prototype.spaceToBatchND=function(e,t,n){dd([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var i=1+t.length;i<e.shape.length;++i)a.push([0,0]);var o=e.pad(a),s=Wa(o.shape,t,r,!1),c=Ga(s.length,t.length,!1),l=Ha(o.shape,t,r,!1);return o.reshape(s).transpose(c).reshape(l)},t.prototype.pool=function(e,t,n){dd(e,"pool");for(var r=t.strideHeight,a=t.strideWidth,i=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=t.padInfo.top,u=t.padInfo.left,h="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,d=this.readSync(e.dataId),f=ma(t.outShape,e.dtype),p=f.values,g=t.outShape[1]*t.outShape[2]*t.outShape[3],m=t.outShape[2]*t.outShape[3],v=t.outShape[3],b=0;b<t.batchSize;++b)for(var y=b*g,w=b*e.strides[0],x=0;x<t.inChannels;++x)for(var C=0;C<t.outHeight;++C)for(var k=C*r-l,S=Math.max(0,k),A=Math.min(t.inHeight,s+k),_=y+C*m,E=0;E<t.outWidth;++E){for(var I=E*a-u,T=Math.max(0,I),R=Math.min(t.inWidth,c+I),F=h,P=0,D=0,O=S;O<A;O+=i){for(var N=w+O*e.strides[1],M=T;M<R;M+=o){var L=d[N+M*e.strides[2]+x];"max"===n&&L>F?F=L:"avg"===n&&(P+=L,D++)}if(isNaN(F))break}p[_+E*v+x]="avg"===n?P/D:F}return f.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=ma(t.outShape,"int32"),r=t.strideHeight,a=t.strideWidth,i=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=t.padInfo.top,u=t.padInfo.left,h=this.bufferSync(e),d=0;d<t.batchSize;++d)for(var f=0;f<t.inChannels;++f)for(var p=0;p<t.outHeight;++p){for(var g=p*r-l,m=g;m<0;)m+=i;for(var v=Math.min(t.inHeight,s+g),b=0;b<t.outWidth;++b){for(var y=b*a-u,w=y;w<0;)w+=o;for(var x=Math.min(t.inWidth,c+y),C=Number.NEGATIVE_INFINITY,k=-1,S=m;S<v;S+=i)for(var A=S-g,_=w;_<x;_+=o){var E=_-y,I=h.get(d,S,_,f);I>C&&(C=I,k=A*c+E)}n.set(k,d,p,b,f)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){dd([t,n],"maxPoolBackprop");for(var a=this.maxPoolPositions(t,r),i=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,c=r.dilationWidth,l=r.effectiveFilterHeight,u=r.effectiveFilterWidth,h=u-1-r.padInfo.left,d=l-1-r.padInfo.top,f=ma(t.shape,"float32"),p=this.bufferSync(a),g=this.bufferSync(e),m=0;m<r.batchSize;++m)for(var v=0;v<r.inChannels;++v)for(var b=0;b<r.inHeight;++b)for(var y=0;y<r.inWidth;++y){for(var w=b-d,x=y-h,C=0,k=0;k<l;k+=s){var S=(w+k)/i;if(!(S<0||S>=r.outHeight||Math.floor(S)!==S))for(var A=0;A<u;A+=c){var _=(x+A)/o;if(!(_<0||_>=r.outWidth||Math.floor(_)!==_)){var E=l*u-1-p.get(m,S,_,v)===k*u+A?1:0;0!==E&&(C+=g.get(m,S,_,v)*E)}}}f.set(C,m,b,y,v)}return f.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){dd([e,t],"avgPoolBackprop");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s=n.dilationHeight,c=n.dilationWidth,l=n.effectiveFilterHeight,u=n.effectiveFilterWidth,h=u-1-n.padInfo.left,d=l-1-n.padInfo.top,f=ma(t.shape,"float32"),p=1/(i*o),g=this.bufferSync(e),m=0;m<n.batchSize;++m)for(var v=0;v<n.inChannels;++v)for(var b=0;b<n.inHeight;++b)for(var y=0;y<n.inWidth;++y){for(var w=b-d,x=y-h,C=0,k=0;k<l;k+=s){var S=(w+k)/r;if(!(S<0||S>=n.outHeight||Math.floor(S)!==S))for(var A=0;A<u;A+=c){var _=(x+A)/a;_<0||_>=n.outWidth||Math.floor(_)!==_||(C+=g.get(m,S,_,v))}}f.set(C*p,m,b,y,v)}return f.toTensor()},t.prototype.pool3d=function(e,t,n){dd(e,"pool3d");for(var r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,u=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,g="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(e.dataId),v=ma(t.outShape,e.dtype),b=v.values,y=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[3]*t.outShape[4],C=t.outShape[4],k=0;k<t.batchSize;++k)for(var S=k*y,A=k*e.strides[0],_=0;_<t.inChannels;++_)for(var E=0;E<t.outDepth;++E){for(var I=E*r-d,T=I;T<0;)T+=o;for(var R=Math.min(t.inDepth,l+I),F=S+E*w,P=0;P<t.outHeight;++P){for(var D=P*a-f,O=D;O<0;)O+=s;for(var N=Math.min(t.inHeight,u+D),M=F+P*x,L=0;L<t.outWidth;++L){for(var B=L*i-p,U=B;U<0;)U+=c;for(var j=Math.min(t.inWidth,h+B),q=M+L*C,z=g,W=0,G=0,H=T;H<R;H+=o){for(var V=A+H*e.strides[1],$=O;$<N;$+=s){for(var X=V+$*e.strides[2],K=U;K<j;K+=c){var Y=m[X+K*e.strides[3]+_];if("max"===n&&Y>z?z=Y:"avg"===n&&(W+=Y,G++),isNaN(z))break}if(isNaN(z))break}if(isNaN(z))break}b[q+_]="avg"===n?W/G:z}}}return v.toTensor()},t.prototype.avgPool3d=function(e,t){return dd(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){dd([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,a=n.strideHeight,i=n.strideWidth,o=n.filterDepth,s=n.filterHeight,c=n.filterWidth,l=n.dilationDepth,u=n.dilationHeight,h=n.dilationWidth,d=n.effectiveFilterDepth,f=n.effectiveFilterHeight,p=n.effectiveFilterWidth,g=d-1-n.padInfo.front,m=p-1-n.padInfo.left,v=f-1-n.padInfo.top,b=ma(t.shape,"float32"),y=1/(o*s*c),w=this.bufferSync(e),x=0;x<n.batchSize;++x)for(var C=0;C<n.inChannels;++C)for(var k=0;k<n.inDepth;++k)for(var S=0;S<n.inHeight;++S)for(var A=0;A<n.inWidth;++A){for(var _=k-g,E=S-v,I=A-m,T=0,R=0;R<d;R+=l){var F=(_+R)/r;if(!(F<0||F>=n.outDepth||Math.floor(F)!==F))for(var P=0;P<f;P+=u){var D=(E+P)/a;if(!(D<0||D>=n.outHeight||Math.floor(D)!==D))for(var O=0;O<p;O+=h){var N=(I+O)/i;N<0||N>=n.outWidth||Math.floor(N)!==N||(T+=w.get(x,F,D,N,C))}}}b.set(T*y,x,k,S,A,C)}return b.toTensor()},t.prototype.maxPool3d=function(e,t){return dd(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=ma(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,u=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,g=this.bufferSync(e),m=0;m<t.batchSize;++m)for(var v=0;v<t.inChannels;++v)for(var b=0;b<t.outDepth;++b){for(var y=b*r-d,w=y;w<0;)w+=o;for(var x=Math.min(t.inDepth,l+y),C=0;C<t.outHeight;++C){for(var k=C*a-f,S=k;S<0;)S+=s;for(var A=Math.min(t.inHeight,u+k),_=0;_<t.outWidth;++_){for(var E=_*i-p,I=E;I<0;)I+=c;for(var T=Math.min(t.inWidth,h+E),R=Number.NEGATIVE_INFINITY,F=-1,P=w;P<x;P+=o)for(var D=P-y,O=S;O<A;O+=s)for(var N=O-k,M=I;M<T;M+=c){var L=M-E,B=g.get(m,P,O,M,v);B>=R&&(R=B,F=D*u*h+N*u+L)}n.set(F,m,b,C,_,v)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){dd([t,n],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(t,r),i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,c=r.dilationDepth,l=r.dilationHeight,u=r.dilationWidth,h=r.effectiveFilterDepth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=h-1-r.padInfo.front,g=f-1-r.padInfo.left,m=d-1-r.padInfo.top,v=ma(t.shape,"float32"),b=this.bufferSync(a),y=this.bufferSync(e),w=0;w<r.batchSize;++w)for(var x=0;x<r.inChannels;++x)for(var C=0;C<r.inDepth;++C)for(var k=0;k<r.inHeight;++k)for(var S=0;S<r.inWidth;++S){for(var A=C-p,_=k-m,E=S-g,I=0,T=0;T<h;T+=c){var R=(A+T)/i;if(!(R<0||R>=r.outDepth||Math.floor(R)!==R))for(var F=0;F<d;F+=l){var P=(_+F)/o;if(!(P<0||P>=r.outHeight||Math.floor(P)!==P))for(var D=0;D<f;D+=u){var O=(E+D)/s;if(!(O<0||O>=r.outWidth||Math.floor(O)!==O)){var N=h*d*f-1-b.get(w,R,P,O,x)===T*d*f+F*f+D?1:0;0!==N&&(I+=y.get(w,R,P,O,x)*N)}}}}v.set(I,w,C,k,S,x)}return v.toTensor()},t.prototype.cast=function(e,t){return Ei(e,t,this)},t.prototype.reshape=function(e,t){return Ii(e,t)},t.prototype.avgPool=function(e,t){return dd(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){dd(e,"resizeBilinear");for(var a=e.shape,i=a[0],o=a[1],s=a[2],c=a[3],l=this.readSync(e.dataId),u=new Float32Array(it([i,t,n,c])),h=[r&&t>1?o-1:o,r&&n>1?s-1:s],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=0,p=h[0]/d[0],g=h[1]/d[1],m=0;m<i;m++)for(var v=0;v<t;v++)for(var b=p*v,y=Math.floor(b),w=b-y,x=Math.min(o-1,Math.ceil(b)),C=m*e.strides[0]+y*e.strides[1],k=m*e.strides[0]+x*e.strides[1],S=0;S<n;S++)for(var A=g*S,_=Math.floor(A),E=A-_,I=Math.min(s-1,Math.ceil(A)),T=C+_*e.strides[2],R=k+_*e.strides[2],F=C+I*e.strides[2],P=k+I*e.strides[2],D=0;D<c;D++){var O=l[T+D],N=l[R+D],M=O+(l[F+D]-O)*E,L=M+(N+(l[P+D]-N)*E-M)*w;u[f++]=L}return Ur(u,[i,t,n,c])},t.prototype.resizeBilinearBackprop=function(e,t,n){dd([e,t],"resizeBilinearBackprop");for(var r=t.shape,a=r[0],i=r[1],o=r[2],s=r[3],c=e.shape,l=c[1],u=c[2],h=new Float32Array(a*i*o*s),d=[n&&l>1?i-1:i,n&&u>1?o-1:o],f=[n&&l>1?l-1:l,n&&u>1?u-1:u],p=d[0]/f[0],g=d[1]/f[1],m=this.readSync(e.dataId),v=0,b=0;b<a;b++)for(var y=b*t.strides[0],w=0;w<l;w++)for(var x=w*p,C=Math.floor(x),k=Math.min(Math.ceil(x),i-1),S=y+C*t.strides[1],A=y+k*t.strides[1],_=x-C,E=1-_,I=0;I<u;I++)for(var T=I*g,R=Math.floor(T),F=Math.min(Math.ceil(T),o-1),P=T-R,D=1-P,O=S+R*t.strides[2],N=S+F*t.strides[2],M=A+R*t.strides[2],L=A+F*t.strides[2],B=E*D,U=E*P,j=_*D,q=_*P,z=0;z<s;z++){var W=m[v++];h[O+z]+=W*B,h[N+z]+=W*U,h[M+z]+=W*j,h[L+z]+=W*q}return Hr(h,[a,o,i,s],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){dd(e,"resizeNearestNeighbor");for(var a=e.shape,i=a[0],o=a[1],s=a[2],c=a[3],l=this.readSync(e.dataId),u=new Float32Array(i*t*n*c),h=[r&&t>1?o-1:o,r&&n>1?s-1:s],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=h[0]/d[0],p=h[1]/d[1],g=0,m=0;m<i;m++)for(var v=m*e.strides[0],b=0;b<t;b++)for(var y=f*b,w=v+Math.min(o-1,r?Math.round(y):Math.floor(y))*e.strides[1],x=0;x<n;x++)for(var C=p*x,k=w+Math.min(s-1,r?Math.round(C):Math.floor(C))*e.strides[2],S=0;S<c;S++){var A=l[k+S];u[g++]=A}return Ur(u,[i,t,n,c],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){dd([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,a=r[0],i=r[1],o=r[2],s=r[3],c=e.shape,l=c[1],u=c[2],h=new Float32Array(a*i*o*s),d=this.readSync(e.dataId),f=[n&&l>1?i-1:i,n&&u>1?o-1:o],p=[n&&l>1?l-1:l,n&&u>1?u-1:u],g=f[0]/p[0],m=f[1]/p[1],v=1/g,b=1/m,y=2*Math.ceil(v)+2,w=2*Math.ceil(b)+2,x=0;x<a;x++)for(var C=x*t.strides[0],k=0;k<i;k++)for(var S=C+k*t.strides[1],A=Math.floor(k*v),_=Math.floor(A-y/2),E=0;E<o;E++)for(var I=S+E*t.strides[2],T=Math.floor(E*b),R=Math.floor(T-w/2),F=0;F<s;F++){for(var P=0,D=0;D<y;D++){var O=D+_;if(!(O<0||O>=l)){var N=C+O*e.strides[1],M=O*g;if(k===Math.min(i-1,n?Math.round(M):Math.floor(M)))for(var L=0;L<w;L++){var B=L+R;if(!(B<0||B>=u)){var U=N+B*e.strides[2],j=B*m;E===Math.min(o-1,n?Math.round(j):Math.floor(j))&&(P+=d[U+F])}}}}h[I+F]=P}return Hr(h,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,a,i){dd([e,t,n,a,i],"batchNorm");for(var o=this.readSync(e.dataId),s=this.readSync(t.dataId),c=this.readSync(n.dataId),l=a?this.readSync(a.dataId):new Float32Array([1]),u=i?this.readSync(i.dataId):new Float32Array([0]),h=new Float32Array(o.length),d=u.length,f=l.length,p=c.length,g=s.length,m=0,v=0,b=0,y=0,w=0;w<o.length;++w)h[w]=u[m++]+(o[w]-s[v++])*l[b++]/Math.sqrt(c[y++]+r),m>=d&&(m=0),v>=g&&(v=0),b>=f&&(b=0),y>=p&&(y=0);return Hr(h,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,a){dd(e,"localResponseNormalization4D");var i=e.shape[3],o=i-1,s=this.readSync(e.dataId),c=e.size,l=new Float32Array(c);function u(e){for(var n=e%i,r=e-n+Math.max(0,n-t),a=e-n+Math.min(n+t,o),c=0;r<=a;r++){var l=s[r];c+=l*l}return c}for(var h=0;h<c;h++){var d=u(h),f=s[h]*Math.pow(n+r*d,-a);l[h]=f}return Hr(l,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,a,i,o){dd(e,"LRNGrad");for(var s=e.shape[3],c=this.readSync(e.dataId),l=this.readSync(t.dataId),u=this.readSync(n.dataId),h=new Float32Array(e.size),d=e.size,f=0;f<d;f++){for(var p=f%s,g=f-p+Math.max(0,p-r),m=f-p+Math.min(s,p+r+1),v=0,b=g;b<m;b++)v+=Math.pow(l[b],2);for(v=i*v+a,b=g;b<m;b++){var y=-2*i*o*l[b]*u[f]/v;f===b&&(y+=Math.pow(v,-o)),y*=c[f],h[b]+=y}}return Hr(h,e.shape)},t.prototype.multinomial=function(e,t,n,r){dd(e,"multinomial");for(var a=t?e:si(e),i=a.shape[0],o=a.shape[1],s=$r([i,n],"int32"),c=this.readSync(s.dataId),l=this.readSync(a.dataId),u=0;u<i;++u){var h=u*o,d=new Float32Array(o-1);d[0]=l[h];for(var f=1;f<d.length;++f)d[f]=d[f-1]+l[h+f];for(var p=da(r.toString()),g=u*n,m=0;m<n;++m){var v=p();c[g+m]=d.length;for(var b=0;b<d.length;b++)if(v<d[b]){c[g+m]=b;break}}}return s},t.prototype.oneHot=function(e,t,n,r){dd(e,"oneHot");var a=new Float32Array(e.size*t);a.fill(r);for(var i=this.readSync(e.dataId),o=0;o<e.size;++o)i[o]>=0&&i[o]<t&&(a[o*t+i[o]]=n);return Wr(a,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,a){return dd(e,"nonMaxSuppression"),Mi(this.readSync(e.dataId),this.readSync(t.dataId),n,r,a)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],a=ma(e.shape,"float32"),i=ma(e.shape,"float32"),o=Lr(e).as2D(n,r),s=Br(e).as2D(n,r),c=0;c<n;c++)for(var l=o.slice([c,0],[1,r]),u=s.slice([c,0],[1,r]),h=Mr(l,u),d=this.readSync(this.fftImpl(h,t).dataId),f=0;f<r;f++){var p=Fi(d,f);a.values[c*r+f]=p.real,i.values[c*r+f]=p.imag}return Mr(a.toTensor(),i.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var a=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(a=Mr(Lr(a).div(qr(r)),Br(a).div(qr(r)))),a}var i=this.readSync(e.dataId),o=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(i,r,t));return Mr(o.real,o.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),a=t/2,i=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),o=Mr(i.real,i.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),c=Mr(s.real,s.imag).as1D();o=this.fftRadix2(o,a,n),c=this.fftRadix2(c,a,n);var l=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}(t,n),u=Mr(l.real,l.imag).mul(c),h=o.add(u),d=o.sub(u),f=Lr(h).concat(Lr(d)),p=Br(h).concat(Br(d));return Mr(f,p).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var c=Di(a*s,t,n),l=Fi(e,s);i+=l.real*c.real-l.imag*c.imag,o+=l.real*c.imag+l.imag*c.real}n&&(i/=t,o/=t),Pi(r,i,o,a)}return r},t.prototype.depthToSpace=function(e,t,n){tt("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),tt(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],a=e.shape[1],i=e.shape[2],o=e.shape[3],s=a*t,c=i*t,l=o/(t*t),u=this.readSync(e.dataId),h=new Float32Array(r*s*c*l),d=0,f=0;f<r;++f)for(var p=0;p<s;++p)for(var g=Math.floor(p/t),m=p%t,v=0;v<c;++v)for(var b=Math.floor(v/t),y=(m*t+v%t)*l,w=0;w<l;++w){var x=w+y+o*(b+i*(g+a*f));h[d++]=u[x]}return Hr(h,[r,s,c,l])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var a=pi(e.shape,t.shape),i=ma(a,n),o=this.readSync(e.dataId),s=this.readSync(t.dataId),c=di(e.shape,a),l=di(t.shape,a),u=i.values;if(c.length+l.length===0)for(var h=0;h<u.length;++h)u[h]=r(o[h%o.length],s[h%s.length]);else{var d=this.bufferSync(e),f=this.bufferSync(t),p=function(n){var a=i.indexToLoc(n),h=a.slice(-e.rank);c.forEach((function(e){return h[e]=0}));var p=d.locToIndex(h),g=a.slice(-t.rank);l.forEach((function(e){return g[e]=0}));var m=f.locToIndex(g);u[n]=r(o[p],s[m])};for(h=0;h<u.length;++h)p(h)}return i.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=pi(e.shape,t.shape),a=ma(r,"float32"),i=ma(r,"float32"),o=this.readSync(e.dataId),s=this.readSync(t.dataId),c=di(e.shape,r),l=di(t.shape,r),u=a.values,h=i.values;if(c.length+l.length===0)for(var d=0;d<u.length;d++){var f=d%o.length,p=d%s.length,g=n(o[2*f],o[2*f+1],s[2*p],s[2*p+1]);u[d]=g.real,h[d]=g.imag}else{var m=this.bufferSync(this.data.get(e.dataId).complexTensors.real),v=this.bufferSync(this.data.get(t.dataId).complexTensors.real),b=function(r){var i=a.indexToLoc(r),d=i.slice(-e.rank);c.forEach((function(e){return d[e]=0}));var f=m.locToIndex(d),p=i.slice(-t.rank);l.forEach((function(e){return p[e]=0}));var g=v.locToIndex(p),b=n(o[2*f],o[2*f+1],s[2*g],s[2*g+1]);u[r]=b.real,h[r]=b.imag};for(d=0;d<u.length;d++)b(d)}return this.complex(a.toTensor(),i.toTensor())},t.prototype.split=function(e,t,n){return zi(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,a,i){for(var o=e.shape,s=o[0],c=o[1],l=o[2],u=o[3],h=t.shape[0],d=r[0],f=r[1],p=ma([h,d,f,u],"float32"),g=this.readSync(t.dataId),m=this.readSync(n.dataId),v=this.readSync(e.dataId),b=e.strides,y=p.strides,w=0;w<h;w++){var x=4*w,C=g[x],k=g[x+1],S=g[x+2],A=g[x+3],_=m[w];if(!(_>=s))for(var E=d>1?(S-C)*(c-1)/(d-1):0,I=f>1?(A-k)*(l-1)/(f-1):0,T=0;T<d;T++){var R=d>1?C*(c-1)+T*E:.5*(C+S)*(c-1);if(R<0||R>c-1)for(var F=0;F<f;F++)for(var P=0;P<u;P++){var D=P+F*y[2]+T*y[1]+w*y[0];p.values[D]=i}else if("bilinear"===a){var O=Math.floor(R),N=Math.ceil(R),M=R-O;for(F=0;F<f;F++)if((H=f>1?k*(l-1)+F*I:.5*(k+A)*(l-1))<0||H>l-1)for(P=0;P<u;P++)D=P+F*y[2]+T*y[1]+w*y[0],p.values[D]=i;else{var L=Math.floor(H),B=Math.ceil(H),U=H-L;for(P=0;P<u;P++){var j=v[D=P+L*b[2]+O*b[1]+_*b[0]],q=v[D=P+B*b[2]+O*b[1]+_*b[0]],z=v[D=P+L*b[2]+N*b[1]+_*b[0]],W=j+(q-j)*U,G=z+(v[D=P+B*b[2]+N*b[1]+_*b[0]]-z)*U;D=P+F*y[2]+T*y[1]+w*y[0],p.values[D]=W+(G-W)*M}}}else for(F=0;F<f;++F){var H;if((H=f>1?k*(l-1)+F*I:.5*(k+A)*(l-1))<0||H>l-1)for(P=0;P<u;P++)D=P+F*y[2]+T*y[1]+w*y[0],p.values[D]=i;else{var V=Math.round(H),$=Math.round(R);for(P=0;P<u;P++){var X=P+V*b[2]+$*b[1]+_*b[0],K=P+F*y[2]+T*y[1]+w*y[0];p.values[K]=v[X]}}}}}return p.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var a=Za(0,e,n),i=a.sliceRank,o=a.numUpdates,s=a.sliceSize,c=a.strides,l=a.outputSize;return this.scatter(e,t,n,l,s,o,i,c,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=Xa(e,t),i=a[0],o=a[1],s=a[2],c=a[3];if(0===o)return Ur([],i,e.dtype);for(var l=new Ht([o,s],e.dtype),u=this.readSync(t.dataId),h=this.readSync(e.dataId),d=0;d<o;d++){for(var f=[],p=0,g=0;g<r;g++){var m=u[d*r+g];p+=m*c[g],f.push(m)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+f+" does not index into "+e.shape);for(var v=0;v<s;v++)l.values[d*s+v]=h[p*s+v]}return l.toTensor().reshape(i)},t.prototype.scatterND=function(e,t,n){var r=Za(0,e,n),a=r.sliceRank,i=r.numUpdates,o=r.sliceSize,s=r.strides,c=r.outputSize,l=qr(0);return this.scatter(e,t,n,c,o,i,a,s,l,!0)},t.prototype.fill=function(e,t,n){var r=mt(n=n||_t(t),it(e));return r.fill(t),dn.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=mt(e.dtype,it(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return Ti(e,t,n)},t.prototype.scatter=function(e,t,n,r,a,i,o,s,c,l){var u=[r/a,a],h=this.readSync(e.dataId),d=this.readSync(t.dataId);if(0===r)return Ur([],n,t.dtype);var f=new Ht(u,t.dtype);f.values.fill(this.readSync(c.dataId)[0]);for(var p=0;p<i;p++){for(var g=[],m=0,v=0;v<o;v++){var b=h[p*o+v];g.push(b),m+=b*s[v]}if(m<0||m>=r/a)throw new Error("Invalid indices: "+g+" does not index into "+n);for(var y=0;y<a;y++)l?f.values[m*a+y]+=d[p*a+y]:f.values[m*a+y]=0===t.rank?d[0]:d[p*a+y]}return f.toTensor().reshape(n)},t}(ui);dn.registerBackend("cpu",(function(){return new pd}),1);for(var gd=0,md=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t,i=a.boxes,o=a.scores,s=r,c=s.maxOutputSize,l=s.iouThreshold,u=s.scoreThreshold,h=s.softNmsSigma,d=n;dd(i,"NonMaxSuppressionWithScore");var f=Li(d.data.get(i.dataId).values,d.data.get(o.dataId).values,c,l,u,h);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;dd(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var c=i[s];o[s]=c*c}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Ec,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n;dd([a,i],Ec);var s=o.data.get(a.dataId).values,c=o.data.get(i.dataId).values,l=function(e,t,n,r,a,i){var o=pi(e,t),s=o.length,c=Tt(o),l=gt(a,it(o)),u=e.length,h=t.length,d=Tt(e),f=Tt(t),p=di(e,o),g=di(t,o);if(p.length+g.length===0)for(var m=0;m<l.length;++m)l[m]=i(n[m%n.length],r[m%r.length]);else{var v=function(e){var t=Ut(e,s,c),a=t.slice(-u);p.forEach((function(e){return a[e]=0}));var o=Bt(a,u,d),m=t.slice(-h);g.forEach((function(e){return m[e]=0}));var v=Bt(m,h,f);l[e]=i(n[o],r[v])};for(m=0;m<l.length;++m)v(m)}return[l,o]}(a.shape,i.shape,s,c,a.dtype,(function(e,t){var n=e-t;return n*n})),u=l[0],h=l[1];return{dataId:o.write(u,h,a.dtype),shape:h,dtype:a.dtype}}}];gd<md.length;gd++)Xe(md[gd]);for(var vd,bd=function(e){this.variableNames=["A"];var t=Ji(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},yd=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Ji(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},wd=0,xd=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,c=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],l=c[0],u=c[1],h=[u,l],d=[u,l,i];(s||o)&&(null==vd&&(vd=document.createElement("canvas").getContext("2d")),vd.canvas.width=l,vd.canvas.height=u,vd.drawImage(a,0,0,l,u),a=vd.canvas);var f=n.makeTensorInfo(h,"int32");n.texData.get(f.dataId).usage=mn.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),a);var p=ze().getBool("WEBGL_PACK")?new yd(d):new bd(d),g=n.runWebGLProgram(p,[f],"int32");return n.disposeData(f.dataId),g}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;wr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=t,i=a.boxes,o=a.scores,s=r,c=s.maxOutputSize,l=s.iouThreshold,u=s.scoreThreshold,h=s.softNmsSigma,d=n,f=Li(d.readSync(i.dataId),d.readSync(o.dataId),c,l,u,h);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,i=new oc(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:Ec,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n,s=ze().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _o("return (a - b) * (a - b);",a.shape,i.shape):new So("return (a - b) * (a - b);",a.shape,i.shape);return o.compileAndRun(s,[a,i])}}];wd<xd.length;wd++)Xe(xd[wd]);for(var Cd=0,kd=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:Ec,gradFunc:function(e,t){var n=t[0],r=t[1],a=qr(2);return{a:function(){return Wl(e,Wl(a,Xl(n,r)))},b:function(){return Wl(e,Wl(a,Xl(r,n)))}}}}];Cd<kd.length;Cd++)Ke(kd[Cd]);var Sd=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();ze().get("IS_BROWSER")&&ze().setPlatform("browser",new Sd);var Ad,_d=function(){function e(){this.util=__webpack_require__(753),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=ze().global.fetch?ze().global.fetch(e,t):(null==Ad&&(Ad=__webpack_require__(522)),Ad(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();ze().get("IS_NODE")&&ze().setPlatform("node",new _d);var Ed={float32:4,int32:4,uint16:2,uint8:1,bool:1};function Id(e,t){for(var n={},r=0,a=function(t){var a=t.name,i=t.dtype,o=t.shape,s=it(o),c=void 0;if("quantization"in t){var l=t.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+l.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var u=Ed[l.dtype],h=e.slice(r,r+s*u),d="uint8"===l.dtype?new Uint8Array(h):new Uint16Array(h);if("float32"===i)c=Float32Array.from(d,(function(e){return e*l.scale+l.min}));else{if("int32"!==i)throw new Error("Unsupported dtype in weight '"+a+"': "+i);c=Int32Array.from(d,(function(e){return Math.round(e*l.scale+l.min)}))}r+=s*u}else if("string"===i){var f=it(t.shape);c=[];for(var p=0;p<f;p++){var g=new Uint32Array(e.slice(r,r+4))[0];r+=4;var m=new Uint8Array(e.slice(r,r+g));c.push(m),r+=g}}else{var v=Ed[i];if(h=e.slice(r,r+s*v),"float32"===i)c=new Float32Array(h);else if("int32"===i)c=new Int32Array(h);else{if("bool"!==i)throw new Error("Unsupported dtype in weight '"+a+"': "+i);c=new Uint8Array(h)}r+=s*v}n[a]=Ur(c,o,i)},i=0,o=t;i<o.length;i++)a(o[i]);return n}function Td(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var Rd="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Fd(e){return Rd?Buffer.byteLength(e):new Blob([e]).size}function Pd(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Dd(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Od(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Fd(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Fd(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var Nd=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a},e}(),Md="://",Ld=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){tt(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Md)&&(t=t.slice(0,t.indexOf(Md))),tt(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();tt(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Bd(e){if(-1===e.indexOf(Md))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Ld.getSchemes().join(","));return{scheme:e.split(Md)[0],path:e.split(Md)[1]}}function Ud(e,t,n){return void 0===n&&(n=!1),Be(this,void 0,void 0,(function(){var r,a,i,o,s,c,l,u,h;return Ue(this,(function(d){switch(d.label){case 0:return tt(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),tt((r=Nd.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),tt(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),a=r[0],tt((i=Nd.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),tt(i.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),o=i[0],s=Bd(e).scheme,c=Bd(e).path,l=s===Bd(e).scheme,[4,a.load()];case 1:return u=d.sent(),n&&l?[4,Ld.getManager(s).removeModel(c)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,o.save(u)];case 4:return h=d.sent(),!n||l?[3,6]:[4,Ld.getManager(s).removeModel(c)];case 5:d.sent(),d.label=6;case 6:return[2,h.modelArtifactsInfo]}}))}))}var jd="models_store",qd="model_info_store";function zd(){if(!ze().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Wd(e){var t=e.result;t.createObjectStore(jd,{keyPath:"modelPath"}),t.createObjectStore(qd,{keyPath:"modelPath"})}var Gd=function(){function e(e){if(this.indexedDB=zd(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return Be(this,void 0,void 0,(function(){return Ue(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return Be(this,void 0,void 0,(function(){return Ue(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return Wd(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(jd,"readonly"),s=o.objectStore(jd).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var c,l=Od(t),u=i.transaction(qd,"readwrite"),h=u.objectStore(qd),d=h.put({modelPath:n.modelPath,modelArtifactsInfo:l});d.onsuccess=function(){var a=(c=i.transaction(jd,"readwrite")).objectStore(jd).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(h=u.objectStore(qd)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},d.onerror=function(e){return i.close(),r(d.error)},u.oncomplete=function(){null==c?i.close():c.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))},e.URL_SCHEME="indexeddb://",e}(),Hd=function(e){return ze().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Gd.URL_SCHEME)?(t=e.slice(Gd.URL_SCHEME.length),new Gd(t)):null;var t};Nd.registerSaveRouter(Hd),Nd.registerLoadRouter(Hd);var Vd=function(){function e(){this.indexedDB=zd()}return e.prototype.listModels=function(){return Be(this,void 0,void 0,(function(){var e=this;return Ue(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Wd(r)},r.onsuccess=function(){var e=r.result,a=e.transaction(qd,"readonly"),i=a.objectStore(qd).getAll();i.onsuccess=function(){for(var e={},n=0,r=i.result;n<r.length;n++){var a=r[n];e[a.modelPath]=a.modelArtifactsInfo}t(e)},i.onerror=function(t){return e.close(),n(i.error)},a.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return Be(this,void 0,void 0,(function(){var t=this;return Ue(this,(function(n){var r;return e=(r=e).startsWith(Gd.URL_SCHEME)?r.slice(Gd.URL_SCHEME.length):r,[2,new Promise((function(n,r){var a=t.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return Wd(a)},a.onsuccess=function(){var t,i=a.result,o=i.transaction(qd,"readwrite"),s=o.objectStore(qd),c=s.get(e);c.onsuccess=function(){if(null==c.result)return i.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var a=s.delete(e),o=function(){var a=(t=i.transaction(jd,"readwrite")).objectStore(jd).delete(e);a.onsuccess=function(){return n(c.result.modelArtifactsInfo)},a.onerror=function(e){return r(c.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(c.error)}},c.onerror=function(e){return i.close(),r(c.error)},o.oncomplete=function(){null==t?i.close():t.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}}))]}))}))},e}();if(ze().getBool("IS_BROWSER"))try{Ld.registerManager(Gd.URL_SCHEME,new Vd)}catch(Me){}var $d="/",Xd="tensorflowjs_models",Kd="info",Yd="model_topology",Jd="weight_specs",Zd="weight_data",Qd="model_metadata";function ef(e){return{info:[Xd,e,Kd].join($d),topology:[Xd,e,Yd].join($d),weightSpecs:[Xd,e,Jd].join($d),weightData:[Xd,e,Zd].join($d),modelMetadata:[Xd,e,Qd].join($d)}}function tf(e){var t=e.split($d);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join($d)}var nf=function(){function e(e){if(!ze().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=ef(this.modelPath)}return e.prototype.save=function(e){return Be(this,void 0,void 0,(function(){var t,n,r;return Ue(this,(function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Od(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(Rd)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return Be(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return Ue(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(a=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(a),t.format=i.format,t.generatedBy=i.generatedBy,t.convertedBy=i.convertedBy,t.userDefinedMetadata=i.userDefinedMetadata),null==(o=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(Rd){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(o),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),rf=function(e){return ze().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(nf.URL_SCHEME)?(t=e.slice(nf.URL_SCHEME.length),new nf(t)):null;var t};Nd.registerSaveRouter(rf),Nd.registerLoadRouter(rf);var af=function(){function e(){tt(ze().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),tt("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return Be(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Ue(this,(function(o){for(e={},t=Xd+$d,n=$d+Kd,r=0;r<this.LS.length;++r)(a=this.LS.key(r)).startsWith(t)&&a.endsWith(n)&&(i=tf(a),e[i]=JSON.parse(this.LS.getItem(a)));return[2,e]}))}))},e.prototype.removeModel=function(e){return Be(this,void 0,void 0,(function(){var t,n;return Ue(this,(function(r){var a;if(e=(a=e).startsWith(nf.URL_SCHEME)?a.slice(nf.URL_SCHEME.length):a,t=ef(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(ze().getBool("IS_BROWSER"))try{Ld.registerManager(nf.URL_SCHEME,new af)}catch(Me){}function of(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var sf=function(){function e(t){if(!ze().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return Be(this,void 0,void 0,(function(){var t,n,r,a,i,o;return Ue(this,(function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(i=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=a,[4,of((function(){return i.dispatchEvent(new MouseEvent("click"))}))];case 2:return s.sent(),null==e.weightData?[3,4]:((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=t,[4,of((function(){return o.dispatchEvent(new MouseEvent("click"))}))]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:Od(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),cf=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return Be(this,void 0,void 0,(function(){var e,t,n=this;return Ue(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,a){var i=new FileReader;i.onload=function(i){var o=JSON.parse(i.target.result),s=o.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var c=o.weightsManifest;if(null!=c){var l;try{l=n.checkManifestAndWeightFiles(c,t)}catch(e){return void a(e)}var u=[],h=[],d=[];c.forEach((function(e){e.paths.forEach((function(e){h.push(e),d.push(null)})),u.push.apply(u,e.weights)})),c.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,a=h.indexOf(e);d[a]=n,-1===d.indexOf(null)&&r({modelTopology:s,weightSpecs:u,weightData:Pd(d),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,userDefinedMetadata:o.userDefinedMetadata})},t.onerror=function(t){return a("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(l[e])}))}))}else a(new Error("weightManifest field is missing from file "+e.name))}else a(new Error("modelTopology field is missing from file "+e.name))},i.onerror=function(t){return a("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return Dd(e.name)})),a={},i=0,o=e;i<o.length;i++)o[i].paths.forEach((function(e){var i=Dd(e);if(-1!==n.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: '"+i+"'");if(n.push(i),-1===r.indexOf(i))throw new Error("Weight file with basename '"+i+"' is not provided.");a[e]=t[r.indexOf(i)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return a},e}();function lf(e,t,n,r){!function(e){tt(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){tt(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),tt(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),tt(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function uf(e,t){return Be(this,void 0,void 0,(function(){var n,r,a,i,o,s,c,l,u;return Ue(this,(function(h){switch(h.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?ze().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),a=0,i=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return o=h.sent(),[3,4];case 2:return[4,lf(r,t.onProgress,a,i)];case 3:o=h.sent(),h.label=4;case 4:return s=o.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return u=h.sent(),[3,8];case 6:return[4,lf(s,t.onProgress,c,l)];case 7:u=h.sent(),h.label=8;case 8:return[2,u]}}))}))}function hf(e){var t=this;return function(n,r,a){return void 0===r&&(r=""),Be(t,void 0,void 0,(function(){var t,i,o,s,c,l,u,h,d,f;return Ue(this,(function(p){switch(p.label){case 0:if(t=n.map((function(){return!1})),i={},o=null!=a?a.map((function(){return!1})):[],s=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var c="quantization"in e?e.quantization.dtype:e.dtype,l=Ed[c]*it(e.shape),u=function(){t[n]=!0,null==i[n]&&(i[n]=[]),i[n].push({manifestEntry:e,groupOffset:r,sizeBytes:l})};null!=a?a.forEach((function(t,n){t===e.name&&(u(),o[n]=!0)})):u(),s.push(e.name),r+=l}))})),!o.every((function(e){return e})))throw c=a.filter((function(e,t){return!o[t]})),new Error("Could not find weights in manifest with names: "+c.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return l=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),u=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;u.push(t)}))})),[4,e(u)];case 1:return h=p.sent(),d={},f=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=h[f+a].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),c=0,l=0;l<t;l++){var u=new Uint8Array(h[f+l]);s.set(u,c),c+=u.byteLength}i[e].forEach((function(e){var t=Id(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),f+=t})),[2,d]}}))}))}}Nd.registerSaveRouter((function(e){return ze().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(sf.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new sf(e)}(e.slice(sf.URL_SCHEME.length)):null}));var df=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(tt("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=ze().platform.fetch,tt(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&tt(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return Be(this,void 0,void 0,(function(){var t,n,r,a;return Ue(this,(function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((a=i.sent()).ok)return[2,{modelArtifactsInfo:Od(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}}))}))},e.prototype.load=function(){return Be(this,void 0,void 0,(function(){var e,t,n,r,a,i,o,s,c,l,u,h;return Ue(this,(function(d){switch(d.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=d.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");d.label=2;case 2:return d.trys.push([2,4,,5]),[4,e.json()];case 3:return t=d.sent(),[3,5];case 4:throw d.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,a=t.weightsManifest,i=t.generatedBy,o=t.convertedBy,s=t.format,c=t.userDefinedMetadata,null==r&&null==a)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==a?[3,7]:[4,this.loadWeights(a)];case 6:h=d.sent(),l=h[0],u=h[1],d.label=7;case 7:return[2,{modelTopology:r,weightSpecs:l,weightData:u,userDefinedMetadata:c,generatedBy:i,convertedBy:o,format:s}]}}))}))},e.prototype.loadWeights=function(e){return Be(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,c,l,u,h;return Ue(this,(function(d){switch(d.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],a=n[1],i=this.weightPathPrefix||r,o=[],s=0,c=e;s<c.length;s++)l=c[s],o.push.apply(o,l.weights);return u=[],e.forEach((function(e){e.paths.forEach((function(e){u.push(i+e+a)}))})),[4,uf(u,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=d.sent(),[2,[o,Pd(h)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function ff(e){return null!=e.match(df.URL_SCHEME_REGEX)}var pf=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return ff(e)})):ff(e))?gf(e,{onProgress:t}):null};function gf(e,t){return new df(e,t)}Nd.registerSaveRouter(pf),Nd.registerLoadRouter(pf);var mf,vf=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return Be(this,void 0,void 0,(function(){return Ue(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),bf=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return Be(this,void 0,void 0,(function(){return Ue(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),yf=Object.freeze({browserFiles:function(e){return new cf(e)},browserHTTPRequest:function(e,t){return gf(e,t)},concatenateArrayBuffers:Pd,decodeWeights:Id,encodeWeights:function(e,t){return Be(this,void 0,void 0,(function(){var n,r,a,i,o,s=this;return Ue(this,(function(c){switch(c.label){case 0:for(n=[],r=[],a=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),i=function(i){var o=a[i],c=Array.isArray(e)?e[i].tensor:e[o];if("float32"!==c.dtype&&"int32"!==c.dtype&&"bool"!==c.dtype&&"string"!==c.dtype)throw new Error("Unsupported dtype in weight '"+o+"': "+c.dtype);var l={name:o,shape:c.shape,dtype:c.dtype};if("string"===c.dtype){var u=new Promise((function(e){return Be(s,void 0,void 0,(function(){var t,n,r,a,i,o,s;return Ue(this,(function(l){switch(l.label){case 0:return[4,c.bytes()];case 1:for(t=l.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+4*t.length,r=new Uint8Array(n),a=0,i=0;i<t.length;i++)o=t[i],s=new Uint8Array(new Uint32Array([o.length]).buffer),r.set(s,a),a+=4,r.set(o,a),a+=o.length;return e(r),[2]}}))}))}));r.push(u)}else r.push(c.data());null!=t&&(l.group=t),n.push(l)},o=0;o<a.length;++o)i(o);return[4,Promise.all(r)];case 1:return[2,{data:Td(c.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new vf(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new vf({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new vf({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return Nd.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Od,getSaveHandlers:function(e){return Nd.getSaveHandlers(e)},http:gf,isHTTPScheme:ff,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),Be(this,void 0,void 0,(function(){return Ue(this,(function(a){return[2,hf((function(e){return uf(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return Nd.registerLoadRouter(e)},registerSaveRouter:function(e){return Nd.registerSaveRouter(e)},weightsLoaderFactory:hf,withSaveHandler:function(e){return new bf(e)},copyModel:function(e,t){return Be(this,void 0,void 0,(function(){return Ue(this,(function(n){return[2,Ud(e,t,!1)]}))}))},listModels:function(){return Be(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return Ue(this,(function(s){switch(s.label){case 0:e=Ld.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(a=r[n],[4,Ld.getManager(a).listModels()]):[3,4];case 2:for(o in i=s.sent())t[a+Md+o]=i[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return Be(this,void 0,void 0,(function(){return Ue(this,(function(n){return[2,Ud(e,t,!0)]}))}))},removeModel:function(e){return Be(this,void 0,void 0,(function(){var t;return Ue(this,(function(n){return t=Bd(e),[2,Ld.getManager(t.scheme).removeModel(t.path)]}))}))}}),wf=Nr({confusionMatrix_:function(e,t,n){var r=kr(e,"labels","confusionMatrix"),a=kr(t,"predictions","confusionMatrix");tt(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),tt(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),tt(1===a.rank,(function(){return"Expected the rank of predictions to be 1, but got "+a.rank})),tt(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."})),tt(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var i=_a(r.asType("int32"),n),o=_a(a.asType("int32"),n);return i.transpose().matMul(o).asType("int32")}}),xf=(Object.freeze({confusionMatrix:wf}),Nr({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=Ve("FromPixels",dn.backendName))return dn.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,c,l=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],u=l[0],h=l[1];if(o?s=e.getContext("2d").getImageData(0,0,u,h).data:r||n?s=e.data:(i||a)&&(null==mf&&(mf=document.createElement("canvas").getContext("2d")),mf.canvas.width=u,mf.canvas.height=h,mf.drawImage(e,0,0,u,h),s=mf.getImageData(0,0,u,h).data),4===t)c=new Int32Array(s);else{var d=u*h;c=new Int32Array(d*t);for(var f=0;f<d;f++)for(var p=0;p<t;++p)c[f*t+p]=s[4*f+p]}return Gr(c,[h,u,t],"int32")}})),Cf=Object.freeze({toPixels:function(e,t){return Be(this,void 0,void 0,(function(){var n,r,a,i,o,s,c,l,u,h,d,f,p,g,m,v,b,y,w,x,C,k,S;return Ue(this,(function(A){switch(A.label){case 0:if(n=kr(e,"img","toPixels"),e instanceof Kt||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],i=r[1],(o=2===n.rank?1:n.shape[2])>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return s=A.sent(),c=n.min(),l=n.max(),[4,Promise.all([c.data(),l.data()])];case 2:if(u=A.sent(),h=u[0],d=u[1],f=h[0],p=d[0],c.dispose(),l.dispose(),"float32"===n.dtype){if(f<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+f+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(f<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+f+" - "+p+"].")}for(g="float32"===n.dtype?255:1,m=new Uint8ClampedArray(i*a*4),v=0;v<a*i;++v)b=void 0,y=void 0,w=void 0,x=void 0,1===o?(b=s[v]*g,y=s[v]*g,w=s[v]*g,x=255):3===o?(b=s[3*v]*g,y=s[3*v+1]*g,w=s[3*v+2]*g,x=255):4===o&&(b=s[4*v]*g,y=s[4*v+1]*g,w=s[4*v+2]*g,x=s[4*v+3]*g),m[0+(C=4*v)]=Math.round(b),m[C+1]=Math.round(y),m[C+2]=Math.round(w),m[C+3]=Math.round(x);return null!=t&&(t.width=i,t.height=a,k=t.getContext("2d"),S=new ImageData(m,i,a),k.putImageData(S,0,0)),n!==e&&n.dispose(),[2,m]}}))}))},fromPixels:xf}),kf=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),Sf=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Af(e){tt(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),tt("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),tt(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Sf.register(e)}function _f(){return 32===dn.backend.floatPrecision()?.001:.1}function Ef(e,t,n){var r=!0;if((wt(e)||wt(t))&&(r=!1),wt(e)&&wt(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: "+a+". Expected: "+i)}if(Array.isArray(e)&&Array.isArray(t)){var o=xr(e),s=xr(t);if(!ot(o,s))throw new Error("Arrays have different shapes. Actual: ["+o+"]. Expected: ["+s+"]")}var c=wt(e)?e:at(e),l=wt(t)?t:at(t);if(c.length!==l.length)throw new Error("Arrays have different lengths actual: "+c.length+" vs expected: "+l.length+".\nActual:   "+c+".\nExpected: "+l+".");for(var u=0;u<l.length;++u){var h=c[u],d=l[u];if(!n(h,d))throw new Error("Arrays differ: actual["+u+"] = "+h+", expected["+u+"] = "+d+".\nActual:   "+c+".\nExpected: "+l+".")}}function If(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({Serializable:kf,SerializationMap:Sf,registerClass:Af}),Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=_f()),Ef(e,t,(function(e,t){return If(e,t,n)}))},testEpsilon:_f,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return kt(e)||kt(e[0])||kt(t)||kt(t[0])?Ef(e,n,(function(e,t){return e==t})):Ef(e,t,(function(e,t){return If(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=_f()),!If(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:xs,webgl_util:gr,forceHalfFloat:function(){ze().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:Ac,setWebGLContext:wn,GPGPUContext:Cs});var Tf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return yr(i),t?a:(a.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){tt(Et(e),(function(){return"The f passed in variableGrads(f) must be a function"})),tt(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof tn})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],dn.registeredVariables)t.push(dn.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;tt((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."}));var o=dn.gradients(e,t,null,!0),s=o.value,c=o.grads;tt(c.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),tt(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return t.forEach((function(e,t){null!=c[t]&&(l[e.name]=c[t])})),null!=a&&a.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&yr(this.iterations_)},t.prototype.saveIterations=function(){return Be(this,void 0,void 0,(function(){return Ue(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:qr(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return Be(this,void 0,void 0,(function(){return Ue(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return Be(this,void 0,void 0,(function(){return Ue(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return Be(this,void 0,void 0,(function(){var t;return Ue(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(kf);Object.defineProperty(Tf,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Rf=function(e){function t(t,n,r){void 0===r&&(r=null);var a=e.call(this)||this;return a.learningRate=t,a.rho=n,a.epsilon=r,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==r&&(a.epsilon=dn.backend.epsilon()),a}return Le(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=dn.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:br((function(){return Jr(a).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:br((function(){return Jr(a).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;br((function(){var e=o.mul(t.rho).add(i.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(o.add(t.epsilon).sqrt()).mul(i),r=s.mul(t.rho).add(n.square().mul(1-t.rho));o.assign(e),s.assign(r);var c=n.mul(-t.learningRate).add(a);a.assign(c)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(yr(this.accumulatedGrads.map((function(e){return e.variable}))),yr(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return Be(this,void 0,void 0,(function(){var e;return Ue(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Be(this,void 0,void 0,(function(){var t;return Ue(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(Tf);Af(Rf);var Ff=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return Le(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=dn.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:br((function(){return Xr(a.shape,t.initialAccumulatorValue).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;br((function(){var e=o.add(i.square());o.assign(e);var n=i.div(e.add(dn.backend.epsilon()).sqrt()).mul(-t.learningRate).add(a);a.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&yr(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Be(this,void 0,void 0,(function(){return Ue(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Be(this,void 0,void 0,(function(){return Ue(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(Tf);Af(Ff);var Pf=function(e){function t(t,n,r,a){void 0===a&&(a=null);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=a,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],br((function(){i.accBeta1=qr(n).variable(),i.accBeta2=qr(r).variable()})),null==a&&(i.epsilon=dn.backend.epsilon()),i}return Le(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);br((function(){var r=Xl(1,t.accBeta1),a=Xl(1,t.accBeta2);n.forEach((function(n,i){var o=dn.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:br((function(){return Jr(o).variable(!1)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:n+"/v",variable:br((function(){return Jr(o).variable(!1)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var c=t.accumulatedFirstMoment[i].variable,l=t.accumulatedSecondMoment[i].variable,u=c.mul(t.beta1).add(s.mul(1-t.beta1)),h=l.mul(t.beta2).add(s.square().mul(1-t.beta2)),d=u.div(r),f=h.div(a);c.assign(u),l.assign(h);var p=d.div(f.sqrt().add(t.epsilon)).mul(-t.learningRate).add(o);o.assign(p)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&yr(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&yr(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Be(this,void 0,void 0,(function(){var e;return Ue(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Be(this,void 0,void 0,(function(){var t,n=this;return Ue(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),br((function(){n.accBeta1.assign(Hl(n.beta1,n.iterations_+1)),n.accBeta2.assign(Hl(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(Tf);Af(Pf);var Df=function(e){function t(t,n,r,a,i){void 0===a&&(a=null),void 0===i&&(i=0);var o=e.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=a,o.decay=i,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],br((function(){o.iteration=qr(0).variable(),o.accBeta1=qr(n).variable()})),null==a&&(o.epsilon=dn.backend.epsilon()),o}return Le(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);br((function(){var r=Xl(1,t.accBeta1),a=Dl(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,i){var o=dn.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:Jr(o).variable(!1)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:n+"/v",variable:Jr(o).variable(!1)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var c=t.accumulatedFirstMoment[i].variable,l=t.accumulatedWeightedInfNorm[i].variable,u=c.mul(t.beta1).add(s.mul(1-t.beta1)),h=l.mul(t.beta2),d=s.abs(),f=h.maximum(d);c.assign(u),l.assign(f);var p=a.div(r).mul(u.div(f.add(t.epsilon))).add(o);o.assign(p)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&yr(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&yr(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Be(this,void 0,void 0,(function(){return Ue(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return Be(this,void 0,void 0,(function(){return Ue(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(Tf);Af(Df);var Of=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return Le(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=dn.registeredVariables[n];br((function(){var e=t.c.mul(a).add(i);i.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return dn.keep(e)}(qr(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Be(this,void 0,void 0,(function(){return Ue(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return Be(this,void 0,void 0,(function(){return Ue(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(Tf);Af(Of);var Nf=function(e){function t(t,n,r){void 0===r&&(r=!1);var a=e.call(this,t)||this;return a.learningRate=t,a.momentum=n,a.useNesterov=r,a.accumulations=[],a.m=qr(a.momentum),a}return Le(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=dn.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:br((function(){return Jr(a).variable(!1)}))});var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&br((function(){var e,n=t.m.mul(i).add(o);e=t.useNesterov?t.c.mul(o.add(n.mul(t.m))).add(a):t.c.mul(n).add(a),i.assign(n),a.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&yr(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return Be(this,void 0,void 0,(function(){return Ue(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Be(this,void 0,void 0,(function(){return Ue(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(Of);Af(Nf);var Mf=function(e){function t(t,n,r,a,i){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===a&&(a=null),void 0===i&&(i=!1);var o=e.call(this)||this;if(o.learningRate=t,o.decay=n,o.momentum=r,o.epsilon=a,o.accumulatedMeanSquares=[],o.accumulatedMoments=[],o.accumulatedMeanGrads=[],o.centered=i,null==a&&(o.epsilon=dn.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return o}return Le(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=dn.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:br((function(){return Jr(a).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:br((function(){return Jr(a).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:br((function(){return Jr(a).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;br((function(){var e=o.mul(t.decay).add(i.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,c=n.mul(t.decay).add(i.mul(1-t.decay)),l=s.mul(t.momentum).add(i.mul(t.learningRate).div(e.sub(c.square().add(t.epsilon)).sqrt()));o.assign(e),n.assign(c),s.assign(l);var u=a.sub(l);a.assign(u)}else{var h=o.mul(t.decay).add(i.square().mul(1-t.decay));l=s.mul(t.momentum).add(i.mul(t.learningRate).div(h.add(t.epsilon).sqrt())),o.assign(h),s.assign(l),u=a.sub(l),a.assign(u)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&yr(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&yr(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&yr(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Be(this,void 0,void 0,(function(){var e;return Ue(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Be(this,void 0,void 0,(function(){var t;return Ue(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(Tf);Af(Mf);var Lf=function(){function e(){}return e.sgd=function(e){return new Of(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new Nf(e,t,n)},e.rmsprop=function(e,t,n,r,a){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===a&&(a=!1),new Mf(e,t,n,r,a)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Pf(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new Rf(e,t,n)},e.adamax=function(e,t,n,r,a){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===a&&(a=0),new Df(e,t,n,r,a)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new Ff(e,t)},e}();Lf.sgd,Lf.momentum,Lf.adadelta,Lf.adagrad,Lf.rmsprop,Lf.adamax,Lf.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate,Kt.prototype.squaredDifference=function(e){return Ic(this,e)},$t=hd;var Bf=function(e,t){return(Bf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Uf(e,t){function n(){this.constructor=e}Bf(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var jf=function(){return(jf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function qf(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))}function zf(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function Wf(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}var Gf=function(){function e(e,t){if(!Qf(e)||!Qf(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function Hf(e,t){return e instanceof Kt&&e.shape.length===t}function Vf(e){return Hf(e,3)}function $f(e){return Hf(e,4)}function Xf(e){return e%2==0}function Kf(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function Yf(e){return e&&e.width&&e.height}function Jf(e){return e.reduce((function(e,t){return e.add(t)}),new tp(0,0)).div(new tp(e.length,e.length))}function Zf(e,t,n){return Array(e).fill(0).map((function(e,r){return t+r*n}))}function Qf(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function ep(e){return Qf(e)&&0<=e&&e<=1}var tp=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),np=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},a=[r.left,r.top,r.right,r.bottom].every(Qf),i=[r.x,r.y,r.width,r.height].every(Qf);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],c=o[1],l=o[2],u=o[3];e.assertIsValidBox({x:s,y:c,width:l,height:u},"Box.constructor",n),this._x=s,this._y=c,this._width=l,this._height=u}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Qf)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new tp(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new tp(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new tp(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new tp(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.round(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.floor(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,a=t.width,i=t.height,o=Math.abs(a-i);return a<i&&(n-=o/2,a+=o),i<a&&(r-=o/2,i+=o),new e({x:n,y:r,width:a,height:i})},e.prototype.rescale=function(t){var n=Yf(t)?t.width:t,r=Yf(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,a=r.x,i=r.y,o=r.right,s=r.bottom,c=Math.max(a,0),l=Math.max(i,0),u=o-c,h=s-l;return new e({x:c,y:l,width:Math.min(u,t-c),height:Math.min(h,n-l)}).floor()},e.prototype.shift=function(t,n){var r=this.width,a=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:a})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,a=n,i=r,o=this.left,s=this.top,c=this.right,l=this.bottom;return c>t&&(a=-c+t+n,c=t),l>e&&(i=-l+e+r,l=e),o<1&&(i=2-o,o=1),s<1&&(i=2-s,s=1),{dy:1,edy:i,dx:1,edx:a,y:s,ey:l,x:o,ex:c,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),rp=function(e){function t(t,n,r,a,i){return void 0===i&&(i=!1),e.call(this,{left:t,top:n,right:r,bottom:a},i)||this}return Uf(t,e),t}(np),ap=function(){function e(e,t,n,r,a){this._imageDims=new Gf(a.width,a.height),this._score=e,this._classScore=t,this._className=n,this._box=new np(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new np(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),ip=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return Uf(t,e),t.prototype.forSize=function(n,r){var a=e.prototype.forSize.call(this,n,r);return new t(a.score,a.relativeBox,a.imageDims)},t}(ap);function op(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function sp(e,t,n,r){void 0===r&&(r=!0);for(var a=t.map((function(e,t){return{score:e,boxIndex:t}})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.boxIndex})),i=[],o=function(){var t=a.pop();i.push(t);for(var o=a,s=[],c=0;c<o.length;c++){var l=o[c],u=e[t],h=e[l];s.push(op(u,h,r))}a=a.filter((function(e,t){return s[t]<=n}))};a.length>0;)o();return i}function cp(e,t){return br((function(){var n=t[0],r=t[1],a=t[2],i=Xr(Wf(e.shape.slice(0,3),[1]),n),o=Xr(Wf(e.shape.slice(0,3),[1]),r),s=Xr(Wf(e.shape.slice(0,3),[1]),a),c=Zr([i,o,s],3);return Xl(e,c)}))}function lp(e){return 1/(1+Math.exp(-e))}var up,hp=function(e){function t(t,n,r,a,i){return void 0===i&&(i=!1),e.call(this,{x:t,y:n,width:r,height:a},i)||this}return Uf(t,e),t}(np),dp=function(){function e(e,t,n){void 0===n&&(n=new tp(0,0));var r=t.width,a=t.height;this._imgDims=new Gf(r,a),this._shift=n,this._positions=e.map((function(e){return e.mul(new tp(r,a)).add(n)}))}return Object.defineProperty(e.prototype,"shift",{get:function(){return new tp(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map((function(t){return t.sub(e._shift).div(new tp(e.imageWidth,e.imageHeight))}))},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new tp(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof ip?e.box.floor():new np(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),a=r.useDlibAlignment,i=r.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(i)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],a=function(e){return r.sub(e).magnitude()},i=(a(t)+a(n))/2,o=Math.floor(i/.45),s=Jf(e),c=Math.floor(Math.max(0,s.x-.5*o)),l=Math.floor(Math.max(0,s.y-.43*o));return new hp(c,l,Math.min(o,this.imageWidth+c),Math.min(o,this.imageHeight+l))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=t.reduce((function(e,t){return t<e?t:e}),1/0),a=n.reduce((function(e,t){return t<e?t:e}),1/0),i=t.reduce((function(e,t){return e<t?t:e}),0),o=n.reduce((function(e,t){return e<t?t:e}),0);return new rp(r,a,i,o)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),fp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],Jf([e[3],e[4]])]},t}(dp),pp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(Jf)},t}(dp),gp=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+Kf(this.distance)+")":"")},e}(),mp=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return Uf(t,e),t.assertIsValidLabeledBox=function(e,t){if(np.assertIsValidBox(e,t),!Qf(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(np),vp=function(){function e(e,t){if("string"!=typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some((function(e){return!(e instanceof Float32Array)})))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map((function(e){return Array.from(e)}))}},e.fromJSON=function(t){var n=t.descriptors.map((function(e){return new Float32Array(e)}));return new e(t.label,n)},e}();function bp(e){return e.detection instanceof ip}function yp(e,t){var n={detection:t};return Object.assign({},e,n)}function wp(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function xp(e){var t="";if(!e)try{e=__webpack_require__(730)}catch(e){t=e.toString()}return{readFile:e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){return e?r(e):n(t)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function Cp(){var e=__webpack_require__.g.Canvas||__webpack_require__.g.HTMLCanvasElement,t=__webpack_require__.g.Image||__webpack_require__.g.HTMLImageElement,n=__webpack_require__.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},r=xp();return jf({Canvas:e||function(){},CanvasRenderingContext2D:__webpack_require__.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:__webpack_require__.g.ImageData||function(){},Video:__webpack_require__.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:n},r)}function kp(){return"object"==typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D}function Sp(){return"object"==typeof __webpack_require__.g&&"undefined"!=typeof process&&!!process.version}function Ap(e){up=e}function _p(){kp()&&Ap(wp()),Sp()&&Ap(Cp())}!function(e){function t(t,n,r,a){var i=e.call(this,t,n)||this;return i._score=r,i._classScore=a,i}Uf(t,e),t.assertIsValidPredictedBox=function(e,t){if(mp.assertIsValidLabeledBox(e,t),!ep(e.score)||!ep(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(mp);var Ep,Ip={getEnv:function(){if(!up)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return up},setEnv:Ap,initialize:_p,createBrowserEnv:wp,createFileSystem:xp,createNodejsEnv:Cp,monkeyPatch:function(e){if(up||_p(),!up)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?up.Canvas:t,r=e.Image,a=void 0===r?up.Image:r;up.Canvas=n,up.Image=a,up.createCanvasElement=e.createCanvasElement||function(){return new n},up.createImageElement=e.createImageElement||function(){return new a},up.ImageData=e.ImageData||up.ImageData,up.Video=e.Video||up.Video,up.fetch=e.fetch||up.fetch,up.readFile=e.readFile||up.readFile},isBrowser:kp,isNodejs:Sp};function Tp(e){return Ip.isNodejs()||"string"!=typeof e?e:document.getElementById(e)}function Rp(e){var t=Ip.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=Tp(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=r.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}_p(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(Ep||(Ep={}));var Fp=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,a=e.fontSize,i=e.fontStyle,o=e.padding;this.anchorPosition=t||Ep.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=i||"Georgia",this.padding=o||4},Pp=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"==typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new Fp(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map((function(t){return e.measureText(t).width})).reduce((function(e,t){return e<t?t:e}),0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===Ep.BOTTOM_RIGHT||n===Ep.TOP_RIGHT,a=n===Ep.BOTTOM_LEFT||n===Ep.BOTTOM_RIGHT,i=this.measureWidth(e),o=this.measureHeight(),s=r?this.anchor.x-i:this.anchor.x,c=a?this.anchor.y-o:this.anchor.y;if(t){var l=t.width,u=t.height;return{x:Math.max(Math.min(s,l-i),0),y:Math.max(Math.min(c,u-o),0)}}return{x:s,y:c}},e.prototype.draw=function(e){var t=Tp(e),n=Rp(t),r=this.options,a=r.backgroundColor,i=r.fontColor,o=r.fontSize,s=r.fontStyle,c=r.padding;n.font=o+"px "+s;var l=this.measureWidth(n),u=this.measureHeight();n.fillStyle=a;var h=this.getUpperLeft(n,t);n.fillRect(h.x,h.y,l,u),n.fillStyle=i,this.text.forEach((function(e,t){var r=c+h.x,a=c+h.y+(t+1)*o;n.fillText(e,r,a)}))},e}(),Dp=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,a=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var i={anchorPosition:Ep.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new Fp(Object.assign({},i,a))},Op=function(){function e(e,t){void 0===t&&(t={}),this.box=new np(e),this.options=new Dp(t)}return e.prototype.draw=function(e){var t=Rp(e),n=this.options,r=n.boxColor,a=n.lineWidth,i=this.box,o=i.x,s=i.y,c=i.width,l=i.height;t.strokeStyle=r,t.lineWidth=a,t.strokeRect(o,s,c,l);var u=this.options.label;u&&new Pp([u],{x:o-a/2,y:s},this.options.drawLabelOptions).draw(e)},e}();function Np(e){var t=Ip.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function Mp(e){var t=Ip.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new Gf(e.naturalWidth,e.naturalHeight):e instanceof r?new Gf(e.videoWidth,e.videoHeight):new Gf(e.width,e.height)}function Lp(e){var t=e.width,n=e.height,r=(0,Ip.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function Bp(e,t){var n=Ip.getEnv().ImageData;if(!(e instanceof n||Np(e)))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||Mp(e),a=r.width,i=r.height,o=Lp({width:a,height:i});return e instanceof n?Rp(o).putImageData(e,0,0):Rp(o).drawImage(e,0,0,a,i),o}function Up(e,t){return qf(this,void 0,void 0,(function(){var n,r,a,i,o,s;return zf(this,(function(c){switch(c.label){case 0:return n=t||Ip.getEnv().createCanvasElement(),r=e.shape.slice($f(e)?1:0),a=r[0],i=r[1],o=r[2],s=br((function(){return e.as3D(a,i,o).toInt()})),[4,Cf.toPixels(s,n)];case 1:return c.sent(),s.dispose(),[2,n]}}))}))}function jp(e){var t=Ip.getEnv(),n=t.Image,r=t.Canvas,a=t.Video;return e instanceof n||e instanceof r||e instanceof a}var qp=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((function(e,t){if(Vf(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if($f(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var a=e instanceof Ip.getEnv().Canvas?e:Bp(e);n._canvases[t]=a,n._inputDimensions[t]=[a.height,a.width,3]}))}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return Zf(this.batchSize,0,1).map((function(t,n){return e.getReshapedInputDimensions(n)}))},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,a=t/Math.max(r,n);return new Gf(Math.round(n*a),Math.round(r*a))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,br((function(){var r=Zf(n.batchSize,0,1).map((function(r){var a=n.getInput(r);if(a instanceof Kt){var i=$f(a)?a:a.expandDims();return(i=function(e,t){return void 0===t&&(t=!1),br((function(){var n=e.shape.slice(1),r=n[0],a=n[1];if(r===a)return e;var i=Math.abs(r-a),o=Math.round(i*(t?.5:1)),s=r>a?2:1,c=function(t){var n=e.shape.slice();return n[s]=t,Xr(n,0)},l=c(o),u=i-l.shape[s],h=[t&&u?c(u):null,e,l].filter((function(e){return!!e})).map((function(e){return e.toFloat()}));return Zr(h,s)}))}(i,t)).shape[1]===e&&i.shape[2]===e||(i=nd.resizeBilinear(i,[e,e])),i.as3D(e,e,3)}if(a instanceof Ip.getEnv().Canvas)return Cf.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=Ip.getEnv(),a=r.Image,i=r.Canvas;if(!(e instanceof a||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=Mp(e),s=t/Math.max(o.height,o.width),c=s*o.width,l=s*o.height,u=Lp({width:t,height:t}),h=e instanceof i?e:Bp(e),d=Math.abs(c-l)/2,f=n&&c<l?d:0,p=n&&l<c?d:0;return Rp(u).drawImage(h,f,p,c,l),u}(a,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)}));return Ua(r.map((function(e){return e.toFloat()}))).as4D(n.batchSize,e,e,3)}))},e}();function zp(e){return qf(this,void 0,void 0,(function(){var t,n,r;return zf(this,(function(a){switch(a.label){case 0:if(e instanceof qp)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(Tp)).forEach((function(e,r){if(!jp(e)&&!Vf(e)&&!$f(e)){if("string"==typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if($f(e)){var a=e.shape[0];if(1!==a)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}})),[4,Promise.all(r.map((function(e){return jp(e)&&(t=e,new Promise((function(e,n){if(t instanceof Ip.getEnv().Canvas||Np(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",a),e(t))}function a(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",a),n(e))}t.addEventListener("load",r),t.addEventListener("error",a)})));var t})))];case 1:return a.sent(),[2,new qp(r,Array.isArray(e))]}}))}))}function Wp(e,t){return qf(this,void 0,void 0,(function(){var n,r,a,i,o,s;return zf(this,(function(c){switch(c.label){case 0:return n=Ip.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,zp(e)];case 1:if((a=c.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(i=a.getInput(0))instanceof n?(o=i,[3,4]):[3,2];case 2:return[4,Up(i)];case 3:o=c.sent(),c.label=4;case 4:r=o,c.label=5;case 5:return s=Rp(r),[2,t.map((function(e){return e instanceof ip?e.forSize(r.width,r.height).box.floor():e})).map((function(e){return e.clipAtImageBorders(r.width,r.height)})).map((function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=Lp({width:r,height:a});return Rp(i).putImageData(s.getImageData(t,n,r,a),0,0),i}))]}}))}))}function Gp(e,t){return qf(this,void 0,void 0,(function(){return zf(this,(function(n){if(!Vf(e)&&!$f(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if($f(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,br((function(){var n=e.shape.slice($f(e)?1:0),r=n[0],a=n[1],i=n[2];return t.map((function(e){return e instanceof ip?e.forSize(a,r).box:e})).map((function(e){return e.clipAtImageBorders(a,r)})).map((function(t){var n=t.x,o=t.y,s=t.width,c=t.height;return Gu(e.as3D(r,a,i),[o,n,0],[c,s,i])}))}))]}))}))}function Hp(e,t){return qf(this,void 0,void 0,(function(){var n;return zf(this,(function(r){switch(r.label){case 0:return[4,(0,Ip.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}}))}))}function Vp(e){return qf(this,void 0,void 0,(function(){return zf(this,(function(t){switch(t.label){case 0:return[4,Hp(e)];case 1:return[2,t.sent().json()]}}))}))}function $p(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",a=(e=e.replace(r,"")).split("/").filter((function(e){return e})),i=e.endsWith(".json")?a[a.length-1]:n,o=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return{modelBaseUri:o=e.startsWith("/")?"/"+o:o,manifestUri:"/"===o?"/"+i:o+"/"+i}}function Xp(e,t){return qf(this,void 0,void 0,(function(){var n,r,a,i;return zf(this,(function(o){switch(o.label){case 0:return n=$p(e,t),r=n.manifestUri,a=n.modelBaseUri,[4,Vp(r)];case 1:return i=o.sent(),[2,yf.loadWeights(i,a)]}}))}))}var Kp=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,a=n.objProp;r[a].dispose(),r[a]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map((function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}}))},e.prototype.getTrainableParams=function(){return this.getParamList().filter((function(e){return e.tensor instanceof tn}))},e.prototype.getFrozenParams=function(){return this.getParamList().filter((function(e){return!(e.tensor instanceof tn)}))},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach((function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())}))},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach((function(t){var n=t.path,r=t.tensor,a=Ur(r.dataSync());r.dispose(),e.reassignParamFromPath(n,a)}))},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach((function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()})),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map((function(e){var t=e.tensor;return Array.from(t.dataSync())})).reduce((function(e,t){return e.concat(t)})))},e.prototype.load=function(e){return qf(this,void 0,void 0,(function(){return zf(this,(function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.loadFromUri=function(e){return qf(this,void 0,void 0,(function(){var t;return zf(this,(function(n){switch(n.label){case 0:if(e&&"string"!=typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,Xp(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}}))}))},e.prototype.loadFromDisk=function(e){return qf(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,c,l,u;return zf(this,(function(h){switch(h.label){case 0:if(e&&"string"!=typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=Ip.getEnv().readFile,n=$p(e,this.getDefaultModelName()),r=n.manifestUri,a=n.modelBaseUri,i=function(e){return Promise.all(e.map((function(e){return t(e).then((function(e){return e.buffer}))})))},o=yf.weightsLoaderFactory(i),l=(c=JSON).parse,[4,t(r)];case 1:return s=l.apply(c,[h.sent().toString()]),[4,o(s,a)];case 2:return u=h.sent(),this.loadFromWeightMap(u),[2]}}))}))},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce((function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}}),{nextObj:this.params}),n=t.obj,r=t.objProp;if(!(n&&r&&n[r]instanceof Kt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function Yp(e,t,n){return br((function(){var r=ku(e,t.depthwise_filter,t.pointwise_filter,n,"same");return Tl(r,t.bias)}))}function Jp(e,t,n){return void 0===n&&(n=!1),br((function(){var r=sh(n?Tl(mu(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Yp(e,t.conv0,[2,2])),a=Yp(r,t.conv1,[1,1]),i=Yp(sh(Tl(r,a)),t.conv2,[1,1]);return sh(Tl(r,Tl(a,i)))}))}function Zp(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),br((function(){var a=sh(n?Tl(mu(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):Yp(e,t.conv0,r?[2,2]:[1,1])),i=Yp(a,t.conv1,[1,1]),o=Yp(sh(Tl(a,i)),t.conv2,[1,1]),s=Yp(sh(Tl(a,Tl(i,o))),t.conv3,[1,1]);return sh(Tl(a,Tl(i,Tl(o,s))))}))}function Qp(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),br((function(){var a=Tl(mu(e,t.filters,[1,1],n),t.bias);return r?sh(a):a}))}function eg(e,t){Object.keys(e).forEach((function(n){t.some((function(e){return e.originalPath===n}))||e[n].dispose()}))}function tg(e,t){return function(n,r,a,i){var o=Hr(e(n*r*a*a),[a,a,n,r]),s=zr(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:s}}}function ng(e,t){return function(n,r,a){var i=Wr(e(n*r),[n,r]),o=zr(e(r));return t.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:i,bias:o}}}var rg=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function ag(e,t){return function(n,r,a){var i=Hr(e(9*n),[3,3,n,1]),o=Hr(e(n*r),[1,1,n,r]),s=zr(e(r));return t.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new rg(i,o,s)}}function ig(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),a=e(t+"/bias",1);return new rg(n,r,a)}}function og(e,t){return function(n,r,a){var i=e[n];if(!Hf(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:a||n}),i}}function sg(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function cg(e,t){var n=tg(e,t),r=ag(e,t);function a(e,t,a,i){return void 0===i&&(i=!1),{conv0:i?n(e,t,3,a+"/conv0"):r(e,t,a+"/conv0"),conv1:r(t,t,a+"/conv1"),conv2:r(t,t,a+"/conv2")}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:function(e,t,n,i){void 0===i&&(i=!1);var o=a(e,t,n,i);return{conv0:o.conv0,conv1:o.conv1,conv2:o.conv2,conv3:r(t,t,n+"/conv3")}}}}function lg(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function ug(e,t){var n=og(e,t),r=lg(n),a=ig(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2"),conv3:a(e+"/conv3")}}}}var hg=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return Uf(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return br((function(){var n=Zp(cp(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(qr(255)),t.dense0,!0);return n=Zp(n,t.dense1),n=Zp(n,t.dense2),n=Zp(n,t.dense3),Lu(n,[7,7],[2,2],"valid")}))},t.prototype.forward=function(e){return qf(this,void 0,void 0,(function(){var t;return zf(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,zp(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=ug(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return eg(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=sg(e),r=n.extractWeights,a=n.getRemainingWeights,i=cg(r,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),c=i(64,128,"dense2"),l=i(128,256,"dense3");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:c,dense3:l}}}(e)},t}(Kp);function dg(e,t){return br((function(){return Tl(_u(e,t.weights),t.bias)}))}function fg(e){var t={},n={};return Object.keys(e).forEach((function(r){(r.startsWith("fc")?n:t)[r]=e[r]})),{featureExtractorMap:t,classifierMap:n}}var pg=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return Uf(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return br((function(){var r=e instanceof qp?t.faceFeatureExtractor.forwardInput(e):e;return dg(r.as2D(r.shape[0],-1),n.fc)}))},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],a=sg(e),i=a.extractWeights,o=a.getRemainingWeights,s=ng(i,r)(t,n,"fc");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=fg(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=og(e,t),r={fc:("fc",{weights:n("fc/weights",2),bias:n("fc/bias",1)})};return eg(e,t),{params:r,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,a=e.slice(0,e.length-r),i=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)},t}(Kp),gg=["neutral","happy","sad","angry","fearful","disgusted","surprised"],mg=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);gg.forEach((function(n,r){t[n]=e[r]}))}return e.prototype.asSortedArray=function(){var e=this;return gg.map((function(t){return{expression:t,probability:e[t]}})).sort((function(e,t){return t.probability-e.probability}))},e}(),vg=function(e){function t(t){return void 0===t&&(t=new hg),e.call(this,"FaceExpressionNet",t)||this}return Uf(t,e),t.prototype.forwardInput=function(e){var t=this;return br((function(){return si(t.runNet(e))}))},t.prototype.forward=function(e){return qf(this,void 0,void 0,(function(){var t;return zf(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,zp(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictExpressions=function(e){return qf(this,void 0,void 0,(function(){var t,n,r,a,i=this;return zf(this,(function(o){switch(o.label){case 0:return[4,zp(e)];case 1:return t=o.sent(),[4,this.forwardInput(t)];case 2:return n=o.sent(),[4,Promise.all(za(n).map((function(e){return qf(i,void 0,void 0,(function(){var t;return zf(this,(function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 3:return r=o.sent(),n.dispose(),a=r.map((function(e){return new mg(e)})),[2,t.isBatchInput?a:a[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(pg);function bg(e,t){var n={expressions:t};return Object.assign({},e,n)}function yg(e){return bp(e)&&e.landmarks instanceof dp&&e.unshiftedLandmarks instanceof dp&&e.alignedRect instanceof ip}function wg(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),a=r.align(),i=e.detection.imageDims,o={landmarks:r,unshiftedLandmarks:t,alignedRect:new ip(e.detection.score,a.rescale(i.reverse()),i)};return Object.assign({},e,o)}function xg(e,t,n){return Tl(mu(e,t.filters,n,"same"),t.bias)}function Cg(e,t,n){void 0===n&&(n=!0);var r=n?sh(e):e;return r=Yp(r,t.separable_conv0,[1,1]),r=Yp(sh(r),t.separable_conv1,[1,1]),r=Mu(r,[3,3],[2,2],"same"),Tl(r,xg(e,t.expansion_conv,[2,2]))}var kg,Sg,Ag=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return Uf(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return br((function(){var r=cp(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(qr(256)),a=sh(xg(r,n.entry_flow.conv_in,[2,2]));return a=Cg(a,n.entry_flow.reduction_block_0,!1),a=Cg(a,n.entry_flow.reduction_block_1),Zf(t._numMainBlocks,0,1).forEach((function(e){a=function(e,t){var n=Yp(sh(e),t.separable_conv0,[1,1]);return n=Yp(sh(n),t.separable_conv1,[1,1]),n=Yp(sh(n),t.separable_conv2,[1,1]),Tl(n,e)}(a,n.middle_flow["main_block_"+e])})),a=Cg(a,n.exit_flow.reduction_block),a=sh(Yp(a,n.exit_flow.separable_conv,[1,1]))}))},t.prototype.forward=function(e){return qf(this,void 0,void 0,(function(){var t;return zf(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,zp(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n=[],r=function(e,t){var n=og(e,t),r=lg(n),a=ig(n);return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),separable_conv2:a(e+"/separable_conv2")}}}}(e,n),a=r.extractConvParams,i=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,c={conv_in:a("entry_flow/conv_in"),reduction_block_0:o("entry_flow/reduction_block_0"),reduction_block_1:o("entry_flow/reduction_block_1")},l={};Zf(t,0,1).forEach((function(e){l["main_block_"+e]=s("middle_flow/main_block_"+e)}));var u={reduction_block:o("exit_flow/reduction_block"),separable_conv:i("exit_flow/separable_conv")};return eg(e,n),{params:{entry_flow:c,middle_flow:l,exit_flow:u},paramMappings:n}}(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return function(e,t){var n=[],r=sg(e),a=r.extractWeights,i=r.getRemainingWeights,o=function(e,t){var n=tg(e,t),r=ag(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,a){return{separable_conv0:r(e,t,a+"/separable_conv0"),separable_conv1:r(t,t,a+"/separable_conv1"),expansion_conv:n(e,t,1,a+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(a,n),s=o.extractConvParams,c=o.extractSeparableConvParams,l=o.extractReductionBlockParams,u=o.extractMainBlockParams,h={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:l(32,64,"entry_flow/reduction_block_0"),reduction_block_1:l(64,128,"entry_flow/reduction_block_1")},d={};Zf(t,0,1).forEach((function(e){d["main_block_"+e]=u(128,"middle_flow/main_block_"+e)}));var f={reduction_block:l(128,256,"exit_flow/reduction_block"),separable_conv:c(256,512,"exit_flow/separable_conv")};if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:h,middle_flow:d,exit_flow:f}}}(e,this._numMainBlocks)},t}(Kp);(Sg=kg||(kg={})).FEMALE="female",Sg.MALE="male";var _g,Eg=function(e){function t(t){void 0===t&&(t=new Ag(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return Uf(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return br((function(){var r=e instanceof qp?t.faceFeatureExtractor.forwardInput(e):e,a=Lu(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:dg(a,n.fc.age).as1D(),gender:dg(a,n.fc.gender)}}))},t.prototype.forwardInput=function(e){var t=this;return br((function(){var n=t.runNet(e),r=n.age,a=n.gender;return{age:r,gender:si(a)}}))},t.prototype.forward=function(e){return qf(this,void 0,void 0,(function(){var t;return zf(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,zp(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictAgeAndGender=function(e){return qf(this,void 0,void 0,(function(){var t,n,r,a,i,o,s=this;return zf(this,(function(c){switch(c.label){case 0:return[4,zp(e)];case 1:return t=c.sent(),[4,this.forwardInput(t)];case 2:return n=c.sent(),r=za(n.age),a=za(n.gender),i=r.map((function(e,t){return{ageTensor:e,genderTensor:a[t]}})),[4,Promise.all(i.map((function(e){var t=e.ageTensor,n=e.genderTensor;return qf(s,void 0,void 0,(function(){var e,r,a,i,o;return zf(this,(function(s){switch(s.label){case 0:return[4,t.data()];case 1:return e=s.sent()[0],[4,n.data()];case 2:return r=s.sent()[0],i=(a=r>.5)?kg.MALE:kg.FEMALE,o=a?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:i,genderProbability:o}]}}))}))})))];case 3:return o=c.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?o:o[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=sg(e),r=n.extractWeights,a=n.getRemainingWeights,i=ng(r,t),o=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{fc:{age:o,gender:s}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=fg(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=og(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return eg(e,t),{params:a,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(Kp),Ig=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map((function(e){var n=e.width,r=e.height,a=t/Math.max(r,n);return{width:n*a,height:r*a}})),a=r.length;return br((function(){var n=function(e,t){return Ua([Xr([68],e),Xr([68],t)],1).as2D(1,136).as1D()},i=function(e,t){var n=r[e],a=n.width,i=n.height;return t(a,i)?Math.abs(a-i)/2:0};return e.mul(Xr([a,136],t)).sub(Ua(Array.from(Array(a),(function(e,t){return n(function(e){return i(e,(function(e,t){return e<t}))}(t),function(e){return i(e,(function(e,t){return t<e}))}(t))})))).div(Ua(Array.from(Array(a),(function(e,t){return n(r[t].width,r[t].height)}))))}))},t.prototype.forwardInput=function(e){var t=this;return br((function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map((function(e){return{height:e[0],width:e[1]}})))}))},t.prototype.forward=function(e){return qf(this,void 0,void 0,(function(){var t;return zf(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,zp(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.detectLandmarks=function(e){return qf(this,void 0,void 0,(function(){var t,n,r,a=this;return zf(this,(function(i){switch(i.label){case 0:return[4,zp(e)];case 1:return t=i.sent(),n=br((function(){return za(a.forwardInput(t))})),[4,Promise.all(n.map((function(e,n){return qf(a,void 0,void 0,(function(){var r,a,i,o,s;return zf(this,(function(c){switch(c.label){case 0:return i=(a=Array).from,[4,e.data()];case 1:return r=i.apply(a,[c.sent()]),o=r.filter((function(e,t){return Xf(t)})),s=r.filter((function(e,t){return!Xf(t)})),[2,new pp(Array(68).fill(0).map((function(e,t){return new tp(o[t],s[t])})),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}}))}))})))];case 2:return r=i.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getClassifierChannelsOut=function(){return 136},t}(pg),Tg=function(e){function t(t){return void 0===t&&(t=new hg),e.call(this,"FaceLandmark68Net",t)||this}return Uf(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(Ig),Rg=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return Uf(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return br((function(){var n=Jp(cp(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(qr(255)),t.dense0,!0);return n=Jp(n,t.dense1),n=Jp(n,t.dense2),Lu(n,[14,14],[2,2],"valid")}))},t.prototype.forward=function(e){return qf(this,void 0,void 0,(function(){var t;return zf(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,zp(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=ug(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return eg(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=sg(e),r=n.extractWeights,a=n.getRemainingWeights,i=cg(r,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),c=i(64,128,"dense2");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:c}}}(e)},t}(Kp),Fg=function(e){function t(t){return void 0===t&&(t=new Rg),e.call(this,"FaceLandmark68TinyNet",t)||this}return Uf(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(Ig);function Pg(e,t,n,r,a){void 0===a&&(a="same");var i=t.conv,o=i.filters,s=i.bias,c=mu(e,o,n,a);return c=function(e,t){return Tl(Wl(e,t.weights),t.biases)}(c=Tl(c,s),t.scale),r?sh(c):c}function Dg(e,t){return Pg(e,t,[1,1],!1)}function Og(e,t){return Pg(e,t,[2,2],!0,"valid")}function Ng(e){var t=[],n=function(e,t){var n=og(e,t);function r(e){return{conv:{filters:n(e+"/conv/filters",4),bias:n(e+"/conv/bias",1)},scale:function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e)}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}(e,t),r=n.extractConvLayerParams,a=n.extractResidualLayerParams,i=r("conv32_down"),o=a("conv32_1"),s=a("conv32_2"),c=a("conv32_3"),l=a("conv64_down"),u=a("conv64_1"),h=a("conv64_2"),d=a("conv64_3"),f=a("conv128_down"),p=a("conv128_1"),g=a("conv128_2"),m=a("conv256_down"),v=a("conv256_1"),b=a("conv256_2"),y=a("conv256_down_out"),w=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!Hf(w,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);var x={conv32_down:i,conv32_1:o,conv32_2:s,conv32_3:c,conv64_down:l,conv64_1:u,conv64_2:h,conv64_3:d,conv128_down:f,conv128_1:p,conv128_2:g,conv256_down:m,conv256_1:v,conv256_2:b,conv256_down_out:y,fc:w};return eg(e,t),{params:x,paramMappings:t}}function Mg(e,t){var n=function(e,t){return Pg(e,t,[1,1],!0)}(e,t.conv1);return n=Dg(n,t.conv2),n=Tl(n,e),sh(n)}function Lg(e,t){var n=Og(e,t.conv1);n=Dg(n,t.conv2);var r=Lu(e,2,2,"valid"),a=$r(r.shape),i=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var o=Wf(n.shape);o[1]=1;var s=$r(o),c=Wf((n=Zr([n,s],1)).shape);c[2]=1;var l=$r(c);n=Zr([n,l],2)}return r=i?Zr([r,a],3):r,n=Tl(r,n),sh(n)}Uf((function(){return null!==_g&&_g.apply(this,arguments)||this}),_g=Tg);var Bg=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return Uf(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return br((function(){var n=Og(cp(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(qr(256)),t.conv32_down);n=Mg(n=Mu(n,3,2,"valid"),t.conv32_1),n=Mg(n,t.conv32_2),n=Mg(n,t.conv32_3),n=Mg(n=Lg(n,t.conv64_down),t.conv64_1),n=Mg(n,t.conv64_2),n=Mg(n,t.conv64_3),n=Mg(n=Lg(n,t.conv128_down),t.conv128_1),n=Mg(n,t.conv128_2),n=Mg(n=Lg(n,t.conv256_down),t.conv256_1);var r=(n=Lg(n=Mg(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return _u(r,t.fc)}))},t.prototype.forward=function(e){return qf(this,void 0,void 0,(function(){var t;return zf(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,zp(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.computeFaceDescriptor=function(e){return qf(this,void 0,void 0,(function(){var t,n,r,a=this;return zf(this,(function(i){switch(i.label){case 0:return[4,zp(e)];case 1:return t=i.sent(),n=br((function(){return za(a.forwardInput(t))})),[4,Promise.all(n.map((function(e){return e.data()})))];case 2:return r=i.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Ng(e)},t.prototype.extractParams=function(e){return function(e){var t=sg(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=function(e,t){function n(n,r,a,i){var o=function(t,n,r){var a=e(t),i=a.length/(n*r*r);if(i%1!=0)throw new Error("depth has to be an integer: "+i+", weights.length: "+a.length+", numFilters: "+n+", filterSize: "+r);return br((function(){return uh(Hr(a,[n,i,r,r]),[2,3,1,0])}))}(n,r,a),s=zr(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:s}}function r(r,a,i,o){return{conv:n(r,a,i,o+"/conv"),scale:function(n,r){var a=zr(e(n)),i=zr(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:a,biases:i}}(a,o+"/scale")}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,a,i){return void 0===i&&(i=!1),{conv1:r((i?.5:1)*e,t,n,a+"/conv1"),conv2:r(e,t,n,a+"/conv2")}}}}(n,a),o=i.extractConvLayerParams,s=i.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),u=s(9216,32,3,"conv32_2"),h=s(9216,32,3,"conv32_3"),d=s(36864,64,3,"conv64_down",!0),f=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),g=s(36864,64,3,"conv64_3"),m=s(147456,128,3,"conv128_down",!0),v=s(147456,128,3,"conv128_1"),b=s(147456,128,3,"conv128_2"),y=s(589824,256,3,"conv256_down",!0),w=s(589824,256,3,"conv256_1"),x=s(589824,256,3,"conv256_2"),C=s(589824,256,3,"conv256_down_out"),k=br((function(){return uh(Wr(n(32768),[128,256]),[1,0])}));if(a.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:c,conv32_1:l,conv32_2:u,conv32_3:h,conv64_down:d,conv64_1:f,conv64_2:p,conv64_3:g,conv128_down:m,conv128_1:v,conv128_2:b,conv256_down:y,conv256_1:w,conv256_2:x,conv256_down_out:C,fc:k},paramMappings:a}}(e)},t}(Kp);function Ug(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var jg=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,a=t.maxNumScales,i=t.scoreThresholds,o=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=a||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=o,"number"!=typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!=typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!=typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some((function(e){return"number"!=typeof e})))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some((function(e){return"number"!=typeof e}))))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function qg(e,t,n){return br((function(){var r=mu(e,t.filters,n,"same");return r=Tl(r,t.batch_norm_offset),Lc(r,0,6)}))}function zg(e,t,n){var r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),o=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),c=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),u=Math.max(r[n][0],r[n][2]),h=Math.max(r[n][1],r[n][3]),d=(o-a)*(s-i),f=(u-c)*(h-l);if(d<=0||f<=0)return 0;var p=Math.max(a,c),g=Math.max(i,l),m=Math.min(o,u),v=Math.min(s,h),b=Math.max(m-p,0)*Math.max(v-g,0);return b/(d+f-b)}function Wg(e,t){return br((function(){var n=e.shape[0];return{boxPredictionEncoding:Ma(Qp(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:Ma(Qp(e,t.class_predictor),[n,-1,3])}}))}var Gg=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!=typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),Hg=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return Uf(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return br((function(){var n=e.toBatchTensor(512,!1).toFloat(),r=function(e,t){return br((function(){var n=null,r=qg(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((function(e,t){var a=t+1,i=function(e){return[2,4,6,12].some((function(t){return t===e}))?[2,2]:[1,1]}(a);r=qg(r=function(e,t,n){return br((function(){var r=wu(e,t.filters,n,"same");return r=yl(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),Lc(r,0,6)}))}(r,e.depthwise_conv,i),e.pointwise_conv,[1,1]),11===a&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}(Xl(Wl(n,qr(.007843137718737125)),qr(1)),t.mobilenetv1),a=function(e,t,n){return br((function(){var r=qg(e,n.conv_0,[1,1]),a=qg(r,n.conv_1,[2,2]),i=qg(a,n.conv_2,[1,1]),o=qg(i,n.conv_3,[2,2]),s=qg(o,n.conv_4,[1,1]),c=qg(s,n.conv_5,[2,2]),l=qg(c,n.conv_6,[1,1]),u=qg(l,n.conv_7,[2,2]),h=Wg(t,n.box_predictor_0),d=Wg(e,n.box_predictor_1),f=Wg(a,n.box_predictor_2),p=Wg(o,n.box_predictor_3),g=Wg(c,n.box_predictor_4),m=Wg(u,n.box_predictor_5);return{boxPredictions:Zr([h.boxPredictionEncoding,d.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,g.boxPredictionEncoding,m.boxPredictionEncoding],1),classPredictions:Zr([h.classPrediction,d.classPrediction,f.classPrediction,p.classPrediction,g.classPrediction,m.classPrediction],1)}}))}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return br((function(){var r=e.shape[0],a=function(e,t){var n=function(e){var t=za(uh(e,[1,0])),n=[Xl(t[2],t[0]),Xl(t[3],t[1])];return{sizes:n,centers:[Tl(t[0],Dl(n[0],qr(2))),Tl(t[1],Dl(n[1],qr(2)))]}}(e),r=n.sizes,a=n.centers,i=za(uh(t,[1,0])),o=Dl(Wl(qc(Dl(i[2],qr(5))),r[0]),qr(2)),s=Tl(Wl(Dl(i[0],qr(10)),r[0]),a[0]),c=Dl(Wl(qc(Dl(i[3],qr(5))),r[1]),qr(2)),l=Tl(Wl(Dl(i[1],qr(10)),r[1]),a[1]);return uh(Ua([Xl(s,o),Xl(l,c),Tl(s,o),Tl(l,c)]),[1,0])}(Ma(ja(n.extra_dim,[r,1,1]),[-1,4]),Ma(e,[-1,4]));a=Ma(a,[r,a.shape[0]/r,4]);var i=Jc(qu(t,[0,0,1],[-1,-1,-1])),o=qu(i,[0,0,0],[-1,-1,1]);return o=Ma(o,[r,o.shape[1]]),{boxes:za(a),scores:za(o)}}))}(a.boxPredictions,a.classPredictions,t.output_layer)}))},t.prototype.forward=function(e){return qf(this,void 0,void 0,(function(){var t;return zf(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,zp(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),qf(this,void 0,void 0,(function(){var n,r,a,i,o,s,c,l,u,h,d,f,p,g,m,v,b,y,w,x;return zf(this,(function(C){switch(C.label){case 0:return n=new Gg(t),r=n.maxResults,a=n.minConfidence,[4,zp(e)];case 1:for(i=C.sent(),o=this.forwardInput(i),s=o.boxes,c=o.scores,l=s[0],u=c[0],h=1;h<s.length;h++)s[h].dispose(),c[h].dispose();return p=(f=Array).from,[4,u.data()];case 2:return d=p.apply(f,[C.sent()]),g=function(e,t,n,r,a){var i=e.shape[0],o=Math.min(n,i),s=t.map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>a})).sort((function(e,t){return t.score-e.score})),c=function(e){return e<=.5?1:0},l=[];return s.forEach((function(t){if(!(l.length>=o)){for(var n=t.score,r=l.length-1;r>=0;--r){var i=zg(e,t.boxIndex,l[r]);if(0!==i&&(t.score*=c(i),t.score<=a))break}n===t.score&&l.push(t.boxIndex)}})),l}(l,d,r,0,a),m=i.getReshapedInputDimensions(0),v=i.inputSize,b=v/m.width,y=v/m.height,w=l.arraySync(),x=g.map((function(e){var t=[Math.max(0,w[e][0]),Math.min(1,w[e][2])].map((function(e){return e*y})),n=t[0],r=t[1],a=[Math.max(0,w[e][1]),Math.min(1,w[e][3])].map((function(e){return e*b})),o=a[0],s=a[1];return new ip(d[e],new hp(o,n,s-o,r-n),{height:i.getInputHeight(0),width:i.getInputWidth(0)})})),l.dispose(),u.dispose(),[2,x]}}))}))},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=function(e,t){var n=og(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function a(e){var t="mobilenetv1/conv_"+e,a="MobilenetV1/Conv2d_"+e+"_depthwise",i=t+"/depthwise_conv",o=t+"/pointwise_conv";return{depthwise_conv:{filters:n(a+"/depthwise_weights",4,i+"/filters"),batch_norm_scale:n(a+"/BatchNorm/gamma",1,i+"/batch_norm_scale"),batch_norm_offset:n(a+"/BatchNorm/beta",1,i+"/batch_norm_offset"),batch_norm_mean:n(a+"/BatchNorm/moving_mean",1,i+"/batch_norm_mean"),batch_norm_variance:n(a+"/BatchNorm/moving_variance",1,i+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,o)}}function i(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function o(e){return{box_encoding_predictor:i("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:i("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}}}(e,t),r=n.extractMobilenetV1Params,a=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Vf(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return eg(e,t),{params:o,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=sg(e),r=n.extractWeights,a=n.getRemainingWeights,i=function(e,t){function n(n,r,a,i,o){var s=Hr(e(n*r*a*a),[a,a,n,r]),c=zr(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/"+(o?"batch_norm_offset":"bias")}),{filters:s,bias:c}}function r(e,t,r,a){var i=n(e,t,r,a,!0);return{filters:i.filters,batch_norm_offset:i.bias}}function a(n,a,i){return{depthwise_conv:function(n,r){var a=Hr(e(9*n),[3,3,n,1]),i=zr(e(n)),o=zr(e(n)),s=zr(e(n)),c=zr(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:a,batch_norm_scale:i,batch_norm_offset:o,batch_norm_mean:s,batch_norm_variance:c}}(n,i+"/depthwise_conv"),pointwise_conv:r(n,a,1,i+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:a(32,64,"mobilenetv1/conv_1"),conv_2:a(64,128,"mobilenetv1/conv_2"),conv_3:a(128,128,"mobilenetv1/conv_3"),conv_4:a(128,256,"mobilenetv1/conv_4"),conv_5:a(256,256,"mobilenetv1/conv_5"),conv_6:a(256,512,"mobilenetv1/conv_6"),conv_7:a(512,512,"mobilenetv1/conv_7"),conv_8:a(512,512,"mobilenetv1/conv_8"),conv_9:a(512,512,"mobilenetv1/conv_9"),conv_10:a(512,512,"mobilenetv1/conv_10"),conv_11:a(512,512,"mobilenetv1/conv_11"),conv_12:a(512,1024,"mobilenetv1/conv_12"),conv_13:a(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}(r,t),o=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,c=o(),l=s(),u={extra_dim:Gr(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:c,prediction_layer:l,output_layer:u},paramMappings:t}}(e)},t}(Kp);!function(e){Uf((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(Hg);var Vg,$g=[new tp(.738768,.874946),new tp(2.42204,2.65704),new tp(4.30971,7.04493),new tp(10.246,4.59428),new tp(12.6868,11.8741)],Xg=[new tp(1.603231,2.094468),new tp(6.041143,7.080126),new tp(2.882459,3.518061),new tp(4.266906,5.178857),new tp(9.041765,10.66308)],Kg=[117.001,114.697,97.404],Yg=function(e){return"number"==typeof e};function Jg(e){return br((function(){var t=Wl(e,qr(.10000000149011612));return Tl(sh(Xl(e,t)),t)}))}function Zg(e,t){return br((function(){var n=Ea(e,[[0,0],[1,1],[1,1],[0,0]]);return n=mu(n,t.conv.filters,[1,1],"valid"),n=Xl(n,t.bn.sub),n=Wl(n,t.bn.truediv),Jg(n=Tl(n,t.conv.bias))}))}function Qg(e,t){return br((function(){var n=Ea(e,[[0,0],[1,1],[1,1],[0,0]]);return n=ku(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),Jg(n=Tl(n,t.bias))}))}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(Vg||(Vg={}));var em=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),tm=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!=typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Yg(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every((function(e){return"string"==typeof e})))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map((function(e){return e||{}})).every((function(e){return Yg(e.x)&&Yg(e.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(Yg)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return Uf(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=Zg(e,t.conv0);return n=Zg(n=Mu(n,[2,2],[2,2],"same"),t.conv1),n=Zg(n=Mu(n,[2,2],[2,2],"same"),t.conv2),n=Zg(n=Mu(n,[2,2],[2,2],"same"),t.conv3),n=Zg(n=Mu(n,[2,2],[2,2],"same"),t.conv4),n=Zg(n=Mu(n,[2,2],[2,2],"same"),t.conv5),n=Zg(n=Mu(n,[2,2],[1,1],"same"),t.conv6),Qp(n=Zg(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?Jg(Qp(e,t.conv0,"valid",!1)):Qg(e,t.conv0);return n=Qg(n=Mu(n,[2,2],[2,2],"same"),t.conv1),n=Qg(n=Mu(n,[2,2],[2,2],"same"),t.conv2),n=Qg(n=Mu(n,[2,2],[2,2],"same"),t.conv3),n=Qg(n=Mu(n,[2,2],[2,2],"same"),t.conv4),n=Qg(n=Mu(n,[2,2],[2,2],"same"),t.conv5),n=Mu(n,[2,2],[1,1],"same"),n=t.conv6?Qg(n,t.conv6):n,Qp(n=t.conv7?Qg(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return br((function(){var a=e.toBatchTensor(t,!1).toFloat();return a=(a=n.config.meanRgb?cp(a,n.config.meanRgb):a).div(qr(256)),n.config.withSeparableConvs?n.runMobilenet(a,r):n.runTinyYolov2(a,r)}))},t.prototype.forward=function(e,t){return qf(this,void 0,void 0,(function(){var n;return zf(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,zp(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}}))}))},t.prototype.detect=function(e,t){return void 0===t&&(t={}),qf(this,void 0,void 0,(function(){var n,r,a,i,o,s,c,l,u,h,d,f,p=this;return zf(this,(function(g){switch(g.label){case 0:return n=new em(t),r=n.inputSize,a=n.scoreThreshold,[4,zp(e)];case 1:return i=g.sent(),[4,this.forwardInput(i,r)];case 2:return o=g.sent(),s=br((function(){return za(o)[0].expandDims()})),c={width:i.getInputWidth(0),height:i.getInputHeight(0)},[4,this.extractBoxes(s,i.getReshapedInputDimensions(0),a)];case 3:return l=g.sent(),o.dispose(),s.dispose(),u=l.map((function(e){return e.box})),h=l.map((function(e){return e.score})),d=l.map((function(e){return e.classScore})),f=l.map((function(e){return p.config.classes[e.label]})),[2,sp(u.map((function(e){return e.rescale(r)})),h,this.config.iouThreshold,!0).map((function(e){return new ap(h[e],d[e],f[e],u[e],c)}))]}}))}))},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],a=function(e,t){var n=og(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){return{conv:r(e+"/conv"),bn:function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn")}},extractSeparableConvParams:ig(n)}}(e,r),i=a.extractConvParams,o=a.extractConvWithBatchNormParams,s=a.extractSeparableConvParams;if(t.withSeparableConvs){var c=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?i("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:c>7?s("conv6"):void 0,conv7:c>8?s("conv7"):void 0,conv8:i("conv8")}}else n={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return eg(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var a,i=sg(e),o=i.extractWeights,s=i.getRemainingWeights,c=[],l=function(e,t){var n=tg(e,t),r=ag(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,a,i){return{conv:n(r,a,3,i+"/conv"),bn:function(n,r){var a=zr(e(n)),i=zr(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:a,truediv:i}}(a,i+"/bn")}},extractSeparableConvParams:r}}(o,c),u=l.extractConvParams,h=l.extractConvWithBatchNormParams,d=l.extractSeparableConvParams;if(t.withSeparableConvs){var f=r[0],p=r[1],g=r[2],m=r[3],v=r[4],b=r[5],y=r[6],w=r[7],x=r[8];a={conv0:t.isFirstLayerConv2d?u(f,p,3,"conv0"):d(f,p,"conv0"),conv1:d(p,g,"conv1"),conv2:d(g,m,"conv2"),conv3:d(m,v,"conv3"),conv4:d(v,b,"conv4"),conv5:d(b,y,"conv5"),conv6:w?d(y,w,"conv6"):void 0,conv7:x?d(w,x,"conv7"):void 0,conv8:u(x||w||y,5*n,1,"conv8")}}else f=r[0],p=r[1],g=r[2],m=r[3],v=r[4],b=r[5],y=r[6],w=r[7],x=r[8],a={conv0:h(f,p,"conv0"),conv1:h(p,g,"conv1"),conv2:h(g,m,"conv2"),conv3:h(m,v,"conv3"),conv4:h(v,b,"conv4"),conv5:h(b,y,"conv5"),conv6:h(y,w,"conv6"),conv7:h(w,x,"conv7"),conv8:u(x,5*n,1,"conv8")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:a,paramMappings:c}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return qf(this,void 0,void 0,(function(){var r,a,i,o,s,c,l,u,h,d,f,p,g,m,v,b,y,w,x,C,k,S,A,_,E,I,T,R,F,P=this;return zf(this,(function(D){switch(D.label){case 0:return r=t.width,a=t.height,i=Math.max(r,a),o=i/r,s=i/a,c=e.shape[1],l=this.config.anchors.length,u=br((function(){var t=e.reshape([c,c,l,P.boxEncodingSize]);return[t.slice([0,0,0,0],[c,c,l,4]),t.slice([0,0,0,4],[c,c,l,1]),P.withClassScores?si(t.slice([0,0,0,5],[c,c,l,P.config.classes.length]),3):qr(0)]})),h=u[0],d=u[1],f=u[2],p=[],[4,d.array()];case 1:return g=D.sent(),[4,h.array()];case 2:m=D.sent(),v=0,D.label=3;case 3:if(!(v<c))return[3,12];b=0,D.label=4;case 4:if(!(b<c))return[3,11];y=0,D.label=5;case 5:return y<l?(w=lp(g[v][b][y][0]),!n||w>n?(x=(b+lp(m[v][b][y][0]))/c*o,C=(v+lp(m[v][b][y][1]))/c*s,k=Math.exp(m[v][b][y][2])*this.config.anchors[y].x/c*o,S=Math.exp(m[v][b][y][3])*this.config.anchors[y].y/c*s,A=x-k/2,_=C-S/2,E={row:v,col:b,anchor:y},this.withClassScores?[4,this.extractPredictedClass(f,E)]:[3,7]):[3,9]):[3,10];case 6:return F=D.sent(),[3,8];case 7:F={classScore:1,label:0},D.label=8;case 8:T=(I=F).classScore,R=I.label,p.push(jf({box:new rp(A,_,A+k,_+S),score:w,classScore:w*T,label:R},E)),D.label=9;case 9:return y++,[3,5];case 10:return b++,[3,4];case 11:return v++,[3,3];case 12:return h.dispose(),d.dispose(),f.dispose(),[2,p]}}))}))},t.prototype.extractPredictedClass=function(e,t){return qf(this,void 0,void 0,(function(){var n,r,a,i;return zf(this,(function(o){switch(o.label){case 0:return n=t.row,r=t.col,a=t.anchor,[4,e.array()];case 1:return i=o.sent(),[2,Array(this.config.classes.length).fill(0).map((function(e,t){return i[n][r][a][t]})).map((function(e,t){return{classScore:e,label:t}})).reduce((function(e,t){return e.classScore>t.classScore?e:t}))]}}))}))},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(Kp),nm=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:Xg,meanRgb:Kg}:{anchors:$g,withClassScores:!0});return e.call(this,n)||this}return Uf(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return qf(this,void 0,void 0,(function(){return zf(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new ip(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(tm),rm=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return Uf(t,e),t}(em),am=function(){function e(){}return e.prototype.then=function(e){return qf(this,void 0,void 0,(function(){var t;return zf(this,(function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))},e.prototype.run=function(){return qf(this,void 0,void 0,(function(){return zf(this,(function(e){throw new Error("ComposableTask - run is not implemented")}))}))},e}();function im(e,t){var n={descriptor:t};return Object.assign({},e,n)}function om(e,t,n,r,a){return void 0===a&&(a=function(e){return e.alignedRect}),qf(this,void 0,void 0,(function(){var i,o,s,c,l;return zf(this,(function(u){switch(u.label){case 0:return i=e.map((function(e){return yg(e)?a(e):e.detection})),(s=r)?[3,5]:t instanceof Kt?[4,Gp(t,i)]:[3,2];case 1:return c=u.sent(),[3,4];case 2:return[4,Wp(t,i)];case 3:c=u.sent(),u.label=4;case 4:s=c,u.label=5;case 5:return[4,n(o=s)];case 6:return l=u.sent(),o.forEach((function(e){return e instanceof Kt&&e.dispose()})),[2,l]}}))}))}function sm(e,t,n,r,a){return qf(this,void 0,void 0,(function(){var i=this;return zf(this,(function(o){return[2,om([e],t,(function(e){return qf(i,void 0,void 0,(function(){return zf(this,(function(t){return[2,n(e[0])]}))}))}),r,a)]}))}))}function cm(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var lm=function(e){function t(t,n,r,a){return e.call(this,{left:t,top:n,right:r,bottom:a},!0)||this}return Uf(t,e),t}(np);function um(e){return br((function(){return Wl(Xl(e,qr(127.5)),qr(.0078125))}))}function hm(e,t){return br((function(){return Tl(sh(e),Wl(t,$c(sh($c(e)))))}))}function dm(e,t,n){return void 0===n&&(n=!1),br((function(){var r=Qp(e,t.conv1,"valid");return r=hm(r,t.prelu1_alpha),r=hm(r=Qp(r=Mu(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),hm(r=Qp(r=n?r:Mu(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)}))}function fm(e,t,n,r,a){a.stage1=[];var i=t.map((function(t){return br((function(){var n={scale:t},a=function(e,t){return br((function(){var n=cm(t,e.shape.slice(1)),r=n.height,a=n.width,i=um(nd.resizeBilinear(e,[r,a]));return uh(i,[0,2,1,3])}))}(e,t),i=Date.now(),o=function(e,t){return br((function(){var n=dm(e,t,!0),r=Qp(n,t.conv4_1,"valid"),a=ka(Zu(r,3),3);return{prob:si(Xl(r,a),3),regions:Qp(n,t.conv4_2,"valid")}}))}(a,r),s=o.prob,c=o.regions;return n.pnet=Date.now()-i,{scoresTensor:za(za(s,3)[1])[0],regionsTensor:za(c)[0],scale:t,statsForScale:n}}))})).map((function(e){var t=e.scoresTensor,r=e.regionsTensor,i=e.scale,o=e.statsForScale,s=function(e,t,n,r){for(var a=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var s=0;s<e.shape[1];s++)i[o][s]>=r&&a.push(new tp(s,o));return a.map((function(e){var r=new rp(Math.round((2*e.y+1)/n),Math.round((2*e.x+1)/n),Math.round((2*e.y+12)/n),Math.round((2*e.x+12)/n)),a=i[e.y][e.x],o=t.arraySync();return{cell:r,score:a,region:new lm(o[e.y][e.x][0],o[e.y][e.x][1],o[e.y][e.x][2],o[e.y][e.x][3])}}))}(t,r,i,n);if(t.dispose(),r.dispose(),!s.length)return a.stage1.push(o),[];var c=Date.now(),l=sp(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.5);return o.nms=Date.now()-c,o.numBoxes=l.length,a.stage1.push(o),l.map((function(e){return s[e]}))})).reduce((function(e,t){return e.concat(t)}),[]),o=[],s=[];if(i.length>0){var c=Date.now(),l=sp(i.map((function(e){return e.cell})),i.map((function(e){return e.score})),.7);a.stage1_nms=Date.now()-c,s=l.map((function(e){return i[e].score})),o=l.map((function(e){return i[e]})).map((function(e){var t=e.cell,n=e.region;return new rp(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()}))}return{boxes:o,scores:s}}function pm(e,t,n){var r=n.width,a=n.height;return qf(this,void 0,void 0,(function(){var n,i,o,s=this;return zf(this,(function(c){switch(c.label){case 0:return n=Rp(e),[4,Promise.all(t.map((function(t){return qf(s,void 0,void 0,(function(){var r,a,i,o,s,c,l,u;return zf(this,(function(h){return r=t.padAtBorders(e.height,e.width),a=r.y,i=r.ey,o=r.x,s=r.ex,c=o-1,l=a-1,u=n.getImageData(c,l,s-c,i-l),[2,Ip.isNodejs()?Bp(u):createImageBitmap(u)]}))}))})))];case 1:return i=c.sent(),o=[],i.forEach((function(e){var t=Rp(Lp({width:r,height:a}));t.drawImage(e,0,0,r,a);for(var n=t.getImageData(0,0,r,a).data,i=[],s=0;s<n.length;s+=4)i.push(n[s+2]),i.push(n[s+1]),i.push(n[s]);o.push(i)})),[2,o.map((function(e){return br((function(){return um(uh(Hr(e,[1,r,a,3]),[0,2,1,3]).toFloat())}))}))]}}))}))}function gm(e,t,n,r,a){return qf(this,void 0,void 0,(function(){var i,o,s,c,l,u,h,d,f,p,g,m,v,b;return zf(this,(function(y){switch(y.label){case 0:return i=Date.now(),[4,pm(e,t,{width:24,height:24})];case 1:return o=y.sent(),a.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map((function(e){var t=function(e,t){return br((function(){var n=dm(e,t),r=hm(dg(Ma(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),a=dg(r,t.fc2_1),i=ka(Zu(a,1),1),o=si(Xl(a,i),1),s=dg(r,t.fc2_2);return{scores:za(o,1)[1],regions:s}}))}(e,r);return e.dispose(),t})),a.stage2_rnet=Date.now()-i,c=s.length>1?Zr(s.map((function(e){return e.scores}))):s[0].scores,h=(u=Array).from,[4,c.data()];case 2:return l=h.apply(u,[y.sent()]),c.dispose(),d=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),f=d.map((function(e){return t[e]})),p=d.map((function(e){return l[e]})),g=[],m=[],f.length>0&&(i=Date.now(),v=sp(f,p,.7),a.stage2_nms=Date.now()-i,b=v.map((function(e){var t=s[d[e]].regions.arraySync();return new lm(t[0][0],t[0][1],t[0][2],t[0][3])})),m=v.map((function(e){return p[e]})),g=v.map((function(e,t){return f[e].calibrate(b[t])}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose()})),[2,{boxes:g,scores:m}]}}))}))}function mm(e,t,n,r,a){return qf(this,void 0,void 0,(function(){var i,o,s,c,l,u,h,d,f,p,g,m,v,b,y;return zf(this,(function(w){switch(w.label){case 0:return i=Date.now(),[4,pm(e,t,{width:48,height:48})];case 1:return o=w.sent(),a.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map((function(e){var t=function(e,t){return br((function(){var n=dm(e,t);n=hm(n=Qp(n=Mu(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=hm(dg(Ma(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),a=dg(r,t.fc2_1),i=ka(Zu(a,1),1),o=si(Xl(a,i),1),s=dg(r,t.fc2_2),c=dg(r,t.fc2_3);return{scores:za(o,1)[1],regions:s,points:c}}))}(e,r);return e.dispose(),t})),a.stage3_onet=Date.now()-i,c=s.length>1?Zr(s.map((function(e){return e.scores}))):s[0].scores,h=(u=Array).from,[4,c.data()];case 2:return l=h.apply(u,[w.sent()]),c.dispose(),d=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),f=d.map((function(e){var t=s[e].regions.arraySync();return new lm(t[0][0],t[0][1],t[0][2],t[0][3])})),p=d.map((function(e,n){return t[e].calibrate(f[n])})),g=d.map((function(e){return l[e]})),m=[],v=[],b=[],p.length>0&&(i=Date.now(),y=sp(p,g,.7,!1),a.stage3_nms=Date.now()-i,m=y.map((function(e){return p[e]})),v=y.map((function(e){return g[e]})),b=y.map((function(e,t){return Array(5).fill(0).map((function(n,r){var a=s[e].points.arraySync();return new tp(a[0][r]*(m[t].width+1)+m[t].left,a[0][r+5]*(m[t].height+1)+m[t].top)}))}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()})),[2,{boxes:m,scores:v,points:b}]}}))}))}var vm=function(e){function t(){return e.call(this,"Mtcnn")||this}return Uf(t,e),t.prototype.load=function(t){return qf(this,void 0,void 0,(function(){return zf(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]}))}))},t.prototype.loadFromDisk=function(t){return qf(this,void 0,void 0,(function(){return zf(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]}))}))},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),qf(this,void 0,void 0,(function(){var n,r,a,i,o,s,c,l,u,h,d,f,p,g,m,v,b,y,w,x,C;return zf(this,(function(k){switch(k.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},i=Date.now(),o=br((function(){return e=ka(Cf.fromPixels(r)).toFloat(),br((function(){return Ua(za(e,3).reverse(),3)}));var e})),s=function(e){return o.dispose(),a.total=Date.now()-i,e},c=o.shape.slice(1),l=c[0],u=c[1],h=new jg(t),d=h.minFaceSize,f=h.scaleFactor,p=h.maxNumScales,g=h.scoreThresholds,m=h.scaleSteps,v=(m||function(e,t,n){for(var r=n[0],a=n[1],i=12/e,o=[],s=Math.min(r,a)*i,c=0;s>=12;)o.push(i*Math.pow(t,c)),s*=t,c+=1;return o}(d,f,[l,u])).filter((function(e){var t=cm(e,[l,u]);return Math.min(t.width,t.height)>12})).slice(0,p),a.scales=v,a.pyramid=v.map((function(e){return cm(e,[l,u])})),b=Date.now(),[4,fm(o,v,g[0],n.pnet,a)];case 1:return y=k.sent(),a.total_stage1=Date.now()-b,y.boxes.length?(a.stage2_numInputBoxes=y.boxes.length,b=Date.now(),[4,gm(r,y.boxes,g[1],n.rnet,a)]):[2,s({results:[],stats:a})];case 2:return w=k.sent(),a.total_stage2=Date.now()-b,w.boxes.length?(a.stage3_numInputBoxes=w.boxes.length,b=Date.now(),[4,mm(r,w.boxes,g[2],n.onet,a)]):[2,s({results:[],stats:a})];case 3:return x=k.sent(),a.total_stage3=Date.now()-b,C=x.boxes.map((function(e,t){return wg(yp({},new ip(x.scores[t],new hp(e.left/u,e.top/l,e.width/u,e.height/l),{height:l,width:u})),new fp(x.points[t].map((function(t){return t.sub(new tp(e.left,e.top)).div(new tp(e.width,e.height))})),{width:e.width,height:e.height}))})),[2,s({results:C,stats:a})]}}))}))},t.prototype.forward=function(e,t){return void 0===t&&(t={}),qf(this,void 0,void 0,(function(){var n;return zf(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,zp(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}}))}))},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),qf(this,void 0,void 0,(function(){var n;return zf(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,zp(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}}))}))},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=function(e,t){var n=og(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function a(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function i(e){return n(e,1)}function o(e){return{conv1:r(e+"/conv1"),prelu1_alpha:i(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:i(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:i(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=o("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return jf(jf({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=o("rnet"),t=a("rnet/fc1"),n=i("rnet/prelu4_alpha"),r=a("rnet/fc2_1"),s=a("rnet/fc2_2");return jf(jf({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})},extractONetParams:function(){var e=o("onet"),t=r("onet/conv4"),n=i("onet/prelu4_alpha"),s=a("onet/fc1"),c=i("onet/prelu5_alpha"),l=a("onet/fc2_1"),u=a("onet/fc2_2"),h=a("onet/fc2_3");return jf(jf({},e),{conv4:t,prelu4_alpha:n,fc1:s,prelu5_alpha:c,fc2_1:l,fc2_2:u,fc2_3:h})}}}(e,t),r=n.extractPNetParams,a=n.extractRNetParams,i=n.extractONetParams,o=r(),s=a(),c=i();return eg(e,t),{params:{pnet:o,rnet:s,onet:c},paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=sg(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=function(e,t){var n=tg(e,t),r=ng(e,t);function a(n,r){var a=zr(e(n));return t.push({paramPath:r}),a}function i(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:a(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:a(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:a(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=i([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return jf(jf({},e),{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=i([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=a(128,"rnet/prelu4_alpha"),o=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2");return jf(jf({},e),{fc1:t,prelu4_alpha:n,fc2_1:o,fc2_2:s})},extractONetParams:function(){var e=i([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),o=a(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),c=a(256,"onet/prelu5_alpha"),l=r(256,2,"onet/fc2_1"),u=r(256,4,"onet/fc2_2"),h=r(256,10,"onet/fc2_3");return jf(jf({},e),{conv4:t,prelu4_alpha:o,fc1:s,prelu5_alpha:c,fc2_1:l,fc2_2:u,fc2_3:h})}}}(n,a),o=i.extractPNetParams,s=i.extractRNetParams,c=i.extractONetParams,l=o(),u=s(),h=c();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:u,onet:h},paramMappings:a}}(e)},t}(Kp),bm=[new tp(1.603231,2.094468),new tp(6.041143,7.080126),new tp(2.882459,3.518061),new tp(4.266906,5.178857),new tp(9.041765,10.66308)],ym=[117.001,114.697,97.404],wm=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:bm,meanRgb:ym,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return Uf(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return qf(this,void 0,void 0,(function(){return zf(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new ip(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(tm),xm={ssdMobilenetv1:new Hg,tinyFaceDetector:new wm,tinyYolov2:new nm,mtcnn:new vm,faceLandmark68Net:new Tg,faceLandmark68TinyNet:new Fg,faceRecognitionNet:new Bg,faceExpressionNet:new vg,ageGenderNet:new Eg};function Cm(e,t){var n={age:t};return Object.assign({},e,n)}var km=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.extractedFaces=r,a}return Uf(t,e),t}(am),Sm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.run=function(){return qf(this,void 0,void 0,(function(){var e,t,n=this;return zf(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,om(e=r.sent(),this.input,(function(e){return qf(n,void 0,void 0,(function(){return zf(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return xm.faceExpressionNet.predictExpressions(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){return bg(e,t[n])}))]}}))}))},t.prototype.withAgeAndGender=function(){return new Tm(this,this.input)},t}(km),Am=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.run=function(){return qf(this,void 0,void 0,(function(){var e,t;return zf(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,sm(e,this.input,(function(e){return xm.faceExpressionNet.predictExpressions(e)}),this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,bg(e,t)]}}))}))},t.prototype.withAgeAndGender=function(){return new Rm(this,this.input)},t}(km),_m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.withAgeAndGender=function(){return new Fm(this,this.input)},t.prototype.withFaceDescriptors=function(){return new Om(this,this.input)},t}(Sm),Em=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.withAgeAndGender=function(){return new Pm(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Nm(this,this.input)},t}(Am),Im=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.extractedFaces=r,a}return Uf(t,e),t}(am),Tm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.run=function(){return qf(this,void 0,void 0,(function(){var e,t,n=this;return zf(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,om(e=r.sent(),this.input,(function(e){return qf(n,void 0,void 0,(function(){return zf(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return xm.ageGenderNet.predictAgeAndGender(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){var r=t[n],a=r.age;return Cm(Ug(e,r.gender,r.genderProbability),a)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new Sm(this,this.input)},t}(Im),Rm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.run=function(){return qf(this,void 0,void 0,(function(){var e,t,n,r,a;return zf(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?[4,sm(e,this.input,(function(e){return xm.ageGenderNet.predictAgeAndGender(e)}),this.extractedFaces)]:[2];case 2:return t=i.sent(),n=t.age,r=t.gender,a=t.genderProbability,[2,Cm(Ug(e,r,a),n)]}}))}))},t.prototype.withFaceExpressions=function(){return new Am(this,this.input)},t}(Im),Fm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.withFaceExpressions=function(){return new _m(this,this.input)},t.prototype.withFaceDescriptors=function(){return new Om(this,this.input)},t}(Tm),Pm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.withFaceExpressions=function(){return new Em(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Nm(this,this.input)},t}(Rm),Dm=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return Uf(t,e),t}(am),Om=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.run=function(){return qf(this,void 0,void 0,(function(){var e;return zf(this,(function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,om(e=t.sent(),this.input,(function(e){return Promise.all(e.map((function(e){return xm.faceRecognitionNet.computeFaceDescriptor(e)})))}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))];case 2:return[2,t.sent().map((function(t,n){return im(e[n],t)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new _m(this,this.input)},t.prototype.withAgeAndGender=function(){return new Fm(this,this.input)},t}(Dm),Nm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.run=function(){return qf(this,void 0,void 0,(function(){var e,t;return zf(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,sm(e,this.input,(function(e){return xm.faceRecognitionNet.computeFaceDescriptor(e)}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))]:[2];case 2:return t=n.sent(),[2,im(e,t)]}}))}))},t.prototype.withFaceExpressions=function(){return new Em(this,this.input)},t.prototype.withAgeAndGender=function(){return new Pm(this,this.input)},t}(Dm),Mm=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.useTinyLandmarkNet=r,a}return Uf(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?xm.faceLandmark68TinyNet:xm.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(am),Lm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.run=function(){return qf(this,void 0,void 0,(function(){var e,t,n,r,a,i=this;return zf(this,(function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),t=e.map((function(e){return e.detection})),this.input instanceof Kt?[4,Gp(this.input,t)]:[3,3];case 2:return r=o.sent(),[3,5];case 3:return[4,Wp(this.input,t)];case 4:r=o.sent(),o.label=5;case 5:return n=r,[4,Promise.all(n.map((function(e){return i.landmarkNet.detectLandmarks(e)})))];case 6:return a=o.sent(),n.forEach((function(e){return e instanceof Kt&&e.dispose()})),[2,e.map((function(e,t){return wg(e,a[t])}))]}}))}))},t.prototype.withFaceExpressions=function(){return new _m(this,this.input)},t.prototype.withAgeAndGender=function(){return new Fm(this,this.input)},t.prototype.withFaceDescriptors=function(){return new Om(this,this.input)},t}(Mm),Bm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.run=function(){return qf(this,void 0,void 0,(function(){var e,t,n,r,a;return zf(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?(t=e.detection,this.input instanceof Kt?[4,Gp(this.input,[t])]:[3,3]):[2];case 2:return r=i.sent(),[3,5];case 3:return[4,Wp(this.input,[t])];case 4:r=i.sent(),i.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return a=i.sent(),n.forEach((function(e){return e instanceof Kt&&e.dispose()})),[2,wg(e,a)]}}))}))},t.prototype.withFaceExpressions=function(){return new Em(this,this.input)},t.prototype.withAgeAndGender=function(){return new Pm(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Nm(this,this.input)},t}(Mm),Um=function(e){function t(t,n){void 0===n&&(n=new Gg);var r=e.call(this)||this;return r.input=t,r.options=n,r}return Uf(t,e),t}(am),jm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.run=function(){return qf(this,void 0,void 0,(function(){var e,t,n,r;return zf(this,(function(a){switch(a.label){case 0:return t=(e=this).input,(n=e.options)instanceof jg?[4,xm.mtcnn.forward(t,n)]:[3,2];case 1:return[2,a.sent().map((function(e){return e.detection}))];case 2:if(!(r=n instanceof rm?function(e){return xm.tinyFaceDetector.locateFaces(e,n)}:n instanceof Gg?function(e){return xm.ssdMobilenetv1.locateFaces(e,n)}:n instanceof em?function(e){return xm.tinyYolov2.locateFaces(e,n)}:null))throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}}))}))},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise((function(t){return qf(e,void 0,void 0,(function(){var e;return zf(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map((function(e){return yp({},e)})))]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new Lm(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new Sm(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new Tm(this.runAndExtendWithFaceDetections(),this.input)},t}(Um),qm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uf(t,e),t.prototype.run=function(){return qf(this,void 0,void 0,(function(){var e,t;return zf(this,(function(n){switch(n.label){case 0:return[4,new jm(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach((function(e){e.score>t.score&&(t=e)})),[2,t]}}))}))},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise((function(t){return qf(e,void 0,void 0,(function(){var e;return zf(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?yp({},e):void 0)]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new Bm(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new Am(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new Rm(this.runAndExtendWithFaceDetection(),this.input)},t}(Um);function zm(e,t){var n=new Gf(t.width,t.height),r=n.width,a=n.height;if(r<=0||a<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:a}));if(Array.isArray(e))return e.map((function(e){return zm(e,{width:r,height:a})}));if(yg(e)){var i=e.detection.forSize(r,a),o=e.unshiftedLandmarks.forSize(i.box.width,i.box.height);return wg(yp(e,i),o)}return bp(e)?yp(e,e.detection.forSize(r,a)):e instanceof dp||e instanceof ip?e.forSize(r,a):e}function Wm(t){let n,r,a,i;return{c(){n=p("video"),a=v(),i=p("canvas"),n.muted=r=!0,x(n,"class","mediaCamera svelte-107ueaw"),x(n,"disablepictureinpicture","true"),n.playsInline=!0,x(i,"class","recognition svelte-107ueaw")},m(e,r){d(e,n,r),t[2](n),d(e,a,r),d(e,i,r),t[3](i)},p:e,i:e,o:e,d(e){e&&f(n),t[2](null),e&&f(a),e&&f(i),t[3](null)}}}function Gm(e,t,n){let r,a,i,o;xm.ssdMobilenetv1.loadFromUri("/weights").then((()=>Promise.all([xm.faceLandmark68Net.loadFromUri("/weights"),xm.faceExpressionNet.loadFromUri("/weights")]))).then((async function e(){try{if(i){const i=await function(e,t){return void 0===t&&(t=new Gg),new qm(e,t)}(a,s).withFaceLandmarks().withFaceExpressions(),c=o,l=function(e,t,n){void 0===n&&(n=!1);var r=n?Mp(t):t,a=r.width,i=r.height;return e.width=a,e.height=i,{width:a,height:i}}(c,a,!0);if(i){const e=zm(i,l);t=c,n=e,(Array.isArray(n)?n:[n]).forEach((function(e){var n=e instanceof ip?e.score:bp(e)?e.detection.score:void 0,r=e instanceof ip?e.box:bp(e)?e.detection.box:new np(e),a=n?""+Kf(n):void 0;new Op(r,{label:a}).draw(t)})),function(e,t,n,r){void 0===n&&(n=.1),(Array.isArray(t)?t:[t]).forEach((function(t){var a=t instanceof mg?t:t.expressions instanceof mg?t.expressions:void 0;if(!a)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var i=a.asSortedArray().filter((function(e){return e.probability>n})),o=bp(t)?t.detection.box.bottomLeft:r||new tp(0,0);new Pp(i.map((function(e){return e.expression+" ("+Kf(e.probability)+")"})),o).draw(e)}))}(c,e,.5)}r=setTimeout(e,500)}else r=setTimeout(e,500)}catch(e){console.error(e)}var t,n})).catch(console.error);const s=new Gg({minConfidence:.5});return navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}).then((e=>{i=e,n(0,a.srcObject=e,a),n(0,a.onloadedmetadata=()=>{a.play()},a)})),P((()=>{i&&i.getVideoTracks().forEach((e=>{e.stop()})),clearTimeout(r)})),[a,o,function(e){M[e?"unshift":"push"]((()=>{a=e,n(0,a)}))},function(e){M[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}!function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,a=function(){return"person "+r++};this._labeledDescriptors=n.map((function(e){if(e instanceof vp)return e;if(e instanceof Float32Array)return new vp(a(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new vp(a(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")}))}Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map((function(t){return function(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((function(e,t){return e-r[t]})).reduce((function(e,t){return e+Math.pow(t,2)}),0))}(t,e)})).reduce((function(e,t){return e+t}),0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map((function(n){var r=n.descriptors,a=n.label;return new gp(a,t.computeMeanDistance(e,r))})).reduce((function(e,t){return e.distance<t.distance?e:t}))},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new gp("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map((function(e){return e.toJSON()}))}},e.fromJSON=function(t){return new e(t.labeledDescriptors.map((function(e){return vp.fromJSON(e)})),t.distanceThreshold)}}();const Hm=class extends oe{constructor(e){var t;super(),document.getElementById("svelte-107ueaw-style")||((t=p("style")).id="svelte-107ueaw-style",t.textContent=".recognition.svelte-107ueaw,.mediaCamera.svelte-107ueaw{display:block;position:absolute;object-fit:contain;width:auto;height:100%}",h(document.head,t)),ie(this,e,Gm,Wm,o,{})}};function Vm(t){let n,r,a,i,o,s,c,l,u,g,m,b,y,w,C,k,S,A,_,E,I,T,R,F;return c=new Hm({}),{c(){n=p("div"),r=p("div"),a=p("video"),a.innerHTML='<source src="/videos/zoom_0.mp4" type="video/mp4"/>',o=v(),s=p("div"),ne(c.$$.fragment),l=v(),u=p("div"),g=p("video"),g.innerHTML='<source src="/videos/zoom_1.mp4" type="video/mp4"/>',b=v(),y=p("div"),w=p("video"),w.innerHTML='<source src="/videos/zoom_2.mp4" type="video/mp4"/>',k=v(),S=p("div"),A=p("video"),A.innerHTML='<source src="/videos/zoom_3.mp4" type="video/mp4"/>',E=v(),I=p("div"),T=p("video"),T.innerHTML='<source src="/videos/zoom_4.mp4" type="video/mp4"/>',x(a,"width","128"),x(a,"height","72"),x(a,"class","mediaVideo svelte-juby7p"),a.muted=i=!0,x(a,"preload","auto"),x(a,"disablepictureinpicture","true"),x(r,"class","media svelte-juby7p"),x(s,"class","media mediaWithCamera svelte-juby7p"),x(g,"width","128"),x(g,"height","72"),x(g,"class","mediaVideo svelte-juby7p"),g.muted=m=!0,x(g,"preload","auto"),x(g,"disablepictureinpicture","true"),x(u,"class","media svelte-juby7p"),x(w,"width","128"),x(w,"height","72"),x(w,"class","mediaVideo svelte-juby7p"),w.muted=C=!0,x(w,"preload","auto"),x(w,"disablepictureinpicture","true"),x(y,"class","media svelte-juby7p"),x(A,"width","128"),x(A,"height","72"),x(A,"class","mediaVideo svelte-juby7p"),A.muted=_=!0,x(A,"preload","auto"),x(A,"disablepictureinpicture","true"),x(S,"class","media svelte-juby7p"),x(T,"width","128"),x(T,"height","72"),x(T,"class","mediaVideo svelte-juby7p"),T.muted=R=!0,x(T,"preload","auto"),x(T,"disablepictureinpicture","true"),x(I,"class","media svelte-juby7p"),x(n,"class","videoContainer svelte-juby7p")},m(e,i){d(e,n,i),h(n,r),h(r,a),t[2](a),h(n,o),h(n,s),re(c,s,null),h(n,l),h(n,u),h(u,g),t[3](g),h(n,b),h(n,y),h(y,w),t[4](w),h(n,k),h(n,S),h(S,A),t[5](A),h(n,E),h(n,I),h(I,T),t[6](T),F=!0},p:e,i(e){F||(J(c.$$.fragment,e),F=!0)},o(e){Z(c.$$.fragment,e),F=!1},d(e){e&&f(n),t[2](null),ae(c),t[3](null),t[4](null),t[5](null),t[6](null)}}}function $m(e,t,n){let r=[];return[r,function(){for(const e of r)e.play()},function(e){M[e?"unshift":"push"]((()=>{r[0]=e,n(0,r)}))},function(e){M[e?"unshift":"push"]((()=>{r[1]=e,n(0,r)}))},function(e){M[e?"unshift":"push"]((()=>{r[2]=e,n(0,r)}))},function(e){M[e?"unshift":"push"]((()=>{r[3]=e,n(0,r)}))},function(e){M[e?"unshift":"push"]((()=>{r[4]=e,n(0,r)}))}]}const Xm=class extends oe{constructor(e){var t;super(),document.getElementById("svelte-juby7p-style")||((t=p("style")).id="svelte-juby7p-style",t.textContent=".videoContainer.svelte-juby7p{display:flex;justify-content:space-between;margin-bottom:4px;flex-direction:row;flex-wrap:wrap}.media.svelte-juby7p{width:33%;margin-bottom:2px}.mediaWithCamera.svelte-juby7p{position:relative;display:flex;justify-content:center;align-items:stretch}.mediaVideo.svelte-juby7p{object-fit:cover;width:100%;height:auto;display:block}",h(document.head,t)),ie(this,e,$m,Vm,o,{play:1})}get play(){return this.$$.ctx[1]}};function Km(t){let n,r,a,i;return{c(){n=p("video"),r=p("source"),r.src!==(a=t[1])&&x(r,"src",a),x(r,"type","video/mp4"),x(n,"width","1280"),x(n,"height","720"),x(n,"class","media svelte-1olkqc8"),n.muted=i=!0,x(n,"preload","auto"),x(n,"disablepictureinpicture","true")},m(e,a){d(e,n,a),h(n,r),t[3](n)},p:e,i:e,o:e,d(e){e&&f(n),t[3](null)}}}function Ym(e,t,n){let r;const a=`/videos/zoom_${Math.floor(5*Math.random())}.mp4`;return[r,a,function(){r.play()},function(e){M[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}const Jm=class extends oe{constructor(e){var t;super(),document.getElementById("svelte-1olkqc8-style")||((t=p("style")).id="svelte-1olkqc8-style",t.textContent=".media.svelte-1olkqc8{max-width:100%;height:auto}",h(document.head,t)),ie(this,e,Ym,Km,o,{play:2})}get play(){return this.$$.ctx[2]}};function Zm(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}let Qm;function ev(){return Qm||(Qm=function(e,t){const n=indexedDB.open("keyval-store");n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=Zm(n);return(e,n)=>r.then((r=>n(r.transaction(t,e).objectStore(t))))}(0,"keyval")),Qm}function tv(e,t=ev()){return t("readonly",(t=>Zm(t.get(e))))}var nv=__webpack_require__(299);function rv(e){let t,n,r,a,i,o,s,c,l,u,g,m,b,w,C,k,S,A,_,E,T,R,F,P,D,O,N,M,L;return s=new Hm({}),{c(){t=p("div"),n=p("div"),r=p("video"),r.innerHTML='<source src="/videos/zoom_0.mp4" type="video/mp4"/>',i=v(),o=p("div"),ne(s.$$.fragment),c=v(),l=p("div"),u=p("video"),u.innerHTML='<source src="/videos/zoom_1.mp4" type="video/mp4"/>',m=v(),b=p("div"),w=p("video"),w.innerHTML='<source src="/videos/zoom_2.mp4" type="video/mp4"/>',k=v(),S=p("div"),A=p("video"),A.innerHTML='<source src="/videos/zoom_3.mp4" type="video/mp4"/>',E=v(),T=p("div"),R=p("video"),R.innerHTML='<source src="/videos/zoom_4.mp4" type="video/mp4"/>',P=v(),D=p("canvas"),x(r,"width","128"),x(r,"height","72"),x(r,"class","mediaVideo svelte-1k3p3lu"),r.muted=a=!0,x(r,"preload","auto"),x(r,"disablepictureinpicture","true"),x(n,"class","media svelte-1k3p3lu"),x(o,"class","media mediaWithCamera svelte-1k3p3lu"),x(u,"width","128"),x(u,"height","72"),x(u,"class","mediaVideo svelte-1k3p3lu"),u.muted=g=!0,x(u,"preload","auto"),x(u,"disablepictureinpicture","true"),x(l,"class","media svelte-1k3p3lu"),x(w,"width","128"),x(w,"height","72"),x(w,"class","mediaVideo svelte-1k3p3lu"),w.muted=C=!0,x(w,"preload","auto"),x(w,"disablepictureinpicture","true"),x(b,"class","media svelte-1k3p3lu"),x(A,"width","128"),x(A,"height","72"),x(A,"class","mediaVideo svelte-1k3p3lu"),A.muted=_=!0,x(A,"preload","auto"),x(A,"disablepictureinpicture","true"),x(S,"class","media svelte-1k3p3lu"),x(R,"width","128"),x(R,"height","72"),x(R,"class","mediaVideo svelte-1k3p3lu"),R.muted=F=!0,x(R,"preload","auto"),x(R,"disablepictureinpicture","true"),x(T,"class","media svelte-1k3p3lu"),x(t,"class","videoContainer svelte-1k3p3lu"),x(D,"width",e[0]),x(D,"height",e[3]),x(D,"class","svelte-1k3p3lu"),q((()=>e[15].call(D)))},m(a,g){d(a,t,g),h(t,n),h(n,r),e[10](r),h(t,i),h(t,o),re(s,o,null),h(t,c),h(t,l),h(l,u),e[11](u),h(t,m),h(t,b),h(b,w),e[12](w),h(t,k),h(t,S),h(S,A),e[13](A),h(t,E),h(t,T),h(T,R),e[14](R),d(a,P,g),d(a,D,g),O=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=p("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=I();let a;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",a=y(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{a=y(n.contentWindow,"resize",t)}),h(e,n),()=>{(r||a&&n.contentWindow)&&a(),f(n)}}(D,e[15].bind(D)),e[16](D),N=!0,M||(L=y(window,"keydown",e[4]),M=!0)},p(e,[t]){(!N||1&t)&&x(D,"width",e[0]),(!N||8&t)&&x(D,"height",e[3])},i(e){N||(J(s.$$.fragment,e),N=!0)},o(e){Z(s.$$.fragment,e),N=!1},d(n){n&&f(t),e[10](null),ae(s),e[11](null),e[12](null),e[13](null),e[14](null),n&&f(P),n&&f(D),O(),e[16](null),M=!1,L()}}}function av(e,t,n){let r,a,i,o,s,{numPages:c}=t,{currentPageNum:l=1}=t,u=[],h=100;function d(e){s&&s.getPage(e).then((e=>{o=e,f()}))}function f(){if(o){const e=o.getViewport({scale:1}),t=a.width/e.width;n(3,h=e.height*t);const r={canvasContext:a.getContext("2d"),viewport:o.getViewport({scale:t})};o.render(r)}}return tv("pdf").then((e=>{r=e;let t=new FileReader;t.onload=function(e){const t=new Uint8Array(e.target.result);nv.getDocument(t).promise.then((e=>{s=e,n(6,c=s.numPages),d(l)}))},t.readAsArrayBuffer(r)})),e.$$set=e=>{"numPages"in e&&n(6,c=e.numPages),"currentPageNum"in e&&n(5,l=e.currentPageNum)},e.$$.update=()=>{1&e.$$.dirty&&f(),32&e.$$.dirty&&d(l)},[i,u,a,h,function(e){37===e.keyCode&&1!==l&&n(5,l--,l),39===e.keyCode&&l!==c&&n(5,l++,l)},l,c,function(){n(5,l++,l)},function(){n(5,l--,l)},function(){for(const e of u)e.play()},function(e){M[e?"unshift":"push"]((()=>{u[0]=e,n(1,u)}))},function(e){M[e?"unshift":"push"]((()=>{u[1]=e,n(1,u)}))},function(e){M[e?"unshift":"push"]((()=>{u[2]=e,n(1,u)}))},function(e){M[e?"unshift":"push"]((()=>{u[3]=e,n(1,u)}))},function(e){M[e?"unshift":"push"]((()=>{u[4]=e,n(1,u)}))},function(){i=this.offsetWidth,n(0,i)},function(e){M[e?"unshift":"push"]((()=>{a=e,n(2,a)}))}]}const iv=class extends oe{constructor(e){var t;super(),document.getElementById("svelte-1k3p3lu-style")||((t=p("style")).id="svelte-1k3p3lu-style",t.textContent="canvas.svelte-1k3p3lu{width:100%}.videoContainer.svelte-1k3p3lu{display:flex;flex-flow:row nowrap;justify-content:space-between;margin-bottom:4px}.media.svelte-1k3p3lu{width:14.2%}.mediaVideo.svelte-1k3p3lu{object-fit:cover;width:100%;height:auto;display:block}.mediaWithCamera.svelte-1k3p3lu{position:relative;display:flex;justify-content:center;align-items:stretch}",h(document.head,t)),ie(this,e,av,rv,o,{numPages:6,currentPageNum:5,next:7,prev:8,play:9})}get next(){return this.$$.ctx[7]}get prev(){return this.$$.ctx[8]}get play(){return this.$$.ctx[9]}},{document:ov}=Q;function sv(e){let t,n;return{c(){t=p("div"),n=m(e[1]),x(t,"class","startTimeCount svelte-1dnd8pa")},m(e,r){d(e,t,r),h(t,n)},p(e,t){2&t&&S(n,e[1])},d(e){e&&f(t)}}}function cv(e){let t,n,r,a;function i(t){e[9](t)}function o(t){e[10](t)}let s={};return void 0!==e[3]&&(s.numPages=e[3]),void 0!==e[4]&&(s.currentPageNum=e[4]),t=new iv({props:s}),M.push((()=>te(t,"numPages",i))),M.push((()=>te(t,"currentPageNum",o))),e[11](t),{c(){ne(t.$$.fragment)},m(e,n){re(t,e,n),a=!0},p(e,a){const i={};!n&&8&a&&(n=!0,i.numPages=e[3],z((()=>n=!1))),!r&&16&a&&(r=!0,i.currentPageNum=e[4],z((()=>r=!1))),t.$set(i)},i(e){a||(J(t.$$.fragment,e),a=!0)},o(e){Z(t.$$.fragment,e),a=!1},d(n){e[11](null),ae(t,n)}}}function lv(e){let t,n;return t=new Xm({props:{}}),e[8](t),{c(){ne(t.$$.fragment)},m(e,r){re(t,e,r),n=!0},p(e,n){t.$set({})},i(e){n||(J(t.$$.fragment,e),n=!0)},o(e){Z(t.$$.fragment,e),n=!1},d(n){e[8](null),ae(t,n)}}}function uv(e){let t,n;return t=new Jm({props:{}}),e[7](t),{c(){ne(t.$$.fragment)},m(e,r){re(t,e,r),n=!0},p(e,n){t.$set({})},i(e){n||(J(t.$$.fragment,e),n=!0)},o(e){Z(t.$$.fragment,e),n=!1},d(n){e[7](null),ae(t,n)}}}function hv(e){let t,n,r,a,i,o,s=e[3]>1&&dv(e),c=e[3]>1&&fv(e);return{c(){s&&s.c(),t=v(),n=m(e[4]),r=m(" / "),a=m(e[3]),i=v(),c&&c.c(),o=b()},m(e,l){s&&s.m(e,l),d(e,t,l),d(e,n,l),d(e,r,l),d(e,a,l),d(e,i,l),c&&c.m(e,l),d(e,o,l)},p(e,r){e[3]>1?s?s.p(e,r):(s=dv(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),16&r&&S(n,e[4]),8&r&&S(a,e[3]),e[3]>1?c?c.p(e,r):(c=fv(e),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},d(e){s&&s.d(e),e&&f(t),e&&f(n),e&&f(r),e&&f(a),e&&f(i),c&&c.d(e),e&&f(o)}}}function dv(e){let t,n,r,a,o;return{c(){t=p("button"),n=m("←"),t.disabled=r=1===e[4]},m(r,s){d(r,t,s),h(t,n),a||(o=y(t,"click",(function(){i(e[0].prev)&&e[0].prev.apply(this,arguments)})),a=!0)},p(n,a){e=n,16&a&&r!==(r=1===e[4])&&(t.disabled=r)},d(e){e&&f(t),a=!1,o()}}}function fv(e){let t,n,r,a,o;return{c(){t=p("button"),n=m("→"),t.disabled=r=e[4]===e[3]},m(r,s){d(r,t,s),h(t,n),a||(o=y(t,"click",(function(){i(e[0].next)&&e[0].next.apply(this,arguments)})),a=!0)},p(n,a){e=n,24&a&&r!==(r=e[4]===e[3])&&(t.disabled=r)},d(e){e&&f(t),a=!1,o()}}}function pv(e){let t,n,r,a,i,o,s,c,l,u,g,b,w,C,k,A,_,E,I,T,R,F,P=Math.floor(e[2]/60).toString().padStart(2,"0")+"",D=(e[2]%60).toString().padStart(2,"0")+"",O=e[1]&&sv(e);const N=[uv,lv,cv],M=[];function L(e,t){return"one"===e[5]?0:"all"===e[5]?1:"demo"===e[5]?2:-1}~(c=L(e))&&(l=M[c]=N[c](e));let B=e[3]&&hv(e);return{c(){t=p("style"),t.textContent="html {\n      background-color: #000;\n    }",n=v(),r=p("main"),a=p("h1"),a.textContent="PITCH TUTOR",i=v(),o=p("div"),O&&O.c(),s=v(),l&&l.c(),u=v(),g=p("div"),b=p("div"),B&&B.c(),w=v(),C=p("div"),k=m(P),A=m(":"),_=m(D),E=v(),I=p("button"),I.textContent="Выйти",x(a,"class","svelte-1dnd8pa"),x(o,"class","video svelte-1dnd8pa"),x(b,"class","controlsPages svelte-1dnd8pa"),x(I,"type","button"),x(I,"class","exit svelte-1dnd8pa"),x(C,"class","controlsRight svelte-1dnd8pa"),x(g,"class","controls svelte-1dnd8pa"),x(r,"class","svelte-1dnd8pa")},m(l,f){h(ov.head,t),d(l,n,f),d(l,r,f),h(r,a),h(r,i),h(r,o),O&&O.m(o,null),h(o,s),~c&&M[c].m(o,null),h(r,u),h(r,g),h(g,b),B&&B.m(b,null),h(g,w),h(g,C),h(C,k),h(C,A),h(C,_),h(C,E),h(C,I),T=!0,R||(F=y(I,"click",e[6]),R=!0)},p(e,[t]){e[1]?O?O.p(e,t):(O=sv(e),O.c(),O.m(o,s)):O&&(O.d(1),O=null);let n=c;c=L(e),c===n?~c&&M[c].p(e,t):(l&&(K(),Z(M[n],1,1,(()=>{M[n]=null})),Y()),~c?(l=M[c],l?l.p(e,t):(l=M[c]=N[c](e),l.c()),J(l,1),l.m(o,null)):l=null),e[3]?B?B.p(e,t):(B=hv(e),B.c(),B.m(b,null)):B&&(B.d(1),B=null),(!T||4&t)&&P!==(P=Math.floor(e[2]/60).toString().padStart(2,"0")+"")&&S(k,P),(!T||4&t)&&D!==(D=(e[2]%60).toString().padStart(2,"0")+"")&&S(_,D)},i(e){T||(J(l),T=!0)},o(e){Z(l),T=!1},d(e){f(t),e&&f(n),e&&f(r),O&&O.d(),~c&&M[c].d(),B&&B.d(),R=!1,F()}}}function gv(e,t,n){let r,a,i,o,s,c,l,u=5;const h=Ne((e=>{n(2,a=60*+e.query.time),n(5,l=e.query.mode)}));function d(){n(1,u--,u),u?i=setTimeout(d,1e3):(r.play(),f())}function f(){n(2,a--,a),a&&(o=setTimeout(f,1e3))}return F((async()=>{document.body.classList.add("pitch"),d()})),P((()=>{document.body.classList.remove("pitch"),h(),clearTimeout(o),clearTimeout(i)})),[r,u,a,s,c,l,function(){Av.push("/feedback")},function(e){M[e?"unshift":"push"]((()=>{r=e,n(0,r)}))},function(e){M[e?"unshift":"push"]((()=>{r=e,n(0,r)}))},function(e){s=e,n(3,s)},function(e){c=e,n(4,c)},function(e){M[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}function mv(t){let n,r,i,o,s,c,l,u,g,b,C,S,_,E,I,T,R,F,P,D,O,N,M,L,B,U;return{c(){n=p("h1"),n.textContent="PITCH TUTOR",r=v(),i=p("h2"),i.textContent="Настройте режим вашей тренировки",o=v(),s=p("p"),s.textContent="Описание того зачем ставить счетчик и какой лучше установить. Что-то про особенности питчинга и важности времени.",c=v(),l=p("form"),u=p("div"),g=p("label"),g.innerHTML='<input type="checkbox" name="counter" value="1"/> \n      <div class="optionsLabel svelte-1kl89tz">Показывать<br/>счетчик</div>',b=v(),C=p("label"),S=p("input"),_=v(),E=p("div"),E.textContent="3 минуты",I=v(),T=p("label"),R=p("input"),F=v(),P=p("div"),P.textContent="Свое время",D=v(),O=p("div"),N=p("button"),M=m("Начать тренировку"),x(n,"class","svelte-1kl89tz"),x(i,"class","svelte-1kl89tz"),x(s,"class","description svelte-1kl89tz"),x(g,"class","optionsItem svelte-1kl89tz"),x(S,"type","checkbox"),x(S,"name","defaultTime"),x(E,"class","optionsLabel svelte-1kl89tz"),x(C,"class","optionsItem svelte-1kl89tz"),x(R,"type","number"),R.disabled=t[0],x(P,"class","optionsLabel svelte-1kl89tz"),x(T,"class","optionsItem svelte-1kl89tz"),x(u,"class","options svelte-1kl89tz"),x(N,"type","submit"),x(N,"class","btn"),N.disabled=L=!t[2],x(O,"class","start svelte-1kl89tz")},m(e,a){d(e,n,a),d(e,r,a),d(e,i,a),d(e,o,a),d(e,s,a),d(e,c,a),d(e,l,a),h(l,u),h(u,g),h(u,b),h(u,C),h(C,S),S.checked=t[0],h(C,_),h(C,E),h(u,I),h(u,T),h(T,R),A(R,t[1]),h(T,F),h(T,P),h(l,D),h(l,O),h(O,N),h(N,M),B||(U=[y(S,"change",t[4]),y(R,"input",t[5]),y(l,"submit",w(t[3]))],B=!0)},p(e,[t]){1&t&&(S.checked=e[0]),1&t&&(R.disabled=e[0]),2&t&&k(R.value)!==e[1]&&A(R,e[1]),4&t&&L!==(L=!e[2])&&(N.disabled=L)},i:e,o:e,d(e){e&&f(n),e&&f(r),e&&f(i),e&&f(o),e&&f(s),e&&f(c),e&&f(l),B=!1,a(U)}}}function vv(e,t,n){let r,a,i,o=!1;return P(Ne((e=>{r=e}))),e.$$.update=()=>{3&e.$$.dirty&&n(2,o=a||i>0)},[a,i,o,function(){const e=a?3:i;Av.push(`/pitch?mode=${r.query.mode}&time=${e}${this.counter.checked?"&useCounter=1":""}`)},function(){a=this.checked,n(0,a)},function(){i=k(this.value),n(1,i)}]}var bv=__webpack_require__(16),yv=__webpack_require__.n(bv);function wv(e){let t;function n(e,t){return e[0]?xv:Cv}let r=n(e),a=r(e);return{c(){t=p("div"),a.c(),x(t,"class","upload svelte-138kr2i")},m(e,n){d(e,t,n),a.m(t,null)},p(e,i){r===(r=n(e))&&a?a.p(e,i):(a.d(1),a=r(e),a&&(a.c(),a.m(t,null)))},d(e){e&&f(t),a.d()}}}function xv(t){let n,r,a,i,o,s;return{c(){n=p("a"),n.textContent="✕",a=v(),i=p("canvas"),x(n,"href",r="#"),x(n,"class","removePdf svelte-138kr2i"),x(i,"class","pdfCanvas svelte-138kr2i")},m(e,r){d(e,n,r),d(e,a,r),d(e,i,r),t[12](i),o||(s=y(n,"click",w(t[4])),o=!0)},p:e,d(e){e&&f(n),e&&f(a),e&&f(i),t[12](null),o=!1,s()}}}function Cv(t){let n,r,a,i;return{c(){n=m("Загрузите презентацию\n            "),r=p("input"),x(r,"type","file"),x(r,"accept","application/pdf"),x(r,"class","svelte-138kr2i")},m(e,o){d(e,n,o),d(e,r,o),a||(i=y(r,"change",t[11]),a=!0)},p:e,d(e){e&&f(n),e&&f(r),a=!1,i()}}}function kv(t){let n,r,i,o,s,c,l,u,b,C,k,S,A,_,E,I,T,R,F,P,D,O,N,M,L,B,U,j,q,z,W,G,H,V,$,X,K,Y,J,Z,Q,ee,te,ne,re,ae,ie,oe,se,ce,le,ue,he,de,fe,pe,ge,me,ve,be,ye,we,xe,Ce,ke,Se,Ae,_e,Ee="demo"===t[3]&&wv(t);return{c(){n=p("h1"),n.textContent="PITCH TUTOR",r=v(),i=p("h2"),i.textContent="Выберите режим тренировки",o=v(),s=p("form"),c=p("div"),l=p("label"),u=g("svg"),b=g("rect"),C=g("circle"),k=g("circle"),S=g("rect"),A=g("path"),_=g("rect"),E=g("rect"),I=v(),T=p("span"),R=p("input"),F=m(" Один на один"),P=v(),D=p("label"),O=g("svg"),N=g("rect"),M=g("circle"),L=g("circle"),B=g("rect"),U=g("path"),j=g("rect"),q=g("rect"),z=g("rect"),W=g("rect"),G=g("rect"),H=g("rect"),V=g("rect"),$=v(),X=p("span"),K=p("input"),Y=m(" Все на одного"),J=v(),Z=p("div"),Q=p("label"),ee=g("svg"),te=g("rect"),ne=g("rect"),re=g("rect"),ae=g("rect"),ie=g("rect"),oe=g("rect"),se=g("rect"),ce=g("rect"),le=g("circle"),ue=g("circle"),he=g("rect"),de=g("path"),fe=g("rect"),pe=g("path"),ge=v(),me=p("span"),ve=p("input"),be=m("\n          Презентация"),ye=v(),Ee&&Ee.c(),we=v(),xe=p("div"),Ce=p("button"),ke=m("Установить время"),x(n,"class","svelte-138kr2i"),x(i,"class","svelte-138kr2i"),x(b,"width","333"),x(b,"height","185.462"),x(b,"fill","black"),x(C,"cx","116.897"),x(C,"cy","157.597"),x(C,"r","2.42812"),x(C,"fill","#C4C4C4"),x(k,"cx","116.897"),x(k,"cy","157.597"),x(k,"r","1.69687"),x(k,"fill","#FF0000"),x(k,"stroke","black"),x(S,"x","46.25"),x(S,"y","154.938"),x(S,"width","6.24375"),x(S,"height","4.625"),x(S,"rx","2.3125"),x(S,"fill","#23D959"),x(A,"d","M49.6099 155.74C49.4146 155.545 49.0981 155.545 48.9028 155.74L45.7208 158.922C45.5256 159.117 45.5256 159.434 45.7208 159.629C45.9161 159.825 46.2327 159.825 46.4279 159.629L49.2563 156.801L52.0848 159.629C52.28 159.825 52.5966 159.825 52.7919 159.629C52.9871 159.434 52.9871 159.117 52.7919 158.922L49.6099 155.74ZM49.7563 158.406L49.7563 156.094L48.7563 156.094L48.7563 158.406L49.7563 158.406Z"),x(A,"fill","black"),x(_,"x","266.863"),x(_,"y","154.706"),x(_,"width","19.8875"),x(_,"height","6.475"),x(_,"rx","3.2375"),x(_,"fill","#FF0000"),x(E,"x","46.25"),x(E,"y","20.1187"),x(E,"width","240.5"),x(E,"height","128.575"),x(E,"fill","#C4C4C4"),x(u,"class","preview svelte-138kr2i"),x(u,"width","333"),x(u,"viewBox","0 0 333 186"),x(u,"fill","none"),x(u,"xmlns","http://www.w3.org/2000/svg"),x(R,"type","radio"),x(R,"name","mode"),R.__value="one",R.value=R.__value,x(R,"class","svelte-138kr2i"),t[8][0].push(R),x(T,"class","modeTitle svelte-138kr2i"),x(l,"class","modesItem svelte-138kr2i"),x(N,"width","333"),x(N,"height","185.462"),x(N,"fill","black"),x(M,"cx","116.897"),x(M,"cy","157.597"),x(M,"r","2.42812"),x(M,"fill","#C4C4C4"),x(L,"cx","116.897"),x(L,"cy","157.597"),x(L,"r","1.69687"),x(L,"fill","#FF0000"),x(L,"stroke","black"),x(B,"x","46.25"),x(B,"y","154.938"),x(B,"width","6.24375"),x(B,"height","4.625"),x(B,"rx","2.3125"),x(B,"fill","#23D959"),x(U,"d","M49.6099 155.74C49.4146 155.545 49.0981 155.545 48.9028 155.74L45.7208 158.922C45.5256 159.117 45.5256 159.434 45.7208 159.629C45.9161 159.825 46.2327 159.825 46.4279 159.629L49.2563 156.801L52.0848 159.629C52.28 159.825 52.5966 159.825 52.7919 159.629C52.9871 159.434 52.9871 159.117 52.7919 158.922L49.6099 155.74ZM49.7563 158.406L49.7563 156.094L48.7563 156.094L48.7563 158.406L49.7563 158.406Z"),x(U,"fill","black"),x(j,"x","266.863"),x(j,"y","154.706"),x(j,"width","19.8875"),x(j,"height","6.475"),x(j,"rx","3.2375"),x(j,"fill","#FF0000"),x(q,"x","46.25"),x(q,"y","32.375"),x(q,"width","80.0125"),x(q,"height","58.0438"),x(q,"fill","#C4C4C4"),x(z,"x","46.25"),x(z,"y","90.6499"),x(z,"width","80.0125"),x(z,"height","58.0438"),x(z,"fill","#C4C4C4"),x(W,"x","126.494"),x(W,"y","32.375"),x(W,"width","80.0125"),x(W,"height","58.0438"),x(W,"fill","#C4C4C4"),x(G,"x","126.494"),x(G,"y","90.6499"),x(G,"width","80.0125"),x(G,"height","58.0438"),x(G,"fill","#C4C4C4"),x(H,"x","206.737"),x(H,"y","32.375"),x(H,"width","80.0125"),x(H,"height","58.0438"),x(H,"fill","#C4C4C4"),x(V,"x","206.737"),x(V,"y","90.6499"),x(V,"width","80.0125"),x(V,"height","58.0438"),x(V,"fill","#C4C4C4"),x(O,"class","preview svelte-138kr2i"),x(O,"width","333"),x(O,"viewBox","0 0 333 186"),x(O,"fill","none"),x(O,"xmlns","http://www.w3.org/2000/svg"),x(K,"type","radio"),x(K,"name","mode"),K.__value="all",K.value=K.__value,x(K,"class","svelte-138kr2i"),t[8][0].push(K),x(X,"class","modeTitle svelte-138kr2i"),x(D,"class","modesItem svelte-138kr2i"),x(te,"width","333"),x(te,"height","185.462"),x(te,"fill","black"),x(ne,"x","46.25"),x(ne,"y","41.625"),x(ne,"width","240.5"),x(ne,"height","128.575"),x(ne,"fill","#C4C4C4"),x(re,"x","46.75"),x(re,"y","8.82495"),x(re,"width","39.0062"),x(re,"height","28.1375"),x(re,"fill","#C4C4C4"),x(re,"stroke","black"),x(ae,"x","86.7559"),x(ae,"y","8.82495"),x(ae,"width","39.2375"),x(ae,"height","28.1375"),x(ae,"fill","#C4C4C4"),x(ae,"stroke","black"),x(ie,"x","126.994"),x(ie,"y","8.82495"),x(ie,"width","39.0062"),x(ie,"height","28.1375"),x(ie,"fill","#C4C4C4"),x(ie,"stroke","black"),x(oe,"x","167"),x(oe,"y","8.82495"),x(oe,"width","39.0062"),x(oe,"height","28.1375"),x(oe,"fill","#C4C4C4"),x(oe,"stroke","black"),x(se,"x","207.006"),x(se,"y","8.82495"),x(se,"width","39.2375"),x(se,"height","28.1375"),x(se,"fill","#C4C4C4"),x(se,"stroke","black"),x(ce,"x","247.244"),x(ce,"y","8.82495"),x(ce,"width","39.0062"),x(ce,"height","28.1375"),x(ce,"fill","#C4C4C4"),x(ce,"stroke","black"),x(le,"cx","116.897"),x(le,"cy","176.097"),x(le,"r","2.42812"),x(le,"fill","#C4C4C4"),x(ue,"cx","116.897"),x(ue,"cy","176.097"),x(ue,"r","1.69687"),x(ue,"fill","#FF0000"),x(ue,"stroke","black"),x(he,"x","46.25"),x(he,"y","173.438"),x(he,"width","6.24375"),x(he,"height","4.625"),x(he,"rx","2.3125"),x(he,"fill","#23D959"),x(de,"d","M49.6094 174.24C49.4142 174.045 49.0976 174.045 48.9023 174.24L45.7203 177.422C45.5251 177.617 45.5251 177.934 45.7203 178.129C45.9156 178.325 46.2322 178.325 46.4274 178.129L49.2559 175.301L52.0843 178.129C52.2795 178.325 52.5961 178.325 52.7914 178.129C52.9867 177.934 52.9867 177.617 52.7914 177.422L49.6094 174.24ZM49.7559 176.906L49.7559 174.594L48.7559 174.594L48.7559 176.906L49.7559 176.906Z"),x(de,"fill","black"),x(fe,"x","266.862"),x(fe,"y","173.206"),x(fe,"width","19.8875"),x(fe,"height","6.475"),x(fe,"rx","3.2375"),x(fe,"fill","#FF0000"),x(pe,"d","M122.259 110H120.562V98.5918H114.252V110H112.564V97.2031H122.259V110ZM133.113 105.351C133.113 106.798 132.782 107.964 132.12 108.849C131.458 109.733 130.562 110.176 129.431 110.176C128.276 110.176 127.368 109.81 126.706 109.077V113.656H125.08V100.49H126.565L126.645 101.545C127.307 100.725 128.227 100.314 129.404 100.314C130.547 100.314 131.449 100.745 132.111 101.606C132.779 102.468 133.113 103.666 133.113 105.201V105.351ZM131.487 105.166C131.487 104.094 131.259 103.247 130.802 102.626C130.345 102.005 129.718 101.694 128.921 101.694C127.937 101.694 127.198 102.131 126.706 103.004V107.548C127.192 108.415 127.937 108.849 128.938 108.849C129.718 108.849 130.336 108.541 130.793 107.926C131.256 107.305 131.487 106.385 131.487 105.166ZM139.134 110.176C137.845 110.176 136.796 109.754 135.987 108.91C135.179 108.061 134.774 106.927 134.774 105.509V105.21C134.774 104.267 134.953 103.426 135.311 102.688C135.674 101.943 136.178 101.363 136.822 100.947C137.473 100.525 138.176 100.314 138.932 100.314C140.168 100.314 141.129 100.722 141.814 101.536C142.5 102.351 142.843 103.517 142.843 105.034V105.711H136.4C136.424 106.648 136.696 107.407 137.218 107.987C137.745 108.562 138.413 108.849 139.222 108.849C139.796 108.849 140.282 108.731 140.681 108.497C141.079 108.263 141.428 107.952 141.727 107.565L142.72 108.339C141.923 109.563 140.728 110.176 139.134 110.176ZM138.932 101.65C138.275 101.65 137.725 101.891 137.279 102.371C136.834 102.846 136.559 103.514 136.453 104.375H141.217V104.252C141.17 103.426 140.947 102.787 140.549 102.336C140.15 101.879 139.611 101.65 138.932 101.65ZM149.962 103.092C149.962 102.646 149.792 102.295 149.452 102.037C149.112 101.773 148.646 101.642 148.055 101.642C147.48 101.642 147 101.791 146.613 102.09C146.232 102.389 146.042 102.74 146.042 103.145H144.425C144.425 102.318 144.771 101.642 145.462 101.114C146.153 100.587 147.018 100.323 148.055 100.323C149.168 100.323 150.035 100.563 150.656 101.044C151.277 101.519 151.588 102.198 151.588 103.083C151.588 103.511 151.459 103.903 151.201 104.261C150.943 104.618 150.577 104.902 150.103 105.113C151.21 105.488 151.764 106.227 151.764 107.328C151.764 108.201 151.427 108.893 150.753 109.402C150.079 109.912 149.18 110.167 148.055 110.167C146.959 110.167 146.054 109.9 145.339 109.367C144.63 108.828 144.275 108.102 144.275 107.188H145.893C145.893 107.65 146.098 108.049 146.508 108.383C146.924 108.711 147.439 108.875 148.055 108.875C148.676 108.875 149.177 108.731 149.558 108.444C149.938 108.157 150.129 107.785 150.129 107.328C150.129 106.795 149.968 106.414 149.646 106.186C149.329 105.951 148.834 105.834 148.16 105.834H146.534V104.463H148.301C149.408 104.434 149.962 103.977 149.962 103.092ZM157.819 110.176C156.53 110.176 155.481 109.754 154.673 108.91C153.864 108.061 153.46 106.927 153.46 105.509V105.21C153.46 104.267 153.639 103.426 153.996 102.688C154.359 101.943 154.863 101.363 155.508 100.947C156.158 100.525 156.861 100.314 157.617 100.314C158.854 100.314 159.814 100.722 160.5 101.536C161.186 102.351 161.528 103.517 161.528 105.034V105.711H155.086C155.109 106.648 155.382 107.407 155.903 107.987C156.431 108.562 157.099 108.849 157.907 108.849C158.481 108.849 158.968 108.731 159.366 108.497C159.765 108.263 160.113 107.952 160.412 107.565L161.405 108.339C160.608 109.563 159.413 110.176 157.819 110.176ZM157.617 101.65C156.961 101.65 156.41 101.891 155.965 102.371C155.52 102.846 155.244 103.514 155.139 104.375H159.902V104.252C159.855 103.426 159.633 102.787 159.234 102.336C158.836 101.879 158.297 101.65 157.617 101.65ZM171.188 110H169.562V105.939H165.193V110H163.559V100.49H165.193V104.612H169.562V100.49H171.188V110ZM180.873 101.809H177.683V110H176.057V101.809H172.928V100.49H180.873V101.809ZM188.186 110C188.092 109.812 188.016 109.479 187.957 108.998C187.201 109.783 186.299 110.176 185.25 110.176C184.312 110.176 183.542 109.912 182.938 109.385C182.341 108.852 182.042 108.178 182.042 107.363C182.042 106.373 182.417 105.605 183.167 105.061C183.923 104.51 184.983 104.234 186.349 104.234H187.931V103.487C187.931 102.919 187.761 102.468 187.421 102.134C187.081 101.794 186.58 101.624 185.918 101.624C185.338 101.624 184.852 101.771 184.459 102.063C184.066 102.356 183.87 102.711 183.87 103.127H182.235C182.235 102.652 182.402 102.195 182.736 101.756C183.076 101.311 183.533 100.959 184.107 100.701C184.688 100.443 185.323 100.314 186.015 100.314C187.11 100.314 187.969 100.59 188.59 101.141C189.211 101.686 189.533 102.438 189.557 103.399V107.776C189.557 108.649 189.668 109.344 189.891 109.859V110H188.186ZM185.487 108.761C185.997 108.761 186.48 108.629 186.938 108.365C187.395 108.102 187.726 107.759 187.931 107.337V105.386H186.656C184.664 105.386 183.668 105.969 183.668 107.135C183.668 107.645 183.838 108.043 184.178 108.33C184.518 108.617 184.954 108.761 185.487 108.761ZM192.246 100.49H193.881V108.673H198.258V100.49H199.884V108.673H201.018L200.859 112.821H199.4V110H192.246V100.49ZM208.928 100.49H210.554V110H208.928V103.065L204.542 110H202.916V100.49H204.542V107.434L208.928 100.49ZM220.433 100.49V110H218.798V106.3H216.346L214.104 110H212.347L214.737 106.054C214.128 105.831 213.659 105.488 213.331 105.025C213.009 104.557 212.848 104.012 212.848 103.391C212.848 102.523 213.173 101.826 213.823 101.299C214.474 100.766 215.344 100.496 216.434 100.49H220.433ZM214.482 103.408C214.482 103.871 214.641 104.246 214.957 104.533C215.273 104.814 215.692 104.958 216.214 104.964H218.798V101.809H216.46C215.856 101.809 215.376 101.958 215.019 102.257C214.661 102.55 214.482 102.934 214.482 103.408Z"),x(pe,"fill","black"),x(ee,"class","preview svelte-138kr2i"),x(ee,"width","333"),x(ee,"viewBox","0 0 333 186"),x(ee,"fill","none"),x(ee,"xmlns","http://www.w3.org/2000/svg"),x(ve,"type","radio"),x(ve,"id","demo"),x(ve,"name","mode"),ve.__value="demo",ve.value=ve.__value,x(ve,"class","svelte-138kr2i"),t[8][0].push(ve),x(me,"class","modeTitle svelte-138kr2i"),x(Z,"class","modesItem svelte-138kr2i"),x(c,"class","modes svelte-138kr2i"),x(Ce,"type","submit"),x(Ce,"class","btn"),Ce.disabled=Se=!t[3]||"demo"===t[3]&&!t[0],x(xe,"class","time svelte-138kr2i")},m(e,a){d(e,n,a),d(e,r,a),d(e,i,a),d(e,o,a),d(e,s,a),h(s,c),h(c,l),h(l,u),h(u,b),h(u,C),h(u,k),h(u,S),h(u,A),h(u,_),h(u,E),h(l,I),h(l,T),h(T,R),R.checked=R.__value===t[3],h(T,F),h(c,P),h(c,D),h(D,O),h(O,N),h(O,M),h(O,L),h(O,B),h(O,U),h(O,j),h(O,q),h(O,z),h(O,W),h(O,G),h(O,H),h(O,V),h(D,$),h(D,X),h(X,K),K.checked=K.__value===t[3],h(X,Y),h(c,J),h(c,Z),h(Z,Q),h(Q,ee),h(ee,te),h(ee,ne),h(ee,re),h(ee,ae),h(ee,ie),h(ee,oe),h(ee,se),h(ee,ce),h(ee,le),h(ee,ue),h(ee,he),h(ee,de),h(ee,fe),h(ee,pe),h(Q,ge),h(Q,me),h(me,ve),ve.checked=ve.__value===t[3],h(me,be),h(Z,ye),Ee&&Ee.m(Z,null),h(s,we),h(s,xe),h(xe,Ce),h(Ce,ke),Ae||(_e=[y(R,"change",t[7]),y(K,"change",t[9]),y(ve,"change",t[10]),y(s,"submit",w(t[5]))],Ae=!0)},p(e,[t]){8&t&&(R.checked=R.__value===e[3]),8&t&&(K.checked=K.__value===e[3]),8&t&&(ve.checked=ve.__value===e[3]),"demo"===e[3]?Ee?Ee.p(e,t):(Ee=wv(e),Ee.c(),Ee.m(Z,null)):Ee&&(Ee.d(1),Ee=null),9&t&&Se!==(Se=!e[3]||"demo"===e[3]&&!e[0])&&(Ce.disabled=Se)},i:e,o:e,d(e){e&&f(n),e&&f(r),e&&f(i),e&&f(o),e&&f(s),t[8][0].splice(t[8][0].indexOf(R),1),t[8][0].splice(t[8][0].indexOf(K),1),t[8][0].splice(t[8][0].indexOf(ve),1),Ee&&Ee.d(),Ae=!1,a(_e)}}}function Sv(e,t,n){let r;nv.GlobalWorkerOptions.workerSrc=yv();let a,i,o=null;return tv("pdf").then((e=>{n(0,o=e)})),e.$$.update=()=>{if(3&e.$$.dirty&&a&&(n(0,o=a[0]),function(e,t,n=ev()){n("readwrite",(n=>(n.put(t,e),Zm(n.transaction))))}("pdf",o)),69&e.$$.dirty&&o){let e=new FileReader;e.onload=function(e){const t=new Uint8Array(e.target.result);nv.getDocument(t).promise.then((e=>{e.getPage(1).then((e=>{const t=i.width/e.getViewport({scale:1}).width,n={canvasContext:i.getContext("2d"),viewport:e.getViewport({scale:t})};e.render(n)}))}))},e.readAsArrayBuffer(o)}},[o,a,i,r,function(){!function(e,t=ev()){t("readwrite",(t=>(t.delete(e),Zm(t.transaction))))}("pdf"),n(0,o=null)},function(){Av.push(`/set-time?mode=${r}`)},nv,function(){r=this.__value,n(3,r)},[[]],function(){r=this.__value,n(3,r)},function(){r=this.__value,n(3,r)},function(){a=this.files,n(1,a)},function(e){M[e?"unshift":"push"]((()=>{i=e,n(2,i)}))}]}const Av=new class{constructor(e){if(this.settings=e,this.routes=[],this.ignoreEvents=!1,this.silentControl=null,this.currentUrl="",this.beforeEachHooks=[],this.afterEachHooks=[],this.transitionOutHooks=[],this.currentMatched=new ce([]),this.currentRouteData=new ce({params:{},query:{},name:"",fullPath:""}),this.currentRouteFromData=new ce(null),e.mode||(this.settings.mode="hash",console.warn('[Easyroute] Router mode is not defined: fallback to "hash"')),this.routes=we(e.routes),this.setParser(),xe&&"history"!==this.mode)throw new Error('[Easyroute] SSR only works with "history" router mode')}setParser(){xe||new Promise((e=>{setTimeout((()=>{e()}),0)})).then((()=>{switch(this.mode){case"silent":this.parseRoute(`${window.location.pathname}${window.location.search}`);break;case"history":ge.apply(this);break;case"hash":default:me.apply(this)}}))}getTo(e){return e.find((t=>t.nestingDepth===ue(e)))}getFrom(){var e;const t=this.currentMatched.getValue;return t&&null!==(e=t.find((e=>e.nestingDepth===ue(t))))&&void 0!==e?e:null}changeUrl(e,t=!0){this.currentUrl=e,"hash"===this.mode&&(window.location.hash=e),"history"===this.mode&&t&&!xe&&window.history.pushState({url:e},e,e)}async parseRoute(e,t=!0){e=e.replace(/^#/,"");const n=function(e,t){const n=[],r=[],a=[];return e.forEach((r=>{r.regexpPath.test(t)&&n.push(...function(e,t){var n;if(!t)return[];const r=[t];let a=t.parentId;do{const t=e.find((e=>e.id===a));t&&r.push(t),a=null!==(n=null==t?void 0:t.parentId)&&void 0!==n?n:null}while(a);return r}(e,r))})),n.filter((e=>!r.includes(e.id)&&!a.includes(e.nestingDepth)&&(r.push(e.id),a.push(e.nestingDepth),!0)))}(this.routes,e.split("?")[0]);if(!n)return;const r=this.getTo(n),a=this.getFrom(),i=he.createRouteObject([r],e),o=a?he.createRouteObject([a],this.currentUrl):null;"silent"!==this.mode||this.silentControl||(this.silentControl=new de(i)),this.silentControl&&t&&this.silentControl.appendHistory(i);const s=await this.runHooksArray(this.beforeEachHooks,i,o,"before"),c=await this.runHooksArray(n.reduce(((e,t)=>(t.beforeEnter&&e.push(t.beforeEnter),e)),[]),i,o,"before");s&&c&&(this.changeUrl(function(e,t,n=!1){return n&&e.split("?")[0].length>1&&(e=(e=>e.replace(/(\/\?)/,"?"))(pe(e))),!t||e.includes(t)?e:`/${pe(t)}/${be(e)}`}(e,this.base,this.settings.omitTrailingSlash),t),this.currentRouteData.setValue(i),this.currentRouteFromData.setValue(o),this.currentMatched.setValue(await async function(e){const t=e.map((async e=>{if(e.component&&(e.component=await ve(e.component)),e.components)for await(const t of Object.entries(e.components)){const[n,r]=t;e.components[n]=await ve(r)}return e}));return await Promise.all(t)}(n)),this.runHooksArray(this.afterEachHooks,i,o,"after"))}async executeHook(e,t,n,r){return"after"===r?n(e,t):new Promise((async r=>{n?await n(e,t,(e=>{null!=e?(!1===e&&r(!1),"string"==typeof e&&(this.parseRoute(e),r(!1))):r(!0)})):r(!0)}))}async push(e){this.ignoreEvents=!0,await this.parseRoute(e)}go(e){"silent"!==this.mode?window.history.go(e):this.parseRoute(this.silentControl.go(e),!1)}back(){this.go(-1)}beforeEach(e){this.beforeEachHooks.push(e)}afterEach(e){this.afterEachHooks.push(e)}transitionOut(e){this.transitionOutHooks.push(e)}async runHooksArray(e,t,n,r){for await(const a of e)if(!await this.executeHook(t,n,a,r))return!1;return!0}get mode(){return this.settings.mode}get base(){return this.settings.base?ye(this.settings.base)+"/":""}get currentRoute(){return this.currentRouteData.getValue}}({mode:"hash",routes:[{path:"/",component:class extends oe{constructor(e){var t;super(),document.getElementById("svelte-b1qy9j-style")||((t=p("style")).id="svelte-b1qy9j-style",t.textContent="h1.svelte-b1qy9j{font-size:64px;font-weight:900;text-align:center;color:#4487ec}p.svelte-b1qy9j{font-size:24px;text-align:center;margin-top:60px}.go.svelte-b1qy9j{text-align:center}button.svelte-b1qy9j{background:#4487ec;box-shadow:0px 0px 12px 1px rgba(0, 0, 0, 0.2);border-radius:40px;color:#fff;border:0;font-size:24px;padding:18px 32px}",h(document.head,t)),ie(this,e,Oe,De,o,{})}},name:"Homepage"},{path:"/train-pick",component:class extends oe{constructor(e){var t;super(),document.getElementById("svelte-138kr2i-style")||((t=p("style")).id="svelte-138kr2i-style",t.textContent="h1.svelte-138kr2i.svelte-138kr2i{font-size:24px;font-weight:900}h2.svelte-138kr2i.svelte-138kr2i{color:#4487ec;text-align:center}.modes.svelte-138kr2i.svelte-138kr2i{display:flex;flex-flow:row}.modesItem.svelte-138kr2i.svelte-138kr2i{width:33%;flex:1 1 33.3333%;border:10px solid transparent;vertical-align:top}.pdfCanvas.svelte-138kr2i.svelte-138kr2i{max-width:100%;margin-top:10px}.modeTitle.svelte-138kr2i.svelte-138kr2i{font-size:120%;display:inline-block;padding-top:12px}.modesItem.svelte-138kr2i input.svelte-138kr2i{vertical-align:top;margin-top:4px}.preview.svelte-138kr2i.svelte-138kr2i{max-width:100%}.upload.svelte-138kr2i.svelte-138kr2i{margin-top:18px;position:relative;text-align:center}.removePdf.svelte-138kr2i.svelte-138kr2i{padding-top:1px;position:absolute;right:-10px;background-color:black;color:#fff;text-decoration:none;border-radius:50px;width:20px;line-height:19px}.time.svelte-138kr2i.svelte-138kr2i{text-align:center;margin-top:40px}",h(document.head,t)),ie(this,e,Sv,kv,o,{})}},name:"TrainPick"},{path:"/set-time",component:class extends oe{constructor(e){var t;super(),document.getElementById("svelte-1kl89tz-style")||((t=p("style")).id="svelte-1kl89tz-style",t.textContent="h1.svelte-1kl89tz{font-size:24px;font-weight:900}h2.svelte-1kl89tz{color:#4487ec;text-align:center}.description.svelte-1kl89tz{font-size:120%;max-width:600px;margin:30px auto}.options.svelte-1kl89tz{display:flex;flex-flow:row nowrap}.optionsItem.svelte-1kl89tz{flex-grow:1;flex-basis:0;border:10px solid transparent;vertical-align:top;text-align:center}.optionsLabel.svelte-1kl89tz{margin-top:10px}.start.svelte-1kl89tz{text-align:center;margin-top:40px}",h(document.head,t)),ie(this,e,vv,mv,o,{})}},name:"SetTime"},{path:"/pitch",component:class extends oe{constructor(e){var t;super(),ov.getElementById("svelte-1dnd8pa-style")||((t=p("style")).id="svelte-1dnd8pa-style",t.textContent="main.svelte-1dnd8pa{display:flex;min-height:100vh;flex-direction:column;width:90%;margin:0 auto}h1.svelte-1dnd8pa{font-size:24px;font-weight:900;color:#fff}.video.svelte-1dnd8pa{position:relative;flex-grow:1}.startTimeCount.svelte-1dnd8pa{display:flex;font-size:300%;font-weight:900;flex-direction:column;justify-content:center;color:#fff;position:absolute;text-align:center;height:100%;width:100%}.controls.svelte-1dnd8pa{font-size:120%;display:flex;justify-content:flex-end;padding:10px 0 20px;color:#fff}.controlsPages.svelte-1dnd8pa{width:33%;text-align:center}.controlsRight.svelte-1dnd8pa{text-align:right;width:33%}.exit.svelte-1dnd8pa{cursor:pointer;font-size:75%;vertical-align:top;background:#ff0000;border-radius:7px;border:0;color:#fff;padding:2px 10px 3px;margin-left:14px}",h(ov.head,t)),ie(this,e,gv,pv,o,{})}},name:"Pitch"},{path:"/feedback",component:class extends oe{constructor(e){var t;super(),document.getElementById("svelte-11ar4k2-style")||((t=p("style")).id="svelte-11ar4k2-style",t.textContent="h1.svelte-11ar4k2{font-size:24px;font-weight:900}h2.svelte-11ar4k2{color:#4487ec;text-align:center}.description.svelte-11ar4k2{font-size:120%;max-width:600px;margin:30px auto}.continue.svelte-11ar4k2{text-align:center}",h(document.head,t)),ie(this,e,Pe,Fe,o,{})}},name:"Feedback"}]});function _v(e){let t,n,r;return n=new Ee({}),{c(){t=p("main"),ne(n.$$.fragment),x(t,"class","svelte-jwokim")},m(e,a){d(e,t,a),re(n,t,null),r=!0},i(e){r||(J(n.$$.fragment,e),r=!0)},o(e){Z(n.$$.fragment,e),r=!1},d(e){e&&f(t),ae(n)}}}function Ev(e){let t,n;return t=new Re({props:{router:Av,$$slots:{default:[_v]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(e,r){re(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(J(t.$$.fragment,e),n=!0)},o(e){Z(t.$$.fragment,e),n=!1},d(e){ae(t,e)}}}const Iv=new class extends oe{constructor(e){var t;super(),document.getElementById("svelte-jwokim-style")||((t=p("style")).id="svelte-jwokim-style",t.textContent="body:not(.pitch) main.svelte-jwokim{padding:0 40px;max-width:800px;margin:0 auto}",h(document.head,t)),ie(this,e,null,Ev,o,{})}}({target:document.body,props:{}});window.app=Iv})()})();